/*!
 *  build: 杭州数蛙科技有限公司 
 *  copyright: dgiot_dashboard 
 *  time: Sun Apr 25 2021 10:46:19 GMT+0000 (Coordinated Universal Time)
 */
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c986e60a"],{"0076":function(e,t,a){"use strict";a("c11c")},"00b2":function(e,t,a){"use strict";a("f4cc")},"06ce":function(e,t,a){},"0706":function(e,t,a){},"0907":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"roles"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:5}},[a("div",{staticClass:"leftTree"},[a("el-tree",{attrs:{data:e.deptTreeData,props:e.roleProps,"expand-on-click-node":!1,"node-key":"index","default-expand-all":""},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.node,r=t.data;return a("div",{staticClass:"custom-tree-node"},[a("span",{class:{selected:r.objectId==e.curDepartmentId},on:{click:function(t){return e.handleNodeClick(r)}}},[e._v(" "+e._s(n.label)+" ")]),a("span",[a("i",{staticClass:"el-icon-circle-plus-outline",attrs:{title:"添加角色"},on:{click:function(t){return e.setDialogRole(r)}}})])])}}])})],1)]),a("el-col",{attrs:{span:9}},[a("div",{staticClass:"rightTable"},[a("div",{staticClass:"search"},[a("el-input",{attrs:{placeholder:e.$translateTitle("user.rolename"),size:"mini",clearable:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:function(t){return e.getRolesList(0)}}},[e._v(" "+e._s(e.$translateTitle("developer.search"))+" ")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.getRolesList()}}},[e._v(" 所有角色 ")])],1),a("div",{staticClass:"tableroles",staticStyle:{"margin-top":"20px"}},[a("el-table",{staticStyle:{width:"100%","text-align":"center"},attrs:{"highlight-current-row":"",data:e.roleList,"row-class-name":e.tableRowClassName,"row-style":e.selectedHighlight,size:"small"},on:{"row-click":e.getDetailmenu}},[a("el-table-column",{attrs:{label:e.$translateTitle("user.rolename"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.name))])]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("user.Remarks"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.alias))])]}}])}),a("el-table-column",{attrs:{label:"ID",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.objectId))])]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.operation"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-dropdown",{attrs:{"split-button":"",type:"primary",size:"medium"},on:{click:function(a){return e.exportRolerole(t.row)}}},[a("span",{staticClass:"el-dropdown-link"},[e._v("修改")]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{icon:"el-icon-document"},nativeOn:{click:function(a){return e.exportRoletemp(t.row)}}},[e._v(" 保存模板 ")]),a("el-dropdown-item",{attrs:{icon:"el-icon-delete"},nativeOn:{click:function(a){return e.handleDelete(t.row)}}},[e._v(" 删除 ")])],1)],1)]}}])})],1),a("div",{staticClass:"rightPagination"},[a("el-pagination",{attrs:{total:e.total,layout:"prev, pager, next"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)])]),a("el-col",{attrs:{span:10}},[a("div",{staticClass:"rolefooter"},[a("div",{staticClass:"footerleft"},[a("p",{staticClass:"top"},[a("span",{staticClass:"svg-container"},[a("vab-icon",{attrs:{icon:"role_group"}})],1),a("span",[e._v("分配权限")])]),a("div",{staticClass:"rolecontrol"},[a("el-tree",{ref:"permissionTree",attrs:{data:e.permissionTreeData,"default-checked-keys":e.rolePermissonList,"expand-on-click-node":!1,"show-checkbox":"","node-key":"objectId","default-props":"",accordion:""},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.node;return a("span",{staticClass:"custom-tree-node"},[a("span",[e._v(e._s(n.label))])])}}])})],1)]),a("div",{staticClass:"footerright"},[a("p",{staticClass:"top"},[a("span",{staticClass:"svg-container"},[a("vab-icon",{attrs:{icon:"menu_group"}})],1),a("span",[e._v("菜单分配")])]),a("div",{staticClass:"menucontrol",staticStyle:{"margin-top":"30px"}},[a("el-tree",{ref:"menusTree",attrs:{data:e.menuTreeData,"default-checked-keys":e.roleMenuList,"expand-on-click-node":!1,"show-checkbox":"","node-key":"objectId","default-props":"",accordion:""},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.node,r=t.data;return a("span",{staticClass:"custom-tree-node"},[e._v(" "+e._s(r.title?r.title:n.label)+" ")])}}])})],1)])])])],1),a("el-dialog",{attrs:{visible:e.centerDialogRole,title:"添加角色",width:"20%",center:""},on:{close:e.closeDialogRole}},[a("addroles",{ref:"addRoleRef"})],1),a("el-dialog",{attrs:{title:e.$translateTitle("developer.add"),visible:e.dialogVisible,width:"50%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%","text-align":"center"},attrs:{data:e.tableDataroles},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{label:e.$translateTitle("user.name"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.name))])]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("user.Remarks"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.desc))])]}}])}),a("el-table-column",{attrs:{label:"ID",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.objectId))])]}}])})],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.centerDialogVisible=!1}}},[e._v(" "+e._s(e.$translateTitle("developer.cancel"))+" ")]),a("el-button",{attrs:{type:"primary"},on:{click:e.addacl}},[e._v(" "+e._s(e.$translateTitle("developer.determine"))+" ")])],1)],1),a("el-dialog",{attrs:{title:e.$translateTitle("developer.edit"),visible:e.roleEdit},on:{"update:visible":function(t){e.roleEdit=t}}},[a("el-form",{attrs:{model:e.form}},[a("el-form-item",{attrs:{label:e.$translateTitle("user.rolename"),"label-width":e.formLabelWidth}},[a("el-input",{staticStyle:{width:"300px"},attrs:{autocomplete:"off",disabled:""},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:e.$translateTitle("user.Remarks"),"label-width":e.formLabelWidth}},[a("el-input",{staticStyle:{width:"300px"},attrs:{autocomplete:"off"},model:{value:e.form.alias,callback:function(t){e.$set(e.form,"alias",t)},expression:"form.alias"}})],1),a("el-form-item",{attrs:{label:e.$translateTitle("developer.describe"),"label-width":e.formLabelWidth}},[a("el-input",{staticStyle:{width:"300px"},attrs:{rows:2,autocomplete:"off",type:"textarea"},model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.roleEdit=!1}}},[e._v(" "+e._s(e.$translateTitle("developer.cancel"))+" ")]),a("el-button",{attrs:{type:"primary"},on:{click:e.updaterole}},[e._v(" "+e._s(e.$translateTitle("developer.determine"))+" ")])],1)],1)],1)},r=[],s=a("1da1"),i=(a("96cf"),a("4de4"),a("d81d"),a("b0c0"),a("a9e3"),a("159b"),a("5da9")),o=a("bc35"),l=a("1ec2"),c=a("3858"),u={name:"Role",data:function(){return{deptTreeData:[],curDepartmentId:"",formLabelWidth:"120px",roleEdit:!1,form:{name:"",alias:"",desc:""},data:[],dialogVisible:!1,multipleSelection:[],search:"",total:0,pagesize:10,start:0,roleList:[],tableDataroles:[],centerDialogVisible:!1,editroleid:"",currentSelectIndex:null,roleProps:{children:"children",label:"name"},checkMenus:[],checkRoles:[],dataMenus:[],roleMenuList:[],dataPermissions:[],rolePermissonList:[],loadingService:{},roleItem:[],centerDialogRole:!1}},computed:{permissionTreeData:function(){var e=JSON.parse(JSON.stringify(this.dataPermissions));return e.filter((function(t){var a=e.filter((function(e){return t.objectId==e.parentId}));return a.length>0&&(t.children=a),0==t.parentId}))},menuTreeData:function(){var e=JSON.parse(JSON.stringify(this.dataMenus));return e.filter((function(t){t.title=t.meta&&t.meta.title?t.meta.title:"";var a=e.filter((function(e){return t.objectId==e.parentId}));return a.length>0&&(t.children=a),0==t.parentId}))}},components:{addroles:c["default"]},mounted:function(){var e=this;this.getRolesList(),this.getMenu(),this.getRoleschema(),this.$baseEventBus.$on("dialogHide",(function(){e.centerDialogRole=!1,e.getMenu()}))},methods:{getMenu:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.data=[],e.dataMenus=[],t.next=4,Object(o["queryMenu"])({});case 4:return a=t.sent,n=a.results,n&&(e.menuListRes=n,n.map((function(t){var a={};a.label=t.name,a.meta=t.meta,a.objectId=t.objectId,a.parentId=t.parent.objectId,a.createtime=new Date(t.createdAt).toLocaleDateString(),e.data.push(a),e.dataMenus.push(a)}))),t.next=9,Object(o["Roletree"])();case 9:r=t.sent,r?(e.deptTreeData=r.results,e.handleNodeClick(e.deptTreeData[0])):(e.$message("部门列表获取失败"),e.deptTreeData=[]);case 11:case"end":return t.stop()}}),t)})))()},diguiquchu:function(e,t,a,n){var r=this;t.map((function(t){t.key==a&&t.children.length>0?(n.push(a),r.diguiquchu(e,t.children,a,n)):t.key!=a&&t.children.length>0&&r.diguiquchu(e,t.children,a,n)}))},add:function(){this.$router.push({path:"roles/editroles",query:{insert:0}})},handleSelectionChange:function(e){this.multipleSelection=e},addacl:function(){this.$get_object("_Role",this.objectId).then((function(e){}))},handleClose:function(){this.dialogVisible=!1},handleDelete:function(e){var t=this;this.$confirm("此操作将永久删除此角色, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.delConfirm(e.objectId)})).catch((function(){}))},delConfirm:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(i["delRole"])(e);case 2:n=a.sent,n&&(t.$message({type:"success",message:"删除成功!"}),t.getRolesList(),t.getMenu());case 4:case"end":return a.stop()}}),a)})))()},addmenu:function(e){this.rolename=e.attributes.name,this.getMenu()},tableRowClassName:function(e){var t=e.row,a=e.rowIndex;t.index=a},selectedHighlight:function(e){e.row;var t=e.rowIndex;if(this.currentSelectIndex===t)return{color:"#409EFF","font-weight":"bold"}},getDetailmenu:function(e,t,a,n){var r=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var n,s,o,l,c,u;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!t||"操作"!=t.label){a.next=2;break}return a.abrupt("return");case 2:return r.loadingService=r.$loading({lock:!0,text:"数据加载中...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.6)"}),r.currentSelectIndex=e.index,a.next=6,Object(i["roleMenu"])(e.name);case 6:n=a.sent,s=n.menus,o=n.rules,l=n.roles,c=n.users,u=n.objectId,r.roleItem={menus:s,rules:o,users:c,roles:l,objectId:u},r.loadingService.close(),s&&o?(r.checkMenus=s,r.checkRoles=o,r.doSetChecked()):r.$message({type:"warning",message:"获取角色菜单失败"});case 15:case"end":return a.stop()}}),a)})))()},doSetChecked:function(){var e=this;this.roleMenuList=[],this.rolePermissonList=[],this.menuListRes.map((function(t){e.checkMenus.map((function(a){t.name==a.name&&e.roleMenuList.push(t.objectId)}))})),this.$refs.menusTree.setCheckedKeys(this.roleMenuList),this.permissionListRes.map((function(t){e.checkRoles.map((function(a){t.name===a.name&&e.rolePermissonList.push(t.objectId)}))})),this.$refs.permissionTree.setCheckedKeys(this.rolePermissonList)},getRolesList:function(e,t){var a=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var r,s,o,l,c,u;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return 0==e&&(a.start=0),r={},t&&"admin"!=t.name&&(r.objectId=t.objectId),s=a.$loading({background:"rgba(0, 0, 0, 0.5)"}),o={skip:a.start,limit:a.pagesize,order:"-createdAt",where:r,count:"objectId"},n.next=7,Object(i["queryRole"])(o);case 7:l=n.sent,c=l.results,u=l.count,c&&(s.close(),a.roleList=c,a.total=u);case 11:case"end":return n.stop()}}),n)})))()},handleSizeChange:function(e){this.pagesize=e,this.getRolesList()},handleCurrentChange:function(e){this.start=Number(e-1)*Number(this.pagesize),this.getRolesList()},handleCheckChange:function(e,t){},getRoleschema:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.dataPermissions=[],t.next=3,Object(l["Permission"])();case 3:a=t.sent,n=a.results,n&&(e.permissionListRes=n,n.map((function(t){var a={};a.label=t.alias,a.alias=t.name,a.objectId=t.objectId,a.parentId=t.parent.objectId,a.createtime=new Date(t.createdAt).toLocaleDateString(),e.dataPermissions.push(a)})));case 6:case"end":return t.stop()}}),t)})))()},getCheckedKeys:function(e,t,a){var n=[];return r(e,!1),n;function r(e,s){for(var i=[],o=0;o<e.length;o++){var l=e[o];i[o]=!1,l.children&&(i[o]=!!r(l.children,!0)||i[o],i[o]&&n.push(l));for(var c=0;c<t.length;c++)if(l[a]==t[c]){i[o]=!0,-1==n.indexOf(l[a])&&n.push(l);break}}if(s)return-1!=i.indexOf(!0)}},exportRolerole:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var n,r,s,o,l,c,u,d,p;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(n=[],r=t.getCheckedKeys(t.menuTreeData,t.$refs.menusTree.getCheckedKeys(),"objectId"),s=[],o=[],l=[],c=t.$refs.permissionTree.getCheckedNodes(),u=t.roleItem.roles,d=t.roleItem.users,d&&u){a.next=11;break}return t.$message({message:"未选择正确的角色"}),a.abrupt("return",!1);case 11:if(d.forEach((function(e){s.push(e.username)})),u.forEach((function(e){o.push(e.name)})),!r||!c){a.next=22;break}return r.forEach((function(e){n.push(e.label)})),c.forEach((function(e){l.push(e.alias)})),a.next=18,Object(i["saveRole"])({objectId:t.roleItem.objectId,name:e.name,alias:e.alias,desc:e.desc,rules:l,menus:n,roles:o,users:s});case 18:p=a.sent,p?t.$message("角色信息更新成功"):t.$message({message:"更新失败!"}),a.next=23;break;case 22:t.$message("请选择菜单列表和权限列表");case 23:case"end":return a.stop()}}),a)})))()},exportRoletemp:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(i["saveRoletemp"])(e.name);case 2:n=a.sent,n&&t.$message({type:"success",message:"保存模板成功"});case 4:case"end":return a.stop()}}),a)})))()},updaterole:function(){var e=this,t={alias:this.form.alias,desc:this.form.desc};this.$update_object(this.editroleid,t).then((function(t){e.$message({type:"success",message:"更新成功"}),e.roleEdit=!1,e.getRolesList()}))},handleNodeClick:function(e){this.getRolesList(0,e),this.curDepartmentId=e.objectId,this.currentSelectIndex=null},appendChildTree:function(e){},renderContent:function(e,t){var a=this,n=t.node,r=t.data;t.store;return e("span",{class:"custom-tree-node"},[e("span",[n.label]),e("span",[e("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(){return a.appendChildTree(r)}}},[e("i",{class:"el-icon-plus"})])])])},setDialogRole:function(e){var t=this;this.centerDialogRole=!0,this.$nextTick((function(){t.$refs["addRoleRef"].getData(e)}))},closeDialogRole:function(){this.centerDialogRole=!1}}},d=u,p=(a("3bdf"),a("bb1d"),a("2877")),m=Object(p["a"])(d,n,r,!1,null,"282a04fe",null);t["default"]=m.exports},"09a7":function(e,t,a){"use strict";a("bcd0")},"09ff":function(e,t,a){},"0a5f":function(e,t,a){"use strict";a("2b78")},"0a7c":function(e,t,a){e.exports={"menu-color":"rgba(255,255,255,.95)","menu-color-active":"rgba(255,255,255,.95)","menu-background":"#282c34","column-second-menu-background":"#fff"}},"0c99":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"login-container"},[a("div",{staticClass:"loginbanner"},[a("el-form",{ref:"ruleForm2",staticClass:"login-form",attrs:{model:e.ruleForm2,rules:e.rules2,"status-icon":"","label-width":"100px"}},[a("div",{staticClass:"logo"},[a("img",{staticStyle:{width:"80px",height:"80px"},attrs:{src:e.logosrc,alt:"logo"}}),a("p",[e._v(e._s(e.title))])]),a("el-form-item",{attrs:{prop:"phone"}},[a("span",{staticClass:"svg-container"},[a("vab-icon",{attrs:{icon:"user"}})],1),a("el-input",{attrs:{maxlength:11,name:"phone",type:"text","auto-complete":"on",clearable:"",placeholder:"请输入手机号"},model:{value:e.ruleForm2.phone,callback:function(t){e.$set(e.ruleForm2,"phone",t)},expression:"ruleForm2.phone"}})],1),a("el-form-item",{attrs:{prop:"password",required:""}},[a("span",{staticClass:"svg-container"},[a("vab-icon",{attrs:{icon:"password"}})],1),a("el-input",{attrs:{type:e.pwdType,name:"password","auto-complete":"on",placeholder:"请输入密码"},model:{value:e.ruleForm2.password,callback:function(t){e.$set(e.ruleForm2,"password",t)},expression:"ruleForm2.password"}}),a("span",{staticClass:"show-pwd",on:{click:e.showPwd}},[a("vab-icon",{attrs:{icon:"eye"}})],1)],1),a("el-form-item",{attrs:{prop:"checkPass",required:""}},[a("span",{staticClass:"svg-container"},[a("vab-icon",{attrs:{icon:"password"}})],1),a("el-input",{attrs:{type:e.pwdType,"auto-complete":"on",placeholder:"请再次输入密码"},model:{value:e.ruleForm2.checkPass,callback:function(t){e.$set(e.ruleForm2,"checkPass",t)},expression:"ruleForm2.checkPass"}}),a("span",{staticClass:"show-pwd",on:{click:e.showPwd}},[a("vab-icon",{attrs:{icon:"eye"}})],1)],1),a("el-form-item",{staticStyle:{"margin-top":"50px"}},[a("el-button",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],staticStyle:{width:"100%","letter-spacing":"10px"},attrs:{type:"primary","element-loading-text":"正在初始化环境,请稍后","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.5)"},on:{click:function(t){return e.submitForm("ruleForm2")}}},[e._v(" 立即注册 ")])],1),a("div",{staticClass:"hasuser"},[a("span",{staticStyle:{"font-size":"14px",color:"#409eff",cursor:"pointer"},on:{click:e.login}},[e._v(" 已有账号登陆 ")])])],1)],1)])},r=[],s=(a("d3b7"),a("25f0"),a("be65")),i=a.n(s),o=a("f43e").Base64,l={data:function(){var e=this,t=function(e,t,a){""===t?a(new Error("请输入密码")):(/^\w{8,20}/.test(t)||a(new Error("密码长度为8-20位")),a())},a=function(t,a,n){""===a?n(new Error("请再次输入密码")):a!==e.ruleForm2.password?n(new Error("两次输入密码不一致!")):n()};return{fullscreenLoading:!1,time:60,sendMsgDisabled:!1,logosrc:"",title:"",ruleForm2:{account:"",phone:"",username:"",password:"",email:"",checkPass:"",roles:""},pwdType:"password",protype:"",rules2:{account:[{required:!0,message:"请输入账号",trigger:"blur"},{min:1,max:10,message:"长度在 1到 10 个字符",trigger:"blur"}],phone:[{required:!0,message:"请输入手机号",trigger:"blur"},{validator:function(e,t,a){var n=/^1[3-9]\d{9}$/;n.test(t)?a():a(new Error("手机号码格式不正确！"))},trigger:"blur"}],password:[{validator:t,trigger:"blur",required:!0}],checkPass:[{validator:a,trigger:"blur",required:!0}],username:[{required:!0,message:"请输入姓名",trigger:"blur"},{min:2,max:5,message:"姓名格式不正确",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:["blur","change"]}],roles:[{required:!0,message:"请选择平台",trigger:"change"}]}}},mounted:function(){this.protype=sessionStorage.getItem("roletype"),this.title=sessionStorage.getItem("product_title"),this.logosrc=sessionStorage.getItem("imgsrc")},methods:{showPwd:function(){"password"===this.pwdType?this.pwdType="":this.pwdType="password"},login:function(){this.$router.push({path:"/login"})},submitForm:function(e){var t=this,a=/^1[3-9]\d{9}$/;this.$refs[e].validate((function(e){if(!e)return t.$message({message:"信息错误",type:"error"}),!1;var n=new Parse.User;n.set("username",t.ruleForm2.phone.toString()),n.set("password",t.ruleForm2.password),a.test(t.ruleForm2.phone)?n.set("phone",t.ruleForm2.phone.toString()):n.set("phone",""),t.fullscreenLoading=!0,n.set("productId",t.protype);new Parse.ACL;n.save().then((function(e){i.a.set("sessionToken",e.attributes.sessionToken),t.$router.push({path:"/phonelogin",query:{phone:o.encode(t.ruleForm2.phone),action:"register"}}),t.fullscreenLoading=!1})).catch((function(e){202==e.code?t.$message({message:"用户名已存在",type:"error"}):t.$message({message:e.message,type:"error"}),t.fullscreenLoading=!1}))}))},send:function(){var e=this;e.sendMsgDisabled=!0;var t=window.setInterval((function(){e.time--<=0&&(e.time=60,e.sendMsgDisabled=!1,window.clearInterval(t))}),1e3)}}},c=l,u=(a("b3ec"),a("252c"),a("00b2"),a("2877")),d=Object(u["a"])(c,n,r,!1,null,"9e8e9dfe",null);t["default"]=d.exports},1227:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"appmarage"},[a("div",{staticClass:"header"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.checkupdateall}},[e._v(" "+e._s(e.$translateTitle("plugins.checkupdate"))+" ")])],1),a("div",{staticClass:"block",staticStyle:{"margin-top":"10px"}},[a("el-table",{staticStyle:{width:"100%","text-align":"center"},attrs:{data:e.tableData.slice((e.start-1)*e.length,e.start*e.length)}},[a("el-table-column",{attrs:{label:"App",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{style:{color:1==t.row.active?"green":"red"}},[e._v(" "+e._s(t.row.app)+" ")])]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("plugins.version"),prop:"version",align:"center",sortable:""}}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.describe"),prop:"desc",align:"center",sortable:""}}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.operation"),align:"right"},scopedSlots:e._u([{key:"header",fn:function(t){return[a("el-input",{attrs:{placeholder:e.$translateTitle("plugins.enterappsearch"),size:"mini"},on:{change:e.changevalue},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})]}},{key:"default",fn:function(t){return[0==t.row.active?a("el-button",{attrs:{type:"info",size:"small",plain:""},on:{click:function(a){return e.startup(t.row.app)}}},[a("div",{staticStyle:{display:"inline-block",width:"10px",height:"10px","margin-right":"10px",background:"#00cc33","border-radius":"50%"}}),e._v(" "+e._s(e.$translateTitle("plugins.start"))+" ")]):e._e(),1==t.row.active?a("el-button",{attrs:{type:"info",size:"small",plain:""},on:{click:function(a){return e.stopup(t.row.app)}}},[a("div",{staticStyle:{display:"inline-block",width:"10px",height:"10px","margin-right":"10px",background:"#a94442","border-radius":"50%"}}),e._v(" "+e._s(e.$translateTitle("plugins.stop"))+" ")]):e._e(),a("el-button",{attrs:{type:"info",size:"small",plain:""},on:{click:function(a){return e.checkupdate(t.row.app)}}},[e._v(" "+e._s(e.$translateTitle("plugins.checkupdate"))+" ")])]}}])})],1)],1),a("div",{staticClass:"block"},[a("el-pagination",{staticStyle:{"margin-top":"30px"},attrs:{"page-sizes":[10,25,50,100],"page-size":e.length,total:e.total,background:"",layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),a("el-dialog",{attrs:{title:e.$translateTitle("plugins.modulelist"),visible:e.dialogVisible,"before-close":e.handleClose,width:"40%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",[a("el-table",{staticStyle:{width:"100%","margin-top":"20px","text-align":"center"},attrs:{data:e.tableData1.slice((e.start1-1)*e.length1,e.start1*e.length1),height:"300"}},[a("el-table-column",{attrs:{label:e.$translateTitle("plugins.modulename"),prop:"path",sortable:"",align:"center"}}),a("el-table-column",{attrs:{label:e.$translateTitle("plugins.ischange"),prop:"is_changed",sortable:"",align:"center"}})],1),a("div",{staticClass:"block"},[a("el-pagination",{staticStyle:{"margin-top":"30px"},attrs:{"page-sizes":[10,25,50,100],"page-size":e.length1,total:e.total1,background:"",layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange1,"current-change":e.handleCurrentChange1}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticStyle:{float:"left"},on:{click:function(t){e.dialogVisible=!1}}},[e._v(" "+e._s(e.$translateTitle("developer.cancel"))+" ")]),a("el-button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:e.reupload}},[e._v(" "+e._s(e.$translateTitle("developer.determine"))+" ")])],1)])],1)},r=[],s=(a("ac1f"),a("841c"),a("4de4"),a("caad"),a("2532"),a("d81d"),a("bb22")),i=(a("be65"),[]),o=[],l={data:function(){return{tableData:[],total:0,start:1,length:10,node:null,dialogVisible:!1,start1:1,length1:10,total1:0,tableData1:[],app:"",version:"",searchvalue:"",search:""}},computed:{},mounted:function(){this.getInformation()},methods:{handleSizeChange:function(e){this.start=1,this.length=e},handleCurrentChange:function(e){this.start=e},handleSizeChange1:function(e){this.start1=1,this.length1=e},handleCurrentChange1:function(e){this.start1=e},getInformation:function(){var e=this;Object(s["Getapp"])(this.node,this.start,this.length).then((function(t){t&&(e.tableData=t.apps,i=t.apps,e.total=t.recordsTotal)})).catch((function(t){e.$message({type:"error",message:t.error})}))},handleClose:function(){this.dialogVisible=!1},changevalue:function(){var e=this;""==this.search&&(this.tableData=i),this.tableData=this.tableData.filter((function(t){return!e.search||t.app.toLowerCase().includes(e.search.toLowerCase())}))},changedialog:function(){var e=this;""==this.searchvalue&&(this.tableData1=o),this.tableData1=tableData1.filter((function(t){return!e.searchvalue||t.path.toLowerCase().includes(searchvalue.toLowerCase())}))},checkupdate:function(e){var t=this;this.tableData1=[],this.searchvalue="",this.dialogVisible=!0,this.app=e,this.total1=0,Object(s["Getmodule"])(e).then((function(e){e&&(e.map((function(e){0==e.is_changed?e.is_changed="false":e.is_changed="true"})),t.tableData1=e,o=e,t.total1=e.length)}))},checkupdateall:function(){var e=this;this.searchvalue="",this.dialogVisible=!0,this.tableData1=[],this.total1=0,this.app="",Object(s["Getmodule"])("changed").then((function(t){t&&(t.map((function(e){0==e.is_changed?e.is_changed="false":e.is_changed="true"})),e.tableData1=t,o=t,e.total1=t.length)}))},startup:function(e){var t=this;Object(s["Getstart"])(e).then((function(e){e&&(t.$message({message:"启动成功",type:"success"}),t.getInformation())})).catch((function(e){}))},stopup:function(e){var t=this;Object(s["Getstop"])(e).then((function(e){e&&(t.$message({message:"停止成功",type:"success"}),t.getInformation())})).catch((function(e){}))},reupload:function(){var e=this;""==this.app?Object(s["GetReload"])("all").then((function(t){t&&(0==t.length?e.$message({message:"当前无更新",type:"warning"}):e.$message({message:"已更新模块"+t,type:"success"}))})):Object(s["GetReload"])(this.app).then((function(t){t&&(0==t.length?e.$message({message:"当前无更新",type:"warning"}):e.$message({message:"已更新模块"+t,type:"success"}),e.app)}))}}},c=l,u=(a("aaa82"),a("2f7a"),a("2877")),d=Object(u["a"])(c,n,r,!1,null,"32d2b814",null);t["default"]=d.exports},1611:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"mqttws"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.msg,expression:"msg"}],attrs:{id:"msg",type:"text"},domProps:{value:e.msg},on:{input:function(t){t.target.composing||(e.msg=t.target.value)}}}),a("input",{attrs:{type:"button",value:"Send"},on:{click:e.send}}),a("input",{attrs:{type:"button",value:"Start"},on:{click:e.start}}),a("input",{attrs:{type:"button",value:"Stop"},on:{click:e.stop}})])},r=[],s={name:"Mqttws",data:function(){return{host:location.hostname,port:8083,clientId:"C_"+(new Date).getTime(),userName:"test",password:"test123",keepAlive:null,cleanSession:!0,useSSL:!1,client:{},options:{},msg:"order",count:0}},created:function(){this.client=new Paho.MQTT.Client(this.host,this.port,this.clientId);var e=this.client,t=this.options={invocationContext:{host:this.host,port:this.port,path:e.path,clientId:this.clientId},timeout:5,keepAliveInterval:50,cleanSession:!1,useSSL:!1,userName:"test",password:"test123",onSuccess:function(){e.subscribe("001/in")},onFailure:function(e){}};this.client.connect(t),this.client.onConnectionLost=this.onConnectionLost,this.client.onMessageArrived=this.onMessageArrived},methods:{onConnectionLost:function(e){e.errorCode},onMessageArrived:function(e){},onConnect:function(){this.client.subscribe("001/in")},send:function(){var e=this.msg;if(e){e="{time:"+new Date+", content:"+e+", from: web console}";var t=new Paho.MQTT.Message(e);t.destinationName=this.topic,this.client.send(t),this.msg=""}},start:function(){window.tester=window.setInterval(function(){if(this.client.isConnected){var e="{time:"+new Date+", content:"+this.count+++", from: web console}",t=new Paho.MQTT.Message(e);t.destinationName=this.topic,this.client.send(t)}}.bind(this),1e3)},stop:function(){window.clearInterval(window.tester)}}},i=s,o=a("2877"),l=Object(o["a"])(i,n,r,!1,null,null,null);t["default"]=l.exports},"16c2":function(e,t,a){},"1a25":function(e,t,a){e.exports={"menu-color":"rgba(255,255,255,.95)","menu-color-active":"rgba(255,255,255,.95)","menu-background":"#282c34","column-second-menu-background":"#fff"}},"1a98":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"system-log-container"},[a("vab-query-form",[a("vab-query-form-top-panel",[a("el-form",{attrs:{inline:!0,model:e.queryForm,"label-width":"60px"},nativeOn:{submit:function(e){e.preventDefault()}}},[a("el-form-item",{attrs:{label:"账号"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入账号"},model:{value:e.queryForm.account,callback:function(t){e.$set(e.queryForm,"account","string"===typeof t?t.trim():t)},expression:"queryForm.account"}})],1),a("el-form-item",{attrs:{label:"周期"}},[a("el-date-picker",{attrs:{"end-placeholder":"结束日期",format:"yyyy-MM-dd","start-placeholder":"开始日期",type:"daterange","value-format":"yyyy-MM-dd"},model:{value:e.queryForm.searchDate,callback:function(t){e.$set(e.queryForm,"searchDate",t)},expression:"queryForm.searchDate"}})],1),a("el-form-item",[a("el-button",{attrs:{icon:"el-icon-search",type:"primary"},on:{click:e.queryData}},[e._v(" 查询 ")])],1)],1)],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.list},scopedSlots:e._u([{key:"empty",fn:function(){return[a("el-image",{staticClass:"vab-data-empty",attrs:{src:"http://dgiot-1253666439.cos.ap-shanghai-fsi.myqcloud.com/platform/assets/empty_images/data_empty.png"}})]},proxy:!0}])},[a("el-table-column",{attrs:{align:"center",label:"日志类型",prop:"type","show-overflow-tooltip":"",width:"230px"}}),a("el-table-column",{attrs:{align:"center",label:"账号",prop:"account","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{align:"center",label:"执行结果",prop:"executeResult","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return["登录成功"===n.executeResult?a("span",[a("span",{staticClass:"vab-dot vab-dot-success"},[a("span")]),e._v(" "+e._s(n.executeResult)+" ")]):a("span",[a("span",{staticClass:"vab-dot vab-dot-error"},[a("span")]),e._v(" "+e._s(n.executeResult)+" ")])]}}])}),a("el-table-column",{attrs:{align:"center",label:"登录IP",prop:"ip"}}),a("el-table-column",{attrs:{align:"center",label:"访问时间",prop:"datetime","show-overflow-tooltip":""}})],1),a("el-pagination",{attrs:{"current-page":e.queryForm.pageNo,layout:e.layout,"page-size":e.queryForm.pageSize,total:e.total,background:""},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},r=[],s=a("1da1"),i=(a("96cf"),a("dd47")),o={name:"SystemLog",data:function(){return{list:[],listLoading:!0,layout:"total, sizes, prev, pager, next, jumper",total:0,queryForm:{account:"",searchDate:"",pageNo:1,pageSize:20}}},created:function(){this.fetchData()},methods:{handleSizeChange:function(e){this.queryForm.pageSize=e,this.fetchData()},handleCurrentChange:function(e){this.queryForm.pageNo=e,this.fetchData()},queryData:function(){this.queryForm.pageNo=1,this.fetchData()},fetchData:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.listLoading=!0,t.next=3,Object(i["getList"])(e.queryForm);case 3:a=t.sent,n=a.data,r=a.totalCount,e.list=n,e.total=r,e.listLoading=!1;case 9:case"end":return t.stop()}}),t)})))()}}},l=o,c=a("2877"),u=Object(c["a"])(l,n,r,!1,null,null,null);t["default"]=u.exports},"1aa0":function(e,t,a){},"1bd7":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"clients-view"},[a("div",{staticClass:"page-title"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/clients"}}},[e._v(" "+e._s(e.$translateTitle("leftbar.clients"))+" ")]),a("el-breadcrumb-item",{staticClass:"breadcrumb-name"},[e._v(" "+e._s(e.$translateTitle("clients.view"))+" ")])],1)],1),a("div",{staticClass:"client-oper"},[a("span",{class:[e.basicRecord.connected?"connected":"disconnected","status-circle"]}),e.clientId.length>90?a("el-popover",{attrs:{placement:"top-start",trigger:"hover",content:e.clientId}},[a("span",{attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(e.interceptString(e.clientId,90)))])]):a("span",[e._v(e._s(e.clientId))]),a("el-button",{class:[e.basicRecord.connected?"connected":"disconnected","connect-btn"],attrs:{size:"mini"},on:{click:e.handleDisconnect}},[e._v(" "+e._s(e.basicRecord.connected?e.$translateTitle("clients.kickOut"):e.$translateTitle("websocket.cleanSession"))+" ")])],1),a("el-tabs",{staticClass:"normal-tabs",attrs:{type:"card"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:e.$translateTitle("clients.basicInfo"),name:"basic"}},[a("clients-basic",{attrs:{record:e.basicRecord}})],1),a("el-tab-pane",{attrs:{label:e.$translateTitle("clients.subsInfo"),name:"subscription"}},[a("clients-subscriptions",{attrs:{"client-id":e.clientId,"table-data":e.subscriptionsData,reload:e.loadSubscription,mountpoint:e.mountpoint}})],1)],1)],1)},r=[],s=(a("99af"),a("994a")),i=a("5713"),o=a("ed08"),l={name:"ClientsView",components:{ClientsBasic:s["default"],ClientsSubscriptions:i["default"]},data:function(){return{activeName:"basic",basicRecord:{},subscriptionsData:[],nodeName:"",mountpoint:""}},computed:{clientId:function(){return this.$route.params.id}},watch:{activeName:function(e){"basic"===e?this.loadBasicData():"subscription"===e&&this.loadSubscription()}},created:function(){this.loadBasicData()},methods:{interceptString:function(e,t){return Object(o["intercept"])(e,t)},handleCommand:function(e){this[e]()},handleDisconnect:function(){var e=this,t=this.basicRecord.connected?this.$translateTitle("oper.confirmKickOut"):this.$translateTitle("oper.confirmCleanSession");this.$confirm(t,this.$translateTitle("oper.warning"),{confirmButtonClass:"confirm-btn",cancelButtonClass:"cache-btn el-button--text",type:"warning"}).then((function(){e.$httpDelete("/clients/".concat(encodeURIComponent(e.clientId))).then((function(){e.$message.success(e.$translateTitle("oper.disconnectSuccess")),e.$set(e.basicRecord,"connected",!1),setTimeout((function(){e.$router.push({path:"/clients"})}),500)})).catch((function(t){e.$message.error(t||e.$translateTitle("error.networkError"))}))})).catch((function(){}))},loadBasicData:function(){var e=this;this.$httpGet("/clients/".concat(encodeURIComponent(this.clientId))).then((function(t){e.basicRecord=t.data[0],e.nodeName=e.basicRecord.node,t.data[0].mountpoint&&(e.mountpoint=t.data[0].mountpoint),e.loadSubscription()})).catch((function(){}))},loadSubscription:function(){var e=this;this.$httpGet("/nodes/".concat(this.nodeName,"/subscriptions/").concat(encodeURIComponent(this.clientId))).then((function(t){e.subscriptionsData=t.data})).catch((function(){}))}}},c=l,u=(a("0a5f"),a("2877")),d=Object(u["a"])(c,n,r,!1,null,null,null);t["default"]=d.exports},"1ff4":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"userinfo"},[a("div",{staticClass:"userdetail"},[a("h3",[e._v("个人信息")]),a("ul",[a("li",[e._v(" 用户姓名: "),a("span",[e._v(e._s(e.userinfo.name))])]),a("li",[e._v(" 用户ID: "),a("span",[e._v(e._s(e.userinfo.objectId))])]),a("li",[e._v(" 用户描述: "),a("span",[e._v(e._s(e.userinfo.nick))])])])])])},r=[],s=a("1da1"),i=(a("96cf"),{name:"Userinfo",data:function(){return{userid:"",userinfo:{name:"",nick:"",objectId:"",roles:""},roles:[]}},mounted:function(){this.queryUserInfo()},methods:{queryUserInfo:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,n,r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$get_object("_User",e.$route.params.userid);case 2:a=t.sent,n=a.username,r=a.nick,s=a.objectId,a.ACL,e.userinfo={name:n,nick:r,objectId:s,roles:""};case 8:case"end":return t.stop()}}),t)})))()}}}),o=i,l=(a("e180"),a("2877")),c=Object(l["a"])(o,n,r,!1,null,"29d200ea",null);t["default"]=c.exports},"252c":function(e,t,a){"use strict";a("cf09")},2760:function(e,t,a){"use strict";a("16c2")},2843:function(e,t,a){"use strict";a("d88f")},"2b78":function(e,t,a){e.exports={"menu-color":"rgba(255,255,255,.95)","menu-color-active":"rgba(255,255,255,.95)","menu-background":"#282c34","column-second-menu-background":"#fff"}},"2f7a":function(e,t,a){"use strict";a("a2d5")},3006:function(e,t,a){"use strict";a("c9a7")},3538:function(e,t,a){},3858:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"role-box"},[a("el-form",{attrs:{model:e.roleFormObj,rules:e.roleFormRules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"parent",prop:"parent"}},[a("el-select",{attrs:{placeholder:"请选择Parent"},model:{value:e.roleFormObj.ParentId,callback:function(t){e.$set(e.roleFormObj,"ParentId",t)},expression:"roleFormObj.ParentId"}},e._l(e.roleList,(function(e,t){return a("el-option",{key:t,attrs:{value:e.objectId,label:e.name+":"+e.desc}})})),1)],1),a("el-form-item",{attrs:{label:"角色名",prop:"name"}},[a("el-input",{model:{value:e.roleFormObj.name,callback:function(t){e.$set(e.roleFormObj,"name",t)},expression:"roleFormObj.name"}})],1),a("el-form-item",{attrs:{label:"部门",prop:"departmentid"}},[a("el-input",{attrs:{placeholder:"请输入部门名称"},model:{value:e.roleFormObj.depname,callback:function(t){e.$set(e.roleFormObj,"depname",t)},expression:"roleFormObj.depname"}})],1),a("el-form-item",{attrs:{label:"岗位",prop:"role"}},[a("el-select",{attrs:{clearable:e.clearFlag,placeholder:"请选择角色模版"},model:{value:e.roleFormObj.dictvalue,callback:function(t){e.$set(e.roleFormObj,"dictvalue",t)},expression:"roleFormObj.dictvalue"}},e._l(e.Option.dictOption,(function(e,t){return a("el-option",{key:t,attrs:{value:e.key,change:"changeOption('dict',item.name)"}})})),1)],1),a("el-form-item",{attrs:{label:"备注",prop:"description"}},[a("el-input",{attrs:{placeholder:"备注项为必填项",type:"textarea"},model:{value:e.roleFormObj.description,callback:function(t){e.$set(e.roleFormObj,"description",t)},expression:"roleFormObj.description"}})],1),a("el-form-item",{staticClass:"el_btn"},[a("el-button",{attrs:{type:"warning"},on:{click:function(t){return e.resetFrom()}}},[e._v("重置")]),0==e.insert||1==e.insert?a("el-button",{attrs:{type:"success"},on:{click:function(t){return e.addroles()}}},[e._v(" 确定 ")]):e._e()],1)],1)],1)])},r=[],s=a("1da1"),i=(a("96cf"),a("159b"),a("b0c0"),a("d81d"),a("a4d3"),a("e01a"),a("e0e9")),o=a("5da9"),l={data:function(){return{treeModu:[],treeprops:{value:"name",label:"name"},defaultProps:{children:"children",label:"label"},originrole:[],needdelarr:[],parentrole:[],userid:"",roleId:"",insert:"",Option:{deptvalue:"",deptOption:[],dictvalue:"",dictOption:[],objectId:0,ParentId:0},clearFlag:!0,roleFormObj:{parentId:"",name:"",phoneNum:"",mail:"",department:"",gender:"男",role:"",description:"",type:[],list:[],defaultProps:{children:"children",label:"label"},dictvalue:""},roleFormRules:{name:[{required:!0,message:"请输入角色名",trigger:"blur"},{min:2,max:10,message:"长度在 2 到 10 个字符",trigger:"blur"}],description:[{required:!0,message:"请输入权限描述",trigger:"blur"},{min:3,message:"最少三个字符",trigger:"blur"}]},roleList:[],deptInfo:{}}},computed:{},mounted:function(){this.searchAllOption()},methods:{getData:function(e){this.deptInfo=e,this.roleFormObj.ParentId=this.deptInfo.objectId,this.searchAllOption()},changeOption:function(e,t){var a=this;switch(e){case"tree":this.Option.deptvalue=this.$refs["cascaderAddr"].currentLabels[1];var n=this.$refs["cascaderAddr"].options;n.forEach((function(e){a.$refs["cascaderAddr"].currentLabels[0]===e.name&&(a.Option.objectId=e.children[0].objectId),a.Option.ParentId=e.objectId}));break;case"dict":this.Option.dictvalue=t;break}},searchAllOption:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,n,r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(i["queryDict"])({where:{type:"roletemp"}});case 2:return a=t.sent,n=a.results,n&&(e.Option.dictOption=n),t.next=7,Object(o["queryRole"])({});case 7:r=t.sent,s=[],r.results?(r.results.forEach((function(e,t){var a={};a.ParentId=e.ParentId,a.name=e.name,a.objectId=e.objectId,a.org_type=e.org_type,a.desc=e.desc,a.createdAt=e.createdAt,s.push(a)})),e.roleList=s,e.Option.deptOption=r.results):(e.roleList=[],e.$message("部门列表获取失败"),e.Option.deptOption=[]);case 10:case"end":return t.stop()}}),t)})))()},resetFrom:function(){var e=this;this.roleFormObj={name:"",phoneNum:"",duty:"",gender:"男",role:"",description:"",alias:""},this.Option.deptvalue="",this.Option.dictvalue="",this.Option.objectId=0,this.Option.ParentId=0,this.treeModu=[],setTimeout((function(){e.searchAllOption()}),1e3)},diguiquchu:function(e,t,a,n){var r=this;t.map((function(t){t.key==a&&t.children.length>0?(n.push(a),r.diguiquchu(e,t.children,a,n)):t.key!=a&&t.children.length>0&&r.diguiquchu(e,t.children,a,n)}))},addroles:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={depname:e.roleFormObj.depname,desc:e.roleFormObj.description,name:e.roleFormObj.name,parent:e.roleFormObj.ParentId,tempname:e.roleFormObj.dictvalue},t.next=3,Object(o["addRoles"])(a);case 3:n=t.sent,r=n.results,r&&e.$message({message:"新增成功",type:"success"}),e.$baseEventBus.$emit("dialogHide");case 7:case"end":return t.stop()}}),t)})))()},getdetail:function(){this.insert=this.$route.query.insert,this.roleId=this.$route.query.roleId}}},c=l,u=(a("5abe"),a("2877")),d=Object(u["a"])(c,n,r,!1,null,"be8dd312",null);t["default"]=d.exports},"39a2":function(e,t,a){"use strict";a("82ab")},"3bdf":function(e,t,a){"use strict";a("f683")},"470e":function(e,t,a){e.exports={"menu-color":"rgba(255,255,255,.95)","menu-color-active":"rgba(255,255,255,.95)","menu-background":"#282c34","column-second-menu-background":"#fff"}},"499a":function(e,t,a){"use strict";a("6e72")},"49c3":function(e,t,a){},"4b21":function(e,t,a){"use strict";a("7eff")},"4b65":function(e){e.exports=JSON.parse('{"PersonAuthtication":{"userphone":"Number","joblicense":"String","suggestion":"String","positional_titles":"String","professional":"String","education":"String","auditDate":"Number","start_time":"Number","ukey":"String","name":"String","graduate_institutions":"String","training_experience":"String","practitioners_experience":"String","working_seniority":"String","addr":"Array","status":"String","contraryimageUrl":"String","birthday":"Number","frontimageUrl":"String","job":"String","identity":"String","unumber":"String","politic_status":"String","department":"Pointer"}}')},"4ce1":function(e,t,a){"use strict";a("09ff")},"4dd1":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.title,visible:e.dialogFormVisible,width:"500px"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.close},scopedSlots:e._u([{key:"footer",fn:function(){return[a("el-button",{on:{click:e.close}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("确 定")])]},proxy:!0}])},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"父节点",prop:"parentName"}},[a("el-select",{attrs:{disabled:!e.form.parentId,placeholder:"请选择父节点"},model:{value:e.form.parentId,callback:function(t){e.$set(e.form,"parentId",t)},expression:"form.parentId"}},[a("el-option",{staticStyle:{height:"auto",padding:"0"},attrs:{label:e.form.parentName,value:e.form.parentId}},[a("el-tree",{ref:"tree",attrs:{data:e.treeData,props:e.defaultProps,"default-expand-all":""},on:{"node-click":e.handleNodeClick}})],1)],1)],1),a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"排序",prop:"order"}},[a("el-input",{model:{value:e.form.order,callback:function(t){e.$set(e.form,"order",t)},expression:"form.order"}})],1)],1)],1)},r=[],s=a("1da1"),i=(a("b0c0"),a("96cf"),a("ffea")),o={name:"DepartmentManagementEdit",data:function(){return{treeData:[],defaultProps:{children:"children",label:"name"},form:{parentName:"",parentId:""},rules:{parentName:[{required:!0,trigger:"blur",message:"请选择父节点"}],name:[{required:!0,trigger:"blur",message:"请输入名称"}],order:[{required:!0,trigger:"blur",message:"请输入排序"}]},title:"",dialogFormVisible:!1}},created:function(){this.fetchData()},methods:{fetchData:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(i["getList"])();case 2:a=t.sent,n=a.data,e.treeData=n;case 5:case"end":return t.stop()}}),t)})))()},handleNodeClick:function(e){this.form.parentName=e.name,this.form.parentId=e.id},showEdit:function(e){e?(this.title="编辑",this.form=Object.assign({},e)):this.title="添加",this.dialogFormVisible=!0},close:function(){this.$refs["form"].resetFields(),this.form=this.$options.data().form,this.dialogFormVisible=!1},save:function(){var e=this;this.$refs["form"].validate(function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(a){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=10;break}return t.next=3,Object(i["doEdit"])(e.form);case 3:n=t.sent,r=n.msg,e.$baseMessage(r,"success",!1,"vab-hey-message-success"),e.$emit("fetch-data"),e.close(),t.next=11;break;case 10:return t.abrupt("return",!1);case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}}},l=o,c=a("2877"),u=Object(c["a"])(l,n,r,!1,null,null,null);t["default"]=u.exports},"4e33":function(e,t,a){e.exports={"menu-color":"rgba(255,255,255,.95)","menu-color-active":"rgba(255,255,255,.95)","menu-background":"#282c34","column-second-menu-background":"#fff"}},"4e3c":function(e,t,a){},"4f20":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{"close-on-click-modal":!1,title:e.title,visible:e.dialogFormVisible,width:"70%"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.close},scopedSlots:e._u([{key:"footer",fn:function(){return[a("el-button",{on:{click:e.close}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("确 定")])]},proxy:!0}])},[a("el-collapse",{model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},[a("el-collapse-item",{attrs:{title:"菜单参数配置项",name:"1"}},[a("menu-collapse")],1)],1),a("el-form",{ref:"form",staticStyle:{"margin-top":"20px"},attrs:{inline:!0,model:e.form,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"name",prop:"name"}},[a("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}},[a("template",{slot:"prepend"},[a("vab-icon",{attrs:{icon:"pages-line"}})],1)],2)],1),a("el-form-item",{attrs:{label:"路径",prop:"url"}},[a("el-input",{model:{value:e.form.url,callback:function(t){e.$set(e.form,"url",t)},expression:"form.url"}},[a("template",{slot:"prepend"},[a("vab-icon",{attrs:{icon:"route-fill"}})],1)],2)],1),a("el-form-item",{attrs:{label:"vue文件路径",prop:"meta.component"}},[a("el-input",{model:{value:e.form.meta.component,callback:function(t){e.$set(e.form.meta,"component",t)},expression:"form.meta.component"}},[a("template",{slot:"prepend"},[a("vab-icon",{attrs:{icon:"vuejs-fill"}})],1)],2)],1),a("el-form-item",{attrs:{label:"重定向",prop:"redirect"}},[a("el-input",{model:{value:e.form.meta.redirect,callback:function(t){e.$set(e.form.meta,"redirect",t)},expression:"form.meta.redirect"}},[a("template",{slot:"prepend"},[a("vab-icon",{attrs:{icon:"infrared-thermometer-fill"}})],1)],2)],1),a("el-form-item",{attrs:{label:"标题",prop:"meta.title"}},[a("el-input",{model:{value:e.form.meta.title,callback:function(t){e.$set(e.form.meta,"title",t)},expression:"form.meta.title"}},[a("template",{slot:"prepend"},[a("vab-icon",{attrs:{icon:"article-line"}})],1)],2)],1),a("el-form-item",{attrs:{label:"图标",prop:"meta.icon"}},[a("el-popover",{attrs:{"popper-class":"icon-selector-popper",trigger:"click",width:"292"},scopedSlots:e._u([{key:"reference",fn:function(){return[a("el-input",{model:{value:e.form.meta.icon,callback:function(t){e.$set(e.form.meta,"icon",t)},expression:"form.meta.icon"}},[a("template",{slot:"prepend"},[a("vab-icon",{attrs:{icon:e.form.meta.icon}})],1)],2)]},proxy:!0}])},[a("vab-icon-selector",{on:{"handle-icon":e.handleIcon}})],1)],1),a("el-form-item",{attrs:{label:"badge",prop:"badge"}},[a("el-input",{model:{value:e.form.meta.badge,callback:function(t){e.$set(e.form.meta,"badge",t)},expression:"form.meta.badge"}},[a("template",{slot:"prepend"},[a("vab-icon",{attrs:{icon:"notification-badge-fill"}})],1)],2)],1),a("el-form-item",{attrs:{label:"隐藏",title:"隐藏后将不在菜单列表中展示，但是可以被访问",prop:"hidden"}},[a("el-switch",{model:{value:e.form.meta.hidden,callback:function(t){e.$set(e.form.meta,"hidden",t)},expression:"form.meta.hidden"}})],1),a("el-form-item",{attrs:{label:"固定",title:"除首页外,其他页面不建议选择此项",prop:"noClosable"}},[a("el-switch",{model:{value:e.form.meta.noClosable,callback:function(t){e.$set(e.form.meta,"noClosable",t)},expression:"form.meta.noClosable"}})],1),a("el-form-item",{attrs:{label:"无缓存",title:"开启后该页面的数据将不被缓存",prop:"noKeepAlive"}},[a("el-switch",{model:{value:e.form.meta.noKeepAlive,callback:function(t){e.$set(e.form.meta,"noKeepAlive",t)},expression:"form.meta.noKeepAlive"}})],1),a("el-form-item",{attrs:{label:"排序",prop:"orderBy"}},[a("el-input-number",{attrs:{label:"描述文字"},model:{value:e.form.orderBy,callback:function(t){e.$set(e.form,"orderBy",e._n(t))},expression:"form.orderBy"}})],1)],1)],1)},r=[],s=a("1da1"),i=(a("b0c0"),a("a9e3"),a("96cf"),a("f5b7")),o=a("bc35"),l=a("8405"),c={name:"MenuManagementEdit",components:{VabIconSelector:i["default"],menuCollapse:l["default"]},data:function(){return{jsonModel:{hidden:!0,menuHidden:!1,alwaysShow:!0,name:"Demo",meta:{title:"title",roles:{role:["admin","..."],ability:["READ","WRITE","DELETE"],mode:"allOf"},remixIcon:"",icon:"",isCustomSvgIcon:!1,isCustomSvg:!1,noKeepAlive:!0,affix:!0,noCLosable:!0,badge:"New",tabHidden:!0,activeMenu:"",dot:!1,dynamicNewTab:!1},children:[]},activeNames:["0"],menuid:"",form:{orderBy:100,name:"",url:"",meta:{icon:"",component:"",title:""}},rules:{name:[{type:"string",required:!0,message:"name,用做页面缓存,首字母大写,不可重复",trigger:"blur"},{type:"string",message:"name类型为string",trigger:"blur"},{type:"string",pattern:/^[A-Z][A-z0-9]*$/,message:"首字母请修改为大写",trigger:"blur"}],url:[{type:"string",required:!0,trigger:"blur",message:"路径地址,将展示在浏览器地址栏中"}],"meta.component":[{required:!0,trigger:"blur",message:"vue文件路径,一般为@views/下的文件路径"}],"meta.title":[{required:!0,trigger:"blur",message:"标题,展示在侧边栏菜单列表和顶部菜单列表"}],"meta.icon":[{required:!0,trigger:"blur",message:"图标，展示在侧边栏菜单列表和顶部菜单列表"}],orderBy:[{type:"number",required:!0,trigger:"blur",message:"排序层级,决定页面的排序"}]},title:"",dialogFormVisible:!1}},created:function(){},methods:{handleIcon:function(e){this.form.meta.icon=e},showEdit:function(e,t){this.title="addChildMenu"==t?"新增子菜单":"one"==t?"新增一级菜单":"编辑菜单","addChildMenu"==t?(this.form={orderBy:10*e.orderBy+1,name:"",url:e.url,meta:{icon:"home-3-fill",component:"",redirect:"",title:"",badge:"",hidden:!1,alwaysShow:!1,isCustomSvg:!1,noClosable:!1,noKeepAlive:!1,tabHidden:!1}},this.menuid=e.objectId):this.form="editMenu"==t?e:{orderBy:e.orderBy,name:"",url:"",meta:{icon:"home-3-fill",component:"",redirect:"",title:"",badge:"",hidden:!1,alwaysShow:!1,isCustomSvg:!1,noClosable:!1,noKeepAlive:!1,tabHidden:!1}},this.dialogFormVisible=!0},close:function(){this.menuid="",this.dialogFormVisible=!1},save:function(){var e=this;this.$refs["form"].validate(function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a&&(e.form.objectId?e._putMenu(e.form.objectId,e.form):e._addMenu(e.form));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},_putMenu:function(e,t){var a=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var r,s,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r={url:t.url,name:t.name,icon:t.icon,orderBy:t.orderBy,meta:t.meta},n.next=3,Object(o["putMenu"])(e,r);case 3:s=n.sent,i=s.updatedAt,i&&a.closeDialog();case 6:case"end":return n.stop()}}),n)})))()},closeDialog:function(){this.menuid="",this.$emit("fetch-data"),this.$refs["form"].resetFields(),this.dialogFormVisible=!1,this.form=this.$options.data().form},_addMenu:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var n,r,s,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(n="*",r="role:admin",s={},s[n]={read:!0,write:!0},s[r]={read:!0,write:!0},i={ACL:s,meta:e.meta,name:e.name,parent:{objectId:"0",__type:"Pointer",className:"Menu"},url:e.url,icon:e.meta.icon,orderBy:Number(e.orderBy)},""!=t.menuid){a.next=15;break}return i.parent.objectId="0",a.next=10,Object(o["postMenu"])(i);case 10:a.sent,t.$message({message:"新增成功",type:"success"}),t.closeDialog(),a.next=21;break;case 15:return i.parent.objectId=t.menuid,a.next=18,Object(o["postMenu"])(i);case 18:a.sent,t.$message({message:"新增成功",type:"success"}),t.closeDialog();case 21:case"end":return a.stop()}}),a)})))()}}},u=c,d=a("2877"),p=Object(d["a"])(u,n,r,!1,null,null,null);t["default"]=p.exports},"50da":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"structure"},[a("div",{staticClass:"adduserDiadlog"},[a("el-dialog",{attrs:{visible:e.adduserDiadlog,title:"新增用户",width:"600px"},on:{"update:visible":function(t){e.adduserDiadlog=t}}},[a("div",[a("el-form",{ref:"userInfoFormRef",staticClass:"demo-ruleForm",attrs:{model:e.userInfoForm,rules:e.userFormRules,"status-icon":"","label-width":"100px"}},[a("el-form-item",{attrs:{label:"姓名",prop:"nick"}},[a("el-input",{attrs:{placeholder:"2-7个文字","auto-complete":"off"},model:{value:e.userInfoForm.nick,callback:function(t){e.$set(e.userInfoForm,"nick",t)},expression:"userInfoForm.nick"}})],1),a("el-form-item",{attrs:{label:"手机号",prop:"phone"}},[a("el-input",{attrs:{maxlength:11,placeholder:"请输入手机号","auto-complete":"off"},model:{value:e.userInfoForm.phone,callback:function(t){e.$set(e.userInfoForm,"phone",t)},expression:"userInfoForm.phone"}})],1),a("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[a("el-input",{attrs:{placeholder:"请输入邮箱","auto-complete":"off"},model:{value:e.userInfoForm.email,callback:function(t){e.$set(e.userInfoForm,"email",t)},expression:"userInfoForm.email"}})],1),a("el-form-item",{attrs:{label:"账号",prop:"account"}},[a("el-input",{attrs:{placeholder:"请输入账号","auto-complete":"off"},model:{value:e.userInfoForm.account,callback:function(t){e.$set(e.userInfoForm,"account",t)},expression:"userInfoForm.account"}})],1),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{type:"password","auto-complete":"off",placeholder:"请输入6-10位数字字母组合"},model:{value:e.userInfoForm.password,callback:function(t){e.$set(e.userInfoForm,"password",t)},expression:"userInfoForm.password"}})],1),a("el-form-item",{attrs:{label:"确认密码",prop:"checkPass"}},[a("el-input",{attrs:{type:"password","auto-complete":"off",placeholder:"请再次输入密码"},model:{value:e.userInfoForm.checkPass,callback:function(t){e.$set(e.userInfoForm,"checkPass",t)},expression:"userInfoForm.checkPass"}})],1),a("el-form-item",{attrs:{label:"部门选择",prop:"departmentid"}},[a("el-select",{attrs:{placeholder:"请选择部门"},model:{value:e.userInfoForm.departmentid,callback:function(t){e.$set(e.userInfoForm,"departmentid",t)},expression:"userInfoForm.departmentid"}},e._l(e.deptOption,(function(e){return a("el-option",{key:e.objectId,attrs:{value:e.objectId,label:e.name+":"+e.desc}})})),1)],1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.adduserDiadlog=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.addUser}},[e._v("确 定")])],1)])],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{xs:24,sm:24,md:24,lg:24,xl:24}},[a("div",{staticClass:"tabContent"},[a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:7}},[a("div",{staticClass:"elTree"},[a("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"setting"},[a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:e.$translateTitle("user.name"),clearable:"",size:"small"},model:{value:e.query.value,callback:function(t){e.$set(e.query,"value",t)},expression:"query.value"}}),a("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search",size:"small",disabled:""==e.query.value},on:{click:function(t){return e.userFordepartment(0)}}},[e._v(" "+e._s(e.$translateTitle("developer.search"))+" ")]),a("el-button",{staticClass:"filter-item",attrs:{type:"primary",size:"small"},on:{click:function(t){return e.userFordepartment()}}},[e._v(" 所有用户 ")])],1),a("div",{staticClass:"leftTree"},[a("el-tree",{attrs:{data:e.deptTreeData,props:e.elTreedefaultProps,"expand-on-click-node":!1,"node-key":"id","default-expand-all":""},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.node,r=t.data;return a("span",{staticClass:"custom-tree-node"},[a("span",{class:{selected:r.objectId==e.curDepartmentId},on:{click:function(t){return e.handleNodeClick(r)}}},[e._v(" "+e._s(n.label)+" ")]),a("span",[a("i",{staticClass:"el-icon-circle-plus-outline",attrs:{title:"添加用户"},on:{click:function(t){return e.addItemUser(r)}}})])])}}])})],1)])]),a("el-col",{attrs:{span:17}},[a("div",{staticClass:"elTable"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.pictLoading,expression:"pictLoading"}],staticStyle:{width:"90%","margin-top":"20px"},attrs:{data:e.tableFilterData}},[a("el-table-column",{attrs:{label:"用户名"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.username))])]}}])}),a("el-table-column",{attrs:{label:"电话"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.phone))])]}}])}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,label:"邮箱"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.email))])]}}])}),a("el-table-column",{attrs:{label:"部门"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(" "+e._s(t.row.departmentname||e.departmentname)+" ")])]}}])}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,label:"创建时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(" "+e._s(new Date(t.row.createdAt).toLocaleDateString())+" ")])]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.operation"),align:"center",width:"400"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"success",size:"small"},on:{click:function(a){return e.handleEditor(t.row)}}},[e._v(" "+e._s(e.$translateTitle("developer.edit"))+" ")]),a("el-button",{attrs:{type:"danger",size:"small",disabled:!e.curDepartmentId},on:{click:function(a){return e.handleDetele(t.row)}}},[e._v(" "+e._s(e.$translateTitle("developer.delete"))+" ")])]}}])})],1)],1)])],1)],1)]),a("el-dialog",{attrs:{title:e.$translateTitle("user.assignroles"),visible:e.roleacl,"close-on-click-modal":!1},on:{"update:visible":function(t){e.roleacl=t}}},[a("el-table",{ref:"multipleTable",attrs:{data:e.rolelist,height:"500px",size:"mini"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{label:e.$translateTitle("user.name"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.alias))])]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.describe"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.desc))])]}}])}),a("el-table-column",{attrs:{label:"ID",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.objectId))])]}}])})],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.roleacl=!1}}},[e._v(" "+e._s(e.$translateTitle("developer.cancel"))+" ")]),a("el-button",{attrs:{type:"primary"},on:{click:e.adduseracl}},[e._v(" "+e._s(e.$translateTitle("developer.determine"))+" ")])],1)],1)],1)],1)},r=[],s=a("1da1"),i=(a("d81d"),a("caad"),a("2532"),a("d3b7"),a("3ca3"),a("ddb0"),a("a9e3"),a("4de4"),a("b0c0"),a("96cf"),a("4be7")),o=a("bc35"),l=a("8665"),c=a("5da9"),u={data:function(){var e=this,t=function(e,t,a){""===t?a(new Error("请输入密码")):a()},a=function(t,a,n){""===a?n(new Error("请再次输入密码")):a!==e.userInfoForm.password?n(new Error("两次输入密码不一致!")):n()};return{departmentObj:[],departmentname:"",curDepartmentId:"",deptTreeData:[],deptOption:[],departmentidFlag:"false",height:document.documentElement.clientHeight-180+"px;",delLoading:!1,sup_this:this,loading:!1,deptName:"",depts:[],deptId:null,structure:[],defaultProps:{children:"children",label:"name"},data:[],elTreedefaultProps:{children:"children",label:"name"},dataforuser:[],total:0,query:{value:"",type:"",enabled:""},tableData:[],pagesize:10,start:0,departmentid:[],userlist:[],rolelist:[],objectId:"",roleacl:!1,multipleSelection:[],userrolelist:[],tempData:[],roleData:[],adduserDiadlog:!1,userInfoForm:{account:"",phone:"",nick:"",password:"",email:"",checkPass:"",departmentid:[]},userFormRules:{account:[{required:!0,message:"请输入账号名",trigger:"blur"}],phone:[{required:!1,message:"请输入手机号",trigger:"blur"},{validator:function(e,t,a){var n=/^1[34578]\d{9}$/;t?n.test(t)?a():a(new Error("手机号码格式不正确！")):a()},trigger:"blur"}],password:[{validator:t,trigger:"blur",required:!0}],checkPass:[{validator:a,trigger:"blur",required:!0}],departmentid:[{required:!0,message:"请选择部门",trigger:"blur"}],nick:[{required:!0,message:"请输入昵称",trigger:"blur"},{min:2,max:7,message:"昵称格式不正确",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:["blur","change"]}]},treeprops:{value:"objectId",label:"name"},pictLoading:!1}},computed:{tableFilterData:function(){return this.tempData}},mounted:function(){this.userFordepartment(),this.searchAllOption()},methods:{addItemUser:function(e){this.deptOption=[],this.departmentObj=e,this.deptOption.push(e),this.adduserDiadlog=!0,this.userInfoForm.departmentid=e.objectId},addUser:function(){var e=this;this.$refs["userInfoFormRef"].validate(function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(a){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=3;break}return e.$message({message:"用户信息不完整",type:"danger"}),t.abrupt("return",!1);case 3:return n={username:e.userInfoForm.account,nick:e.userInfoForm.nick,password:e.userInfoForm.password,phone:e.userInfoForm.phone,email:e.userInfoForm.email,department:e.userInfoForm.departmentid,emailVerified:!0},t.next=6,Object(l["EmployeesHired"])(n);case 6:r=t.sent,r?(e.$message({message:"用户添加成功！",type:"success"}),e.adduserDiadlog=!1,e.handleNodeClick(e.departmentObj)):e.$message("添加失败");case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},editorrole:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var n,r,s,i,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n={order:"createdAt",where:{users:{className:"_User",__type:"Pointer"}}},t.rolelist=[],t.userrolelist=[],t.objectId=e,a.next=6,t.$query_object("_User",{limit:1,where:{objectId:t.objectId}});case 6:return r=a.sent,s=r.results,s.length&&(n.where.users.objectId=s[0].objectId),a.next=11,t.$query_object("_Role",n);case 11:i=a.sent,o=i.results,t.rolelist=o,o.length&&(o.map((function(e,a){t.objectId==e.objectId&&(t.$refs.multipleTable.toggleRowSelection(t.rolelist[a],!0),t.userrolelist.push(e.objectId))})),t.roleacl=!0);case 15:case"end":return a.stop()}}),a)})))()},seleItem:function(e,t,a){e.map((function(e){t.includes(e)||a.push(e)})),t.map((function(t){e.includes(t)||a.push(t)})),this.userRolereset(a)},userRolereset:function(e){var t=this;i["Promise"].all([e.map((function(e){t.testroles(e)}))]).then((function(e){0!=e.length&&(t.$message({type:"success",message:"分配成功"}),t.roleacl=!1)}))},testroles:function(e){},adduseracl:function(){this.seleItem(this.userrolelist,this.multipleSelection,[])},handleSelectionChange:function(e){var t=this;this.multipleSelection=[],e.map((function(e){t.multipleSelection.push(e.id)}))},handleEditor:function(e){this.$router.push({path:"/roles/edituser",query:{id:e.objectId}})},handleDetele:function(e){var t=this;this.$confirm("此操作将永久删除此用户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(s["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n={department:t.curDepartmentId,username:e.username},a.next=3,Object(l["EmployeeTurnover"])(n);case 3:r=a.sent,r&&(t.$message({type:"success",message:"删除成功!"}),t.handleNodeClick({name:t.departmentname}));case 5:case"end":return a.stop()}}),a)}))))},handleSizeChange:function(e){this.pagesize=e,this.userFordepartment()},handleCurrentChange:function(e){this.start=Number(e-1)*Number(this.pagesize),this.userFordepartment()},userFordepartment:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var n,r,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.pictLoading=!0,t.tempData=[],0==e?t.start=0:t.query.value="",n={limit:t.pagesize,skip:t.start,where:{},count:"objectId"},a.next=6,Object(l["queryUser"])(n);case 6:r=a.sent,s=r.results,s?(t.query.value?t.tempData=s.filter((function(e){return-1!=e.username.indexOf(t.query.value)})):t.tempData=s,t.pictLoading=!1):t.pictLoading=!1,t.total=t.tempData.length;case 10:case"end":return a.stop()}}),a)})))()},handleNodeClick:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var n,r,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.departmentname=e.name,t.curDepartmentId=e.objectId,t.tempData=[],t.pictLoading=!0,n={name:e.name},a.next=7,Object(c["queryRoledepartment"])(n);case 7:r=a.sent,s=r.users,s?(t.tempData=s.filter((function(e){return-1==e.username.indexOf("user_for_")})),t.pictLoading=!1,t.total=t.tempData.length):(t.pictLoading=!1,t.total=0);case 10:case"end":return a.stop()}}),a)})))()},searchAllOption:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(o["Roletree"])();case 2:a=t.sent,n=a.results,r=void 0===n?[]:n,r?(e.deptTreeData=r,e.userFordepartment()):(e.$message("部门列表获取失败"),e.deptTreeData=[]);case 6:case"end":return t.stop()}}),t)})))()}}},d=u,p=(a("ca29"),a("39a2"),a("2877")),m=Object(p["a"])(d,n,r,!1,null,"5a7a8c68",null);t["default"]=m.exports},5310:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"home"},[a("topology",{attrs:{configs:e.topologyConfigs,materials:e.materials,user:e.user,data:e.data},on:{event:e.onEvent}})],1)},r=[],s=(a("b0c0"),a("bd5c")),i=a.n(s),o=a("68f7");Vue.use(i.a);var l={name:"Home",data:function(){return{topologyConfigs:{license:{key:"企业版授权码",value:"国产原创开源发展做出我们的贡献"},logo:{img:"http://topology.le5le.com/assets/img/favicon.ico",url:"http://topology.le5le.com",target:"_blank"},menus:o["defalutMenus"],loginUrl:"https://account.le5le.com",signupUrl:"https://account.le5le.com",userMenus:o["defalutUserMenus"],dataOptionsFn:function(e,t,a){return[{label:"选项1",value:1},{label:"选项2",value:2},{label:"选项3",value:3}]}},user:{username:"le5le"},materials:{system:o["defalutMaterials"],user:o["userMaterials"],images:o["images"],uploadUrl:"/api/file",uploadHeaders:{Authorization:"your token"},uploadParams:{mydata:1}},data:{}}},created:function(){var e=window.topologyData;e&&(this.data={data:Object.assign({},e)},setTimeout((function(){window.topologyData=null}),200))},methods:{onEvent:function(e){switch(e.name){case"logout":this.user=null;break;case"openMaterialGroup":break;case"addMaterial":this.$router.push({path:"/",query:{component:"1"}});break;case"editMaterial":this.$router.push({path:"/",query:{id:e.params.id,component:"1"}});break;case"open":break;case"save":break;case"addImageUrl":break;case"deleteImage":break;case"preview":window.topologyData=window.topology.data,this.$router.push({path:"/preview",query:{id:"xxx",r:"1"}});break}}}},c=l,u=(a("7f0c"),a("2877")),d=Object(u["a"])(c,n,r,!1,null,null,null);t["default"]=d.exports},5640:function(e,t,a){},"59f7":function(e,t,a){},"59f9":function(e,t,a){"use strict";a("66db")},"5a71":function(e,t,a){"use strict";a("4e33")},"5abe":function(e,t,a){"use strict";a("d168")},6125:function(e,t,a){"use strict";a("d385")},"62af":function(e,t,a){"use strict";a("6710")},"66db":function(e,t,a){},6710:function(e,t,a){},"68f7":function(e,t,a){"use strict";a.r(t),a.d(t,"defalutMenus",(function(){return n})),a.d(t,"defalutUserMenus",(function(){return r})),a.d(t,"defalutMaterials",(function(){return s})),a.d(t,"userMaterials",(function(){return i})),a.d(t,"images",(function(){return o}));var n={left:[{name:"文件(自定义菜单1)",children:[{name:"新建文件",keyboard:"Ctrl+N",action:"loadNew"},{name:"打开文件",keyboard:"Ctrl+O",action:"open"},{name:"导入文件",keyboard:"Ctrl+I",action:"load"},{},{name:"保存",keyboard:"Ctrl+S",action:"save"},{name:"另存为",keyboard:"Ctrl+Shift+I",action:"saveAs"},{name:"下载JSON文件",action:"downloadJson"},{name:"下载zip打包文件",action:"downloadZip"},{},{name:"导出为HTML",action:"downloadHtml"},{},{name:"下载为PNG",action:"downloadPng"},{name:"下载为SVG",action:"downloadSvg"}]},{name:"编辑(自定义菜单2)",children:[{name:"撤销",keyboard:"Ctrl+Z",action:"undo"},{name:"恢复  ",keyboard:"Ctrl+Shift+Z",action:"redo"},{},{name:"剪切  ",keyboard:"Ctrl+X",action:"cut"},{name:"复制  ",keyboard:"Ctrl+C",action:"copy"},{name:"粘贴  ",keyboard:"Ctrl+V",action:"paste"}]},{name:"我的菜单3",router:"/page"}]},r=[{name:"个人中心",router:"/user/home"},{},{name:"账号设置",url:"https://account.le5le.com/user/profile",target:"_blank"},{},{name:"退出",action:"logout"}],s=[{name:"基本形状",expand:!0,show:!0,list:[{name:"rectangle",icon:"t-icon t-rect",id:1,data:{text:"正方形",rect:{width:100,height:100},paddingLeft:10,paddingRight:10,paddingTop:10,paddingBottom:10,name:"rectangle",icon:"",iconFamily:"topology",iconColor:"#2f54eb"}},{name:"rectangle",icon:"t-icon t-rectangle",id:2,data:{text:"圆角矩形",rect:{width:200,height:50},paddingLeft:10,paddingRight:10,paddingTop:10,paddingBottom:10,borderRadius:.1,name:"rectangle"}},{name:"circle",icon:"t-icon t-circle",id:3,data:{text:"圆",rect:{width:100,height:100},name:"circle",textMaxLine:1}},{name:"triangle",icon:"t-icon t-triangle",id:4,data:{text:"三角形",rect:{width:100,height:100},name:"triangle"}},{name:"diamond",icon:"t-icon t-diamond",id:5,data:{text:"菱形",rect:{width:100,height:100},name:"diamond"}},{name:"pentagon",icon:"t-icon t-pentagon",id:6,data:{text:"五边形",rect:{width:100,height:100},name:"pentagon"}},{name:"hexagon",icon:"t-icon t-hexagon",id:7,data:{text:"六边形",rect:{width:100,height:100},paddingTop:10,paddingBottom:10,name:"hexagon"}},{name:"pentagram",icon:"t-icon t-pentagram",id:8,data:{text:"五角星",rect:{width:100,height:100},name:"pentagram"}},{name:"leftArrow",icon:"t-icon t-arrow-left",id:9,data:{text:"左箭头",rect:{width:200,height:100},name:"leftArrow"}},{name:"rightArrow",icon:"t-icon t-arrow-right",id:10,data:{text:"右箭头",rect:{width:200,height:100},name:"rightArrow"}},{name:"twowayArrow",icon:"t-icon t-twoway-arrow",id:11,data:{text:"双向箭头",rect:{width:200,height:100},name:"twowayArrow"}},{name:"line",icon:"t-icon t-line",id:12,data:{text:"直线",rect:{width:100,height:100},name:"line"}},{name:"cloud",icon:"t-icon t-cloud",id:13,data:{text:"云",rect:{width:100,height:100},name:"cloud"}},{name:"message",icon:"t-icon t-msg",id:14,data:{text:"消息框",rect:{width:100,height:100},paddingLeft:10,paddingRight:10,paddingTop:10,paddingBottom:10,name:"message"}},{name:"file",icon:"t-icon t-file",id:15,data:{text:"文档",rect:{width:80,height:100},paddingLeft:10,paddingRight:10,paddingTop:10,paddingBottom:10,name:"file"}},{name:"text",icon:"t-icon t-text",id:16,data:{text:"le5le-topology / 乐吾乐",rect:{width:160,height:30},name:"text"}},{name:"image",icon:"t-icon t-image",id:17,data:{text:"",rect:{width:100,height:100},name:"image",image:"/assets/img/logo.png"}},{name:"cube",icon:"t-icon t-cube",id:18,data:{text:"立方体",rect:{width:50,height:70},is3D:!0,z:10,zRotate:15,fillStyle:"#ddd",name:"cube",icon:"",iconFamily:"topology",iconColor:"#777",iconSize:30}},{name:"people",icon:"t-icon t-people",id:19,data:{text:"用户",rect:{width:70,height:100},name:"people"}},{name:"视频/网页",icon:"t-icon t-pc",id:20,data:{text:"视频/网页",rect:{width:200,height:200},paddingLeft:10,paddingRight:10,paddingTop:10,paddingBottom:10,name:"div"}}]},{name:"流程图",expand:!0,show:!0,list:[{name:"开始/结束",icon:"t-icon t-flow-start",id:21,data:{text:"开始/结束",rect:{width:120,height:40},borderRadius:.5,name:"rectangle"}},{name:"流程",icon:"t-icon t-rectangle",id:22,data:{text:"流程",rect:{width:120,height:40},name:"rectangle"}},{name:"判定",icon:"t-icon t-diamond",id:23,data:{text:"判定",rect:{width:120,height:60},name:"diamond"}},{name:"数据",icon:"t-icon t-flow-data",id:24,data:{text:"数据",rect:{width:120,height:50},name:"flowData"}},{name:"准备",icon:"t-icon t-flow-ready",id:25,data:{text:"准备",rect:{width:120,height:50},name:"hexagon"}},{name:"子流程",icon:"t-icon t-flow-subprocess",id:26,data:{text:"子流程",rect:{width:120,height:50},name:"flowSubprocess"}},{name:"数据库",icon:"t-icon t-db",id:27,data:{text:"数据库",rect:{width:80,height:120},name:"flowDb"}},{name:"文档",icon:"t-icon t-flow-document",id:28,data:{text:"文档",rect:{width:120,height:100},name:"flowDocument"}},{name:"内部存储",icon:"t-icon t-internal-storage",id:29,data:{text:"内部存储",rect:{width:120,height:80},name:"flowInternalStorage"}},{name:"外部存储",icon:"t-icon t-extern-storage",id:30,data:{text:"外部存储",rect:{width:120,height:80},name:"flowExternStorage"}},{name:"队列",icon:"t-icon t-flow-queue",id:31,data:{text:"队列",rect:{width:100,height:100},name:"flowQueue"}},{name:"手动输入",icon:"t-icon t-flow-manually",id:32,data:{text:"手动输入",rect:{width:120,height:80},name:"flowManually"}},{name:"展示",icon:"t-icon t-flow-display",id:33,data:{text:"展示",rect:{width:120,height:80},name:"flowDisplay"}},{name:"并行模式",icon:"t-icon t-flow-parallel",id:34,data:{text:"并行模式",rect:{width:120,height:50},name:"flowParallel"}},{name:"注释",icon:"t-icon t-flow-comment",id:35,data:{text:"注释",rect:{width:100,height:100},name:"flowComment"}}]},{name:"活动图",expand:!0,show:!0,list:[{name:"开始",icon:"t-icon t-inital",id:36,data:{text:"",rect:{width:30,height:30},name:"circle",fillStyle:"#555",strokeStyle:"transparent"}},{name:"结束",icon:"t-icon t-final",id:37,data:{text:"结束",rect:{width:30,height:30},name:"activityFinal"}},{name:"活动",icon:"t-icon t-action",id:38,data:{text:"活动",rect:{width:120,height:50},borderRadius:.25,name:"rectangle"}},{name:"决策/合并",icon:"t-icon t-diamond",id:39,data:{text:"决策/合并",rect:{width:120,height:50},name:"diamond"}},{name:"垂直泳道",icon:"t-icon t-swimlane-v",id:40,data:{text:"垂直泳道",rect:{width:200,height:500},name:"swimlaneV"}},{name:"水平泳道",icon:"t-icon t-swimlane-h",id:41,data:{text:"水平泳道",rect:{width:500,height:200},name:"swimlaneH"}},{name:"垂直分岔/汇合",icon:"t-icon t-fork-v",id:42,data:{text:"垂直分岔/汇合",rect:{width:10,height:150},name:"forkV",fillStyle:"#555",strokeStyle:"transparent"}},{name:"水平分岔/汇合",icon:"t-icon t-fork",id:43,data:{text:"水平分岔/汇合",rect:{width:150,height:10},name:"forkH",fillStyle:"#555",strokeStyle:"transparent"}}]},{name:"时序图和类图",expand:!0,show:!0,list:[{name:"生命线",icon:"t-icon t-lifeline",id:44,data:{text:"生命线",rect:{width:150,height:400},name:"lifeline"}},{name:"激活",icon:"t-icon t-focus",id:45,data:{text:"激活",rect:{width:12,height:200},name:"sequenceFocus"}},{name:"简单类",icon:"t-icon t-simple-class",id:46,data:{text:"Topolgoy",rect:{width:270,height:200},paddingTop:40,font:{fontFamily:"Arial",color:"#222222",fontWeight:"bold"},fillStyle:"#ffffba",strokeStyle:"#7e1212",name:"simpleClass",list:[{text:"- name: string\n+ setName(name: string): void",name:"text",paddingLeft:10,paddingRight:10,paddingTop:10,paddingBottom:10,rectInParent:{x:0,y:0,width:"100%",height:"100%",rotate:0},font:{fontFamily:"Arial",color:"#222222",textAlign:"left",textBaseline:"top"}}]}},{name:"类",icon:"t-icon t-class",id:47,data:{text:"Topolgoy",rect:{width:270,height:200},paddingTop:40,font:{fontFamily:"Arial",color:"#222222",fontWeight:"bold"},fillStyle:"#ffffba",strokeStyle:"#7e1212",name:"interfaceClass",list:[{text:"- name: string",name:"text",paddingLeft:10,paddingRight:10,paddingTop:10,paddingBottom:10,rectInParent:{x:0,y:0,width:"100%",height:"50%",rotate:0},font:{fontFamily:"Arial",color:"#222222",textAlign:"left",textBaseline:"top"}},{text:"+ setName(name: string): void",name:"text",paddingLeft:10,paddingRight:10,paddingTop:10,paddingBottom:10,rectInParent:{x:0,y:"50%",width:"100%",height:"50%",rotate:0},font:{fontFamily:"Arial",color:"#222222",textAlign:"left",textBaseline:"top"}}]}}]},{name:"图表控件（echarts）",expand:!0,show:!0,list:[{name:"折线图",icon:"t-icon t-line-chart",id:48,data:{text:"折线图",rect:{width:300,height:200},name:"echarts",data:{echarts:{option:{xAxis:{type:"category",data:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"]},yAxis:{type:"value"},series:[{data:[820,932,901,934,1290,1330,1320],type:"line"}]}}}}},{name:"柱状图",icon:"t-icon t-bar-chart",id:49,data:{text:"柱状图",rect:{width:300,height:200},name:"echarts",data:{echarts:{option:{color:["#3398DB"],tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",data:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],axisTick:{alignWithLabel:!0}}],yAxis:[{type:"value"}],series:[{name:"直接访问",type:"bar",barWidth:"60%",data:[10,52,200,334,390,330,220]}]}}}}},{name:"饼图",icon:"t-icon t-pie-chart",id:50,data:{text:"饼图",rect:{width:200,height:200},name:"echarts",data:{echarts:{option:{tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},legend:{orient:"vertical",x:"left",data:["直接访问","邮件营销","联盟广告","视频广告","搜索引擎"]},series:[{name:"访问来源",type:"pie",radius:["50%","70%"],avoidLabelOverlap:!1,label:{normal:{show:!1,position:"center"},emphasis:{show:!0,textStyle:{fontSize:"30",fontWeight:"bold"}}},labelLine:{normal:{show:!1}},data:[{value:335,name:"直接访问"},{value:310,name:"邮件营销"},{value:234,name:"联盟广告"},{value:135,name:"视频广告"},{value:1548,name:"搜索引擎"}]}]}}}}},{name:"仪表盘",icon:"t-icon t-dashboard-chart",id:51,data:{text:"仪表盘",rect:{width:300,height:300},name:"echarts",data:{echarts:{option:{tooltip:{formatter:"{a} <br/>{b} : {c}%"},toolbox:{feature:{restore:{},saveAsImage:{}}},series:[{name:"业务指标",type:"gauge",detail:{formatter:"{value}%"},data:[{value:50,name:"完成率"}]}]}}}}}]}],i=[{name:"componentData内容为画布数据topology.toComponent函数执行结果",image:"http://topology.le5le.com/assets/img/favicon.ico",componentData:{animateCycleIndex:0,animateDuration:0,animateFrames:[],animateType:"",borderRadius:0,children:[{animateCycleIndex:0,animateDuration:0,animateFrames:[],animateType:"",bkType:0,borderRadius:10,dash:0,data:"",eventFns:["link","doAnimate","doFn","doWindowFn"],events:[],fillStyle:"",font:{background:"",color:"#222",fontFamily:'"Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial',fontSize:12,fontStyle:"normal",fontWeight:"normal",lineHeight:1.5,textAlign:"center",textBaseline:"middle"},fullIconRect:{center:{x:446,y:276},ex:586,ey:326,height:100,width:280,x:306,y:226},fullTextRect:{center:{x:446,y:276},ex:586,ey:326,height:100,width:280,x:306,y:226},globalAlpha:1,gradientAngle:0,gradientRadius:.01,iconRect:{center:{x:356,y:276},ex:406,ey:326,height:100,width:100,x:306,y:226},iconSize:0,id:"cc43e7b",imageAlign:"center",lineDashOffset:0,lineWidth:1,locked:0,name:"rectangle",offsetRotate:0,paddingBottom:0,paddingBottomNum:0,paddingLeft:0,paddingLeftNum:0,paddingRight:0,paddingRightNum:0,paddingTop:0,paddingTopNum:0,parentId:"dde822",rect:{center:{x:446,y:276},ex:586,ey:326,height:100,width:280,x:306,y:226},rectInParent:{height:"100%",rect:{center:{x:446,y:276},ex:586,ey:326,height:100,width:280,x:306,y:226},rotate:0,width:"93.33333333333333%",x:"0%",y:"0%"},rotate:0,stand:!1,strokeStyle:"#222",tags:[],text:"",textOffsetX:0,textOffsetY:0,textRect:{center:{x:496,y:276},ex:586,ey:326,height:100,width:180,x:406,y:226},type:0,visible:!0,zRotate:0},{animateCycleIndex:0,animateDuration:0,animateFrames:[],animateType:"",bkType:0,borderRadius:10,dash:0,data:"",eventFns:["link","doAnimate","doFn","doWindowFn"],events:[],fillStyle:"#1890ffff",font:{background:"",color:"#222",fontFamily:'"Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial',fontSize:12,fontStyle:"normal",fontWeight:"normal",lineHeight:1.5,textAlign:"center",textBaseline:"middle"},fullIconRect:{center:{x:316,y:276},ex:326,ey:326,height:100,width:20,x:306,y:226},fullTextRect:{center:{x:316,y:276},ex:326,ey:326,height:100,width:20,x:306,y:226},globalAlpha:1,gradientAngle:0,gradientRadius:.01,iconRect:{center:{x:356,y:276},ex:406,ey:326,height:100,width:100,x:306,y:226},iconSize:0,id:"6db48f07",imageAlign:"center",lineDashOffset:0,lineWidth:0,locked:0,name:"rectangle",offsetRotate:0,paddingBottom:0,paddingBottomNum:0,paddingLeft:0,paddingLeftNum:0,paddingRight:0,paddingRightNum:0,paddingTop:0,paddingTopNum:0,parentId:"dde822",rect:{center:{x:316,y:276},ex:326,ey:326,height:100,width:20,x:306,y:226},rectInParent:{height:"100%",rect:{center:{x:316,y:276},ex:326,ey:326,height:100,width:20,x:306,y:226},rotate:0,width:"6.666666666666667%",x:"0%",y:"0%"},rotate:0,rotatedAnchors:[{direction:4,x:306,y:276},{direction:1,x:316,y:226},{direction:2,x:326,y:276},{direction:3,x:316,y:326}],stand:!1,strokeStyle:"transparent",tags:[],text:"",textOffsetX:0,textOffsetY:0,textRect:{center:{x:366,y:276},ex:326,ey:326,height:100,width:-80,x:406,y:226},type:0,visible:!0,zRotate:0},{TID:"cacbba",anchors:[{direction:4,x:321,y:276},{direction:1,x:332,y:227},{direction:2,x:343,y:276},{direction:3,x:332,y:325}],animateCycleIndex:0,animateDuration:0,animateFrames:[],animateType:"",bkType:0,borderRadius:0,dash:0,data:"",eventFns:["link","doAnimate","doFn","doWindowFn"],events:[],fillStyle:"#fff",font:{background:"",color:"#222",fontFamily:'"Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial',fontSize:12,fontStyle:"normal",fontWeight:"normal",lineHeight:1.5,textAlign:"center",textBaseline:"middle"},fullIconRect:{center:{x:332,y:276},ex:343,ey:325,height:98,width:22,x:321,y:227},fullTextRect:{center:{x:332,y:276},ex:343,ey:325,height:98,width:22,x:321,y:227},globalAlpha:1,gradientAngle:0,gradientRadius:.01,iconRect:{center:{x:370,y:276},ex:419,ey:325,height:98,width:98,x:321,y:227},iconSize:0,id:"3dd5e967",imageAlign:"center",lineDashOffset:0,lineWidth:0,locked:0,name:"rectangle",offsetRotate:0,paddingBottom:0,paddingBottomNum:0,paddingLeft:0,paddingLeftNum:0,paddingRight:0,paddingRightNum:0,paddingTop:0,paddingTopNum:0,parentId:"dde822",rect:{center:{x:332,y:276},ex:343,ey:325,height:98,width:22,x:321,y:227},rectInParent:{height:"98%",rect:{center:{x:332,y:276},ex:343,ey:325,height:98,width:22,x:321,y:227},rotate:0,width:"7.333333333333333%",x:"5%",y:"1%"},rotate:0,rotatedAnchors:[{direction:4,x:321,y:276},{direction:1,x:332,y:227},{direction:2,x:343,y:276},{direction:3,x:332,y:325}],stand:!1,strokeStyle:"transparent",tags:[],text:"",textOffsetX:0,textOffsetY:0,textRect:{center:{x:381,y:276},ex:343,ey:325,height:98,width:-76,x:419,y:227},type:0,visible:!0,zRotate:0},{TID:"cacbba",anchors:[{direction:4,x:343,y:256},{direction:1,x:393,y:241},{direction:2,x:443,y:256},{direction:3,x:393,y:271}],animateCycleIndex:0,animateDuration:0,animateFrames:[],animateType:"",bkType:0,borderRadius:0,dash:0,data:"",eventFns:["link","doAnimate","doFn","doWindowFn"],events:[],fillStyle:"",font:{background:"",color:"#222",fontFamily:'"Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial',fontSize:24,fontStyle:"normal",fontWeight:"bold",lineHeight:1.5,textAlign:"left",textBaseline:"middle"},fullTextRect:{center:{x:393,y:256},ex:443,ey:271,height:30,width:100,x:343,y:241},globalAlpha:1,gradientAngle:0,gradientRadius:.01,iconRect:{center:{x:0,y:0},ex:0,ey:0,height:0,width:0,x:0,y:0},iconSize:0,id:"c55bc38",imageAlign:"center",lineDashOffset:0,lineWidth:1,locked:0,name:"text",offsetRotate:0,paddingBottom:0,paddingBottomNum:0,paddingLeft:0,paddingLeftNum:0,paddingRight:0,paddingRightNum:0,paddingTop:0,paddingTopNum:0,parentId:"dde822",rect:{center:{x:393,y:256},ex:443,ey:271,height:30,width:100,x:343,y:241},rectInParent:{height:"30%",rect:{center:{x:393,y:256},ex:443,ey:271,height:30,width:100,x:343,y:241},rotate:0,width:"33.333333333333336%",x:"12.333333333333334%",y:"15%"},rotate:0,rotatedAnchors:[{direction:4,x:343,y:256},{direction:1,x:393,y:241},{direction:2,x:443,y:256},{direction:3,x:393,y:271}],stand:!1,strokeStyle:"#222",tags:[],text:"文字",textOffsetX:0,textOffsetY:0,textRect:{center:{x:393,y:267.25},ex:443,ey:271,height:7.5,width:100,x:343,y:263.5},type:0,visible:!0,zRotate:0},{TID:"cacbba",anchors:[{direction:4,x:343,y:295},{direction:1,x:393,y:280},{direction:2,x:443,y:295},{direction:3,x:393,y:310}],animateCycleIndex:0,animateDuration:0,animateFrames:[],animateType:"",bkType:0,borderRadius:0,dash:0,data:"",eventFns:["link","doAnimate","doFn","doWindowFn"],events:[],fillStyle:"",font:{background:"",color:"#222",fontFamily:'"Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial',fontSize:12,fontStyle:"normal",fontWeight:"normal",lineHeight:1.5,textAlign:"left",textBaseline:"middle"},fullTextRect:{center:{x:393,y:295},ex:443,ey:310,height:30,width:100,x:343,y:280},globalAlpha:1,gradientAngle:0,gradientRadius:.01,iconRect:{center:{x:0,y:0},ex:0,ey:0,height:0,width:0,x:0,y:0},iconSize:0,id:"5ceeeba6",imageAlign:"center",lineDashOffset:0,lineWidth:1,locked:0,name:"text",offsetRotate:0,paddingBottom:0,paddingBottomNum:0,paddingLeft:0,paddingLeftNum:0,paddingRight:0,paddingRightNum:0,paddingTop:0,paddingTopNum:0,parentId:"dde822",rect:{center:{x:393,y:295},ex:443,ey:310,height:30,width:100,x:343,y:280},rectInParent:{height:"30%",rect:{center:{x:393,y:295},ex:443,ey:310,height:30,width:100,x:343,y:280},rotate:0,width:"33.333333333333336%",x:"12.333333333333334%",y:"54%"},rotate:0,rotatedAnchors:[{direction:4,x:343,y:295},{direction:1,x:393,y:280},{direction:2,x:443,y:295},{direction:3,x:393,y:310}],stand:!1,strokeStyle:"#222",tags:[],text:"描述文字",textOffsetX:0,textOffsetY:0,textRect:{center:{x:393,y:306.25},ex:443,ey:310,height:7.5,width:100,x:343,y:302.5},type:0,visible:!0,zRotate:0},{animateCycleIndex:0,animateDuration:0,animateFrames:[],animateType:"",bkType:0,borderRadius:0,children:[{animateCycleIndex:0,animateDuration:0,animateFrames:[],animateType:"",bkType:0,borderRadius:0,dash:0,data:"",elementRendered:!1,eventFns:["link","doAnimate","doFn","doWindowFn"],events:[],fillStyle:"#1890ffff",font:{background:"",color:"#222",fontFamily:'"Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial',fontSize:12,fontStyle:"normal",fontWeight:"normal",lineHeight:1.5,textAlign:"center",textBaseline:"middle"},fullTextRect:{center:{x:586,y:290},ex:593.1428571428572,ey:297.1428571428571,height:14.285714285714286,width:14.285714285714286,x:578.8571428571429,y:282.85714285714283},globalAlpha:1,gradientAngle:0,gradientRadius:.01,iconRect:{center:{x:586,y:295},ex:591,ey:300,height:10,width:10,x:581,y:290},iconSize:0,id:"a7c3847",imageAlign:"center",lineDashOffset:0,lineWidth:1,name:"circle",offsetRotate:0,paddingBottom:10,paddingBottomNum:10,paddingLeft:10,paddingLeftNum:10,paddingRight:10,paddingRightNum:10,paddingTop:10,paddingTopNum:10,parentId:"653bb315",rect:{center:{x:586,y:290},ex:596,ey:300,height:20,width:20,x:576,y:280},rectInParent:{height:"100%",rect:{center:{x:593,y:447},ex:603,ey:457,height:20,width:20,x:583,y:437},rotate:0,width:"100%",x:"0%",y:"0%"},stand:!1,strokeStyle:"transparent",tags:[],text:"",textOffsetX:0,textOffsetY:0,textRect:{center:{x:586,y:294.16666666666663},ex:591,ey:295,height:1.666666666666667,width:10,x:581,y:293.3333333333333},type:0,visible:!0,zRotate:0}],dash:0,data:"",eventFns:["link","doAnimate","doFn","doWindowFn"],events:[],fillStyle:"#fff",font:{background:"",color:"#222",fontFamily:'"Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial',fontSize:12,fontStyle:"normal",fontWeight:"normal",lineHeight:1.5,textAlign:"center",textBaseline:"middle"},fullTextRect:{center:{x:586,y:290},ex:600.2857142857142,ey:304.2857142857143,height:28.571428571428573,width:28.571428571428573,x:571.7142857142857,y:275.7142857142857},globalAlpha:1,gradientAngle:0,gradientRadius:.01,iconRect:{center:{x:586,y:290},ex:596,ey:300,height:20,width:20,x:576,y:280},iconSize:0,id:"653bb315",imageAlign:"center",lineDashOffset:0,lineWidth:1,locked:0,name:"circle",offsetRotate:0,paddingBottom:10,paddingBottomNum:10,paddingLeft:10,paddingLeftNum:10,paddingRight:10,paddingRightNum:10,paddingTop:10,paddingTopNum:10,parentId:"dde822",rect:{center:{x:586,y:290},ex:606,ey:310,height:40,width:40,x:566,y:270},rectInParent:{height:"40%",rect:{center:{x:586,y:290},ex:606,ey:310,height:40,width:40,x:566,y:270},rotate:0,width:"13.333333333333334%",x:"86.66666666666667%",y:"44%"},stand:!1,strokeStyle:"",tags:[],text:"",textOffsetX:0,textOffsetY:0,textRect:{center:{x:586,y:300.83333333333337},ex:596,ey:305,height:8.333333333333334,width:20,x:576,y:296.6666666666667},type:0,visible:!0,zRotate:0}],dash:0,data:"",elementRendered:!1,eventFns:["link","doAnimate","doFn","doWindowFn"],events:[],fillStyle:"",font:{background:"",color:"",fontFamily:'"Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial',fontSize:12,fontStyle:"normal",fontWeight:"normal",lineHeight:1.5,textAlign:"center",textBaseline:"middle"},fullIconRect:{center:{x:456,y:276},ex:606,ey:326,height:100,width:300,x:306,y:226},fullTextRect:{center:{x:456,y:276},ex:606,ey:326,height:100,width:300,x:306,y:226},globalAlpha:1,gradientAngle:0,gradientRadius:.01,iconRect:{center:{x:456,y:263.5},ex:606,ey:301,height:75,width:300,x:306,y:226},imageAlign:"center",lineDashOffset:0,lineWidth:1,name:"combine",rect:{center:{x:456,y:276},ex:606,ey:326,height:100,width:300,x:306,y:226},strokeStyle:"transparent",textOffsetX:0,textOffsetY:0,textRect:{center:{x:456,y:313.5},ex:606,ey:326,height:25,width:300,x:306,y:301},type:0,visible:!0,zRotate:0}}],o=[{image:"https://iconfont.alicdn.com/t/d2ffc78f-ce7a-4b02-94c9-7a2224bf8485.png"}]},"698c":function(e,t,a){"use strict";a("ae3b")},"6c89":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"clients-subscriptions"},[a("el-card",{staticClass:"el-card--self tabs-card"},[a("el-row",[a("el-col",{staticClass:"card-subtitle",attrs:{span:12}},[e._v(" "+e._s(e.$t("clients.currentSubs"))+" ")]),a("el-col",{staticClass:"oper-btn-group",attrs:{span:12}},[a("el-button",{attrs:{size:"mini",type:"success",icon:"el-icon-refresh",plain:""},on:{click:e.reload}},[e._v(" "+e._s(e.$t("oper.refresh"))+" ")]),a("el-button",{attrs:{size:"mini",type:"success",icon:"el-icon-plus",plain:""},on:{click:e.open}},[e._v(" "+e._s(e.$t("clients.addSubs"))+" ")])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.$store.state.loading,expression:"$store.state.loading"}],staticClass:"client-sub-table",attrs:{border:"",data:e.tableData}},[a("el-table-column",{attrs:{prop:"topic",label:e.$t("subscriptions.topic")}}),a("el-table-column",{attrs:{prop:"qos",label:e.$t("subscriptions.qoS")}}),a("el-table-column",{attrs:{width:"120px",label:e.$t("oper.oper")},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("el-button",{attrs:{size:"mini",type:"danger",plain:""},on:{click:function(t){return e.handleUnsub(n)}}},[e._v(" "+e._s(e.$t("oper.unsubscribe"))+" ")])]}}])})],1)],1),a("el-dialog",{staticClass:"create-subscribe",attrs:{title:e.$t("clients.addSubs"),width:"400px",visible:e.addVisible},on:{"update:visible":function(t){e.addVisible=t}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleAdd(t)}}},[a("el-form",{ref:"record",staticClass:"el-form--public",attrs:{model:e.record,rules:e.rules,size:"small","label-position":"top"}},[a("el-form-item",{attrs:{prop:"topic",label:e.$t("subscriptions.topic")}},[a("el-input",{attrs:{placeholder:"Topic"},model:{value:e.record.topic,callback:function(t){e.$set(e.record,"topic",t)},expression:"record.topic"}})],1),a("el-form-item",{attrs:{prop:"qos",label:"QoS"}},[a("emq-select",{staticClass:"el-select--public",attrs:{"popper-class":"el-select--public",size:"small",field:{list:[0,1,2]}},model:{value:e.record.qos,callback:function(t){e.$set(e.record,"qos",t)},expression:"record.qos"}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"cache-btn",attrs:{type:"text"},on:{click:e.handleClose}},[e._v(" "+e._s(e.$t("oper.cancel"))+" ")]),a("el-button",{staticClass:"confirm-btn",attrs:{type:"success",loading:e.$store.state.loading},on:{click:e.handleAdd}},[e._v(" "+e._s(e.$t("oper.add"))+" ")])],1)],1)],1)},r=[],s=(a("ac1f"),a("5319"),a("85dd")),i={name:"ClientsSubscriptions",components:{EmqSelect:s["default"]},props:{clientId:{type:String,required:!0},tableData:{type:Array,required:!0},reload:{type:Function,default:function(){}},mountpoint:{type:String,default:""}},data:function(){return{addVisible:!1,record:{topic:"",qos:0},rules:{clientid:{required:!0,message:this.$t("oper.pleaseEnter")},topic:{required:!0,message:this.$t("oper.pleaseEnter")}}}},methods:{handleUnsub:function(e){var t=this;this.$msgbox.confirm(this.$t("oper.unsubscribeConfirm"),this.$t("oper.warning"),{type:"warning"}).then((function(){var a=e.topic,n=e.clientid,r=t.mountpoint?a.replace(t.mountpoint,""):a,s={topic:r,clientid:n};t.$httpPost("/mqtt/unsubscribe",s).then((function(){t.reload()})).catch((function(){}))})).catch((function(){}))},open:function(){this.addVisible=!0,this.record.clientid=this.clientId},handleAdd:function(){var e=this;this.$refs.record.validate((function(t){if(t){var a={};Object.assign(a,e.record),e.$httpPost("/mqtt/subscribe",a).then((function(){e.handleClose(),e.reload()})).catch((function(){}))}}))},handleClose:function(){this.$refs.record.resetFields(),this.addVisible=!1}}},o=i,l=(a("6e31"),a("2877")),c=Object(l["a"])(o,n,r,!1,null,null,null);t["default"]=c.exports},"6e31":function(e,t,a){"use strict";a("df14")},"6e72":function(e,t,a){},"6efd":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"topo-editor"},[a("WresizePanel3",{staticClass:"full-height",scopedSlots:e._u([{key:"left",fn:function(){return[a("TopoToolbox",{ref:"topoToolbox",staticClass:"topo-toolbox"})]},proxy:!0},{key:"center",fn:function(){return[a("TopoMain",{ref:"topoMain",staticClass:"topo-main"})]},proxy:!0},{key:"right",fn:function(){return[a("TopoProperties",{ref:"topoProperties",staticClass:"topo-properties"})]},proxy:!0}])})],1)},r=[],s=a("b690"),i=a("f9d4"),o=a("ccbf"),l=a("4604"),c={name:"TopoEditor",components:{WresizePanel3:s["default"],TopoToolbox:i["default"],TopoMain:o["default"],TopoProperties:l["default"]},data:function(){return{}},methods:{}},u=c,d=(a("83fc"),a("2877")),p=Object(d["a"])(u,n,r,!1,null,"5115976d",null);t["default"]=p.exports},"748d":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"webSocket-container"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{xs:24,sm:24,md:12,lg:8,xl:8}},[a("el-alert",{attrs:{type:"success",closable:!1}},[e._v(" webSocket连接"+e._s(e.status)+"！ ")]),a("br"),a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"地址"}},[a("el-input",{attrs:{disabled:""},model:{value:e.url,callback:function(t){e.url=t},expression:"url"}})],1),a("el-form-item",{attrs:{label:"消息",prop:"message"}},[a("el-input",{model:{value:e.form.message,callback:function(t){e.$set(e.form,"message",t)},expression:"form.message"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("发送消息")])],1),a("el-form-item",{attrs:{label:"返回信息汇总"}},[e._v(" "+e._s(e.data)+" ")])],1)],1)],1)],1)},r=[],s={name:"WebSocket",components:{},data:function(){return{url:"ws://123.207.136.134:9010/ajaxchattest",webSocket:null,data:[],status:"",form:{message:null},rules:{message:[{required:!0,message:"请输入消息",trigger:"blur"}]}}},created:function(){this.init()},destroyed:function(){this.webSocket.close()},methods:{submit:function(){var e=this;this.$refs["form"].validate((function(t){if(!t)return!1;e.send(e.form.message)}))},init:function(){var e=this.url;this.webSocket=new WebSocket(e),this.webSocket.onmessage=this.onmessage,this.webSocket.onopen=this.onopen,this.webSocket.onerror=this.onerror,this.webSocket.onclose=this.onclose},onopen:function(){this.status="成功"},onerror:function(){this.status="失败",this.initWebSocket()},onmessage:function(e){var t=e.data;this.data.push(t.substring(0,t.length-66))},send:function(e){this.webSocket.send(e)},onclose:function(e){this.status="断开"}}},i=s,o=a("2877"),l=Object(o["a"])(i,n,r,!1,null,null,null);t["default"]=l.exports},"7e79":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"nodelist"},[a("div",{staticClass:"operation"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"}}),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete"}}),a("el-button",{attrs:{type:"danger",icon:"el-icon-date"}})],1)])},r=[],s={data:function(){return{}},mounted:function(){},methods:{}},i=s,o=(a("a41d"),a("2877")),l=Object(o["a"])(i,n,r,!1,null,"c089d56a",null);t["default"]=l.exports},"7eff":function(e,t,a){e.exports={"menu-color":"rgba(255,255,255,.95)","menu-color-active":"rgba(255,255,255,.95)","menu-background":"#282c34","column-second-menu-background":"#fff"}},"7f0c":function(e,t,a){"use strict";a("c829")},"80ae":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"alarms-view"},[a("div",{staticClass:"page-title"},[e._v(" "+e._s(e.$translateTitle("leftbar.alarms"))+" ")]),a("div",{staticClass:"table-title"},[e._v(" "+e._s(e.$translateTitle("analysis.currentAlarms"))+" ")]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{border:"",data:e.currentTableData}},[a("el-table-column",{attrs:{prop:"name",label:e.$translateTitle("analysis.alarmName")}}),a("el-table-column",{attrs:{prop:"message","min-width":"140px",label:e.$translateTitle("analysis.alarmMessage"),"show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("el-popover",{attrs:{placement:"top",trigger:"hover",width:"160","open-delay":500}},[e._l(n.details,(function(t,n){return a("div",{key:n},[e._v(" "+e._s(n)+": "+e._s(t)+" ")])})),a("span",{staticClass:"details",attrs:{slot:"reference"},slot:"reference"},[a("i",{staticClass:"iconfont icon-bangzhu"})])],2),a("span",[e._v(e._s(n.message))])]}}])}),a("el-table-column",{attrs:{prop:"node","min-width":"60px",label:e.$translateTitle("clients.node"),"show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"activate_at",label:e.$translateTitle("analysis.activateAt")},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(e.dateFormat(a.activate_at))+" ")]}}])}),a("el-table-column",{scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(e.getDuration(a.duration))+" ")]}}])},[a("span",{attrs:{slot:"header"},slot:"header"},[e._v(" "+e._s(e.$translateTitle("analysis.duration"))+" "),a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[e._v(" "+e._s(e.$translateTitle("analysis.durationTips"))+" "),a("i",{staticClass:"el-icon-question",attrs:{slot:"reference"},slot:"reference"})])],1)]),a("el-table-column",{attrs:{fixed:"right",width:"120px",label:e.$translateTitle("oper.oper")},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row,r=t.$index,s=t._self;return[a("el-popover",{ref:"popover-"+r,attrs:{placement:"right",trigger:"click"}},[a("p",[e._v(e._s(e.$translateTitle("analysis.confirmDeactivate")))]),a("div",{staticStyle:{"text-align":"right"}},[a("el-button",{staticClass:"cache-btn",attrs:{size:"mini",type:"text"},on:{click:function(e){s.$refs["popover-"+r].doClose()}}},[e._v(" "+e._s(e.$translateTitle("oper.cancel"))+" ")]),a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(t){return e.handleCancelAlarm(n,r,s)}}},[e._v(" "+e._s(e.$translateTitle("oper.confirm"))+" ")])],1),a("el-button",{attrs:{slot:"reference",size:"mini",type:"danger",plain:""},slot:"reference"},[e._v(" "+e._s(e.$translateTitle("analysis.deactivate"))+" ")])],1)]}}])})],1),a("div",{staticClass:"table-title"},[e._v(" "+e._s(e.$translateTitle("analysis.historicalAlarm"))+" "),a("el-button",{staticClass:"table-oper",attrs:{size:"mini",type:"danger",plain:"",disabled:!e.historicalTableData.length},on:{click:e.handleClearAll}},[e._v(" "+e._s(e.$translateTitle("analysis.clearAll"))+" ")])],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{border:"",data:e.historicalTableData}},[a("el-table-column",{attrs:{prop:"name",label:e.$translateTitle("analysis.alarmName")}}),a("el-table-column",{attrs:{prop:"message","min-width":"140px",label:e.$translateTitle("analysis.alarmMessage"),"show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("el-popover",{attrs:{placement:"top",trigger:"hover",width:"160","open-delay":500}},[e._l(n.details,(function(t,n){return a("div",{key:n},[e._v(" "+e._s(n)+": "+e._s(t)+" ")])})),a("span",{staticClass:"details",attrs:{slot:"reference"},slot:"reference"},[a("i",{staticClass:"iconfont icon-bangzhu"})])],2),a("span",[e._v(e._s(n.message))])]}}])}),a("el-table-column",{attrs:{prop:"node","min-width":"60px",label:e.$translateTitle("clients.node"),"show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"activate_at",label:e.$translateTitle("analysis.activateAt")},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(e.dateFormat(a.activate_at))+" ")]}}])}),a("el-table-column",{attrs:{prop:"deactivate_at",label:e.$translateTitle("analysis.deactivateAt")},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(e.dateFormat(a.deactivate_at))+" ")]}}])})],1)],1)},r=[],s=(a("159b"),a("b0c0"),a("5c96")),i=a("ed08"),o=a("926a"),l={name:"AlarmsView",components:{"el-table":s["Table"],"el-table-column":s["TableColumn"],"el-popover":s["Popover"],"el-tooltip":s["Tooltip"]},data:function(){return{loading:!1,currentTableData:[],historicalTableData:[],lang:window.localStorage.getItem("language")||"en"}},created:function(){this.loadData()},methods:{loadData:function(){this.loadAlarmData("activated","currentTableData"),this.loadAlarmData("deactivated","historicalTableData")},loadAlarmData:function(e,t){var a=this;this.loading=!0,this.$httpGet("/alarms/".concat(e)).then((function(e){var n=e.data,r=[];n.forEach((function(e){e.alarms.forEach((function(t){t.node=e.node,r.push(t)}))})),a[t]=r,a.loading=!1})).catch((function(e){a.loading=!1,a.$message.error(e||a.$translateTitle("error.networkError"))}))},getDuration:function(e){return Object(i["getDateDiff"])(e/1e3)},dateFormat:function(e){return"number"!==typeof e&&"infinity"===e?"":Object(o["default"])(e/1e3,"yyyy-mm-dd HH:MM:ss")},handleCancelAlarm:function(e,t,a){var n=this,r={node:e.node,name:e.name};this.$httpPost("/alarms/deactivated",r).then((function(){a.$refs["popover-".concat(t)].doClose(),n.loadData()})).catch((function(e){n.$message.error(e||n.$translateTitle("error.networkError"))}))},handleClearAll:function(){var e=this;this.$confirm(this.$translateTitle("analysis.confirmClear"),this.$translateTitle("oper.warning"),{confirmButtonClass:"confirm-btn",cancelButtonClass:"cache-btn el-button--text",type:"warning"}).then((function(){e.$httpDelete("/alarms/deactivated").then((function(){e.loadData()})).catch((function(t){e.$message.error(t||e.$translateTitle("error.networkError"))}))})).catch((function(){}))}}},c=l,u=(a("698c"),a("2877")),d=Object(u["a"])(c,n,r,!1,null,null,null);t["default"]=d.exports},"814b":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"user-management-container"},[a("vab-query-form",[a("vab-query-form-left-panel",{attrs:{span:12}},[a("el-button",{attrs:{icon:"el-icon-plus",type:"primary"},on:{click:e.handleEdit}},[e._v(" 添加 ")]),a("el-button",{attrs:{icon:"el-icon-delete",type:"danger"},on:{click:e.handleDelete}},[e._v(" 批量删除 ")])],1),a("vab-query-form-right-panel",{attrs:{span:12}},[a("el-form",{attrs:{inline:!0,model:e.queryForm},nativeOn:{submit:function(e){e.preventDefault()}}},[a("el-form-item",[a("el-input",{attrs:{clearable:"",placeholder:"请输入用户名"},model:{value:e.queryForm.username,callback:function(t){e.$set(e.queryForm,"username","string"===typeof t?t.trim():t)},expression:"queryForm.username"}})],1),a("el-form-item",[a("el-button",{attrs:{icon:"el-icon-search",type:"primary"},on:{click:e.queryData}},[e._v(" 查询 ")])],1)],1)],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.list,border:""},on:{"selection-change":e.setSelectRows},scopedSlots:e._u([{key:"empty",fn:function(){return[a("el-image",{staticClass:"vab-data-empty",attrs:{src:"http://dgiot-1253666439.cos.ap-shanghai-fsi.myqcloud.com/platform/assets/empty_images/data_empty.png"}})]},proxy:!0}])},[a("el-table-column",{attrs:{align:"center","show-overflow-tooltip":"",type:"selection"}}),a("el-table-column",{attrs:{align:"center",label:"序号",width:"55"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.$index;return[e._v(" "+e._s(a+1)+" ")]}}])}),a("el-table-column",{attrs:{align:"center",label:"id",prop:"id","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{align:"center",label:"用户名",prop:"username","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{align:"center",label:"邮箱",prop:"email","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{align:"center",label:"角色","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return e._l(n.roles,(function(t,n){return a("el-tag",{key:n},[e._v(" "+e._s(t)+" ")])}))}}])}),a("el-table-column",{attrs:{align:"center",label:"修改时间",prop:"datatime","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{align:"center",label:"操作","show-overflow-tooltip":"",width:"85"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleEdit(n)}}},[e._v("编辑")]),a("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleDelete(n)}}},[e._v("删除")])]}}])})],1),a("el-pagination",{attrs:{"current-page":e.queryForm.pageNo,layout:e.layout,"page-size":e.queryForm.pageSize,total:e.total,background:""},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}}),a("edit",{ref:"edit",on:{"fetch-data":e.fetchData}})],1)},r=[],s=a("1da1"),i=(a("a15b"),a("d81d"),a("96cf"),a("953d")),o=a("e276"),l={name:"UserManagement",components:{Edit:o["default"]},data:function(){return{list:[],listLoading:!0,layout:"total, sizes, prev, pager, next, jumper",total:0,selectRows:"",queryForm:{pageNo:1,pageSize:10,username:""}}},created:function(){this.fetchData()},methods:{setSelectRows:function(e){this.selectRows=e},handleEdit:function(e){e.id?this.$refs["edit"].showEdit(e):this.$refs["edit"].showEdit()},handleDelete:function(e){var t=this;if(e.id)this.$baseConfirm("你确定要删除当前项吗",null,Object(s["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(i["doDelete"])({ids:e.id});case 2:return n=a.sent,r=n.msg,t.$baseMessage(r,"success",!1,"vab-hey-message-success"),a.next=7,t.fetchData();case 7:case"end":return a.stop()}}),a)}))));else{if(!(this.selectRows.length>0))return this.$baseMessage("未选中任何行","error",!1,"vab-hey-message-error"),!1;var a=this.selectRows.map((function(e){return e.id})).join();this.$baseConfirm("你确定要删除选中项吗",null,Object(s["a"])(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(i["doDelete"])({ids:a});case 2:return n=e.sent,r=n.msg,t.$baseMessage(r,"success",!1,"vab-hey-message-success"),e.next=7,t.fetchData();case 7:case"end":return e.stop()}}),e)}))))}},handleSizeChange:function(e){this.queryForm.pageSize=e,this.fetchData()},handleCurrentChange:function(e){this.queryForm.pageNo=e,this.fetchData()},queryData:function(){this.queryForm.pageNo=1,this.fetchData()},fetchData:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.listLoading=!0,t.next=3,Object(i["getList"])(e.queryForm);case 3:a=t.sent,n=a.data,r=a.totalCount,e.list=n,e.total=r,e.listLoading=!1;case 9:case"end":return t.stop()}}),t)})))()}}},c=l,u=a("2877"),d=Object(u["a"])(c,n,r,!1,null,null,null);t["default"]=d.exports},"82ab":function(e,t,a){},"83fc":function(e,t,a){"use strict";a("98e1")},8405:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},r=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{staticClass:"language-json"},[a("code",[a("span",{staticClass:"token punctuation"},[e._v("{")]),e._v("\n  "),a("span",{staticClass:"token property"},[e._v('"hidden"')]),a("span",{staticClass:"token operator"},[e._v(":")]),e._v(" "),a("span",{staticClass:"token boolean"},[e._v("true")]),a("span",{staticClass:"token punctuation"},[e._v(",")]),e._v(" "),a("span",{staticClass:"token comment"},[e._v("//是否显示在菜单中显示隐藏路由（默认值：false）")]),e._v("\n  "),a("span",{staticClass:"token property"},[e._v('"menuHidden"')]),a("span",{staticClass:"token operator"},[e._v(":")]),e._v(" "),a("span",{staticClass:"token boolean"},[e._v("false")]),a("span",{staticClass:"token punctuation"},[e._v(",")]),e._v(" "),a("span",{staticClass:"token comment"},[e._v("//是否显示在菜单中显示隐藏一级路由（默认值：false，除分栏布局有效）")]),e._v("\n  "),a("span",{staticClass:"token property"},[e._v('"alwaysShow"')]),a("span",{staticClass:"token operator"},[e._v(":")]),e._v(" "),a("span",{staticClass:"token boolean"},[e._v("true")]),a("span",{staticClass:"token punctuation"},[e._v(",")]),e._v(" "),a("span",{staticClass:"token comment"},[e._v("//当只有一级子路由时是否显示父路由是否显示在菜单中显示路由（默认值：false）")]),e._v("\n  "),a("span",{staticClass:"token property"},[e._v('"name"')]),a("span",{staticClass:"token operator"},[e._v(":")]),e._v(" "),a("span",{staticClass:"token string"},[e._v('"Demo"')]),a("span",{staticClass:"token punctuation"},[e._v(",")]),e._v(" "),a("span",{staticClass:"token comment"},[e._v("//首字母大写，一定要与vue文件的name对应起来，用于noKeepAlive缓存控制（该项特别重要）")]),e._v("\n  "),a("span",{staticClass:"token property"},[e._v('"meta"')]),a("span",{staticClass:"token operator"},[e._v(":")]),e._v(" "),a("span",{staticClass:"token punctuation"},[e._v("{")]),e._v("\n    "),a("span",{staticClass:"token property"},[e._v('"title"')]),a("span",{staticClass:"token operator"},[e._v(":")]),e._v(" "),a("span",{staticClass:"token string"},[e._v('"title"')]),a("span",{staticClass:"token punctuation"},[e._v(",")]),e._v(" "),a("span",{staticClass:"token comment"},[e._v("//菜单、面包屑、多标签页显示的名称")]),e._v("\n    "),a("span",{staticClass:"token property"},[e._v('"roles"')]),a("span",{staticClass:"token operator"},[e._v(":")]),e._v(" "),a("span",{staticClass:"token punctuation"},[e._v("[")]),a("span",{staticClass:"token string"},[e._v('"admin"')]),a("span",{staticClass:"token punctuation"},[e._v(",")]),e._v(" "),a("span",{staticClass:"token string"},[e._v('"..."')]),a("span",{staticClass:"token punctuation"},[e._v("]")]),a("span",{staticClass:"token punctuation"},[e._v(",")]),e._v(" "),a("span",{staticClass:"token comment"},[e._v("//当config/settings.js中rolesControl配置开启时，用于控制角色（简写）")]),e._v("\n    "),a("span",{staticClass:"token property"},[e._v('"roles"')]),a("span",{staticClass:"token operator"},[e._v(":")]),e._v(" "),a("span",{staticClass:"token punctuation"},[e._v("{")]),e._v("\n      "),a("span",{staticClass:"token comment"},[e._v("//当config/settings.js中rolesControl配置开启时，用于控制角色（全写）")]),e._v("\n      "),a("span",{staticClass:"token property"},[e._v('"role"')]),a("span",{staticClass:"token operator"},[e._v(":")]),e._v(" "),a("span",{staticClass:"token punctuation"},[e._v("[")]),a("span",{staticClass:"token string"},[e._v('"admin"')]),a("span",{staticClass:"token punctuation"},[e._v(",")]),e._v(" "),a("span",{staticClass:"token string"},[e._v('"..."')]),a("span",{staticClass:"token punctuation"},[e._v("]")]),a("span",{staticClass:"token punctuation"},[e._v(",")]),e._v("\n      "),a("span",{staticClass:"token property"},[e._v('"ability"')]),a("span",{staticClass:"token operator"},[e._v(":")]),e._v(" "),a("span",{staticClass:"token punctuation"},[e._v("[")]),a("span",{staticClass:"token string"},[e._v('"READ"')]),a("span",{staticClass:"token punctuation"},[e._v(",")]),e._v(" "),a("span",{staticClass:"token string"},[e._v('"WRITE"')]),a("span",{staticClass:"token punctuation"},[e._v(",")]),e._v(" "),a("span",{staticClass:"token string"},[e._v('"DELETE"')]),a("span",{staticClass:"token punctuation"},[e._v("]")]),a("span",{staticClass:"token punctuation"},[e._v(",")]),e._v(" "),a("span",{staticClass:"token comment"},[e._v('//ability: ["READ","WRITE"],')]),e._v("\n      "),a("span",{staticClass:"token property"},[e._v('"mode"')]),a("span",{staticClass:"token operator"},[e._v(":")]),e._v(" "),a("span",{staticClass:"token string"},[e._v('"allOf"')]),e._v(" "),a("span",{staticClass:"token comment"},[e._v("//allOf: 数组内所有角色都拥有，返回True oneOf: 数组内拥有任一角色，返回True(等价第1种数据) except: 不拥有数组内任一角色，返回True(取反)")]),e._v("\n    "),a("span",{staticClass:"token punctuation"},[e._v("}")]),a("span",{staticClass:"token punctuation"},[e._v(",")]),e._v("\n    "),a("span",{staticClass:"token property"},[e._v('"remixIcon"')]),a("span",{staticClass:"token operator"},[e._v(":")]),e._v(" "),a("span",{staticClass:"token string"},[e._v('""')]),a("span",{staticClass:"token punctuation"},[e._v(",")]),e._v(" "),a("span",{staticClass:"token comment"},[e._v("//旧版remix图标")]),e._v("\n    "),a("span",{staticClass:"token property"},[e._v('"icon"')]),a("span",{staticClass:"token operator"},[e._v(":")]),e._v(" "),a("span",{staticClass:"token string"},[e._v('""')]),a("span",{staticClass:"token punctuation"},[e._v(",")]),e._v(" "),a("span",{staticClass:"token comment"},[e._v("//新版")]),e._v("\n    "),a("span",{staticClass:"token property"},[e._v('"isCustomSvgIcon"')]),a("span",{staticClass:"token operator"},[e._v(":")]),e._v(" "),a("span",{staticClass:"token boolean"},[e._v("false")]),a("span",{staticClass:"token punctuation"},[e._v(",")]),e._v(" "),a("span",{staticClass:"token comment"},[e._v("//旧版，是否是自定义svg图标（默认值：false，如果设置true，那么需要把你的svg拷贝到icon/remixIcon下，然后remixIcon字段配置上你的图标名）")]),e._v("\n    "),a("span",{staticClass:"token property"},[e._v('"isCustomSvg"')]),a("span",{staticClass:"token operator"},[e._v(":")]),e._v(" "),a("span",{staticClass:"token boolean"},[e._v("false")]),a("span",{staticClass:"token punctuation"},[e._v(",")]),e._v(" "),a("span",{staticClass:"token comment"},[e._v("//新版，是否是自定义svg图标（默认值：false，如果设置true，那么需要把你的svg拷贝到icon/remixIcon下，然后remixIcon字段配置上你的图标名）")]),e._v("\n    "),a("span",{staticClass:"token property"},[e._v('"noKeepAlive"')]),a("span",{staticClass:"token operator"},[e._v(":")]),e._v(" "),a("span",{staticClass:"token boolean"},[e._v("true")]),a("span",{staticClass:"token punctuation"},[e._v(",")]),e._v(" "),a("span",{staticClass:"token comment"},[e._v("//当前路由是否不缓存（默认值：false）")]),e._v("\n    "),a("span",{staticClass:"token property"},[e._v('"affix"')]),a("span",{staticClass:"token operator"},[e._v(":")]),e._v(" "),a("span",{staticClass:"token boolean"},[e._v("true")]),a("span",{staticClass:"token punctuation"},[e._v(",")]),e._v(" "),a("span",{staticClass:"token comment"},[e._v("//当前路由是否固定多标签页（旧版）")]),e._v("\n    "),a("span",{staticClass:"token property"},[e._v('"noCLosable"')]),a("span",{staticClass:"token operator"},[e._v(":")]),e._v(" "),a("span",{staticClass:"token boolean"},[e._v("true")]),a("span",{staticClass:"token punctuation"},[e._v(",")]),e._v(" "),a("span",{staticClass:"token comment"},[e._v("//当前路由是否可关闭多标签页，同上（新版）")]),e._v("\n    "),a("span",{staticClass:"token property"},[e._v('"badge"')]),a("span",{staticClass:"token operator"},[e._v(":")]),e._v(" "),a("span",{staticClass:"token string"},[e._v('"New"')]),a("span",{staticClass:"token punctuation"},[e._v(",")]),e._v(" "),a("span",{staticClass:"token comment"},[e._v("//badge小标签（只支持子级）")]),e._v("\n    "),a("span",{staticClass:"token property"},[e._v('"tabHidden"')]),a("span",{staticClass:"token operator"},[e._v(":")]),e._v(" "),a("span",{staticClass:"token boolean"},[e._v("true")]),a("span",{staticClass:"token punctuation"},[e._v(",")]),e._v(" "),a("span",{staticClass:"token comment"},[e._v("//当前路由是否不显示多标签页")]),e._v("\n    "),a("span",{staticClass:"token property"},[e._v('"activeMenu"')]),a("span",{staticClass:"token operator"},[e._v(":")]),e._v(" "),a("span",{staticClass:"token string"},[e._v('""')]),a("span",{staticClass:"token punctuation"},[e._v(",")]),e._v(" "),a("span",{staticClass:"token comment"},[e._v("//高亮指定菜单")]),e._v("\n    "),a("span",{staticClass:"token property"},[e._v('"dot"')]),a("span",{staticClass:"token operator"},[e._v(":")]),e._v(" "),a("span",{staticClass:"token boolean"},[e._v("false")]),a("span",{staticClass:"token punctuation"},[e._v(",")]),e._v(" "),a("span",{staticClass:"token comment"},[e._v("//小圆点")]),e._v("\n    "),a("span",{staticClass:"token property"},[e._v('"dynamicNewTab"')]),a("span",{staticClass:"token operator"},[e._v(":")]),e._v(" "),a("span",{staticClass:"token boolean"},[e._v("false")]),e._v(" "),a("span",{staticClass:"token comment"},[e._v("// 动态传参路由是否新开标签页")]),e._v("\n  "),a("span",{staticClass:"token punctuation"},[e._v("}")]),a("span",{staticClass:"token punctuation"},[e._v(",")]),e._v("\n  "),a("span",{staticClass:"token property"},[e._v('"children"')]),a("span",{staticClass:"token operator"},[e._v(":")]),e._v(" "),a("span",{staticClass:"token punctuation"},[e._v("[")]),a("span",{staticClass:"token punctuation"},[e._v("]")]),e._v("\n"),a("span",{staticClass:"token punctuation"},[e._v("}")]),e._v("\n")])])])}],s={name:"MenuCollapse"},i=s,o=(a("ac14"),a("2877")),l=Object(o["a"])(i,n,r,!1,null,"52407806",null);t["default"]=l.exports},8488:function(e,t,a){"use strict";a("9974")},"88a2":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"menu-management-container"},[a("el-alert",{attrs:{closable:!1,title:"演示环境仅做基础功能展示，若想实现不同角色的真实菜单配置，需将config/setting.config.js路由加载模式改为all模式，由后端全面接管路由渲染与角色权限控制",type:"success"}}),a("el-row",[a("el-col",{attrs:{lg:4,md:8,sm:24,xl:4,xs:24}},[a("el-tree",{attrs:{data:e.data,"default-expanded-keys":["root"],props:e.defaultProps,"node-key":"id"},on:{"node-click":e.handleNodeClick}})],1),a("el-col",{attrs:{lg:20,md:16,sm:24,xl:20,xs:24}},[a("vab-query-form",[a("vab-query-form-top-panel",{attrs:{span:12}},[a("el-button",{attrs:{icon:"el-icon-plus",type:"primary"},on:{click:e.handleEdit}},[e._v(" 添加 ")])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.list,"tree-props":{children:"children",hasChildren:"hasChildren"},border:"","default-expand-all":"","row-key":"path"},scopedSlots:e._u([{key:"empty",fn:function(){return[a("el-image",{staticClass:"vab-data-empty",attrs:{src:"http://dgiot-1253666439.cos.ap-shanghai-fsi.myqcloud.com/platform/assets/empty_images/data_empty.png"}})]},proxy:!0}])},[a("el-table-column",{attrs:{align:"center",label:"标题",prop:"meta.title","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{align:"center",label:"name",prop:"name","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{align:"center",label:"路径",prop:"path","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{align:"center",label:"是否隐藏","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("span",[e._v(" "+e._s(n.hidden?"是":"否")+" ")])]}}])}),a("el-table-column",{attrs:{align:"center",label:"是否一直显示当前节点","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("span",[e._v(" "+e._s(n.alwaysShow?"是":"否")+" ")])]}}])}),a("el-table-column",{attrs:{align:"center",label:"vue文件路径",prop:"component","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{align:"center",label:"重定向",prop:"redirect","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{align:"center",label:"图标","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[n.meta?a("span",[n.meta.icon?a("vab-icon",{attrs:{icon:n.meta.icon}}):e._e()],1):e._e()]}}])}),a("el-table-column",{attrs:{align:"center",label:"是否固定","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[n.meta?a("span",[e._v(" "+e._s(n.meta.noClosable?"是":"否")+" ")]):e._e()]}}])}),a("el-table-column",{attrs:{align:"center",label:"是否无缓存","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[n.meta?a("span",[e._v(" "+e._s(n.meta.noKeepAlive?"是":"否")+" ")]):e._e()]}}])}),a("el-table-column",{attrs:{align:"center",label:"badge","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[n.meta?a("span",[e._v(" "+e._s(n.meta.badge)+" ")]):e._e()]}}])}),a("el-table-column",{attrs:{align:"center",label:"操作","show-overflow-tooltip":"",width:"85"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleEdit(n)}}},[e._v("编辑")]),a("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleDelete(n)}}},[e._v("删除")])]}}])})],1)],1)],1),a("edit",{ref:"edit",on:{"fetch-data":e.fetchData}})],1)},r=[],s=a("1da1"),i=(a("96cf"),a("8665"),a("754e")),o=a("e4d1"),l={name:"MenuManagement",components:{Edit:o["default"]},data:function(){return{data:[],defaultProps:{children:"children",label:"label"},list:[],listLoading:!0}},created:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(i["getTree"])();case 2:return a=t.sent,e.data=a.data,t.next=6,e.fetchData();case 6:case"end":return t.stop()}}),t)})))()},methods:{handleEdit:function(e){e.path&&e.component?this.$refs["edit"].showEdit(e):this.$refs["edit"].showEdit()},handleDelete:function(e){var t=this;e.path&&this.$baseConfirm("你确定要删除当前项吗",null,Object(s["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(i["doDelete"])({paths:e.path});case 2:return n=a.sent,r=n.msg,t.$baseMessage(r,"success",!1,"vab-hey-message-success"),a.next=7,t.fetchData();case 7:case"end":return a.stop()}}),a)}))))},fetchData:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.listLoading=!0,t.next=3,getList();case 3:a=t.sent,n=a.data,e.list=n,e.listLoading=!1;case 7:case"end":return t.stop()}}),t)})))()},handleNodeClick:function(){this.fetchData()}}},c=l,u=a("2877"),d=Object(u["a"])(c,n,r,!1,null,null,null);t["default"]=d.exports},"899f":function(e,t,a){e.exports={"menu-color":"rgba(255,255,255,.95)","menu-color-active":"rgba(255,255,255,.95)","menu-background":"#282c34","column-second-menu-background":"#fff"}},"8b16":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"listeners-view"},[a("div",{staticClass:"page-title"},[e._v(" "+e._s(e.$translateTitle("leftbar.listeners"))+" "),a("el-select",{staticClass:"select-radius",attrs:{placeholder:e.$translateTitle("select.placeholder"),disabled:e.$store.state.loading},on:{change:e.loadListeners},model:{value:e.nodeName,callback:function(t){e.nodeName=t},expression:"nodeName"}},e._l(e.nodes,(function(e){return a("el-option",{key:e.node,attrs:{label:e.node,value:e.node}})})),1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.$store.state.loading,expression:"$store.state.loading"}],attrs:{border:"",data:e.listeners}},[a("el-table-column",{attrs:{prop:"protocol",width:"240",label:e.$translateTitle("listeners.protocol")}}),a("el-table-column",{attrs:{prop:"listen_on","min-width":"240",label:e.$translateTitle("listeners.listenOn")}}),a("el-table-column",{attrs:{prop:"max_conns","min-width":"180",label:e.$translateTitle("listeners.maxConnections")}}),a("el-table-column",{attrs:{prop:"current_conns","min-width":"120",label:e.$translateTitle("listeners.currentConnections")}})],1)],1)},r=[],s=a("5530"),i=a("5880"),o=a("5c96"),l={name:"ListenersView",components:{"el-select":o["Select"],"el-option":o["Option"],"el-table":o["Table"],"el-table-column":o["TableColumn"]},data:function(){return{nodeName:"",nodes:[],listeners:[]}},methods:Object(s["a"])(Object(s["a"])({},Object(i["mapActions"])(["CURRENT_NODE"])),{},{loadData:function(){var e=this;this.$httpGet("/nodes").then((function(t){e.nodeName=e.$store.state.nodeName||t.data[0].node,e.nodes=t.data,e.loadListeners()})).catch((function(t){e.$message.error(t||e.$translateTitle("error.networkError"))}))},loadListeners:function(){var e=this;this.CURRENT_NODE(this.nodeName),this.$httpGet("/nodes/".concat(this.nodeName,"/listeners")).then((function(t){e.listeners=t.data})).catch((function(t){e.$message.error(t||e.$translateTitle("error.networkError"))}))}}),created:function(){this.loadData()}},c=l,u=(a("fa22"),a("2877")),d=Object(u["a"])(c,n,r,!1,null,null,null);t["default"]=d.exports},"8de9":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"rolescontrol"},[a("div",{staticClass:"search"},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入内容",clearable:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary",icon:"el-icon-search"}},[e._v(" "+e._s(e.$translateTitle("developer.search"))+" ")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.addcontrol}},[e._v(" "+e._s(e.$translateTitle("developer.add"))+" ")])],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{size:"mini",data:e.treeData,"tree-props":{children:"children",hasChildren:"hasChildren"},border:"","default-expand-all":"","row-key":"objectId"}},[a("el-table-column",{attrs:{align:"center",label:"name","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("span",[e._v(" "+e._s(n.name)+" ")])]}}])}),a("el-table-column",{attrs:{align:"center",label:"alias","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("span",[e._v(" "+e._s(n.alias)+" ")])]}}])}),a("el-table-column",{attrs:{align:"center",label:"createdTime","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("span",[e._v(e._s(n.createtime))])]}}])}),a("el-table-column",{attrs:{align:"center",label:"操作","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("el-button",{attrs:{size:"mini",type:"success",icon:"el-icon-edit"},on:{click:function(t){return e.handleEdit(n)}}},[e._v(" "+e._s(e.$translateTitle("developer.edit"))+" ")]),a("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete",disabled:""},on:{click:function(t){return e.handleDelete(n)}}},[e._v(" "+e._s(e.$translateTitle("developer.delete"))+" ")])]}}])})],1),a("el-dialog",{attrs:{title:e.$translateTitle("developer.edit"),visible:e.roleEdit,width:"28%"},on:{"update:visible":function(t){e.roleEdit=t}}},[a("el-form",{attrs:{model:e.form}},[a("el-form-item",{attrs:{label:e.$translateTitle("user.name"),"label-width":e.formLabelWidth}},[a("el-input",{staticStyle:{width:"300px"},attrs:{autocomplete:"off",disabled:""},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:e.$translateTitle("user.Remarks"),"label-width":e.formLabelWidth}},[a("el-input",{staticStyle:{width:"300px"},attrs:{autocomplete:"off"},model:{value:e.form.alias,callback:function(t){e.$set(e.form,"alias",t)},expression:"form.alias"}})],1),a("el-form-item",{attrs:{label:e.$translateTitle("developer.describe"),"label-width":e.formLabelWidth}},[a("el-input",{staticStyle:{width:"300px"},attrs:{rows:2,autocomplete:"off",type:"textarea"},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.roleEdit=!1}}},[e._v(" "+e._s(e.$translateTitle("developer.cancel"))+" ")]),a("el-button",{attrs:{type:"primary"},on:{click:e.updaterole}},[e._v(" "+e._s(e.$translateTitle("developer.determine"))+" ")])],1)],1)],1)},r=[],s=a("1da1"),i=(a("96cf"),a("4de4"),a("b0c0"),a("a4d3"),a("e01a"),a("d81d"),a("1ec2")),o=a("ed08"),l={components:{},data:function(){return{listLoading:!1,formLabelWidth:"120px",roleEdit:!1,form:{name:"",alias:"",description:""},search:"",defaultExpandAll:!0,key:1,permissionid:"",columns:[{label:"Name",key:"alias",expand:!0,align:"left"},{label:"Alias",key:"name",width:200,align:"center"},{label:"Created time",key:"scope"},{label:"Operation",key:"operation"}],data:[]}},computed:{treeData:function(){var e=JSON.parse(JSON.stringify(this.data));return e.filter((function(t){var a=e.filter((function(e){return t.objectId==e.parent}));return a.length>0&&(t.children=a),0==t.parent}))}},mounted:function(){this.getcontrolrole()},methods:{handleEdit:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.permissionid=e.objectId,a.next=3,Object(i["getPermission"])(e.objectId);case 3:n=a.sent,t.form.name=n.name,t.form.description=n.description,t.form.alias=n.alias,t.roleEdit=!0;case 8:case"end":return a.stop()}}),a)})))()},handleDelete:function(e){},addcontrol:function(){},getcontrolrole:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.listLoading=!0,e.data=[],t.next=4,Object(i["queryPermission"])({limit:1e3});case 4:a=t.sent,n=a.results,e.listLoading=!1,n?n.map((function(t){var a={};a.name=t.name,a.alias=t.alias,a.objectId=t.objectId,a.parent=t.parent.objectId,a.createtime=Object(o["utc2beijing"])(t.createdAt),e.data.push(a)})):e.data=[];case 8:case"end":return t.stop()}}),t)})))()},updaterole:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(i["putPermission"])(e.permissionid,{alias:e.form.alias,description:e.form.description});case 2:a=t.sent,a&&e.$message({type:"success",message:"更新成功"}),e.roleEdit=!1;case 5:case"end":return t.stop()}}),t)})))()}}},c=l,u=(a("2760"),a("2877")),d=Object(u["a"])(c,n,r,!1,null,"e34c39ec",null);t["default"]=d.exports},"98e1":function(e,t,a){},9974:function(e,t,a){},"9bde":function(t,a,n){"use strict";n.r(a);var r,s,i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"things-parse"},[a("el-dialog",{attrs:{visible:e.apiDialog,title:"新增Api",width:"15%"},on:{"update:visible":function(t){e.apiDialog=t}}},[a("el-form",{ref:"formLabelAlign",attrs:{rules:e.rules,model:e.formLabelAlign,size:"mini","label-position":"left","label-width":"80px"}},[a("el-form-item",{attrs:{label:"模块名称",prop:"name"}},[a("el-input",{model:{value:e.formLabelAlign.name,callback:function(t){e.$set(e.formLabelAlign,"name",t)},expression:"formLabelAlign.name"}})],1),a("el-form-item",{attrs:{label:"编程语言",prop:"language"}},[a("el-select",{attrs:{placeholder:"活动区域"},model:{value:e.formLabelAlign.language,callback:function(t){e.$set(e.formLabelAlign,"language",t)},expression:"formLabelAlign.language"}},e._l(e.formLabelAlign.languageList,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.submitFormApi("formLabelAlign")}}},[e._v(" 创建 ")]),a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.apiDialog=!1}}},[e._v("取消")])],1)],1),a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:7}},[a("el-button",{attrs:{type:"primary"},on:{click:e.addApi}},[e._v("新增Api")]),a("el-table",{ref:"singleTable",staticStyle:{width:"100%"},attrs:{data:e.AllDict,"highlight-current-row":""},on:{"current-change":e.handleCurrentChange}},[a("el-table-column",{attrs:{align:"center",label:"类型",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.type))])]}}])}),a("el-table-column",{attrs:{label:"mod",width:"120","show-overflow-tooltip":!0,align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.mod))])]}}])}),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",title:"调测"},on:{click:function(a){return e.handleTest(t.$index,t.row.type,t.row.mod)}}},[a("vab-icon",{attrs:{icon:"bug-line"}})],1),a("el-button",{attrs:{size:"mini",type:"primary",title:"发布"},on:{click:function(a){return e.handleRelease(t.$index,t.row.type,t.row.mod)}}},[a("vab-icon",{attrs:{icon:"run-line"}})],1),a("el-button",{attrs:{size:"mini",type:"danger",title:"下架"},on:{click:function(a){return e.handleDelete(t.$index,t.row.type,t.row.mod)}}},[a("vab-icon",{attrs:{icon:"delete-bin-2-fill"}})],1)]}}])})],1)],1),a("el-col",{attrs:{span:17}},[a("div",{staticClass:"protolheader"},[a("el-tabs",{attrs:{size:"mini"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"设计",name:"design"}},[a("JsonEditor",{ref:"jsonEdit",model:{value:e.itemSwagger,callback:function(t){e.itemSwagger=t},expression:"itemSwagger"}})],1),a("el-tab-pane",{attrs:{label:"编码",name:"code"}},[a("el-form",{ref:"thingsParseModel",attrs:{inline:!0,model:e.thingsParseModel,rules:e.thingsParseRules}}),a("div",[a("div",{staticStyle:{background:"#ffffff"}},[a("label",{attrs:{id:"plug-name"}})]),a("pre",{staticClass:"ace_editor",staticStyle:{"min-height":"480px","margin-bottom":"0"},attrs:{id:"editor"}},[a("textarea",{staticClass:"ace_text-input"})]),a("div",{staticStyle:{background:"#ffffff"}},[a("label",{attrs:{id:"plug-name"}})]),a("div",{staticStyle:{padding:"5px","margin-right":"80px",color:"#c2be9e",background:"#272822","border-top":"1px solid #dddddd"}},[a("span",[e._v(e._s(e.$translateTitle("product.controloutput")))])]),a("pre",{staticClass:"ace_editor",staticStyle:{"min-height":"200px","margin-top":"0","margin-bottom":"0"},attrs:{id:"editor2"}},[a("textarea",{staticClass:"ace_text-input"})])])],1),a("el-tab-pane",{attrs:{label:"测试",name:"swagger"}},[a("iframe",{attrs:{src:e.swaggerPath,width:"100%",height:"700vh"}})])],1)],1)])],1)],1)},o=[],l=n("1da1"),c=(n("96cf"),n("a434"),n("b0c0"),n("d81d"),n("4de4"),n("99af"),n("d3b7"),n("3ca3"),n("ddb0"),n("ac1f"),n("5319"),n("e0e9")),u=n("1285"),d=n("89e8"),p=n("af07"),m=n("4d2d"),f=n("bb22"),h=(n("30f8"),""),g="",b={name:"ThingsParse",components:{JsonEditor:p["default"]},props:{},data:function(){var e=function(e,t,a){var n=/[0-9a-zA-Z]/;n.test(t)?a():a(new Error("协议名称由数字和字母组合"))};return{fullscreenLoading:!1,rules:{name:[{required:!0,validator:e,trigger:"blur"}],language:[{required:!0,message:"请选择编程语言",trigger:"change"}]},labelPosition:"right",formLabelAlign:{languageList:["python","java","ruby"],language:"python",name:"",region:"",type:""},apiDialog:!1,activeName:"design",itemSwagger:{},currentRow:null,AllDict:[],productName:"",form:{Productname:"",ProductKey:"",ProductAll:0},swaggerPath:"https://prod.iotn2n.com/swagger/#/",decoderstart:0,decodertotal:0,decoderlength:10,protolchannel:[],productdetail:{},thingsParseModel:{name:"",version:"",desc:"",resource:!1},thingsParseRules:{name:[{required:!0,message:"请输入协议名称",trigger:"blur"},{validator:e,trigger:"blur"}]},dialogTableVisible:!1,gridData:[],protoldialog:!1}},computed:{tableFilterData:function(){return null}},mounted:function(){s=ace.edit("editor2"),s.session.setMode("ace/mode/python"),s.setTheme("ace/theme/monokai"),s.setReadOnly(!0),s.setOptions({enableBasicAutocompletion:!0,enableSnippets:!0,enableLiveAutocompletion:!0}),this.getAllDict(),this.setPath(),this.$route.query.activeName&&(this.activeName=this.$route.query.activeName)},methods:{setPath:function(){this.swaggerPath=location.origin+"/swagger/#/"},handleDelete:function(e,t,a){var n=this;this.$confirm("确认要下架该api吗？").then(function(){var r=Object(l["a"])(regeneratorRuntime.mark((function r(s){var i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(m["delExproto"])({type:t,mod:a,version:"debug"});case 2:i=r.sent,i&&n.AllDict.splice(e,1);case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()).catch((function(e){}))},handleTest:function(e,t,a){var n=this;return Object(l["a"])(regeneratorRuntime.mark((function e(){var i,o,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i={code:Base64.encode(r.getValue()),mod:a,swagger:JSON.parse(n.itemSwagger),type:t},e.next=3,Object(m["putExproto"])(i);case 3:o=e.sent,l=o.results,l?(s.setValue(Base64.decode(l)),n.$message({showClose:!0,message:"调测api成功",type:"success"})):n.$message.error("api有错误,请检查");case 6:case"end":return e.stop()}}),e)})))()},handleRelease:function(e,t,a){var n=this;return Object(l["a"])(regeneratorRuntime.mark((function e(){var s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s={code:Base64.encode(r.getValue()),mod:a,swagger:JSON.parse(n.itemSwagger),type:t},e.next=3,Object(m["postExproto"])(s);case 3:i=e.sent,i?n.$message({showClose:!0,message:"发布api成功",type:"success"}):n.$message.error("api有错误,请检查");case 5:case"end":return e.stop()}}),e)})))()},addApi:function(){this.apiDialog=!0},submitFormApi:function(t){var a=this;this.$refs[t].validate(function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(n){var r,s,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r={python:"IyBjb2Rpbmc9dXRmOAppbXBvcnQgb3MKCmRlZiBwb3N0KGFyZ3Msc2Vzc2lvbixlbnYpOgogICAgI2JvZHkgPSBqc29uLmxvYWRzKGJhc2U2NC5iNjRkZWNvZGUoYXJncykuZGVjb2RlKCJ1dGYtOCIpKQogICAgI3ByaW50KGJvZHkpCiAgICAjc3RyYm9keSA9ICd7fScuZm9ybWF0KGJvZHkpCiAgICAjZW5ib2R5ID0gIGJhc2U2NC5iNjRlbmNvZGUoc3RyYm9keS5lbmNvZGUoJ3V0Zi04JykpCiAgICAjcHJpbnQoZW5ib2R5KQogICAgI3N0YXRlID0ganNvbi5sb2FkcyhiYXNlNjQuYjY0ZGVjb2RlKGVudikuZGVjb2RlKCJ1dGYtOCIpKQogICAgI3ByaW50KHN0YXRlKQogICAgIyByZXN0dXJsID0gc3RhdGVbJ3JvbGVzJ11bMF1bJ3RhZyddWydhcHBjb25maWcnXVsncmVzdCddCiAgICAjIHByaW50KHJlc3R1cmwpCiAgICAjIHMuaGVhZGVycy51cGRhdGUoeyJzZXNzaW9uVG9rZW4iOiBzZXNzaW9uLCAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nfSkKICAgICMgcnQgPSBzLmdldCgne30vY2xhc3Nlcy9EZXZpY2U/b3JkZXI9Y3JlYXRlZEF0JmxpbWl0PTEwJnNraXA9MCcuZm9ybWF0KHJlc3R1cmwpLAogICAgIyAgICAgICAgICAgICAgcGFyYW1zPXsnb3JkZXInOiAnY3JlYXRlZEF0JywgfSkKICAgICMgZm9yIHJvdyBpbiAocnQuanNvbigpWydyZXN1bHRzJ10pOgogICAgIyAgICAgcHJpbnQocm93KQogICAgcHJpbnQoYXJncykKICAgIHByaW50KHNlc3Npb24pCiAgICBwcmludChlbnYpCiAgICByZXR1cm4gYXJncwoKZGVmIG1haW4oKToKICAgICN7Im5hbWUiOiJzaHV3YSJ9CiAgICBhcmd2cyA9ICdleUp1WVcxbElqb2ljMmgxZDJFaWZRPT0nCiAgICByZXR1cm4gIHBvc3QoYXJndnMsICdzZXNzaW9uJywnZW52JykKCmRlZiBleGl0KCk6CiAgICBvcy5fZXhpdCgwKQoKaWYgX19uYW1lX18gPT0gIl9fbWFpbl9fIjoKICAgIG1haW4oKQ==",java:"",ruby:""},"/python_"+a.formLabelAlign.name,s={code:r[a.formLabelAlign.language],mod:a.formLabelAlign.name,swagger:{definitions:{},paths:{"/python_hello":{post:{description:"Python测试API",parameters:[{description:"生成报告",in:"body",name:"data",required:!0,schema:{properties:{name:{description:"姓名",example:"shuwa",required:!0,type:"string"}},type:"object"}}],responses:{200:{description:"Returns operation status"},400:{description:"Bad Request"},401:{description:"Unauthorized"},403:{description:"Forbidden"},500:{description:"Server Internal error"}},summary:"Python测试API",tags:["EXPROTO"]}}},tags:[{description:"扩展编程",name:"EXPROTO"}]},type:a.formLabelAlign.language},!n){t.next=8;break}return t.next=6,Object(m["getExproto"])(s);case 6:i=t.sent,i?(a.apiDialog=!1,a.$message({type:"success",message:"新增api成功"}),a.getAllDict()):a.$message({type:"error",message:"新增api失败"+e});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},handleCurrentChange:function(e){this.itemSwagger=e.swagger,r=ace.edit("editor"),r.session.setMode("ace/mode/python"),r.setTheme("ace/theme/monokai"),r.setOptions({enableBasicAutocompletion:!0,enableSnippets:!0,enableLiveAutocompletion:!0}),r.setValue(Base64.decode(e.code)),r.gotoLine(r.session.getLength())},toggle:function(e){},getAllDict:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(m["getExproto"])({type:"python",mod:"all",version:"debug"});case 2:a=t.sent,n=a.results,n&&(e.AllDict=n,e.handleCurrentChange(n[0]));case 5:case"end":return t.stop()}}),t)})))()},Industry:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.option=[],a={limit:1e3,where:{"data.key":"category"}},t.next=4,Object(c["queryDict"])(a);case 4:n=t.sent,r=n.results,r.map((function(t){var a={};a.value=t.type,a.label=t.data.CategoryName,a.id=t.data.Id,a.parentid=t.data.SuperId,e.option.push(a)}));case 7:case"end":return t.stop()}}),t)})))()},getProDetail:function(e){var t=this;this.productId=e,r=ace.edit("editor"),r.session.setMode("ace/mode/erlang"),r.setTheme("ace/theme/monokai"),r.setOptions({enableBasicAutocompletion:!0,enableSnippets:!0,enableLiveAutocompletion:!0}),this.$get_object("Product",e).then((function(e){if(e){for(var a in t.productName=e.name,e)t.productdetail[a]=e[a];t.option.map((function(e){t.productdetail.category==e.value&&(t.productdetail.category=e.label)})),t.productdetail.createdAt=t.utc2beijing(e.createdAt),t.productdetail.id=e.id,t.dynamicReg=e.dynamicReg,t.productdetail.isshow=0,t.form.Productname=e.name,t.ProductSecret=e.productSecret,t.form.Productkey=t.productId,t.productimg=e.icon,e.decoder?(g=e.decoder.code,t.thingsParseModel.name=e.decoder.name,t.thingsParseModel.version=e.decoder.version,t.thingsParseModel.desc=e.decoder.desc):g="JSUlLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQolJSUgQGNvcHlyaWdodCAoQykgMjAxOCwgPHNodXdhPgolJSUgQGRvYwolJSUg5Y2P6K6u6Kej5p6QRGVtbwolJSUgQGVuZAolJSUgQ3JlYXRlZCA6IDA4LiDljYHkuIDmnIggMjAxOCAxNDo0OQolJSUtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCi1tb2R1bGUoc2h1d2FfZGVtb19kZWNvZGVyKS4KLWF1dGhvcigic2h1d2EiKS4KLWRlZmluZShNU0dfVFlQRSwgPDwiREVNTyI+PikuCi1wcm90b2NvbChbPDwiREVNTyI+Pl0pLgoKLWV4cG9ydChbcGFyc2VfZnJhbWUvMiwgdG9fZnJhbWUvMV0pLgoKCnBhcnNlX2ZyYW1lKEJ1ZmYsIE9wdHMpIC0+CiAgICBwYXJzZV9mcmFtZShCdWZmLCBbXSwgT3B0cykuCgoKcGFyc2VfZnJhbWUoPDw+PiwgQWNjLCBfT3B0cykgLT4KICAgIHs8PD4+LCBBY2N9OwpwYXJzZV9mcmFtZSg8PDE2IzY4LCBSZXN0L2JpbmFyeT4+ID0gQmluLCBBY2MsIF9PcHRzKSB3aGVuIGJ5dGVfc2l6ZShSZXN0KSA9PCA2IC0+CiAgICB7QmluLCBBY2N9OwpwYXJzZV9mcmFtZSg8PDE2IzY4LCBMZW46MTYvbGl0dGxlLWludGVnZXIsIExlbjoxNi9saXR0bGUtaW50ZWdlciwgMTYjNjgsIFJlc3QvYmluYXJ5Pj4gPSBCaW4sIEFjYywgT3B0cykgLT4KICAgIGNhc2UgYnl0ZV9zaXplKFJlc3QpIC0gMiA+PSBMZW4gb2YKICAgICAgICB0cnVlIC0+CiAgICAgICAgICAgIGNhc2UgUmVzdCBvZgogICAgICAgICAgICAgICAgPDxVc2VyWm9uZTpMZW4vYnl0ZXMsIENyYzo4LCAxNiMxNiwgUmVzdDEvYmluYXJ5Pj4gLT4KICAgICAgICAgICAgICAgICAgICBBY2MxID0KICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBzaHV3YV91dGlsczpnZXRfcGFyaXR5KFVzZXJab25lKSA9Oj0gQ3JjIG9mCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnVlIC0+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRnJhbWUgPSAjewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8PCJtc2d0eXBlIj4+ID0+ID9NU0dfVFlQRSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPDwiZGF0YSI+PiA9PiBVc2VyWm9uZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQWNjICsrIFtGcmFtZV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYWxzZSAtPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFjYwogICAgICAgICAgICAgICAgICAgICAgICBlbmQsCiAgICAgICAgICAgICAgICAgICAgcGFyc2VfZnJhbWUoUmVzdDEsIEFjYzEsIE9wdHMpOwogICAgICAgICAgICAgICAgXyAtPgogICAgICAgICAgICAgICAgICAgIHBhcnNlX2ZyYW1lKFJlc3QsIEFjYywgT3B0cykKICAgICAgICAgICAgZW5kOwogICAgICAgIGZhbHNlIC0+CiAgICAgICAgICAgIHtCaW4sIEFjY30KICAgIGVuZDsKcGFyc2VfZnJhbWUoPDxfOjgsIFJlc3QvYmluYXJ5Pj4sIEFjYywgT3B0cykgLT4KICAgIHBhcnNlX2ZyYW1lKFJlc3QsIEFjYywgT3B0cykuCgoKJSUg57uE6KOF5oiQ5bCB5YyFLCDlj4LmlbDkuLpNYXDlvaLlvI8KdG9fZnJhbWUoI3s8PCJtc2d0eXBlIj4+IDo9ID9NU0dfVFlQRX0gPSBGcmFtZSkgLT4KICAgIFBheWxvYWQgPSB0ZXJtX3RvX2JpbmFyeShGcmFtZSksCiAgICA8PDE2IzAzLCBQYXlsb2FkL2JpbmFyeSwgMTYjMjM+Pi4=",t.productdetail.thing||(t.productdetail.thing={properties:[]}),t.wmxData=t.productdetail.thing.properties.filter((function(e){return e.name&&e.dataType})),r.setValue(Base64.decode(g)),r.gotoLine(r.session.getLength()),t.queryDeviceCount(t.productId)}}))},queryDeviceCount:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(u["getDeviceCountByProduct"])(e);case 2:t.form.ProductAll=a.sent;case 3:case"end":return a.stop()}}),a)})))()},editordata:function(e){this.thingsParseModel.name=e.attributes.data.name,this.thingsParseModel.version=e.attributes.data.version,this.thingsParseModel.desc=e.attributes.data.desc,this.thingsParseModel.resource=e.attributes.data.enable,r.setValue(Base64.decode(e.attributes.data.code)),this.dialogTableVisible=!1},getAllunit:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.allunit=[],t.next=3,Object(c["getAllunit"])("unit",100);case 3:a=t.sent,n=a.results,e.allunit=n.concat([]),e.allunit.unshift({data:{Name:"无",Symbol:""}});case 7:case"end":return t.stop()}}),t)})))()},subAce:function(e,t){var a=this;this.$refs[e].validate((function(n){if(n){var i={name:e.name,version:e.version,code:Base64.encode(r.getValue()),desc:e.desc},o={decoder:i};a.$update_object("Product",a.productId,o).then((function(e){0==a.issub&&(a.$message({type:"success",message:"保存成功"}),1==t&&(h+="保存成功",s.setValue(h))),a.issub=!0})).catch((function(e){}))}else a.$message({type:"warning",message:"输入格式有误"})}))},subAce1:function(e){var t=this;this.$refs[e].validate((function(e){if(e){var a={where:{"data.name":t.formInline.name,"data.version":t.formInline.version}};t.$query_object("Dict",a).then((function(e){e.results&&e.results.length>=1?t.$message("此协议版本已存在"):t.$get_object("Product",t.productId).then((function(e){if(e){var a={name:t.formInline.name,version:t.formInline.version,code:Base64.encode(r.getValue()),desc:t.formInline.desc},n={key:t.formInline.name+":"+t.formInline.version,type:"decoder",data:a,ACL:e.ACL};t.$create_object("Dict",n).then((function(e){e.error?t.$message({type:"error",message:e.error}):t.$message({type:"success",message:"保存到公共协议库成功"})})).catch((function(e){}))}}))})).catch((function(e){}))}else t.$message({type:"warning",message:"输入格式有误"})}))},decoderSizeChange:function(e){this.decoder.length=e,this.chaxun()},devicerCurrentChange:function(e){this.decoderstart=(e-1)*this.decoderlength,this.chaxun()},updateAllChannel:function(){var e=this;if(0==this.multipleSelection.length)this.protoldialog=!1;else{var t=[];this.multipleSelection.map((function(e){t.push(new Promise((function(t,a){return Object(f["subupadte"])(e.id,"update").then((function(e){e&&t(e)})).catch((function(e){a(e)}))})))})),Promise.all(t).then((function(t){e.$message({message:"热加载成功",type:"success"}),t.length==e.multipleSelection.length&&(e.protoldialog=!1)})).catch((function(t){e.$message({message:t,type:"error"})}))}},handleSelectionChange:function(e){this.multipleSelection=e},utc2beijing:function(e){var t=new Date(+new Date(e)+288e5).toISOString().replace(/T/g," ").replace(/\.[\d]{3}Z/,"");return t},getChannelEnable:function(e,t){return 1==e.row.attributes.isEnable?"green_active":"red_active"},deletedata:function(e){var t=this;this.$del_object("Dict",e).then((function(e){e&&(t.$message("成功删除"),t.chaxun())})).catch((function(e){}))},updatesubdialog:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.protoldialog=!0,a="1",n={__type:"Pointer",className:"Product",objectId:e.productId},Object(d["getChannelCountByProduct"])(e.channellength,e.channelstart,n,a).then((function(t){e.protolchannel=t.results,e.$refs.multipleTable.toggleAllSelection()})).catch((function(t){e.$baseMessage("请求出错",t.error,3e3)}));case 4:case"end":return t.stop()}}),t)})))()},chaxun:function(){var e=this,t={count:"objectId",skip:this.decoderstart,limit:this.decoderlength,where:{type:"decoder"}};this.dialogTableVisible=!0,this.$query_object("Dict",t).then((function(t){t&&(e.decodertotal=t.count,e.gridData=t.results)})).catch((function(e){}))},protol:function(){var e=this,t="";Object(f["Compile"])(Base64.encode(r.getValue())).then((function(a){a&&(e.$message({type:"success",message:"编译成功"}),t="编译成功"+a.mod+"\r\n",e.warningeditror=a.warnings,e.warningeditror.map((function(e){t+=e+"\r\n"})),h+=t,s.setValue(h))})).catch((function(a){e.warningeditror=a.error,e.warningeditror.map((function(e){t+=e+"\r\n"})),h+=t,s.setValue(h)}))}}},v=b,y=(n("5a71"),n("2877")),w=Object(y["a"])(v,i,o,!1,null,null,null);a["default"]=w.exports},"9ce3":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"menu"},[a("el-row",[a("el-col",{attrs:{lg:24,md:24,sm:2244,xl:24,xs:24}},[a("vab-query-form",[a("vab-query-form-top-panel",{attrs:{span:12}},[a("div",{staticClass:"search"},[a("el-button",{attrs:{icon:"el-icon-s-tools",type:"primary"},on:{click:function(t){return e.toggleExpandAll(e.isdefaultExpandAll)}}},[e._v(" 展开/收起菜单 ")]),a("el-button",{attrs:{icon:"el-icon-plus",type:"primary"},on:{click:function(t){return e.handleEdit({},"one")}}},[e._v(" 新增一级菜单 ")]),a("el-button",{attrs:{type:"primary"},on:{click:e.centerUploadBox}},[e._v(" 导入菜单 "),a("i",{staticClass:"el-icon-upload el-icon--right"})]),a("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"inputer",attrs:{id:"fileExport",value:"上传菜单",type:"file"},on:{change:e.handleFileChange}})],1)])],1),e.refreshTable?a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.treeData,size:"mini","tree-props":{children:"children",hasChildren:"hasChildren"},border:"","default-sort":{prop:"orderBy",order:"ascending"},"default-expand-all":e.isdefaultExpandAll,"row-key":"objectId"},scopedSlots:e._u([{key:"empty",fn:function(){return[a("el-image",{staticClass:"vab-data-empty",attrs:{src:"http://dgiot-1253666439.cos.ap-shanghai-fsi.myqcloud.com/platform/assets/empty_images/data_empty.png"}})]},proxy:!0}],null,!1,3368913384)},[a("el-table-column",{attrs:{align:"center",fixed:"",label:"标题",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("span",[e._v(" "+e._s(n.meta.title)+" ")])]}}],null,!1,1074967671)}),a("el-table-column",{attrs:{align:"center",label:"name",prop:"name"}}),a("el-table-column",{attrs:{align:"center",label:"路径",width:"220",prop:"url","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{align:"center",label:"排序",sortable:"",prop:"orderBy"}}),a("el-table-column",{attrs:{align:"center",label:"vue文件路径",width:"400","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("span",[e._v(" "+e._s(n.meta.component)+" ")])]}}],null,!1,1940007160)}),a("el-table-column",{attrs:{align:"center","show-overflow-tooltip":"",label:"重定向",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("span",[e._v(" "+e._s(n.meta.redirect)+" ")])]}}],null,!1,2214697965)}),a("el-table-column",{attrs:{align:"center",label:"高级配置","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",[e._v(" 是否隐藏： "),a("el-tag",{attrs:{type:"success",title:"是否隐藏"}},[e._v(" "+e._s(n.meta.hidden?"是":"否")+" ")])],1),a("p",[e._v(" 当前路由是否可关闭多标签页： "),n.meta?a("el-tag",{attrs:{type:"info",title:"当前路由是否可关闭多标签页"}},[e._v(" "+e._s(n.meta.noClosable?"是":"否")+" ")]):e._e()],1),a("p",[e._v(" 是否无缓存： "),n.meta?a("el-tag",{attrs:{title:"是否无缓存"}},[e._v(" "+e._s(n.meta.noKeepAlive?"是":"否")+" ")]):e._e()],1),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{size:"medium"}},[n.meta.icon?a("vab-icon",{attrs:{icon:n.meta.icon}}):e._e()],1)],1)])]}}],null,!1,3511581679)}),a("el-table-column",{attrs:{width:"220px",fixed:"right",label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-plus",title:e.$translateTitle("menu.childrenmenu")},on:{click:function(t){return e.handleEdit(n,"addChildMenu")}}}),a("el-button",{attrs:{size:"mini",type:"success",icon:"el-icon-edit",title:e.$translateTitle("developer.edit")},on:{click:function(t){return e.handleEdit(n,"editMenu")}}}),a("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete",title:e.$translateTitle("developer.delete")+n.meta.title},on:{click:function(t){return e.handleDelete(n)}}})]}}],null,!1,2099919197)})],1):e._e()],1)],1),a("edit",{ref:"edit",on:{"fetch-data":e.fetchData}})],1)},r=[],s=a("1da1"),i=(a("96cf"),a("4de4"),a("d81d"),a("b0c0"),a("a15b"),a("b64b"),a("99af"),a("4f20")),o=a("ed08"),l=a("bc35"),c={name:"TreeTableDemo",components:{Edit:i["default"]},data:function(){return{refreshTable:"false",isdefaultExpandAll:!1,MenuForm:{name:"",url:"",roles:[],number:"",fathername:[]},list:[],listLoading:!0,data:[],defaultProps:{children:"children",label:"label"},props:{value:"objectId",label:"name",children:"children"},options:[],formLabelWidth:"120px",defaultExpandAll:!0,showCheckbox:!0,key:1,columns:[{label:"Menu name",key:"name",expand:!0,align:"left"},{label:"Menu path",key:"url",width:200,expand:!0,align:"center"},{label:"Navigation",key:"showtopmenu",expand:!0,align:"center"},{label:"Index",key:"number",expand:!0,width:100},{label:"Icon",key:"icon",expand:!0,width:100},{label:"Created time",key:"createtime",align:"center"},{label:"Operation",key:"operation",width:400}],search:"",dialogVisible:!1,tableData:[],form:{name:"",resource:"菜单",topname:"",menuroad:"",iconfont:"",number:""},parent:"",current:"",parentmenu:[{id:"0",attributes:{name:"顶级菜单"}}],originacl:[],menuid:"",originmenuurl:[],isaddmenu:!0,file:"",inputDOM:"",size:"",formData:""}},computed:{treeData:function(){var e=JSON.parse(JSON.stringify(this.data)),t=[];return t=e.filter((function(t){var a=e.filter((function(e){return t.objectId==e.parent}));return a.length>0&&(t.children=a),0==t.parent&&(t.parent="0"),0==t.parent})),t}},watch:{showCheckbox:function(e){e?this.columns.unshift({label:"Checkbox",checkbox:!0}):this.columns.shift(),this.reset()}},mounted:function(){this.fetchData(),this.originmenuurl=[],this.getoriginmenu(this.$router.options.routes),this.getRole()},methods:{toggleExpandAll:function(e){var t=this;this.refreshTable=!1,this.isdefaultExpandAll=!e,this.$nextTick((function(){t.refreshTable=!0}))},handleNodeClick:function(){this.fetchData()},getRole:function(){var e=this;Object(l["queryMenu"])({}).then((function(t){t.results.map((function(t){var a={};a.objectId=t.objectId,a.alias=t.alias,a.name=t.name,e.options.push(a)}))}))},SelectTopmenu:function(e){},getoriginmenu:function(e){var t=this;e.map((function(e){if(!e.hidden&&e.path){if("/"!=e.path){var a={};a.path=e.path,a.name=e.name,t.originmenuurl.push(a)}e.children&&t.getoriginmenu(e.children)}}))},centerUploadBox:function(){this.$refs.inputer.click()},handleFileChange:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.inputDOM=t.$refs.inputer,/\.zip$/.test(t.inputDOM.files[0].name)){e.next=6;break}return t.$message({type:"warning",message:"仅支持zip文件"}),e.abrupt("return",!1);case 6:return t.file=t.inputDOM.files[0],t.size=Math.floor(t.file.size/1024),t.formData=new FormData,t.formData.append("file",t.file),e.next=12,Object(l["add"])(t.formData);case 12:a=e.sent,a?(t.$message({type:"success",message:"菜单导入成功"}),setTimeout((function(){t.file="",t.inputDOM="",t.size="",t.formData="",t.fetchData()}),1500)):t.$message({type:"error",message:"菜单导入失败"});case 14:case"end":return e.stop()}}),e)})))()},reset:function(){++this.key},click:function(e){var t=e.row,a=Object.keys(t).map((function(e){return"<p>".concat(e,": ").concat(t[e],"</p>")})).join("");this.$notify({title:"Success",dangerouslyUseHTMLString:!0,message:a,type:"success"})},getParent:function(e,t,a){var n=this;return e.map((function(r){r.objectId==t?(a.push(r.objectId),n.getParent(e,r.parent,a)):0==r.parent&&r.objectId==t&&a.push(r.objectId)})),a.length>=1&&0!=a[0]&&a.unshift("0"),a},handleDelete:function(e){var t=this;e.children?this.$message({type:"warning",message:"请先删除此菜单中的子菜单!"}):this.$del_object("Menu",e.objectId).then((function(e){e.error?t.$message({type:"error",message:"删除失败!"}):(t.$message({type:"success",message:"删除成功!"}),t.fetchData())}))},searchvalue:function(){},handleClose:function(){this.dialogVisible=!1},handleEdit:function(e,t){this.$refs["edit"].showEdit(e,t)},fetchData:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.data=[],e.listLoading=!0,t.next=4,Object(l["queryMenu"])({});case 4:a=t.sent,n=a.results,n.map((function(t){var a=t.meta,n=void 0===a?{}:a,r=t.name,s=t.objectId,i=t.icon,l=t.parent,c=t.createdAt,u=t.orderBy,d=t.url,p={};p.name=r,p.meta=n,p.objectId=s,p.icon=i,p.parent=l.objectId,p.createtime=Object(o["utc2beijing"])(c),p.orderBy=u,p.url=d,e.data.push(p)})),e.listLoading=!1;case 8:case"end":return t.stop()}}),t)})))()}}},u=c,d=(a("62af"),a("2877")),p=Object(d["a"])(u,n,r,!1,null,"5fb7e696",null);t["default"]=p.exports},a129:function(e,t,a){"use strict";a("ba4e")},a2d5:function(e,t,a){},a41d:function(e,t,a){"use strict";a("06ce")},a759:function(e,t,a){"use strict";a("0706")},a75e:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"topics"},[e._v(e._s(e.pageTitle))])},r=[],s={name:"Topics",components:{},data:function(){return{pageTitle:"topics"}},computed:{},mounted:function(){},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){},methods:{}},i=s,o=(a("59f9"),a("2877")),l=Object(o["a"])(i,n,r,!1,null,"50bff37c",null);t["default"]=l.exports},aaa8:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"departmentforuser"},[e._v("岗位管理")])},r=[],s={data:function(){return{}},mounted:function(){},methods:{}},i=s,o=a("2877"),l=Object(o["a"])(i,n,r,!1,null,"290543ff",null);t["default"]=l.exports},aaa82:function(e,t,a){"use strict";a("4e3c")},ac14:function(e,t,a){"use strict";a("1aa0")},ae3b:function(e,t,a){e.exports={"menu-color":"rgba(255,255,255,.95)","menu-color-active":"rgba(255,255,255,.95)","menu-background":"#282c34","column-second-menu-background":"#fff"}},b0d6:function(e,t,a){"use strict";a("49c3")},b3e2:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"index"},[e._v(e._s(e.pageTitle))])},r=[],s={name:"Index",components:{},data:function(){return{pageTitle:"index"}},computed:{},mounted:function(){},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){},methods:{}},i=s,o=(a("0076"),a("2877")),l=Object(o["a"])(i,n,r,!1,null,"7b74c44e",null);t["default"]=l.exports},b3ec:function(e,t,a){"use strict";a("899f")},b767:function(e,t,a){"use strict";a("470e")},ba4e:function(e,t,a){e.exports={"menu-color":"rgba(255,255,255,.95)","menu-color-active":"rgba(255,255,255,.95)","menu-background":"#282c34","column-second-menu-background":"#fff"}},bb1d:function(e,t,a){"use strict";a("1a25")},bbd4:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"login-container"},[a("div",{staticClass:"loginbanner"},[a("el-form",{ref:"ruleForm2",staticClass:"login-form",attrs:{model:e.ruleForm2,rules:e.rules2,"status-icon":"","label-width":"100px"}},[a("div",{staticClass:"logo"},[a("img",{staticStyle:{width:"80px",height:"80px"},attrs:{src:e.logosrc,alt:"logo"}}),a("p",[e._v(e._s(e.title))])]),a("el-form-item",{staticStyle:{"border-radius":"0"},attrs:{prop:"phone"}},[a("span",{staticClass:"svg-container"},[a("el-select",{staticStyle:{border:"0"},attrs:{placeholder:"请选择手机区域"},model:{value:e.ruleForm2.value,callback:function(t){e.$set(e.ruleForm2,"value",t)},expression:"ruleForm2.value"}},e._l(e.ruleForm2.diqu,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-input",{ref:"phonerole",staticStyle:{width:"250px"},attrs:{maxlength:11,name:"phone",type:"text","auto-complete":"on",placeholder:"请输入手机号"},model:{value:e.ruleForm2.phone,callback:function(t){e.$set(e.ruleForm2,"phone",t)},expression:"ruleForm2.phone"}})],1),a("div",{staticClass:"yzm",staticStyle:{height:"50px","margin-bottom":"20px","margin-left":"20px"}},[a("span",{staticClass:"svg-container",staticStyle:{float:"left",width:"25%"}},[a("el-input",{staticStyle:{width:"100%",border:"1px solid #cccccc","border-right":"0px","border-radius":"0"},attrs:{type:"text",disabled:""},model:{value:e.phonesms,callback:function(t){e.phonesms=t},expression:"phonesms"}})],1),a("el-input",{staticClass:"yzm",staticStyle:{float:"left",width:"50%",border:"1px solid #cccccc","border-radius":"0"},attrs:{type:"text",placeholder:"请输入验证码"},model:{value:e.code,callback:function(t){e.code=e._n(t)},expression:"code"}}),a("el-button",{staticStyle:{float:"right",width:"25%",height:"47px",padding:"12px 15px 12px 15px","border-radius":"0"},attrs:{disabled:e.sendMsgDisabled,type:"primary"},on:{click:e.send}},[e.sendMsgDisabled?a("span",[e._v(e._s(e.time+"秒后获取"))]):e._e(),e.sendMsgDisabled?e._e():a("span",[e._v("发送验证码")])])],1),a("el-form-item",{staticStyle:{"margin-top":"50px"}},[a("el-button",{staticStyle:{width:"100%","letter-spacing":"10px"},attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm2")}}},[e._v(" 确 定 ")])],1),a("div",{staticClass:"hasuser"},[a("span",{staticStyle:{"font-size":"14px",color:"#409eff",cursor:"pointer"},on:{click:e.login}},[e._v(" 账号密码登陆 ")]),a("span",{staticStyle:{float:"right","font-size":"14px",color:"#777777",cursor:"pointer"},on:{click:e.skip}},[e._v(" 进入 ")])])],1)],1)])},r=[],s=(a("d81d"),a("d3b7"),a("25f0"),a("8665")),i=a("be65"),o=a.n(i),l=a("f43e").Base64,c={data:function(){var e=this,t=function(e,t,a){""===t?a(new Error("请输入密码")):(/^\w{6,10}$/.test(t)||a(new Error("密码格式不正确")),a())},a=function(t,a,n){""===a?n(new Error("请再次输入密码")):a!==e.ruleForm2.password?n(new Error("两次输入密码不一致!")):n()};return{phonesms:"手机验证码",time:60,sendMsgDisabled:!1,code:"",actions:"",routes:[],logosrc:"",title:"",ruleForm2:{account:"",phone:"",username:"",password:"",email:"",checkPass:"",diqu:[],value:"+86/中国",time:0},origin:["+86/中国","+886/中国台湾","+852/中国香港","+91/India","+244/Angola","+54/Argentina","+1/American Samoa","+880/Bangladesh","+56/Chile","+855/Cambodia","+20/Egypt","+33/France","+49/Germany","+62/Indonesia","+353/Ireland","+972/Israel","+39/Italy","+81/Japan","+60/Malaysia","+63/Philippines","+92/Pakistan","+82/South Korea","+46/Sweden","+65/Singapore","+27/South Africa","+66/Thailand","+971/United Arab Emirates","+44/United Kingdom","+1/United States","+84/Vietnam","+967/Yemen","+260/Zambia"],rules2:{account:[{required:!0,message:"请输入账号",trigger:"blur"},{min:1,max:10,message:"长度在 1到 10 个字符",trigger:"blur"}],phone:[{required:!0,message:"请输入手机号",trigger:"blur"},{validator:function(e,t,a){var n=/^1[34578]\d{9}$/;n.test(t)?a():a(new Error("手机号码格式不正确！"))},trigger:"blur"}],password:[{validator:t,trigger:"blur",required:!0}],checkPass:[{validator:a,trigger:"blur",required:!0}],username:[{required:!0,message:"请输入姓名",trigger:"blur"},{min:2,max:5,message:"姓名格式不正确",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:["blur","change"]}]},phonetoken:""}},mounted:function(){var e=this,t=/^1[34578]\d{9}$/;this.$route.query.phone&&t.test(l.decode(this.$route.query.phone))&&(this.ruleForm2.phone=l.decode(this.$route.query.phone),this.$refs["phonerole"].$refs.input.disabled=!0),this.ruleForm2.diqu=[],this.actions=this.$route.query.action,this.origin.map((function(t){e.ruleForm2.diqu.push({label:t,value:t.toString()})})),this.title=sessionStorage.getItem("product_title"),this.logosrc=sessionStorage.getItem("imgsrc"),this.phonetoken=o.a.get("sessionToken")},methods:{showPwd:function(){"password"===this.pwdType?this.pwdType="":this.pwdType="password"},login:function(){this.$router.push({path:"/login"})},submitForm:function(e){var t=/^1[34578]\d{9}$/,a=this;a.$refs[e].validate((function(e){if(!e||!t.test(a.ruleForm2.phone))return a.$message({message:"信息错误",type:"error"}),!1;Object(s["Verify"])(a.actions,a.ruleForm2.phone,a.code).then((function(e){})).catch((function(e){a.$message(e)}))}))},send:function(){var e=this,t=/^1[34578]\d{9}$/,a=this;if(t.test(a.ruleForm2.phone)){a.sendMsgDisabled=!0,Object(s["Phonelogin"])(a.ruleForm2.phone,encodeURIComponent(a.ruleForm2.value)).then((function(t){e.$message({message:"发送成功",type:"success"}),e.time=t.expire})).catch((function(t){e.$message(t)}));var n=window.setInterval((function(){a.time--<=0&&(a.time=60*this.time,a.sendMsgDisabled=!1,window.clearInterval(n))}),1e3)}else this.$message({message:"请输入正确的手机号",type:"warning"})}}},u=c,d=(a("4b21"),a("a759"),a("2843"),a("2877")),p=Object(d["a"])(u,n,r,!1,null,"0285f121",null);t["default"]=p.exports},bcd0:function(e,t,a){},bf43:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"department-management-container"},[a("vab-query-form",[a("vab-query-form-left-panel",{attrs:{span:12}},[a("el-button",{attrs:{icon:"el-icon-plus",type:"primary"},on:{click:e.handleEdit}},[e._v(" 添加 ")]),a("el-button",{attrs:{icon:"el-icon-delete",type:"danger"},on:{click:e.handleDelete}},[e._v(" 批量删除 ")])],1),a("vab-query-form-right-panel",{attrs:{span:12}},[a("el-form",{attrs:{inline:!0,model:e.queryForm},nativeOn:{submit:function(e){e.preventDefault()}}},[a("el-form-item",[a("el-input",{attrs:{clearable:"",placeholder:"请输入名称"},model:{value:e.queryForm.name,callback:function(t){e.$set(e.queryForm,"name","string"===typeof t?t.trim():t)},expression:"queryForm.name"}})],1),a("el-form-item",[a("el-button",{attrs:{icon:"el-icon-search",type:"primary"},on:{click:e.queryData}},[e._v(" 查询 ")])],1)],1)],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.list,"tree-props":{children:"children"},border:"","default-expand-all":"","row-key":"id"},on:{"selection-change":e.setSelectRows},scopedSlots:e._u([{key:"empty",fn:function(){return[a("el-image",{staticClass:"vab-data-empty",attrs:{src:"http://dgiot-1253666439.cos.ap-shanghai-fsi.myqcloud.com/platform/assets/empty_images/data_empty.png"}})]},proxy:!0}])},[a("el-table-column",{attrs:{align:"center","show-overflow-tooltip":"",type:"selection"}}),a("el-table-column",{attrs:{align:"center",label:"名称",prop:"name","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{align:"center",label:"父节点Id",prop:"parentId","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{align:"center",label:"排序",prop:"order","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{align:"center",label:"创建时间",prop:"createTime","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{align:"center",label:"操作",width:"85"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleEdit(n)}}},[e._v("编辑")]),a("el-button",{attrs:{disabled:!n.parentId,type:"text"},on:{click:function(t){return e.handleDelete({row:n})}}},[e._v(" 删除 ")])]}}])})],1),a("el-pagination",{attrs:{"current-page":e.queryForm.pageNo,layout:e.layout,"page-size":e.queryForm.pageSize,total:e.total,background:""},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),a("edit",{ref:"edit",on:{"fetch-data":e.fetchData}})],1)},r=[],s=a("1da1"),i=(a("a15b"),a("d81d"),a("96cf"),a("ffea")),o=a("4dd1"),l={name:"DepartmentManagement",components:{Edit:o["default"]},data:function(){return{list:[],listLoading:!0,layout:"total, sizes, prev, pager, next, jumper",total:0,selectRows:"",queryForm:{pageNo:1,pageSize:10,title:""}}},created:function(){this.fetchData()},methods:{setSelectRows:function(e){this.selectRows=e},handleEdit:function(e){e.id?this.$refs["edit"].showEdit(e):this.$refs["edit"].showEdit()},handleDelete:function(e){var t=this;if(e.id)this.$baseConfirm("你确定要删除当前项吗",null,Object(s["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(i["doDelete"])({ids:e.id});case 2:return n=a.sent,r=n.msg,t.$baseMessage(r,"success",!1,"vab-hey-message-success"),a.next=7,t.fetchData();case 7:case"end":return a.stop()}}),a)}))));else{if(!(this.selectRows.length>0))return this.$baseMessage("未选中任何行","error",!1,"vab-hey-message-error"),!1;var a=this.selectRows.map((function(e){return e.id})).join();this.$baseConfirm("你确定要删除选中项吗",null,Object(s["a"])(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(i["doDelete"])({ids:a});case 2:return n=e.sent,r=n.msg,t.$baseMessage(r,"success",!1,"vab-hey-message-success"),e.next=7,t.fetchData();case 7:case"end":return e.stop()}}),e)}))))}},handleSizeChange:function(e){this.queryForm.pageSize=e,this.fetchData()},handleCurrentChange:function(e){this.queryForm.pageNo=e,this.fetchData()},queryData:function(){this.queryForm.pageNo=1,this.fetchData()},fetchData:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.listLoading=!0,t.next=3,Object(i["getList"])(e.queryForm);case 3:a=t.sent,n=a.data,r=a.totalCount,e.list=n,e.total=r,e.listLoading=!1;case 9:case"end":return t.stop()}}),t)})))()}}},c=l,u=a("2877"),d=Object(u["a"])(c,n,r,!1,null,null,null);t["default"]=d.exports},c0a3:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"modules"},[a("el-dialog",{attrs:{visible:e.edit_module,title:"修改物模型",width:"17%"},on:{"update:visible":function(t){e.edit_module=t}}},[a("el-form",{ref:"editForm",staticClass:"demo-editForm",attrs:{model:e.editForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"产品名称",prop:"name"}},[a("el-input",{model:{value:e.editForm.name,callback:function(t){e.$set(e.editForm,"name",t)},expression:"editForm.name"}})],1),a("el-form-item",{attrs:{label:"产品类型",prop:"devType"}},[a("el-input",{model:{value:e.editForm.devType,callback:function(t){e.$set(e.editForm,"devType",t)},expression:"editForm.devType"}})],1),a("el-form-item",{attrs:{label:"所属分类",prop:"category"}},[a("el-cascader",{attrs:{options:e.categoryListOptions},model:{value:e.editForm.category,callback:function(t){e.$set(e.editForm,"category",t)},expression:"editForm.category"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.editPostForm("editForm")}}},[e._v(" 修改 ")]),a("el-button",{on:{click:function(t){return e.resetForm("editForm")}}},[e._v("重置")])],1)],1),a("el-dialog",{attrs:{visible:e.add_module,title:"新增物模型",width:"17%"},on:{"update:visible":function(t){e.add_module=t}}},[a("el-form",{ref:"moduleForm",staticClass:"demo-moduleForm",attrs:{model:e.moduleForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"产品名称",prop:"name"}},[a("el-input",{model:{value:e.moduleForm.name,callback:function(t){e.$set(e.moduleForm,"name",t)},expression:"moduleForm.name"}})],1),a("el-form-item",{attrs:{label:"产品类型",prop:"devType"}},[a("el-input",{model:{value:e.moduleForm.devType,callback:function(t){e.$set(e.moduleForm,"devType",t)},expression:"moduleForm.devType"}})],1),a("el-form-item",{attrs:{label:"所属分类",prop:"category"}},[a("el-cascader",{attrs:{options:e.categoryListOptions},model:{value:e.moduleForm.category,callback:function(t){e.$set(e.moduleForm,"category",t)},expression:"moduleForm.category"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("moduleForm")}}},[e._v(" 立即创建 ")]),a("el-button",{on:{click:function(t){return e.resetForm("moduleForm")}}},[e._v("重置")])],1)],1),a("header",[a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:20}},[a("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-plus"},on:{click:function(t){e.add_module=!0}}},[e._v(" 新增 ")])],1),a("el-col",{attrs:{span:4}},[a("el-input",{attrs:{placeholder:"请输入产品名称",size:"mini"},model:{value:e.searchText,callback:function(t){e.searchText=t},expression:"searchText"}},[a("el-button",{attrs:{slot:"append",size:"mini",type:"primary",icon:"el-icon-search"},on:{click:function(t){return e.searchModule(e.searchText)}},slot:"append"},[e._v(" 搜索 ")])],1)],1)],1)],1),a("center",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.pictLoading,expression:"pictLoading"}],staticStyle:{width:"100%","min-height":"583px"},attrs:{data:e.tableData.filter((function(t){return!e.search||t.name.toLowerCase().includes(e.search.toLowerCase())})),"max-height":"583","element-loading-background":"rgba(0, 0, 0, 0.5)","element-loading-text":"数据正在加载中","element-loading-spinner":"el-icon-loading"}},[a("el-table-column",{attrs:{label:"objectId",prop:"objectId"}}),a("el-table-column",{attrs:{label:"产品名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.data.name))]}}])}),a("el-table-column",{attrs:{label:"产品类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.data.devType))]}}])}),a("el-table-column",{attrs:{label:"key",prop:"key"}}),a("el-table-column",{attrs:{label:"所属分类"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.data.category))]}}])}),a("el-table-column",{attrs:{align:"right"},scopedSlots:e._u([{key:"header",fn:function(t){return[a("el-input",{attrs:{size:"mini",placeholder:"输入关键字搜索"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})]}},{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v(" 修改 ")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.$index,t.row,e.tableData)}}},[e._v(" 删除 ")])]}}])})],1)],1),a("footer",[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,50,100],"page-size":10,total:e.pageTotal,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" Parse ")],1)},r=[],s=a("1da1"),i=(a("4de4"),a("d81d"),a("b0c0"),a("a434"),a("96cf"),a("e0e9")),o=a("7212"),l=a("7497"),c={name:"Modules",components:{},data:function(){return{productObj:[],pictLoading:!1,categoryListOptions:[],limit:10,skip:0,add_module:!1,edit_module:!1,searchText:"",hashkey:"",categoryList:[],infoData:"物模型管理",currentPage:1,pageTotal:0,tableData:[],search:"",editForm:{name:"物模型管理",devType:"物模型管理",category:"",type:"Product"},moduleForm:{name:"物模型管理",devType:"物模型管理",category:"",type:"Product"},rules:{name:[{required:!0,message:"请输入产品名称",trigger:"blur"}],devType:[{required:!0,message:"请输入产品类型",trigger:"blur"}],category:[{required:!0,message:"请选择模型所属分类",trigger:"blur"}]}}},computed:{},mounted:function(){this.searchModule(""),this.Industry()},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){},methods:{getProduct:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(o["queryProduct"])();case 2:a=t.sent,n=a.results,n&&(e.productObj=n);case 5:case"end":return t.stop()}}),t)})))()},treeData:function(e){var t=JSON.parse(JSON.stringify(e));return t.filter((function(e){var a=t.filter((function(t){return e.id==t.parentid}));return a.length>0&&(e.children=a),0==e.parentid}))},Industry:function(){var e=this;this.categoryList=[],this.getProduct();var t={limit:10,where:{"data.key":"category"}};this.$query_object("Dict",t).then((function(t){t.results&&(t.results.map((function(t){var a={};a.value=t.type,a.label=t.data.CategoryName,a.id=t.data.Id,a.parentid=t.data.SuperId,e.categoryList.push(a)})),e.categoryListOptions=e.treeData(e.categoryList))})).catch((function(e){}))},blackDict:function(e,t,a){var n=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var s,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return s={data:t,key:e,type:a},r.next=3,Object(i["postDict"])(s);case 3:o=r.sent,o?(n.$message({type:"success",message:"新建物模型成功"}),n.add_module=!1,n.searchModule("")):n.$message({type:"error",message:"新建物模型失败"});case 5:case"end":return r.stop()}}),r)})))()},submitForm:function(e){var t=this;this.$refs[e].validate(function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(a){var n,r,s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!a){e.next=8;break}return n={category:t.moduleForm.category[0],devType:t.moduleForm.devType,name:t.moduleForm.name},e.next=4,Object(l["getHashClass"])("Product",n);case 4:r=e.sent,s=r.objectId,i=r.code,200==i&&t.blackDict(s,n,t.moduleForm.type);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},resetForm:function(e){this.$refs[e].resetFields()},searchModule:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var n,r,s,o,l;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.pictLoading=!0,n=e.length?{order:"-createdAt",count:"objectId",limit:t.limit,skip:t.skip,where:{type:"Module",key:{$regex:"".concat(e)}}}:{order:"-createdAt",count:"objectId",limit:t.limit,skip:t.skip,where:{type:"Product"}},a.next=4,Object(i["getDictCount"])(n);case 4:r=a.sent,s=r.results,o=r.count,l=void 0===o?0:o,t.pictLoading=!1,s&&(t.tableData=s,t.pageTotal=l);case 10:case"end":return a.stop()}}),a)})))()},handleSizeChange:function(e){this.limit=e,this.searchModule(this.searchText)},handleCurrentChange:function(e){this.skip=this.limit*(e-1),this.searchModule(this.searchText)},handleEdit:function(e,t){this.edit_module=!0,this.editForm=t.data},editPostForm:function(e){},handleDelete:function(e,t,a){var n=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(i["delDict"])(t.objectId);case 2:s=r.sent,s?(a.splice(e,1),n.$message({type:"success",message:"删除成功"})):n.$message({type:"error",message:"删除失败"});case 4:case"end":return r.stop()}}),r)})))()}}},u=c,d=(a("4ce1"),a("2877")),p=Object(d["a"])(u,n,r,!1,null,"5f24c958",null);t["default"]=p.exports},c11c:function(e,t,a){},c2a7:function(e,t,a){"use strict";a("0a7c")},c613:function(e,t,a){e.exports={"menu-color":"rgba(255,255,255,.95)","menu-color-active":"rgba(255,255,255,.95)","menu-background":"#282c34","column-second-menu-background":"#fff"}},c643:function(e,t,a){"use strict";a("59f7")},c829:function(e,t,a){e.exports={"menu-color":"rgba(255,255,255,.95)","menu-color-active":"rgba(255,255,255,.95)","menu-background":"#282c34","column-second-menu-background":"#fff"}},c9a7:function(e,t,a){},ca29:function(e,t,a){"use strict";a("3538")},cc5a:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"license"},[a("div",{staticClass:"licenseleft"},[a("el-row",[a("el-col",{attrs:{span:12}},[0==e.isend?a("img",{attrs:{src:e.originimgsrc,alt:"",srcset:""}}):e._e(),1==e.isend?a("img",{attrs:{src:e.originimgsrc,alt:"",srcset:""}}):e._e()]),a("el-col",{attrs:{span:12}},[0==e.isend?a("div",{staticClass:"originupdate"},[a("p",[e._v("部署配置")]),a("span",[e._v("请完成配置后进行部署")])]):e._e()])],1),a("el-row",{staticStyle:{"margin-top":"50px"}},[a("el-col",{staticClass:"originupdate",attrs:{span:12}},[a("p",[e._v("当前时间:")]),a("span",[e._v(e._s(e.updatetime))])]),a("el-col",{staticClass:"originupdate",attrs:{span:12}},[a("p",[e._v("服务器状态")]),0==e.isarrange?a("span",[e._v("未部署")]):a("span",[e._v("部署完成")])])],1)],1),a("div",{staticClass:"licenseright"},[a("div",{staticClass:"righttop"},[a("p",{staticStyle:{"font-size":"20px"}},[e._v("部署进度")]),a("el-steps",{attrs:{active:e.active,"finish-status":"success"}},[a("el-step",{attrs:{title:"基础服务部署"}}),a("el-step",{attrs:{title:"数据库部署"}}),a("el-step",{attrs:{title:"完成"}})],1)],1),a("div",{staticClass:"rightcenter"},[a("p",{staticStyle:{"font-size":"20px",color:"#67c23a"}},[e._v("机器信息")]),a("el-form",{ref:"form",attrs:{model:e.configdata,"label-width":"140px"}},[a("el-form-item",{attrs:{label:"用户名:"}},[a("span",[e._v(e._s(e.configdata.hostName))])]),a("el-form-item",{attrs:{label:"计算机信息:"}},[a("span",[e._v(e._s(e.configdata.computerConfig))])]),a("el-form-item",{attrs:{label:"IP地址(公):"}},[a("span",[e._v(e._s(e.configdata.wlanIp))])]),a("el-form-item",{attrs:{label:"IP地址(私):"}},[a("span",[e._v(e._s(e.configdata.natIP))])]),a("el-form-item",{attrs:{label:"授权状态:"}},[a("span",[e._v(e._s(e.configdata.computerAuth))])]),a("el-form-item",{attrs:{label:"服务器连接状态:"}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.value2,callback:function(t){e.value2=t},expression:"value2"}})],1),a("el-form-item",{attrs:{label:"数据库是否部署:"}},[1==e.configdata.dbInstalled?a("span",[e._v("是")]):a("span",[e._v("否")])]),a("el-form-item",{attrs:{label:"机器码:"}},[a("span",[e._v(e._s(e.configdata.computerKey))])]),a("el-form-item",{attrs:{label:"数据中心地址:"}},[a("el-input",{attrs:{placeholder:"请输入数据中心地址"},model:{value:e.configdata.infomation,callback:function(t){e.$set(e.configdata,"infomation",t)},expression:"configdata.infomation"}})],1),a("el-form-item",{attrs:{label:"授权码:"}},[a("el-input",{attrs:{placeholder:"请输入授权码"},model:{value:e.configdata.authorizenumber,callback:function(t){e.$set(e.configdata,"authorizenumber",t)},expression:"configdata.authorizenumber"}})],1),a("el-form-item",{attrs:{label:"服务版本:"}},[a("el-select",{attrs:{placeholder:"请输入服务版本"},model:{value:e.configdata.standard,callback:function(t){e.$set(e.configdata,"standard",t)},expression:"configdata.standard"}},[a("el-option",{attrs:{label:"标准版",value:"standard"}}),a("el-option",{attrs:{label:"企业版",value:"enterprise"}}),a("el-option",{attrs:{label:"旗舰版",value:"ultimate"}})],1)],1),a("el-form-item",[e.dbinstall?a("el-button",{staticStyle:{"margin-right":"100px"},attrs:{type:"success"},on:{click:e.uploadHub}},[e._v(" 部 署 ")]):a("el-button",{staticStyle:{"margin-right":"100px"},attrs:{type:"success"},on:{click:e.uploadDb}},[e._v(" 数据库部署 ")]),a("el-button",{attrs:{type:"primary"},on:{click:e.update}},[e._v("刷新")])],1)],1)],1)])])},r=[],s=a("1c4e"),i=a("be65"),o=a.n(i),l={data:function(){return{value2:!1,isarrange:!1,isend:!1,timer:null,updatetime:"",active:1,authorizenumber:"",dbinstall:!0,configdata:{computerAuth:"",natIP:"",wlanIp:"",computerKey:"",computerConfig:"",hostName:"",infomation:"localhost",standard:"standard",authorizenumber:"",dbInstalled:""},standard:"standard"}},mounted:function(){window.clearInterval(this.timer),this.timeUpdate(),this.getHardInfo(),o.a.get("authorizenumber")?this.configdata.authorizenumber=o.a.get("authorizenumber"):this.configdata.authorizenumber=""},beforeDestroy:function(){window.clearInterval(this.timer),this.timer=null},methods:{nowtime:function(){var e=Date.parse(new Date),t=new Date(e),a=t.getFullYear()+"-",n=(t.getMonth()+1<=10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-",r=(t.getDate()+1<=10?"0"+t.getDate():t.getDate())+" ",s=(t.getHours()+1<=10?"0"+t.getHours():t.getHours())+":",i=(t.getMinutes()+1<=10?"0"+t.getMinutes():t.getMinutes())+":",o=t.getSeconds()+1<=10?"0"+t.getSeconds():t.getSeconds();this.updatetime=a+n+r+s+i+o},timeUpdate:function(){var e=this;e.timer=window.setInterval((function(){e.nowtime()}),1e3)},getHardInfo:function(){var e=this;Object(s["hardInfo"])().then((function(t){e.configdata.computerAuth=t.computerAuth,e.configdata.natIP=t.natIP,e.configdata.wlanIp=t.wlanIp,e.configdata.computerKey=t.computerKey,e.configdata.hostName=t.hostName,e.configdata.computerConfig=t.computerConfig,e.configdata.dbInstalled=t.dbInstalled,e.value2=t.serverHealth}))},uploadHub:function(){var e=this;""!=this.configdata.infomation?""!=this.configdata.authorizenumber?Object(s["iotHub"])(this.configdata.standard,this.configdata.authorizenumber,this.configdata.infomation).then((function(t){if(1==t.result)e.active=3,e.$router.push("/login");else{if("license_failed"==t.status)return void e.$message("授权码错误，请重新填写");if("server_disconnected"==t.status)return void e.$message("服务器未连接");"database_uninstalled"==t.status&&(e.active=2,e.$message("服务器部署完成，请完成下一步数据库部署"),e.dbinstall=!1,o.a.set("authorizenumber",e.configdata.authorizenumber))}})):this.$message("请填写授权码"):this.$message("请填写数据中心地址")},uploadDb:function(){}}},c=l,u=(a("499a"),a("2877")),d=Object(u["a"])(c,n,r,!1,null,"37659a8c",null);t["default"]=d.exports},cc84:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"grid-content"},[a("div",{staticClass:"drawer"},[a("el-drawer",{attrs:{"with-header":!1,size:"40%",visible:e.drawer,direction:"rtl"},on:{"update:visible":function(t){e.drawer=t}}},[a("websocket",{attrs:{topic:e.topic}})],1)],1),a("div",{staticClass:"header"},[a("el-collapse",{model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},[a("el-collapse-item",{attrs:{name:"1"}},[a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:6}},[a("el-button",{attrs:{type:"success",icon:"el-icon-setting"},on:{click:e.drawerFlag}},[e._v(" websocket ")]),a("el-button",{attrs:{icon:"el-icon-document-add",disabled:e.deviceid.length<0},on:{click:function(t){return e.subscribeMqtt(e.LayerData)}}},[e._v(" 订阅mqtt ")]),a("el-button",{attrs:{icon:"el-icon-document-add",disabled:e.stop_Mqtt},on:{click:function(t){return e.handleCloseSub(e.LayerData)}}},[e._v(" 取消订阅mqtt ")])],1),a("el-col",{attrs:{span:4}},[e._v(" 自动刷新 "),a("el-switch",{attrs:{disabled:e.deviceid.length<0,"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"关闭","inactive-text":"开启"},on:{change:e.stopsub},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1)],1)],1)],1)],1),a("div",{staticClass:"konva"},[a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:24}},[a("div",{ref:"container",attrs:{id:"container"}})])],1)],1)])},r=[],s=a("1da1"),i=(a("96cf"),a("4d63"),a("ac1f"),a("25f0"),a("7db0"),a("4de4"),a("c620")),o=a("150a"),l=(a("3a9a"),a("03b0")),c=a("bdd7"),u=a("8e57"),d=a("fbe4"),p=a("35c0"),m=a("fac5"),f=a("7a1d"),h={components:{websocket:m["default"]},data:function(){return{activeNames:[],deviceid:this.$route.query.deviceid||"",konva:p["default"],textConfig:[],imgConfig:[],rectConfig:[],LayerData:[],drawer:!1,topic:"",stop_Mqtt:!0,subdialogtimer:null,rules:{url:[{required:!0,message:"请输入url",trigger:"blur"}],topic:[{required:!0,message:"请输入topic",trigger:"blur"}]},subdialogid:"subdialogid",layer:new Konva.Layer,simpleText:{},stage:{},text:"",stopValue:"",form:{url:"",topic:""},value:!1,formLabelWidth:"80px"}},computed:{stageConfig:function(){var e=document.getElementsByClassName("konva");return{width:e[0].clientWidth,height:e[0].clientHeight,container:"container",id:"_container"}}},mounted:function(){this.deviceid?this.createKonva():this._initCreate()},methods:{subscribeMqtt:function(){this.subscribe(this.deviceid)},handleMqttMsg:function(e){var t=this;this.LayerData=[];var a=new RegExp("thing/"+e+"/post");i["Websocket"].add_hook(a,(function(e){var a=Base64.decode(e+"");t.LayerData;if(a){var n=t.stageConfig,r=a.konva,s=void 0===r?{Group:{id:"group_9c5930e565",rotation:20,x:120,y:40},Layer:{fill:"#e579f2",fontFamily:"Calibri",fontSize:26,id:"layer_9c5930e565",text:"16",x:480,y:21},Shape:[{fill:"#e579f2",fontFamily:"Calibri",fontSize:26,id:"Acrel",text:"16",x:480,y:21}],Stage:{height:248,id:"stage_9c5930e565",width:1643}}:r;s&&(n=Object.assign(t.stageConfig,s.Stage),t.textConfig.push(s.Layer),t.layer.add(Object(l["default"])(s.Layer)),t.stage=Object(o["default"])(n),t.stage.add(t.layer))}}))},handleCloseSub:function(e){this.stop_Mqtt=!0;var t=JSON.stringify({action:"stop_logger"}),a={topic:"thing/"+this.deviceid+"/post",text:t,retained:!0,qos:2};i["Websocket"].sendMessage(a),window.clearInterval(this.subdialogtimer),this.subdialogtimer=null},stopsub:function(e){var t;t=0==e?JSON.stringify({action:"stop_logger"}):JSON.stringify({action:"start_logger"});var a={topic:"thing/"+this.deviceid+"/post",text:t,retained:!0,qos:2};i["Websocket"].sendMessage(a)},drawerFlag:function(){this.topic="thing/".concat(this.deviceid,"/post"),this.drawer=!0},subscribe:function(e){var t=this,a={topic:"thing/".concat(this.deviceid,"/post"),qos:2};i["Websocket"].subscribe(a,(function(n){n.result?(t.$message("订阅成功 topic: ".concat(a.topic),"sussess"),t.stop_Mqtt=!1,t.handleMqttMsg(e)):(t.$message("订阅失败,请手动订阅mqtt","error"),t.subscribeMqtt([]))}))},handleClose:function(){},_addRect:function(){var e=Mock.mock({"number|1-300":200}).number,t=Object(c["default"])(e,e,e,e,Mock.mock("@rgb"),e,{x:e,y:e},!0,Mock.mock({"string|1-5":"★"}));this.layer.add(t),this.stage.add(this.layer)},_addText:function(){var e=Object(l["default"])({});this.layer.add(e),this.stage.add(this.layer)},_setText:function(e,t){var a=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(d["default"])(a.stage.find("#".concat(e))[0],t);case 2:r=n.sent,r.tween;case 4:case"end":return n.stop()}}),n)})))()},_initCreate:function(){var e=this,t=this.konva,a=this.stageConfig;if(t){var n=t.data;a=Object.assign(this.stageConfig,n.Stage),this.LayerData=n.Layer}this.stage=Object(o["default"])(a),this.LayerData.filter((function(t){switch(t.type){case"image":e.imgConfig.push(t),e.layer.add(Object(u["default"])(t)),e.layer.batchDraw();break;case"text":e.textConfig.push(t),e.layer.add(Object(l["default"])(t));break;case"rect":e.rectConfig.push(t),e.layer.add(Object(c["default"])(t));break;default:break}})),this.stage.add(this.layer)},createKonva:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,n,r,s,i,o,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.$route.query,n=a.deviceid,r=a.type,s={objectId:n,type:r},t.next=4,Object(f["_getTopo"])(s);case 4:i=t.sent,o=i.message,l=void 0===o?"":o,"SUCCESS"==l?e.subscribe(e.deviceid):e._initCreate();case 8:case"end":return t.stop()}}),t)})))()}}},g=h,b=(a("09a7"),a("2877")),v=Object(b["a"])(g,n,r,!1,null,"87bc8f4e",null);t["default"]=v.exports},cce7:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"role-management-container"},[a("el-alert",{attrs:{closable:!1,title:"演示环境仅做基础功能展示，若想实现不同角色的真实菜单配置，需将config/setting.config.js路由加载模式改为all模式，由后端全面接管路由渲染与角色权限控制",type:"success"}}),a("vab-query-form",[a("vab-query-form-left-panel",{attrs:{span:12}},[a("el-button",{attrs:{icon:"el-icon-plus",type:"primary"},on:{click:e.handleEdit}},[e._v(" 添加 ")]),a("el-button",{attrs:{icon:"el-icon-delete",type:"danger"},on:{click:e.handleDelete}},[e._v(" 批量删除 ")])],1),a("vab-query-form-right-panel",{attrs:{span:12}},[a("el-form",{attrs:{inline:!0,model:e.queryForm},nativeOn:{submit:function(e){e.preventDefault()}}},[a("el-form-item",[a("el-input",{attrs:{clearable:"",placeholder:"请输入角色"},model:{value:e.queryForm.role,callback:function(t){e.$set(e.queryForm,"role","string"===typeof t?t.trim():t)},expression:"queryForm.role"}})],1),a("el-form-item",[a("el-button",{attrs:{icon:"el-icon-search",type:"primary"},on:{click:e.queryData}},[e._v(" 查询 ")])],1)],1)],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.list,border:""},on:{"selection-change":e.setSelectRows},scopedSlots:e._u([{key:"empty",fn:function(){return[a("el-image",{staticClass:"vab-data-empty",attrs:{src:"http://dgiot-1253666439.cos.ap-shanghai-fsi.myqcloud.com/platform/assets/empty_images/data_empty.png"}})]},proxy:!0}])},[a("el-table-column",{attrs:{align:"center","show-overflow-tooltip":"",type:"selection"}}),a("el-table-column",{attrs:{align:"center",label:"序号",width:"55"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.$index;return[e._v(" "+e._s(a+1)+" ")]}}])}),a("el-table-column",{attrs:{align:"center",label:"id",prop:"id","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{align:"center",label:"角色码",prop:"role","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{align:"center",label:"操作","show-overflow-tooltip":"",width:"85"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleEdit(n)}}},[e._v("编辑")]),a("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleDelete(n)}}},[e._v("删除")])]}}])})],1),a("el-pagination",{attrs:{"current-page":e.queryForm.pageNo,layout:e.layout,"page-size":e.queryForm.pageSize,total:e.total,background:""},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}}),a("edit",{ref:"edit",on:{"fetch-data":e.fetchData}})],1)},r=[],s=a("1da1"),i=(a("a15b"),a("d81d"),a("96cf"),a("e157")),o=a("cf7d"),l={name:"RoleManagement",components:{Edit:o["default"]},data:function(){return{list:[],listLoading:!0,layout:"total, sizes, prev, pager, next, jumper",total:0,selectRows:"",queryForm:{pageNo:1,pageSize:10,role:""}}},created:function(){this.fetchData()},methods:{setSelectRows:function(e){this.selectRows=e},handleEdit:function(e){e.id?this.$refs["edit"].showEdit(e):this.$refs["edit"].showEdit()},handleDelete:function(e){var t=this;if(e.id)this.$baseConfirm("你确定要删除当前项吗",null,Object(s["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(i["doDelete"])({ids:e.id});case 2:return n=a.sent,r=n.msg,t.$baseMessage(r,"success",!1,"vab-hey-message-success"),a.next=7,t.fetchData();case 7:case"end":return a.stop()}}),a)}))));else{if(!(this.selectRows.length>0))return this.$baseMessage("未选中任何行","error",!1,"vab-hey-message-error"),!1;var a=this.selectRows.map((function(e){return e.id})).join();this.$baseConfirm("你确定要删除选中项吗",null,Object(s["a"])(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(i["doDelete"])({ids:a});case 2:return n=e.sent,r=n.msg,t.$baseMessage(r,"success",!1,"vab-hey-message-success"),e.next=7,t.fetchData();case 7:case"end":return e.stop()}}),e)}))))}},handleSizeChange:function(e){this.queryForm.pageSize=e,this.fetchData()},handleCurrentChange:function(e){this.queryForm.pageNo=e,this.fetchData()},queryData:function(){this.queryForm.pageNo=1,this.fetchData()},fetchData:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.listLoading=!0,t.next=3,Object(i["getList"])(e.queryForm);case 3:a=t.sent,n=a.data,r=a.totalCount,e.list=n,e.total=r,e.listLoading=!1;case 9:case"end":return t.stop()}}),t)})))()}}},c=l,u=a("2877"),d=Object(u["a"])(c,n,r,!1,null,null,null);t["default"]=d.exports},cd2d:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"login-container"},[a("div",{staticClass:"loginbanner"},[a("el-form",{ref:"ruleForm2",staticClass:"login-form",attrs:{model:e.ruleForm2,rules:e.rules2,"status-icon":"","label-width":"100px"}},[a("div",{staticClass:"logo"},[a("img",{staticStyle:{width:"80px",height:"80px"},attrs:{src:e.logosrc,alt:"logo"}}),a("p",[e._v("重置密码")])]),a("el-form-item",{staticStyle:{"border-radius":"0"},attrs:{prop:"phone"}},[a("span",{staticClass:"svg-container",staticStyle:{display:"inline-block",width:"150px",padding:"0",color:"black","vertical-align":"middle"}},[a("el-select",{staticStyle:{border:"0"},attrs:{placeholder:"请选择手机区域"},model:{value:e.ruleForm2.value,callback:function(t){e.$set(e.ruleForm2,"value",t)},expression:"ruleForm2.value"}},e._l(e.ruleForm2.diqu,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-input",{ref:"phonerole",staticStyle:{width:"250px"},attrs:{maxlength:11,name:"phone",type:"text","auto-complete":"on",placeholder:"请输入手机号"},model:{value:e.ruleForm2.phone,callback:function(t){e.$set(e.ruleForm2,"phone",t)},expression:"ruleForm2.phone"}})],1),a("div",{staticClass:"yzm",staticStyle:{height:"50px","margin-bottom":"20px","margin-left":"20px"}},[a("el-input",{staticClass:"yzm",staticStyle:{float:"left",width:"75%",border:"1px solid #cccccc","border-radius":"0"},attrs:{type:"text",placeholder:"请输入验证码","auto-complete":"off"},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}}),a("el-button",{staticStyle:{float:"right",width:"25%",height:"47px",padding:"12px 15px 12px 15px","border-radius":"0"},attrs:{disabled:e.sendMsgDisabled,type:"primary"},on:{click:e.send}},[e.sendMsgDisabled?a("span",[e._v(e._s(e.time+"秒后获取"))]):e._e(),e.sendMsgDisabled?e._e():a("span",[e._v("发送验证码")])])],1),a("el-form-item",{attrs:{prop:"password",required:""}},[a("span",{staticClass:"svg-container"},[a("vab-icon",{attrs:{icon:"password"}})],1),a("el-input",{attrs:{type:e.pwdType,maxlength:10,name:"password","auto-complete":"new-password",placeholder:"请输入6-10位数字字母组合"},model:{value:e.ruleForm2.password,callback:function(t){e.$set(e.ruleForm2,"password",t)},expression:"ruleForm2.password"}}),a("span",{staticClass:"show-pwd",on:{click:e.showPwd}},[a("vab-icon",{attrs:{icon:"eye"}})],1)],1),a("el-form-item",{attrs:{prop:"checkPass",required:""}},[a("span",{staticClass:"svg-container"},[a("vab-icon",{attrs:{icon:"password"}})],1),a("el-input",{attrs:{type:e.pwdType,maxlength:10,"auto-complete":"new-password",placeholder:"请再次输入密码"},model:{value:e.ruleForm2.checkPass,callback:function(t){e.$set(e.ruleForm2,"checkPass",t)},expression:"ruleForm2.checkPass"}}),a("span",{staticClass:"show-pwd",on:{click:e.showPwd}},[a("vab-icon",{attrs:{icon:"eye"}})],1)],1),a("div",{staticClass:"hasuser",staticStyle:{"box-sizing":"border-box","padding-left":"22px"}},[a("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary"},on:{click:function(t){return e.resetPassword("ruleForm2")}}},[e._v(" 确 定 ")])],1)],1)],1)])},r=[],s=(a("d81d"),a("d3b7"),a("25f0"),a("8665")),i=(a("f43e").Base64,{data:function(){var e=this,t=function(e,t,a){""===t?a(new Error("请输入密码")):(/^\w{6,10}$/.test(t)||a(new Error("密码格式不正确")),a())},a=function(t,a,n){""===a?n(new Error("请再次输入密码")):a!==e.ruleForm2.password?n(new Error("两次输入密码不一致!")):n()};return{password:"",time:60,sendMsgDisabled:!1,logosrc:"",title:"",phonesms:"",code:"",ruleForm2:{account:"",phone:"",password:"",checkPass:"",roles:"",diqu:[],value:"+86/中国"},protype:"",rules2:{account:[{required:!0,message:"请输入账号",trigger:"blur"},{min:1,max:10,message:"长度在 1到 10 个字符",trigger:"blur"}],phone:[{required:!0,message:"请输入手机号",trigger:"blur"},{validator:function(e,t,a){var n=/^1[3-9]\d{9}$/;n.test(t)?a():a(new Error("手机号码格式不正确！"))},trigger:"blur"}],password:[{validator:t,trigger:"blur",required:!0}],checkPass:[{validator:a,trigger:"blur",required:!0}],username:[{required:!0,message:"请输入姓名",trigger:"blur"},{min:2,max:5,message:"姓名格式不正确",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:["blur","change"]}],roles:[{required:!0,message:"请选择平台",trigger:"change"}]},pwdType:"password",origin:["+86/中国","+886/中国台湾","+852/中国香港","+91/India","+244/Angola","+54/Argentina","+1/American Samoa","+880/Bangladesh","+56/Chile","+855/Cambodia","+20/Egypt","+33/France","+49/Germany","+62/Indonesia","+353/Ireland","+972/Israel","+39/Italy","+81/Japan","+60/Malaysia","+63/Philippines","+92/Pakistan","+82/South Korea","+46/Sweden","+65/Singapore","+27/South Africa","+66/Thailand","+971/United Arab Emirates","+44/United Kingdom","+1/United States","+84/Vietnam","+967/Yemen","+260/Zambia"]}},mounted:function(){var e=this;this.protype=sessionStorage.getItem("roletype"),this.title=sessionStorage.getItem("product_title"),this.logosrc=sessionStorage.getItem("imgsrc"),this.ruleForm2.diqu=[],this.origin.map((function(t){e.ruleForm2.diqu.push({label:t,value:t.toString()})}))},methods:{showPwd:function(){"password"===this.pwdType?this.pwdType="":this.pwdType="password"},login:function(){this.$router.push({path:"/login"})},send:function(){var e=this;this.$refs.ruleForm2.validateField("phone",(function(t){t?e.$message("请输入手机号"):e.findUserAndSendCode()}))},findUserAndSendCode:function(){var e=this,t=this;Object(s["Phonelogin"])(t.ruleForm2.phone,encodeURIComponent(t.ruleForm2.value)).then((function(a){if(a){e.$message({message:"发送成功",type:"success"}),t.sendMsgDisabled=!0,e.time=a.expire;var n=window.setInterval((function(){t.time--<=0&&(t.time=60*this.time,t.sendMsgDisabled=!1,window.clearInterval(n))}),1e3)}})).catch((function(t){e.$message(t.error)}))},resetPassword:function(e){var t=this;this.$refs[e].validate((function(e){e&&(""==t.code?t.$message("请输入手机验证码"):Object(s["passwordreset"])(t.ruleForm2.phone,t.code,t.ruleForm2.password).then((function(e){e&&t.$router.push({path:"/login"})})).catch((function(e){t.$message(e.error)})))}))}}}),o=i,l=(a("c2a7"),a("8488"),a("3006"),a("2877")),c=Object(l["a"])(o,n,r,!1,null,"7b060cae",null);t["default"]=c.exports},cf09:function(e,t,a){},cf7d:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.title,visible:e.dialogFormVisible,width:"500px"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.close},scopedSlots:e._u([{key:"footer",fn:function(){return[a("el-button",{on:{click:e.close}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("确 定")])]},proxy:!0}])},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"角色码",prop:"role"}},[a("el-input",{model:{value:e.form.role,callback:function(t){e.$set(e.form,"role",t)},expression:"form.role"}})],1)],1)],1)},r=[],s=a("1da1"),i=(a("96cf"),a("e157")),o={name:"RoleManagementEdit",data:function(){return{form:{},rules:{role:[{required:!0,trigger:"blur",message:"请输入角色码"}]},title:"",dialogFormVisible:!1}},created:function(){},methods:{showEdit:function(e){e?(this.title="编辑",this.form=Object.assign({},e)):this.title="添加",this.dialogFormVisible=!0},close:function(){this.$refs["form"].resetFields(),this.form=this.$options.data().form,this.dialogFormVisible=!1},save:function(){var e=this;this.$refs["form"].validate(function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(a){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=10;break}return t.next=3,Object(i["doEdit"])(e.form);case 3:n=t.sent,r=n.msg,e.$baseMessage(r,"success",!1,"vab-hey-message-success"),e.$emit("fetch-data"),e.close(),t.next=11;break;case 10:return t.abrupt("return",!1);case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}}},l=o,c=a("2877"),u=Object(c["a"])(l,n,r,!1,null,null,null);t["default"]=u.exports},d168:function(e,t,a){},d385:function(e,t,a){e.exports={"menu-color":"rgba(255,255,255,.95)","menu-color-active":"rgba(255,255,255,.95)","menu-background":"#282c34","column-second-menu-background":"#fff"}},d88f:function(e,t,a){},df14:function(e,t,a){e.exports={"menu-color":"rgba(255,255,255,.95)","menu-color-active":"rgba(255,255,255,.95)","menu-background":"#282c34","column-second-menu-background":"#fff"}},e180:function(e,t,a){"use strict";a("5640")},e276:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.title,visible:e.dialogFormVisible,width:"500px"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.close},scopedSlots:e._u([{key:"footer",fn:function(){return[a("el-button",{on:{click:e.close}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("确 定")])]},proxy:!0}])},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"用户名",prop:"username"}},[a("el-input",{model:{value:e.form.username,callback:function(t){e.$set(e.form,"username","string"===typeof t?t.trim():t)},expression:"form.username"}})],1),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{type:"password"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password","string"===typeof t?t.trim():t)},expression:"form.password"}})],1),a("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[a("el-input",{model:{value:e.form.email,callback:function(t){e.$set(e.form,"email","string"===typeof t?t.trim():t)},expression:"form.email"}})],1),a("el-form-item",{attrs:{label:"角色",prop:"roles"}},[a("el-checkbox-group",{model:{value:e.form.roles,callback:function(t){e.$set(e.form,"roles",t)},expression:"form.roles"}},[a("el-checkbox",{attrs:{label:"admin"}}),a("el-checkbox",{attrs:{label:"editor"}})],1)],1)],1)],1)},r=[],s=a("1da1"),i=(a("96cf"),a("953d")),o={name:"UserManagementEdit",data:function(){return{form:{roles:[]},rules:{username:[{required:!0,trigger:"blur",message:"请输入用户名"}],password:[{required:!0,trigger:"blur",message:"请输入密码"}],email:[{required:!0,trigger:"blur",message:"请输入邮箱"}],roles:[{required:!0,trigger:"blur",message:"请选择角色"}]},title:"",dialogFormVisible:!1}},methods:{showEdit:function(e){e?(this.title="编辑",this.form=Object.assign({},e)):this.title="添加",this.dialogFormVisible=!0},close:function(){this.$refs["form"].resetFields(),this.form=this.$options.data().form,this.dialogFormVisible=!1},save:function(){var e=this;this.$refs["form"].validate(function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(a){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=10;break}return t.next=3,Object(i["doEdit"])(e.form);case 3:n=t.sent,r=n.msg,e.$baseMessage(r,"success",!1,"vab-hey-message-success"),e.$emit("fetch-data"),e.close(),t.next=11;break;case 10:return t.abrupt("return",!1);case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}}},l=o,c=a("2877"),u=Object(c["a"])(l,n,r,!1,null,null,null);t["default"]=u.exports},e332:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"department"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("el-table",{attrs:{data:e.roletempList,"row-class-name":e.tableRowClassName,"row-style":e.selectedHighlight,size:"small",border:"","highlight-current-row":""},on:{"row-click":e.getDetailmenu}},[a("el-table-column",{attrs:{label:"名称",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.data.name))]),a("span",[e._v("( "+e._s(t.row.key)+" )")])]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.operation"),width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(a){return a.stopPropagation(),e.exportRoletemp(t.row)}}},[e._v(" 更新模版 ")]),a("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(a){return a.stopPropagation(),e.handleDelete(t.$index,t.row,e.roletempList)}}},[e._v(" 删除 ")])]}}])})],1)],1),a("el-col",{attrs:{span:8}},[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"footerleft"},[a("p",{staticClass:"top"},[a("span",{staticClass:"svg-container"},[a("vab-icon",{attrs:{icon:"role_group"}})],1),a("span",[e._v("分配权限")])]),a("div",{staticClass:"rolecontrol"},[a("el-tree",{ref:"permissionTree",attrs:{data:e.permissionTreeData,"default-checked-keys":e.rolePermissonList,"expand-on-click-node":!1,"show-checkbox":"","node-key":"name",accordion:""},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.node;return a("span",{staticClass:"custom-tree-node"},[a("span",[e._v(e._s(n.label))])])}}])})],1)])]),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"footerright"},[a("p",{staticClass:"top"},[a("span",{staticClass:"svg-container"},[a("vab-icon",{attrs:{icon:"menu_group"}})],1),a("span",[e._v("菜单分配")])]),a("div",{staticClass:"menucontrol",staticStyle:{"margin-top":"30px"}},[a("el-tree",{ref:"menusTree",attrs:{data:e.menuTreeData,"default-checked-keys":e.roleMenuList,"expand-on-click-node":!1,"show-checkbox":"","node-key":"objectId","default-props":"",accordion:""},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.node,r=t.data;return a("span",{staticClass:"custom-tree-node"},[e._v(" "+e._s(r.title?r.title:n.label)+" ")])}}])})],1)])])],1),a("el-col",{attrs:{span:10}},[a("div",{staticClass:"footerleft"},[a("p",{staticClass:"top"},[a("span",{staticClass:"svg-container"},[a("vab-icon",{attrs:{icon:"role_group"}})],1),a("span",[e._v("标签信息")])])]),a("div",{staticClass:"tags"},[a("el-form",{ref:"form",attrs:{rules:e.Rule,model:e.form,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"访问密钥"}},[a("el-input",{staticStyle:{width:"80%"},attrs:{readonly:""},model:{value:e.form.secret,callback:function(t){e.$set(e.form,"secret",t)},expression:"form.secret"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-refresh-right"},on:{click:e.handleClickRefresh},slot:"append"})],1)],1),a("el-form-item",{attrs:{label:"Token有效时间"}},[a("el-input",{staticStyle:{width:"80%"},attrs:{type:"number",placheholder:"请输入应用时间"},model:{value:e.form.expires,callback:function(t){e.$set(e.form,"expires",t)},expression:"form.expires"}}),a("span",{staticStyle:{"margin-left":"5px"}},[e._v("秒")])],1),a("el-form-item",{attrs:{label:"word预览服务器"}},[a("el-input",{staticStyle:{width:"80%"},attrs:{placheholder:"请输入word预览服务器地址"},model:{value:e.form.wordpreview,callback:function(t){e.$set(e.form,"wordpreview",t)},expression:"form.wordpreview"}})],1),a("el-form-item",{attrs:{label:"word生产服务器"}},[a("el-input",{staticStyle:{width:"80%"},attrs:{placheholder:"请输入word生产服务器地址"},model:{value:e.form.wordproduct,callback:function(t){e.$set(e.form,"wordproduct",t)},expression:"form.wordproduct"}})],1),a("el-form-item",{attrs:{label:"文件资源",prop:"file"}},[a("el-input",{staticStyle:{width:"80%"},attrs:{placheholder:"请输入url"},model:{value:e.form.file,callback:function(t){e.$set(e.form,"file",t)},expression:"form.file"}})],1),a("el-form-item",{attrs:{label:"组态资源",prop:"topo"}},[a("el-input",{staticStyle:{width:"80%"},attrs:{placheholder:"请输入url"},model:{value:e.form.topo,callback:function(t){e.$set(e.form,"topo",t)},expression:"form.topo"}})],1),a("el-form-item",{attrs:{label:"Graphql API",prop:"graphql"}},[a("el-input",{staticStyle:{width:"80%"},attrs:{placheholder:"请输入url"},model:{value:e.form.graphql,callback:function(t){e.$set(e.form,"graphql",t)},expression:"form.graphql"}})],1),a("el-form-item",{attrs:{label:"Restful API",prop:"rest"}},[a("el-input",{staticStyle:{width:"80%"},attrs:{placheholder:"请输入url"},model:{value:e.form.rest,callback:function(t){e.$set(e.form,"rest",t)},expression:"form.rest"}})],1),a("el-form-item",{attrs:{label:"home"}},[a("el-input",{staticStyle:{width:"80%"},attrs:{placheholder:"请输入路径"},model:{value:e.form.home,callback:function(t){e.$set(e.form,"home",t)},expression:"form.home"}})],1)],1)],1)])],1)],1)},r=[],s=a("2909"),i=a("1da1"),o=(a("96cf"),a("4de4"),a("159b"),a("a9e3"),a("d81d"),a("b0c0"),a("d3b7"),a("6062"),a("3ca3"),a("ddb0"),a("a434"),a("e0e9")),l=a("1ec2"),c=a("bc35"),u={name:"Department",components:{},data:function(){var e=function(e,t,a){var n=/^(((ht|f)tps?):\/\/)?[\w-]+(\.[\w-]+)+([\w.,@?^=%&:/~+#-]*[\w@?^=%&/~+#-])?$/;""===t||null===t?a(new Error("请输入url地址")):n.test(t)?a():a(new Error("请输入正确的url地址"))};return{Rule:{desc:[{required:!0,message:"请输入应用名称",trigger:"blur"},{validator:function(e,t,a){0===t.length?a(new Error("应用名称不能为空")):a()}}],file:[{trigger:"blur",validator:e}],topo:[{trigger:"blur",validator:e}],graphql:[{trigger:"blur",validator:e}],rest:[{trigger:"blur",validator:e}]},form:{file:"http://127.0.0.1:1250/shapes/upload",rest:"http://127.0.0.1:5080/iotapi",topo:"http://127.0.0.1:1350/",expires:18e3,wordpreview:"http://pump.iotn2n.com:8012",wordproduct:"http://pump.iotn2n.com/",graphql:"http://127.0.0.1:5080/graphql",secret:"RTc3MDk4MTgxNjAzMTc1MTUxMDY0",home:"E:/shuwa/4.1.0/shuwa_data_center/datacenter/file/files"},roletempList:[],dataMenus:[],roleMenuList:[],dataPermissions:[],rolePermissonList:[]}},computed:{permissionTreeData:function(){var e=this;return this.dataPermissions.filter((function(t){var a=[];return e.dataPermissions.forEach((function(e){t.objectId==e.parentId&&a.push(e)})),a.length>0&&(t.children=a),0==t.parentId}))},menuTreeData:function(){var e=JSON.parse(JSON.stringify(this.dataMenus));return e.filter((function(t){t.title=t.meta&&t.meta.title?t.meta.title:"";var a=e.filter((function(e){return t.objectId==e.parentId}));return a.length>0&&(t.children=a),0==t.parentId}))}},mounted:function(){this.gettable(),this.getMenu(),this.getRoleschema()},methods:{handleClickRefresh:function(){var e=Math.ceil(25*Math.random());this.form.secret=Base64.encode(String.fromCharCode(65+e)+Math.ceil(1e7*Math.random())+Number(new Date))},getMenu:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.data=[],e.dataMenus=[],t.next=4,Object(c["queryMenu"])({});case 4:a=t.sent,n=a.results,n&&(e.menuListRes=n,n.map((function(t){var a={};a.label=t.name,a.meta=t.meta,a.objectId=t.objectId,a.parentId=t.parent.objectId,a.createtime=new Date(t.createdAt).toLocaleDateString(),e.data.push(a),e.dataMenus.push(a)})));case 7:case"end":return t.stop()}}),t)})))()},gettable:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(o["queryDict"])({where:{type:"roletemp"}});case 2:a=t.sent,n=a.results,n&&(e.roletempList=n);case 5:case"end":return t.stop()}}),t)})))()},getRoleschema:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.dataPermissions=[],t.next=3,Object(l["queryPermission"])({});case 3:a=t.sent,n=a.results,n&&(e.permissionListRes=n,n.map((function(t){var a={};a.label=t.alias,a.name=t.name,a.objectId=t.objectId,a.parentId=t.parent.objectId,a.createtime=new Date(t.createdAt).toLocaleDateString(),e.dataPermissions.push(a)})));case 6:case"end":return t.stop()}}),t)})))()},tableRowClassName:function(e){var t=e.row,a=e.rowIndex;t.index=a},selectedHighlight:function(e){e.row;var t=e.rowIndex;if(this.currentSelectIndex===t)return{color:"#409EFF","font-weight":"bold"}},getDetailmenu:function(e,t,a,n){e.data.tag&&e.data.tag.appconfig?this.form=e.data.tag.appconfig:this.handleClickRefresh(),t&&"操作"==t.label||(this.currentSelectIndex=e.index,this.doSetChecked(e.data.menus,e.data.rules))},doSetChecked:function(e,t){var a=this;this.roleMenuList=[],this.rolePermissonList=[];var n=[];this.menuListRes.map((function(t){e.map((function(e){t.meta.title==e&&a.roleMenuList.push(t.objectId)}))})),this.$refs.menusTree.setCheckedKeys(this.roleMenuList),this.permissionListRes.map((function(e){t.map((function(t){e.name==t&&n.push(e.name)}))})),this.rolePermissonList=Object(s["a"])(new Set(n)),this.$refs.permissionTree.setCheckedKeys(this.rolePermissonList)},handleDelete:function(e,t,a){var n=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(o["delDict"])(t.objectId);case 2:s=r.sent,s?(n.$message({type:"success",message:"删除成功"}),a.splice(e,1)):n.$message({type:"error",message:"删除失败"});case 4:case"end":return r.stop()}}),r)})))()},exportRoletemp:function(e){var t=this;this.$confirm("确定要更新吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(i["a"])(regeneratorRuntime.mark((function a(){var n,r,s,i,l,c,u;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(n=[],r=[],s=t.$refs.menusTree.getCheckedNodes(),i=t.$refs.permissionTree.getCheckedNodes(),!(s&&i&&s.length>0&&i.length>0)){a.next=9;break}s.forEach((function(e){r.push(e.label)})),i.forEach((function(e){n.push(e.name)})),a.next=11;break;case 9:return t.$message({mesaage:"数据为空"}),a.abrupt("return");case 11:return l=e.data,e.data.tag||(l.tag={}),l["tag"].appconfig=t.form,l.menus=r,l.rules=n,c=t.$loading({background:"rgba(0, 0, 0, 0.5)"}),a.next=19,Object(o["putDict"])(e.objectId,{data:l});case 19:u=a.sent,u?(c.close(),u&&t.$message({message:"更新成功"})):(c.close(),t.$message({message:"更新失败"}));case 21:case"end":return a.stop()}}),a)})))).catch((function(e){}))}}},d=u,p=(a("c643"),a("a129"),a("2877")),m=Object(p["a"])(d,n,r,!1,null,"7aca08f8",null);t["default"]=m.exports},e4d1:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.title,visible:e.dialogFormVisible,width:"60%"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.close},scopedSlots:e._u([{key:"footer",fn:function(){return[a("el-button",{on:{click:e.close}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("确 定")])]},proxy:!0}])},[a("el-form",{ref:"form",attrs:{inline:!0,model:e.form,rules:e.rules,"label-width":"140px"}},[a("el-form-item",{attrs:{label:"name",prop:"name"}},[a("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"路径",prop:"path"}},[a("el-input",{model:{value:e.form.path,callback:function(t){e.$set(e.form,"path",t)},expression:"form.path"}})],1),a("el-form-item",{attrs:{label:"vue文件路径",prop:"component"}},[a("el-input",{model:{value:e.form.component,callback:function(t){e.$set(e.form,"component",t)},expression:"form.component"}})],1),a("el-form-item",{attrs:{label:"重定向",prop:"redirect"}},[a("el-input",{model:{value:e.form.redirect,callback:function(t){e.$set(e.form,"redirect",t)},expression:"form.redirect"}})],1),a("el-form-item",{attrs:{label:"标题",prop:"title"}},[a("el-input",{model:{value:e.form.meta.title,callback:function(t){e.$set(e.form.meta,"title",t)},expression:"form.meta.title"}})],1),a("el-form-item",{attrs:{label:"图标",prop:"icon"}},[a("el-popover",{attrs:{"popper-class":"icon-selector-popper",trigger:"hover",width:"292"},scopedSlots:e._u([{key:"reference",fn:function(){return[a("el-input",{model:{value:e.form.meta.icon,callback:function(t){e.$set(e.form.meta,"icon",t)},expression:"form.meta.icon"}})]},proxy:!0}])},[a("vab-icon-selector",{on:{"handle-icon":e.handleIcon}})],1)],1),a("el-form-item",{attrs:{label:"badge",prop:"badge"}},[a("el-input",{model:{value:e.form.meta.badge,callback:function(t){e.$set(e.form.meta,"badge",t)},expression:"form.meta.badge"}})],1),a("el-form-item",{attrs:{label:"隐藏",prop:"hidden"}},[a("el-switch",{model:{value:e.form.hidden,callback:function(t){e.$set(e.form,"hidden",t)},expression:"form.hidden"}})],1),a("el-form-item",{attrs:{label:"始终显示当前节点",prop:"alwaysShow"}},[a("el-switch",{model:{value:e.form.alwaysShow,callback:function(t){e.$set(e.form,"alwaysShow",t)},expression:"form.alwaysShow"}})],1),a("el-form-item",{attrs:{label:"自定义svg图标",prop:"isCustomSvg"}},[a("el-switch",{model:{value:e.form.meta.isCustomSvg,callback:function(t){e.$set(e.form.meta,"isCustomSvg",t)},expression:"form.meta.isCustomSvg"}})],1),a("el-form-item",{attrs:{label:"固定",prop:"noClosable"}},[a("el-switch",{model:{value:e.form.meta.noClosable,callback:function(t){e.$set(e.form.meta,"noClosable",t)},expression:"form.meta.noClosable"}})],1),a("el-form-item",{attrs:{label:"无缓存",prop:"noKeepAlive"}},[a("el-switch",{model:{value:e.form.meta.noKeepAlive,callback:function(t){e.$set(e.form.meta,"noKeepAlive",t)},expression:"form.meta.noKeepAlive"}})],1),a("el-form-item",{attrs:{label:"不显示当前标签页",prop:"tabHidden"}},[a("el-switch",{model:{value:e.form.meta.tabHidden,callback:function(t){e.$set(e.form.meta,"tabHidden",t)},expression:"form.meta.tabHidden"}})],1)],1)],1)},r=[],s=a("1da1"),i=(a("96cf"),a("f5b7")),o=a("754e"),l={name:"MenuManagementEdit",components:{VabIconSelector:i["default"]},data:function(){return{form:{meta:{icon:""}},rules:{name:[{required:!0,trigger:"blur",message:"请输入name"}],path:[{required:!0,trigger:"blur",message:"请输入path"}],component:[{required:!0,trigger:"blur",message:"请输入component"}],"meta.title":[{required:!0,trigger:"blur",message:"请输入标题"}],"meta.icon":[{required:!0,trigger:"blur",message:"请选择图标"}]},title:"",dialogFormVisible:!1}},created:function(){},methods:{handleIcon:function(e){this.form.meta.icon=e},showEdit:function(e){e?(this.title="编辑",this.form=Object.assign({},e)):this.title="添加",this.dialogFormVisible=!0},close:function(){this.$refs["form"].resetFields(),this.form=this.$options.data().form,this.dialogFormVisible=!1},save:function(){var e=this;this.$refs["form"].validate(function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(a){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=10;break}return t.next=3,Object(o["doEdit"])(e.form);case 3:n=t.sent,r=n.msg,e.$baseMessage(r,"success",!1,"vab-hey-message-success"),e.$emit("fetch-data"),e.close(),t.next=11;break;case 10:return t.abrupt("return",!1);case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}}},c=l,u=a("2877"),d=Object(u["a"])(c,n,r,!1,null,null,null);t["default"]=d.exports},f192:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"topic-metrics"},[a("div",{staticClass:"page-title"},[e._v(" "+e._s(e.$t("analysis.topicMetrics"))+" "),a("span",{staticClass:"sub-tip"},[e._v(e._s(e.$t("analysis.metricsTip")))]),e.modClosed?a("el-button",{staticClass:"confirm-btn",staticStyle:{float:"right"},attrs:{round:"",plain:"",type:"success",size:"medium",disable:e.$store.state.loading},on:{click:e.handleModLoad}},[e._v(" "+e._s(e.$t("modules.enable"))+" ")]):a("el-button",{staticClass:"confirm-btn",staticStyle:{float:"right"},attrs:{round:"",plain:"",type:"success",icon:"el-icon-plus",size:"medium",disable:e.$store.state.loading},on:{click:e.handleOperation}},[e._v(" "+e._s(e.$t("rule.create"))+" ")])],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.$store.state.loading,expression:"$store.state.loading"}],ref:"crudTable",attrs:{border:"",data:e.topics,"row-key":e.getRowKeys,"expand-row-keys":e.expands},on:{"expand-change":e.handleExpandChange}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"expand-header"},[e._v(" "+e._s(e.$t("analysis.details"))+" "),a("el-radio-group",{staticClass:"topic-qos-radio",attrs:{prop:t,size:"mini"},model:{value:e.topicQos,callback:function(t){e.topicQos=t},expression:"topicQos"}},[a("el-radio-button",{attrs:{label:"all"}},[e._v(" "+e._s(e.$t("analysis.all"))+" ")]),a("el-radio-button",{attrs:{label:"qos0"}},[e._v("QoS 0")]),a("el-radio-button",{attrs:{label:"qos1"}},[e._v("QoS 1")]),a("el-radio-button",{attrs:{label:"qos2"}},[e._v("QoS 2")])],1)],1),a("el-row",{staticClass:"expand-body",attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"message-card in"},[a("div",[e._v(" "+e._s(e.$t("analysis.messageIn"))+" "),a("span",{staticClass:"message-rate"},[e._v(" "+e._s(e.$t("analysis.rateItem",[e.getCurrentTopicData("in","rate")]))+" "+e._s(e.$t("analysis.rate"))+" ")])]),a("div",{staticClass:"message-card--body"},[e._v(" "+e._s(e.getCurrentTopicData("in","count"))+" ")])])]),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"message-card out"},[a("div",[e._v(" "+e._s(e.$t("analysis.messageOut"))+" "),a("span",{staticClass:"message-rate"},[e._v(" "+e._s(e.$t("analysis.rateItem",[e.getCurrentTopicData("out","rate")]))+" "+e._s(e.$t("analysis.rate"))+" ")])]),a("div",{staticClass:"message-card--body"},[e._v(" "+e._s(e.getCurrentTopicData("out","count"))+" ")])])]),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"message-card drop"},[a("div",[e._v(" "+e._s(e.$t("analysis.messageDrop"))+" "),a("span",{staticClass:"message-rate"},[e._v(" "+e._s(e.$t("analysis.rateItem",[e.getCurrentTopicDropRate(e.currentTopic["messages.dropped.rate"])]))+" "+e._s(e.$t("analysis.rate"))+" ")])]),a("div",{staticClass:"message-card--body"},[e._v(" "+e._s(e.currentTopic["messages.dropped.count"])+" ")])])])],1)]}}])}),a("el-table-column",{attrs:{prop:"topic",label:e.$t("topics.topic")}}),a("el-table-column",{attrs:{prop:"messageIn",label:e.$t("analysis.messageIn")}}),a("el-table-column",{attrs:{prop:"messageOut",label:e.$t("analysis.messageOut")}}),a("el-table-column",{attrs:{prop:"messageDrop",label:e.$t("analysis.messageDrop")}}),a("el-table-column",{attrs:{width:"180px",label:e.$t("oper.oper")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"success",size:"mini",plain:""},on:{click:function(a){return e.viewTopicDetails(t.row,t.$index)}}},[e._v(" "+e._s(e.$t("oper.view"))+" ")]),a("el-popover",{attrs:{placement:"right",trigger:"click",value:e.popoverVisible}},[a("p",[e._v(e._s(e.$t("oper.confirmDelete")))]),a("div",{staticStyle:{"text-align":"right"}},[a("el-button",{staticClass:"cache-btn",attrs:{size:"mini",type:"text"},on:{click:e.hidePopover}},[e._v(" "+e._s(e.$t("oper.cancel"))+" ")]),a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){return e.deleteTopicMetric(t.row)}}},[e._v(" "+e._s(e.$t("oper.confirm"))+" ")])],1),a("el-button",{attrs:{slot:"reference",size:"mini",type:"danger",plain:""},slot:"reference"},[e._v(" "+e._s(e.$t("oper.delete"))+" ")])],1)]}}])})],1),a("el-dialog",{staticClass:"create-subscribe",attrs:{title:e.$t("analysis.addTopic"),width:"400px",visible:e.addVisible},on:{"update:visible":function(t){e.addVisible=t}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleAdd(t)}}},[a("el-form",{ref:"record",staticClass:"el-form--public",attrs:{model:e.record,rules:e.rules,size:"small","label-position":"top"}},[a("el-form-item",{attrs:{prop:"topic",label:e.$t("subscriptions.topic")}},[a("el-input",{attrs:{placeholder:"Topic"},model:{value:e.record.topic,callback:function(t){e.$set(e.record,"topic",t)},expression:"record.topic"}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"cache-btn",attrs:{type:"text"},on:{click:e.handleClose}},[e._v(" "+e._s(e.$t("oper.cancel"))+" ")]),a("el-button",{staticClass:"confirm-btn",attrs:{type:"success",loading:e.$store.state.loading},on:{click:e.handleAdd}},[e._v(" "+e._s(e.$t("oper.add"))+" ")])],1)],1)],1)},r=[],s=(a("d81d"),a("99af"),a("b680"),{name:"TopicMetrics",components:{},beforeRouteLeave:function(e,t,a){clearInterval(this.timer),a()},props:{},data:function(){return{expands:[],addVisible:!1,popoverVisible:!1,modClosed:!1,topicQos:"all",timer:0,topics:[],currentExpandRow:{},currentTopic:{},record:{},rules:{topic:{required:!0,message:this.$t("oper.pleaseEnter")}}}},watch:{currentExpandRow:{deep:!0,handler:function(){clearInterval(this.timer)}}},created:function(){this.loadData()},beforeDestroy:function(){clearInterval(this.timer)},methods:{getRowKeys:function(e){return e.topic},loadData:function(){var e=this;this.$httpGet("/topic-metrics").then((function(t){var a=t.data;e.topics=a.map((function(e){var t=e.metrics;return{topic:e.topic,messageIn:t["messages.in.count"],messageOut:t["messages.out.count"],messageDrop:t["messages.dropped.count"]}})),e.modClosed=!1})).catch((function(t){e.$message.warning(e.$t("error.".concat(t.message))),e.modClosed=!0}))},hidePopover:function(){var e=this;this.popoverVisible=!0,setTimeout((function(){e.popoverVisible=!1}),0)},handleOperation:function(){this.addVisible=!0},handleModLoad:function(){var e=this;this.$httpPut("/modules/emqx_mod_topic_metrics/load").then((function(){e.$message.success(e.$t("oper.enableSuccess")),e.loadData(),e.modClosed=!1})).catch((function(t){e.$message.error(t||e.$t("error.networkError"))}))},deleteTopicMetric:function(e){var t=this;this.$httpDelete("/topic-metrics/".concat(encodeURIComponent(e.topic))).then((function(){t.loadData(),t.hidePopover()})).catch((function(e){t.$message.error(e||t.$t("error.networkError"))}))},handleAdd:function(){var e=this;this.$refs.record.validate((function(t){if(t){var a={};Object.assign(a,e.record),e.$httpPost("/topic-metrics",a).then((function(){e.handleClose(),e.loadData()})).catch((function(){}))}}))},handleClose:function(){this.addVisible=!1,this.$refs.record.resetFields()},viewTopicDetails:function(e,t){var a=document.querySelectorAll(".el-table__expand-icon")[t];a&&a.click()},loadDetail:function(){var e=this;this.$httpGet("/topic-metrics/".concat(encodeURIComponent(this.currentTopic.topic))).then((function(t){e.currentTopic=t.data,e.loadData()})).catch((function(){}))},setLoadDetailInterval:function(){var e=this;this.timer=setInterval((function(){e.$httpGet("/topic-metrics/".concat(encodeURIComponent(e.currentExpandRow.topic))).then((function(t){e.currentTopic=t.data})).catch((function(){}))}),1e4)},handleExpandChange:function(e,t){var a=this;if(!t.length)return this.currentExpandRow={},void clearInterval(this.timer);this.currentExpandRow=e,this.currentTopic={},this.$httpGet("/topic-metrics/".concat(encodeURIComponent(e.topic))).then((function(n){a.currentTopic=n.data,a.$refs.crudTable.store.states.expandRows=t.length?[e]:[],a.loadData(),a.setLoadDetailInterval()})).catch((function(){}))},getCurrentTopicData:function(e,t){var a={all:"messages",qos0:"messages.qos0",qos1:"messages.qos1",qos2:"messages.qos2"},n=a[this.topicQos],r=this.currentTopic["".concat(n,".").concat(e,".").concat(t)];return"rate"===t&&r?r.toFixed(2):r},getCurrentTopicDropRate:function(e){return e?e.toFixed(2):e}}}),i=s,o=(a("6125"),a("2877")),l=Object(o["a"])(i,n,r,!1,null,null,null);t["default"]=l.exports},f4cc:function(e,t,a){},f5e4:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"edituser"},[a("div",{staticClass:"admin",staticStyle:{"margin-bottom":"20px"}},[e._v("编辑用户")]),a("el-form",{ref:"ruleForm2",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm2,"status-icon":"","label-width":"100px"}},[a("el-form-item",{attrs:{label:"账号",prop:"account"}},[a("el-input",{attrs:{placeholder:"请输入账号"},model:{value:e.ruleForm2.account,callback:function(t){e.$set(e.ruleForm2,"account",t)},expression:"ruleForm2.account"}})],1),a("el-form-item",{attrs:{label:"手机号",prop:"phone"}},[a("el-input",{attrs:{maxlength:11,placeholder:"请输入手机号"},model:{value:e.ruleForm2.phone,callback:function(t){e.$set(e.ruleForm2,"phone",t)},expression:"ruleForm2.phone"}})],1),a("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[a("el-input",{attrs:{placeholder:"请输入邮箱"},model:{value:e.ruleForm2.email,callback:function(t){e.$set(e.ruleForm2,"email",t)},expression:"ruleForm2.email"}})],1),a("el-form-item",{attrs:{label:"姓名",prop:"username"}},[a("el-input",{attrs:{maxlength:5,placeholder:"2-5个文字"},model:{value:e.ruleForm2.username,callback:function(t){e.$set(e.ruleForm2,"username",t)},expression:"ruleForm2.username"}})],1),a("el-form-item",{attrs:{label:"部门选择"}},[a("el-cascader",{staticStyle:{width:"600px"},attrs:{props:e.treeprops,options:e.data,"show-all-levels":!1,placeholder:"请选择部门","auto-complete":"off","change-on-select":""},model:{value:e.ruleForm2.departmentid,callback:function(t){e.$set(e.ruleForm2,"departmentid",t)},expression:"ruleForm2.departmentid"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submit_edituser(e.ruleForm2)}}},[e._v(" 保存 ")])],1)],1)],1)},r=[],s=a("1da1"),i=(a("159b"),a("96cf"),a("8665")),o=a("5da9"),l={data:function(){return{data:[],treeprops:{value:"objectId",label:"name"},ruleForm2:{account:"",phone:"",username:"",password:"",email:"",checkPass:"",departmentid:[]},id:""}},computed:{},mounted:function(){this.editUser()},methods:{submit_edituser:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={username:t.ruleForm2.account,nick:t.ruleForm2.username,phone:t.ruleForm2.phone,email:t.ruleForm2.email,emailVerified:!0},e.next=3,Object(i["putUser"])(t.$route.query.id,a);case 3:n=e.sent,n?t.$message({message:"更改成功",type:"success"}):t.$message({type:"error",message:"修改用户失败"});case 5:case"end":return e.stop()}}),e)})))()},editUser:function(){var e=this;Object(i["getUser"])(this.$route.query.id).then((function(t){e.ruleForm2.username=t.nick,e.ruleForm2.phone=t.phone,e.ruleForm2.account=t.username,e.ruleForm2.email=t.email,e.getDepartment()})).catch((function(t){e.$message({type:"error",message:"用户详情获取失败"})}))},getDepartment:function(){var e=this;Object(o["roletree"])().then((function(t){var a=t.results;a.forEach((function(e){})),e.data=t.results})).catch((function(t){e.$message("部门列表获取失败"),e.data=[]}))}}},c=l,u=(a("b0d6"),a("2877")),d=Object(u["a"])(c,n,r,!1,null,"b0e57166",null);t["default"]=d.exports},f683:function(e,t,a){},fa22:function(e,t,a){"use strict";a("c613")},fac5:function(t,a,n){"use strict";n.r(a);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"websocket-view"},[a("el-card",{staticClass:"el-card--self",nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.mqttConnect(t)}}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[e._v(e._s(e.$translateTitle("websocket.connect")))])]),a("el-form",{attrs:{size:"medium"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:e.$translateTitle("websocket.host")}},[a("el-input",{model:{value:e.host,callback:function(t){e.host=t},expression:"host"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:e.$translateTitle("websocket.port")}},[a("el-input",{model:{value:e.port,callback:function(t){e.port=e._n(t)},expression:"port"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"Path"}},[a("el-input",{model:{value:e.path,callback:function(t){e.path=t},expression:"path"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:e.$translateTitle("websocket.clientID")}},[a("el-input",{model:{value:e.clientId,callback:function(t){e.clientId=t},expression:"clientId"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:e.$translateTitle("websocket.username")}},[a("el-input",{model:{value:e.username,callback:function(t){e.username=t},expression:"username"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:e.$translateTitle("websocket.password")}},[a("el-input",{model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:e.$translateTitle("websocket.keepAlive")}},[a("el-input",{model:{value:e.keepalive,callback:function(t){e.keepalive=e._n(t)},expression:"keepalive"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{staticClass:"check-area"},[a("el-checkbox",{model:{value:e.clean,callback:function(t){e.clean=t},expression:"clean"}},[e._v(" "+e._s(e.$translateTitle("websocket.cleanSession"))+" ")]),a("el-checkbox",{staticStyle:{"margin-left":"50px"},on:{change:e.handleSSL},model:{value:e.isSSL,callback:function(t){e.isSSL=t},expression:"isSSL"}},[e._v(" SSL ")]),a("span",{staticStyle:{margin:"5px 0 20px 50px",color:"#42d885"}},[e._v(" "+e._s(e.connectURL)+" ")])],1)],1)],1)],1),a("div",{staticClass:"operation-area"},[a("el-button",{staticClass:"confirm-btn",attrs:{type:"success",disabled:e.loading||e.client.connected},on:{click:e.mqttConnect},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.mqttConnect(t)}}},[e._v(" "+e._s(e.$translateTitle("websocket.connect"))+" ")]),a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"danger",loading:e.loading&&e.client.connected,disabled:!e.loading&&!e.client.connected},on:{click:e.disconnectSwitch},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.disconnectSwitch(t)}}},[e._v(" "+e._s(e.$translateTitle("websocket.disconnect"))+" ")]),a("div",{staticClass:"connect-state"},[e._v(" "+e._s(e.$translateTitle("websocket.currentState"))+": "),a("span",{style:e.client.connected?"color: #42d885":"color: #ff6d6d"},[e._v(" "+e._s(e.getStatus)+" ")])])],1)],1),a("el-card",{staticClass:"el-card--self",staticStyle:{"max-height":"450px"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[e._v(e._s(e.$translateTitle("websocket.subscribe")))])]),a("el-form",{attrs:{size:"medium"}},[a("el-row",{attrs:{gutter:20},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.mqttSubscribe(t)}}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$translateTitle("websocket.topic")}},[a("el-input",{model:{value:e.subTopic,callback:function(t){e.subTopic=t},expression:"subTopic"}})],1),a("el-form-item",{attrs:{label:e.$translateTitle("websocket.qoS")}},[a("el-select",{model:{value:e.subQos,callback:function(t){e.subQos=e._n(t)},expression:"subQos"}},[a("el-option",{attrs:{value:0}}),a("el-option",{attrs:{value:1}}),a("el-option",{attrs:{value:2}})],1)],1),a("div",{staticClass:"operation-area"},[a("el-button",{staticClass:"confirm-btn",attrs:{type:"success"},on:{click:e.mqttSubscribe},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.mqttSubscribe(t)}}},[e._v(" "+e._s(e.$translateTitle("websocket.subscribe"))+" ")])],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$translateTitle("websocket.subscribe")}},[a("el-table",{attrs:{data:e.subscriptions,"max-height":320}},[a("el-table-column",{attrs:{prop:"topic","min-width":"150",label:e.$translateTitle("websocket.topic")}}),a("el-table-column",{attrs:{prop:"qos","min-width":"120",label:e.$translateTitle("websocket.qoS")}}),a("el-table-column",{attrs:{prop:"time","min-width":"180",label:e.$translateTitle("websocket.time")}}),a("el-table-column",{attrs:{width:"90",label:e.$translateTitle("websocket.oper")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("i",{staticClass:"unsubscribe el-icon-close",attrs:{title:"Unsubscribe"},on:{click:function(a){return e.mqttCacheScuscribe(t.row.topic)}}})]}}])})],1)],1)],1)],1)],1)],1),a("el-card",{staticClass:"el-card--self",staticStyle:{"max-height":"800px","padding-bottom":"20px"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[e._v(e._s(e.$translateTitle("websocket.messages")))])]),a("el-form",{attrs:{size:"medium"}},[a("el-row",{attrs:{gutter:20},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.mqttPublish(t)}}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:e.$translateTitle("websocket.topic")}},[a("el-input",{model:{value:e.publishTopic,callback:function(t){e.publishTopic=t},expression:"publishTopic"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:e.$translateTitle("websocket.messages")}},[a("el-input",{model:{value:e.publishMessage,callback:function(t){e.publishMessage=t},expression:"publishMessage"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:e.$translateTitle("websocket.qoS")}},[a("el-select",{model:{value:e.publishQos,callback:function(t){e.publishQos=e._n(t)},expression:"publishQos"}},[a("el-option",{attrs:{value:0}}),a("el-option",{attrs:{value:1}}),a("el-option",{attrs:{value:2}})],1)],1)],1),a("el-col",{staticStyle:{"margin-top":"33px"},attrs:{span:6}},[a("el-form-item",[a("el-checkbox",{model:{value:e.publishRetain,callback:function(t){e.publishRetain=t},expression:"publishRetain"}},[e._v(" "+e._s(e.$translateTitle("websocket.retained"))+" ")]),a("el-button",{staticClass:"confirm-btn",staticStyle:{float:"right","margin-top":"4px"},attrs:{type:"success"},on:{click:e.mqttPublish},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.mqttPublish(t)}}},[e._v(" "+e._s(e.$translateTitle("websocket.send"))+" ")])],1)],1)],1)],1),a("el-form",{staticStyle:{"margin-top":"20px"},attrs:{size:"medium"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$translateTitle("websocket.messagesAlreadySent")}},[a("i",{staticClass:"fa fa-refresh refresh-btn",attrs:{title:"clear message"},on:{click:function(t){return e.clearMessage(!1)}}}),a("el-table",{attrs:{border:"",data:e.publishedMessages,"max-height":600}},[a("el-table-column",{attrs:{prop:"message","min-width":"100",label:e.$translateTitle("websocket.messages")}}),a("el-table-column",{attrs:{prop:"topic",label:e.$translateTitle("websocket.topic")}}),a("el-table-column",{attrs:{prop:"qos","min-width":"120",label:e.$translateTitle("websocket.qoS")}}),a("el-table-column",{attrs:{prop:"time","min-width":"180",label:e.$translateTitle("websocket.time")}})],1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$translateTitle("websocket.messagesReceived")}},[a("i",{staticClass:"fa fa-refresh refresh-btn",attrs:{title:"clear message"},on:{click:e.clearMessage}}),a("el-table",{attrs:{border:"",data:e.receivedMessages,"max-height":600}},[a("el-table-column",{attrs:{prop:"message","min-width":"100",label:e.$translateTitle("websocket.messages")}}),a("el-table-column",{attrs:{prop:"topic",label:e.$translateTitle("websocket.topic")}}),a("el-table-column",{attrs:{prop:"qos","min-width":"120",label:e.$translateTitle("websocket.qoS")}}),a("el-table-column",{attrs:{prop:"time",width:"180",label:e.$translateTitle("websocket.time")}})],1)],1)],1)],1)],1)],1)],1)},s=[],i=(n("d3b7"),n("25f0"),n("2ca0"),n("99af"),n("159b"),n("a434"),n("caad"),n("b64b"),n("5c96")),o=n("6048"),l=n("c620"),c={name:"WebsocketView",components:{"el-input":i["Input"],"el-checkbox":i["Checkbox"],"el-select":i["Select"],"el-option":i["Option"],"el-button":i["Button"],"el-table":i["Table"],"el-table-column":i["TableColumn"],"el-row":i["Row"],"el-col":i["Col"],"el-card":i["Card"],"el-form":i["Form"],"el-form-item":i["FormItem"]},beforeRouteLeave:function(e,t,a){this.client.connected&&this.stashConnect(),a()},props:{topic:{type:String,default:""}},data:function(){return{retryTimes:0,loading:!1,sending:!1,host:l["_scokethost"],port:8083,path:"/mqtt",username:"",isSSL:!1,password:"",keepalive:60,clean:!0,clientId:"mqttjs_".concat(Math.random().toString(16).substr(2,10)),subQos:0,publishQos:0,publishMessage:'{ "msg": "Hello, World!" }',subTopic:"testtopic/#",publishTopic:"testtopic",publishRetain:!1,receivedMessages:[],publishedMessages:[],subscriptions:[],client:{}}},computed:{getStatus:function(){return this.client.connected?this.$translateTitle("websocket.connected"):this.loading?this.$translateTitle("websocket.connecting"):this.$translateTitle("websocket.disconnected")},connectURL:function(){var e=this.path&&this.path.startsWith("/")?this.path:"/".concat(this.path);return"".concat(this.isSSL?"wss":"ws","://").concat(this.host,":").concat(this.port).concat(e)}},created:function(){this.setSSL(),this.loadConnect()},methods:{handleSSL:function(){this.port=this.isSSL?8084:8083},now:function(){return moment().format("YYYY-MM-DD")},disconnectSwitch:function(){this.loading&&!this.client.connected?(this.loading=!1,NProgress.done(),this.client.end(),this.client={}):this.mqttDisconnect()},mqttConnect:function(){var e=this;if(window.WebSocket){if(!this.client.connected&&!this.loading){NProgress.start(),this.loading=!0,this.retryTimes=0;var t={keepalive:this.keepalive,username:this.username,password:this.password,clientId:this.clientId,clean:this.clean,connectTimeout:1e4};try{this.client=mqtt.connect(this.connectURL,t),this.client.on("connect",(function(){e.loading=!1,NProgress.done()})),this.client.on("reconnect",this.handleReconnect),this.client.on("error",(function(t){e.$message.error(t.toString()||e.$translateTitle("error.networkError")),e.retryTimes=0,e.client.end(),e.sending=!1,e.loading=!1,NProgress.done()})),this.client.on("message",(function(t,a,n){e.receivedMessages.unshift({topic:t,message:a.toString(),qos:n.qos,time:e.now()})}))}catch(a){this.loading=!1,NProgress.done(),this.$message.error(a.toString())}}}else this.$message.error(this.$translateTitle("websocket.notSupport"))},mqttDisconnect:function(){var e=this;this.client.connected?(NProgress.start(),this.client.end(),this.client.on("close",(function(){e.loading=!1,e.reset(),e.client={},NProgress.done()}))):this.$message.error(this.$translateTitle("websocket.connectLeave"))},mqttSubscribe:function(){var e=this;this.client.connected||this.subTopic?(this.subscriptions.forEach((function(t,a){t.topic===e.subTopic&&e.subscriptions.splice(a,a+1)})),NProgress.start(),this.client.subscribe(this.subTopic,{qos:this.subQos},(function(t,a){t||a[0]&&![0,1,2].includes(a[0].qos)?(NProgress.done(),e.$message.error(t?t.message:e.$translateTitle("websocket.subscribeFailure"))):(e.subscriptions.unshift({topic:e.subTopic,qos:e.subQos,time:e.now()}),e.$message.success(e.$translateTitle("websocket.subscribeSuccess")),NProgress.done())}))):this.$message.error(this.$translateTitle("websocket.connectLeave"))},mqttPublish:function(){var e=this;if(this.client.connected){NProgress.start();var t={qos:this.publishQos,retain:this.publishRetain};this.sending=!0,this.client.publish(this.publishTopic,this.publishMessage,t,(function(t){t?(NProgress.done(),e.$message.error(t.toString())):(e.publishedMessages.unshift({message:e.publishMessage,topic:e.publishTopic,qos:e.publishQos,time:e.now()}),e.$message.success(e.$translateTitle("websocket.messageSendOut")),NProgress.done())}))}else this.$message.error(this.$translateTitle("websocket.connectLeave"))},mqttCacheScuscribe:function(e){var t=this;this.client.connected?this.client.unsubscribe(e,(function(a){a?t.$message.error("".concat(t.$translateTitle("websocket.unsubscribeFailure")," ").concat(a.toString(),"!")):t.subscriptions.forEach((function(a,n){a.topic===e&&t.subscriptions.splice(n,1)}))})):this.$message.error(this.$translateTitle("websocket.connectLeave"))},handleReconnect:function(){if(this.retryTimes>1){try{this.sending?this.$message.error(this.$translateTitle("websocket.connectError")):this.$message.error("".concat(this.$translateTitle("websocket.connectFailure")," ").concat(this.host,":").concat(this.port))}catch(e){this.retryTimes=0,this.sending=!1,this.loading=!1,NProgress.done(),this.client.end(),this.client={}}return this.retryTimes=0,this.sending=!1,this.loading=!1,NProgress.done(),this.client.end(),void(this.client={})}this.sending&&this.$message.error(this.$translateTitle("websocket.connectError")),this.retryTimes+=1},reset:function(){this.subscriptions=[],this.receivedMessages=[],this.publishedMessages=[],this.publishMessage='{ "msg": "Hello, World!" }',this.subTopic="testtopic/#",this.publishTopic="testtopic"},clearMessage:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e?this.receivedMessages=[]:this.publishedMessages=[]},loadConnect:function(){var e=this;this.topic&&(this.subTopic=this.topic,this.publishTopic=this.topic,this.mqttConnect(),this.mqttSubscribe()),o["default"].client&&o["default"].client.connected&&(this.client=o["default"].client,Object.keys(o["default"].options).forEach((function(t){e[t]=o["default"].options[t]})))},stashConnect:function(){var e=this;o["default"].client=this.client,Object.keys(o["default"].options).forEach((function(t){o["default"].options[t]=e[t]}))},setSSL:function(){"https:"===window.location.protocol&&(this.isSSL=!0,this.port=8084)}}},u=c,d=(n("b767"),n("2877")),p=Object(d["a"])(u,r,s,!1,null,null,null);a["default"]=p.exports}}]);