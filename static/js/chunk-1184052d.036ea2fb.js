/*!
 *  build: 杭州数蛙科技有限公司 
 *  copyright: dgiot_dashboard 
 *  time: Thu Aug 05 2021 02:34:17 GMT+0000 (Coordinated Universal Time)
 */
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1184052d"],{"0076":function(e,t,a){"use strict";a("9d89")},"01dd":function(e,t,a){},"028d":function(e,t,a){"use strict";a.r(t);var r,n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"equipment"},[a("div",{staticClass:"dialog"},[a("el-dialog",{attrs:{"append-to-body":!0,visible:e.popoverVisible,top:"5vh",width:"40vh"},on:{"update:visible":function(t){e.popoverVisible=t}}},[a("div",{staticClass:"leftTree"},[a("p",{staticStyle:{"text-align":"center"}},[e._v(" "+e._s(e.$translateTitle("developer.Company"))+" : "+e._s(e.deciceCompany)+" ")]),a("el-tree",{attrs:{data:e.deptTreeData,props:e.roleProps,"expand-on-click-node":!1,"node-key":"index","default-expand-all":""},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.node,n=t.data;return a("div",{staticClass:"custom-tree-node"},[a("span",{class:{selected:n.objectId==e.curDepartmentId},on:{click:function(t){return e.transferAcl(n)}}},[e._v(" "+e._s(r.label)+" ")])])}}])})],1)]),a("el-dialog",{attrs:{"append-to-body":!0,visible:e.mapDialog,top:"5vh",width:"80vh"},on:{"update:visible":function(t){e.mapDialog=t}}},[a("baidu-map",{staticStyle:{height:"80vh"},attrs:{ak:"fnc5Z92jC7CwfBGz8Dk66E9sXEIYZ6TG",center:e.center,zoom:e.zoom,"scroll-wheel-zoom":!0,"map-click":!1},on:{ready:e.handler,click:e.mapClick}},[a("bm-marker",{attrs:{position:e.center,dragging:!0,animation:"BMAP_ANIMATION_BOUNCE"}},[a("bm-label",{attrs:{content:e.deviceId,"label-style":{color:"red",fontSize:"12px"},offset:{width:-25,height:30}}})],1),a("bm-navigation",{attrs:{anchor:"BMAP_ANCHOR_TOP_RIGHT"}})],1)],1),a("el-dialog",{attrs:{"append-to-body":!0,visible:e.InfoDialog,title:e.devicedetail.name,top:"5vh",width:"80%"},on:{"update:visible":function(t){e.InfoDialog=t}}},[a("info",{attrs:{devicedetail:e.devicedetail}}),a("el-tabs",{attrs:{type:"card"},model:{value:e.activeparseTbas,callback:function(t){e.activeparseTbas=t},expression:"activeparseTbas"}},e._l(e.parseTbas,(function(t){return a("el-tab-pane",{key:t.name,attrs:{label:t.name,name:t.name}},[a("ele-form",e._b({model:{value:t.config,callback:function(a){e.$set(t,"config",a)},expression:"item.config"}},"ele-form",t.config,!1))],1)})),1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.InfoDialog=!1}}},[e._v(" "+e._s(e.$translateTitle("developer.cancel"))+" ")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.InfoDialog=!1}}},[e._v(" "+e._s(e.$translateTitle("developer.determine"))+" ")])],1)],1),a("el-dialog",{attrs:{"append-to-body":!0,visible:e.stateDialog,title:e.stateDialog.name,top:"5vh",width:"80%","before-close":e.CloseState},on:{"update:visible":function(t){e.stateDialog=t}}},[a("deviceState",{attrs:{devicedetail:e.stateDetail},on:{ParserSave:e.ParserSave}}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.stateDialog=!1}}},[e._v(" "+e._s(e.$translateTitle("developer.cancel"))+" ")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.stateDialog=!1}}},[e._v(" "+e._s(e.$translateTitle("developer.determine"))+" ")])],1)],1)],1),a("div",{staticClass:"equtabs"},[a("div",{staticClass:"equ_header"},[a("el-row",[a("el-col",{attrs:{xs:24,sm:24,md:8,xl:8}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v(" "+e._s(e.$translateTitle("equipment.Equipment Overview"))+" ")]),a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{icon:"el-icon-refresh",type:"text"}})],1),a("div",{staticClass:"text item"},[a("ve-ring",{attrs:{height:"140px","data-empty":!e.chartOnlone.rows,data:e.chartOnlone,settings:e.chartSettings,extend:e.chartExtend}})],1)])],1),a("el-col",{attrs:{xs:24,sm:24,md:8,xl:8}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v(" "+e._s(e.$translateTitle("equipment.Warning today"))+" ")]),a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{icon:"el-icon-refresh",type:"text"}})],1),a("div",{staticClass:"text item"},[a("ve-ring",{attrs:{height:"140px","data-empty":!e.chartwaring.rows,data:e.chartwaring}})],1)])],1),a("el-col",{attrs:{xs:24,sm:24,md:8,xl:8}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v(e._s(e.$translateTitle("equipment.Products")))]),a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{icon:"el-icon-refresh",type:"text"}})],1),a("div",{staticClass:"text item"},[a("ve-ring",{attrs:{height:"140px","data-empty":!e.chartProduct.rows,data:e.chartProduct}})],1)])],1)],1)],1),a("div",{staticClass:"equdevices",staticStyle:{"margin-top":"20px"}},[a("vab-query-form",[a("vab-query-form-top-panel",[a("el-form",{attrs:{inline:!0,model:e.queryForm,"label-width":"100px"},nativeOn:{submit:function(e){e.preventDefault()}}},[a("el-form-item",{attrs:{label:e.$translateTitle("equipment.Department")}},[a("el-select",{attrs:{placeholder:"请选择",clearable:""},on:{"visible-change":function(t){return e.change(t)}},model:{value:e.queryForm.workGroupName,callback:function(t){e.$set(e.queryForm,"workGroupName",t)},expression:"queryForm.workGroupName"}},[a("el-option",{staticStyle:{height:"auto",padding:"0"},attrs:{value:e.treeDataValue}},[a("el-tree",{ref:"workGroup",attrs:{data:e.deptTreeData,props:e.roleProps,"expand-on-click-node":!1,"node-key":"index","default-expand-all":""},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.node,n=t.data;return a("div",{staticClass:"custom-tree-node"},[a("span",{class:{selected:n.objectId==e.curDepartmentId},on:{click:function(t){return e.handleNodeClick(n,r)}}},[e._v(" "+e._s(r.label)+" ")])])}}])})],1)],1)],1),a("el-form-item",{attrs:{label:e.$translateTitle("equipment.Products")}},[a("el-select",{attrs:{disabled:!e.productenable},on:{change:e.selectProdChange},model:{value:e.equvalue,callback:function(t){e.equvalue=t},expression:"equvalue"}},e._l(e.proTableData,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.objectId}})})),1)],1),a("el-form-item",{attrs:{label:e.$translateTitle("equipment.device status")}},[a("el-select",{staticStyle:{width:"100px"},model:{value:e.onlinedevices,callback:function(t){e.onlinedevices=t},expression:"onlinedevices"}},[a("el-option",{attrs:{value:e.$translateTitle("zetadevices.online")}}),a("el-option",{attrs:{value:e.$translateTitle("zetadevices.offline")}})],1)],1),a("el-form-item",{attrs:{label:e.$translateTitle("equipment.condition")}},[e.selectdevice==e.$translateTitle("equipment.devicename")?a("el-input",{attrs:{placeholder:e.$translateTitle("equipment.enterproductname")},model:{value:e.deviceinput,callback:function(t){e.deviceinput=t},expression:"deviceinput"}},[a("el-select",{staticStyle:{width:"140px"},attrs:{slot:"prepend"},slot:"prepend",model:{value:e.selectdevice,callback:function(t){e.selectdevice=t},expression:"selectdevice"}},[a("el-option",{attrs:{value:e.$translateTitle("equipment.devicename")}}),a("el-option",{attrs:{value:e.$translateTitle("equipment.devicenumber")}})],1),a("el-button",{attrs:{slot:"append",icon:"el-icon-search",size:"mini"},on:{click:function(t){return e.getDevices(0)}},slot:"append"})],1):a("el-input",{attrs:{placeholder:e.$translateTitle("equipment.enterdevicenumber")},model:{value:e.deviceinput,callback:function(t){e.deviceinput=t},expression:"deviceinput"}},[a("el-select",{staticStyle:{width:"120px"},attrs:{slot:"prepend"},slot:"prepend",model:{value:e.selectdevice,callback:function(t){e.selectdevice=t},expression:"selectdevice"}},[a("el-option",{attrs:{value:e.$translateTitle("equipment.devicename")}}),a("el-option",{attrs:{value:e.$translateTitle("equipment.devicenumber")}})],1),a("el-button",{attrs:{slot:"append",size:"mini",icon:"el-icon-search"},on:{click:function(t){return e.getDevices(0)}},slot:"append"})],1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.addDeviceForm}},[e._v(" "+e._s(e.$translateTitle("equipment.adddevice"))+" ")])],1),a("el-form-item",{staticStyle:{display:"none"}},[a("el-button",{staticClass:"selectdetail",attrs:{disabled:0==e.multipleTable.length,size:"small",type:"primary"},on:{click:e.deleteDevcie}},[e._v(" "+e._s(e.$translateTitle("developer.delete"))+" ")]),a("el-button",{staticClass:"selectdetail",attrs:{disabled:0==e.multipleTable.length,size:"small",type:"primary"},on:{click:function(t){return e.unactiveDevice(!1)}}},[e._v(" "+e._s(e.$translateTitle("developer.prohibit"))+" ")]),a("el-button",{staticClass:"selectdetail",attrs:{disabled:0==e.multipleTable.length,size:"small",type:"primary"},on:{click:function(t){return e.unactiveDevice(!0)}}},[e._v(" "+e._s(e.$translateTitle("developer.enable"))+" ")]),a("el-button",{attrs:{size:"small"}},[e._v(" "+e._s(e.$translateTitle("equipment.batchaddition"))+" ")])],1)],1)],1)],1)],1),a("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:e.$translateTitle("equipment.list"),name:"first"}},[a("div",{staticClass:"tabstable"},[a("el-table",{directives:[{name:"show",rawName:"v-show",value:e.isALL,expression:"isALL"},{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"filterTable",staticStyle:{width:"100%","margin-top":"20px","text-align":"center"},attrs:{data:e.tableData,"row-style":e.rowClass},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",align:"center",width:"55"}}),a("el-table-column",{attrs:{label:e.$translateTitle("equipment.devicenumber"),align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.devaddr)+" ")]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("equipment.name"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{margin:"0",color:"green"}},[e._v(" "+e._s(t.row.name)+" ")])]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("equipment.state"),align:"center",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return["ONLINE"==t.row.status?a("span",{class:t.row.status},[e._v(" "+e._s(e.$translateTitle("product.online"))+" ")]):e._e(),"ONLINE"==t.row.status?a("el-tooltip",{attrs:{content:e.$translateTitle("equipment.thedeviceisonline"),placement:"top"}},[a("i",{staticClass:"el-icon-question"})]):e._e(),"OFFLINE"==t.row.status?a("span",{class:t.row.status},[e._v(" "+e._s(e.$translateTitle("product.offline"))+" ")]):e._e(),"OFFLINE"==t.row.status?a("el-tooltip",{attrs:{content:e.$translateTitle("equipment.thedeviceisoffline"),placement:"top"}},[a("i",{staticClass:"el-icon-question"})]):e._e(),"OFFLINE"!=t.row.status&&"ONLINE"!=t.row.status?a("span",{class:t.row.status},[e._v(" "+e._s(e.$translateTitle("product.unregistered"))+" ")]):e._e()]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("equipment.product"),align:"center",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.product&&t.row.product.name?a("span",[e._v(" "+e._s(t.row.product.name||"")+" ")]):e._e()]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.Company"),align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(" "+e._s(t.row.Company)+" ")])]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.enable")+"/"+e.$translateTitle("developer.prohibit"),align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-color":"#5eb058","inactive-color":"#cccccc"},on:{change:function(a){return e.handelUpdate(a,t.row,t.$index)}},model:{value:t.row.isEnable,callback:function(a){e.$set(t.row,"isEnable",a)},expression:"scope.row.isEnable"}})]}}])}),a("el-table-column",{attrs:{align:"center",label:e.$translateTitle("developer.createdAt"),width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.utc2beijing(t.row.createdAt)))])]}}])}),a("el-table-column",{attrs:{width:"500",label:e.$translateTitle("developer.operation"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("vab-icon",{staticStyle:{color:"#1890ff"},attrs:{icon:"map-pin-range-line"}}),a("el-link",{attrs:{underline:!1,type:"primary"},on:{click:function(a){return e.showInfo(t.row)}}},[e._v(" "+e._s(e.$translateTitle("equipment.info"))+" ")]),a("el-link",{staticStyle:{margin:"0 10px"},attrs:{underline:!1,type:"primary",icon:"el-icon-view"},on:{click:function(a){return e.deviceToDetail(t.row)}}},[e._v(" "+e._s(e.$translateTitle("equipment.see"))+" ")]),a("vab-icon",{staticStyle:{color:"#1890ff"},attrs:{icon:"file-transfer-line"}}),a("el-link",{staticStyle:{margin:"0 10px"},attrs:{underline:!1,type:"primary"},on:{click:function(a){return e.showTree(t.row.objectId,t.row.Company)}}},[e._v(" "+e._s(e.$translateTitle("equipment.move"))+" ")]),a("el-link",{staticStyle:{margin:"0 10px 0 0"},attrs:{underline:!1,type:"primary",icon:"el-icon-edit"},on:{click:function(a){return e.editorDevice(t.row)}}},[e._v(" "+e._s(e.$translateTitle("concentrator.edit"))+" ")]),a("el-link",{staticStyle:{margin:"0 10px 0 0"},attrs:{underline:!1,type:"primary",icon:"el-icon-s-flag                    "},on:{click:function(a){return e.konvaDevice(t.row)}}},[e._v(" "+e._s(e.$translateTitle("concentrator.konva"))+" ")]),a("el-popover",{ref:"popover-"+t.$index,attrs:{placement:"top",width:"300"}},[a("p",[e._v(" "+e._s(e.$translateTitle("product.qdsczg"))+e._s(t.row.name)+e._s(e.$translateTitle("equipment.sbm"))+" ")]),a("div",{staticStyle:{margin:"0","text-align":"right"}},[a("el-button",{attrs:{size:"mini"},on:{click:function(e){t._self.$refs["popover-"+t.$index].doClose()}}},[e._v(" "+e._s(e.$translateTitle("developer.cancel"))+" ")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.makeSure(t)}}},[e._v(" "+e._s(e.$translateTitle("developer.determine"))+" ")])],1),a("el-link",{attrs:{slot:"reference",underline:!1,icon:"el-icon-delete",type:"danger"},slot:"reference"},[e._v(" "+e._s(e.$translateTitle("developer.delete"))+" ")])],1)]}}])})],1),a("el-table",{directives:[{name:"show",rawName:"v-show",value:!e.isALL,expression:"!isALL"},{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"filterTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"row-style":e.rowClass},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",align:"center",width:"55"}}),a("el-table-column",{attrs:{label:e.$translateTitle("equipment.devicenumber"),align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.devaddr)+" ")]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("equipment.name"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{margin:"0",color:"green"}},[e._v(" "+e._s(t.row.name)+" ")])]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("equipment.state"),align:"center",width:"70"},scopedSlots:e._u([{key:"default",fn:function(t){return["ONLINE"==t.row.status?a("span",{class:t.row.status},[e._v(" "+e._s(e.$translateTitle("product.online"))+" ")]):e._e(),"ONLINE"==t.row.status?a("el-tooltip",{attrs:{content:e.$translateTitle("equipment.thedeviceisonline"),placement:"top"}},[a("i",{staticClass:"el-icon-question"})]):e._e(),"OFFLINE"==t.row.status?a("span",{class:t.row.status},[e._v(" "+e._s(e.$translateTitle("product.offline"))+" ")]):e._e(),"OFFLINE"==t.row.status?a("el-tooltip",{attrs:{content:e.$translateTitle("equipment.thedeviceisoffline"),placement:"top"}},[a("i",{staticClass:"el-icon-question"})]):e._e(),"OFFLINE"!=t.row.status&&"ONLINE"!=t.row.status?a("span",{class:t.row.status},[e._v(" "+e._s(e.$translateTitle("product.unregistered"))+" ")]):e._e()]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("equipment.product"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.product&&t.row.product.name?a("span",[e._v(" "+e._s(t.row.product.name)+" ")]):e._e()]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.Company"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(" "+e._s(t.row.Company)+" ")])]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.enable")+"/"+e.$translateTitle("developer.prohibit"),align:"center",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-color":"#5eb058","inactive-color":"#cccccc"},on:{change:function(a){return e.handelUpdate(a,t.row,t.$index)}},model:{value:t.row.isEnable,callback:function(a){e.$set(t.row,"isEnable",a)},expression:"scope.row.isEnable"}})]}}])}),e._l(e.dialogtempconfig,(function(t,r){return["bool"==t.type&&t.isshow?a("el-table-column",{key:r,attrs:{align:"center",label:t.name,prop:t.identifier},scopedSlots:e._u([{key:"default",fn:function(r){return[r.row[t.default]?a("span",[e._v(" "+e._s(e.$translateTitle("product.yes"))+" ")]):a("span",[e._v(" "+e._s(e.$translateTitle("product.no"))+" ")])]}}],null,!0)}):"enum"==t.type&&t.isshow?a("el-table-column",{key:r,attrs:{align:"center",label:t.name},scopedSlots:e._u([{key:"default",fn:function(r){return[a("span",[e._v(" "+e._s(t.struct[r.row[t.identifier]])+" ")])]}}],null,!0)}):t.isshow?a("el-table-column",{key:r,attrs:{align:"center",label:t.name,prop:t.identifier},scopedSlots:e._u([{key:"default",fn:function(r){return[a("span",[e._v(" "+e._s(r.row[t.identifier])+" "+e._s(t.unit)+" ")])]}}],null,!0)}):e._e()]})),a("el-table-column",{attrs:{align:"center",label:e.$translateTitle("developer.createdAt"),width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.utc2beijing(t.row.createdAt)))])]}}])}),a("el-table-column",{attrs:{fixed:"right",label:e.$translateTitle("developer.operation"),align:"center",width:"400"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("vab-icon",{staticStyle:{color:"#1890ff"},attrs:{icon:"map-pin-range-line"}}),a("el-link",{attrs:{underline:!1,type:"primary",disabled:!t.row.location},on:{click:function(a){return e.showMap(t.row.location,t.row.objectId)}}},[e._v(" "+e._s(e.$translateTitle("equipment.location"))+" ")]),a("el-link",{staticStyle:{margin:"0 10px"},attrs:{underline:!1,type:"primary",icon:"el-icon-view"},on:{click:function(a){return e.deviceToDetail(t.row)}}},[e._v(" "+e._s(e.$translateTitle("equipment.see"))+" ")]),a("vab-icon",{staticStyle:{color:"#1890ff"},attrs:{icon:"file-transfer-line"}}),a("el-link",{attrs:{underline:!1,type:"primary"},on:{click:function(a){return e.showTree(t.row.objectId,t.row.Company)}}},[e._v(" "+e._s(e.$translateTitle("equipment.move"))+" ")]),a("el-link",{staticStyle:{margin:"0 10px 0 0"},attrs:{underline:!1,type:"primary",icon:"el-icon-edit"},on:{click:function(a){return e.editorDevice(t.row)}}},[e._v(" "+e._s(e.$translateTitle("concentrator.edit"))+" ")]),a("el-popover",{ref:"popover-"+t.$index,attrs:{placement:"top",width:"300"}},[a("p",[e._v(" "+e._s(e.$translateTitle("product.qdsczg"))+e._s(t.row.name)+e._s(e.$translateTitle("equipment.sbm"))+" ")]),a("div",{staticStyle:{margin:"0","text-align":"right"}},[a("el-button",{attrs:{size:"mini"},on:{click:function(e){t._self.$refs["popover-"+t.$index].doClose()}}},[e._v(" "+e._s(e.$translateTitle("developer.cancel"))+" ")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.makeSure(t)}}},[e._v(" "+e._s(e.$translateTitle("developer.determine"))+" ")])],1),a("el-link",{attrs:{slot:"reference",underline:!1,icon:"el-icon-delete",type:"danger"},slot:"reference"},[e._v(" "+e._s(e.$translateTitle("developer.delete"))+" ")])],1)]}}])})],2),a("div",{staticClass:"elpagination",staticStyle:{"margin-top":"30px"}},[a("el-pagination",{attrs:{"page-sizes":[10,20,30,50],"page-size":e.devicelength,total:e.devicetotal,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.deviceSizeChange,"current-change":e.deviceCurrentChange}})],1)],1)]),a("el-tab-pane",{attrs:{label:e.$translateTitle("equipment.map"),name:"second"}},[a("baidu-map",{staticClass:"map",staticStyle:{height:"57vh"},attrs:{ak:"fnc5Z92jC7CwfBGz8Dk66E9sXEIYZ6TG","scroll-wheel-zoom":!0,center:{lng:116.404,lat:39.915},zoom:e.sizeZoom}},[a("bm-control",[a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.sizeZoom=19}}},[e._v(" 缩放至最大 ")]),a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.sizeZoom=10}}},[e._v("还原")]),a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.sizeZoom=3}}},[e._v(" 缩放至最小 ")]),a("bm-panorama",{attrs:{anchor:"BMAP_ANCHOR_TOP_LEFT",offset:{width:460,height:0}}}),a("bm-overview-map",{attrs:{"is-open":!0}}),a("bm-scale",{attrs:{offset:{width:200,height:0}}}),a("bm-city-list",{attrs:{offset:{width:280,height:0}}}),a("bm-map-type",{attrs:{anchor:"BMAP_ANCHOR_TOP_LEFT","map-types":["BMAP_HYBRID_MAP","BMAP_NORMAL_MAP"],offset:{width:360,height:0}}})],1),e._l(e.tableData,(function(t){return a("bm-marker",{key:t.objectId,attrs:{content:t.name,position:{lng:t.location.longitude,lat:t.location.latitude},dragging:!0,animation:"BMAP_ANIMATION_BOUNCE"}},[a("bm-label",{attrs:{content:t.name,"label-style":{color:"red",fontSize:"24px"},offset:{width:-35,height:30}},on:{click:function(a){return e.deviceToDetail(t)}}})],1)})),a("bm-navigation",{attrs:{anchor:"BMAP_ANCHOR_TOP_RIGHT"}}),a("bm-geolocation",{attrs:{"show-address-bar":!0,"auto-location":!0,anchor:"BMAP_ANCHOR_BOTTOM_RIGHT"}})],2)],1)],1),a("el-dialog",{attrs:{"append-to-body":!0,title:e.$translateTitle("product.edit")+e.equipmentEditor,visible:e.devicedialogVisible,"close-on-click-modal":!1,"before-close":e.handleClose,width:"50%"},on:{"update:visible":function(t){e.devicedialogVisible=t}}},[a("div",{staticClass:"header-title",attrs:{slot:"title"},slot:"title"},[a("span",{staticClass:"title-name"},[e._v(" "+e._s("设备"+e.equipmentEditor)+" "),a("el-tooltip",{staticStyle:{"margin-left":"5px"},attrs:{content:e.$translateTitle("equipment.text"),placement:"top"}},[a("i",{staticClass:"el-icon-question"})])],1)]),a("div",{staticClass:"devicecontent"},[a("el-form",{ref:"deviceform",attrs:{model:e.deviceform,rules:e.rules,"label-width":"150px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$translateTitle("equipment.devicename"),prop:"name"}},[a("el-input",{model:{value:e.deviceform.name,callback:function(t){e.$set(e.deviceform,"name",t)},expression:"deviceform.name"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$translateTitle("equipment.devicenumber"),prop:"devaddr"}},[a("el-input",{attrs:{disabled:"编辑"==e.equipmentEditor},model:{value:e.deviceform.devaddr,callback:function(t){e.$set(e.deviceform,"devaddr",t)},expression:"deviceform.devaddr"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$translateTitle("product.productname"),prop:"productName"}},[a("el-select",{attrs:{disabled:"编辑"==e.equipmentEditor,placeholder:e.$translateTitle("equipment.entername")},on:{change:e.selectChange},model:{value:e.deviceform.productName,callback:function(t){e.$set(e.deviceform,"productName",t)},expression:"deviceform.productName"}},e._l(e.proTableData1,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.objectId}})})),1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$translateTitle("equipment.assetnumber")}},[a("el-input",{model:{value:e.deviceform.assetNum,callback:function(t){e.$set(e.deviceform,"assetNum",t)},expression:"deviceform.assetNum"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$translateTitle("equipment.equipmenttype")}},[a("el-input",{model:{value:e.deviceform.devModel,callback:function(t){e.$set(e.deviceform,"devModel",t)},expression:"deviceform.devModel"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$translateTitle("equipment.equipmentbrand")}},[a("el-input",{model:{value:e.deviceform.brand,callback:function(t){e.$set(e.deviceform,"brand",t)},expression:"deviceform.brand"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$translateTitle("equipment.installationlocation")}},[a("el-input",{on:{focus:e.updateLocation},model:{value:e.deviceform.address,callback:function(t){e.$set(e.deviceform,"address",t)},expression:"deviceform.address"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$translateTitle("equipment.videoSrc")}},[a("el-input",{model:{value:e.deviceform.videoSrc,callback:function(t){e.$set(e.deviceform,"videoSrc",t)},expression:"deviceform.videoSrc"}})],1)],1),e._l(e.arrlist,(function(t,r){return a("el-col",{key:r,attrs:{span:12}},[a("el-form-item",{attrs:{label:t.name,prop:t.identifier,required:t.required}},["bool"==t.type?a("el-select",{staticClass:"notauto",staticStyle:{width:"100%"},attrs:{disabled:t.readonly},model:{value:e.deviceform[t.identifier],callback:function(a){e.$set(e.deviceform,t.identifier,a)},expression:"deviceform[item.identifier]"}},[a("el-option",{attrs:{value:!0,label:e.$translateTitle("product.yes")}}),a("el-option",{attrs:{value:!1,label:e.$translateTitle("product.no")}})],1):"enum"==t.type?a("el-select",{staticClass:"notauto",staticStyle:{width:"100%"},attrs:{disabled:t.readonly},model:{value:e.deviceform[t.identifier],callback:function(a){e.$set(e.deviceform,t.identifier,a)},expression:"deviceform[item.identifier]"}},e._l(t.specs,(function(e,t){return a("el-option",{key:t,attrs:{label:e.attributevalue,value:e.attribute}})})),1):t.readonly?a("el-input",{attrs:{value:e.deviceform[t.identifier]+t.unit,disabled:t.readonly}}):a("el-input",{attrs:{disabled:t.readonly},model:{value:e.deviceform[t.identifier],callback:function(a){e.$set(e.deviceform,t.identifier,a)},expression:"deviceform[item.identifier]"}})],1)],1)})),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:e.$translateTitle("developer.describe")}},[a("el-input",{attrs:{autosize:{minRows:4,maxRows:4},type:"textarea"},model:{value:e.deviceform.desc,callback:function(t){e.$set(e.deviceform,"desc",t)},expression:"deviceform.desc"}})],1)],1)],2)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("deviceform")}}},[e._v(" "+e._s(e.$translateTitle("developer.determine"))+" ")]),a("el-button",{on:{click:e.handleClose}},[e._v(" "+e._s(e.$translateTitle("developer.cancel"))+" ")])],1)]),a("el-dialog",{directives:[{name:"drag-dialog",rawName:"v-drag-dialog"}],attrs:{"append-to-body":!0,visible:e.bmapdialogVisible,"close-on-click-modal":!1,"before-close":e.handleClosebmap,title:e.$translateTitle("developer.equipmentinstallationaddress"),width:"50%"},on:{"update:visible":function(t){e.bmapdialogVisible=t}}},[a("div",[a("el-form",{attrs:{model:e.bmapform,inline:!0,size:"small"}},[a("el-form-item",{attrs:{label:e.$translateTitle("developer.addressname")}},[a("el-input",{model:{value:e.bmapform.keyword,callback:function(t){e.$set(e.bmapform,"keyword",t)},expression:"bmapform.keyword"}})],1),a("el-form-item",{attrs:{label:e.$translateTitle("developer.selectaddress")}},[a("el-input",{attrs:{readonly:""},model:{value:e.bmapform.address,callback:function(t){e.$set(e.bmapform,"address",t)},expression:"bmapform.address"}})],1)],1),a("baidu-map",{staticStyle:{height:"300px"},attrs:{ak:"fnc5Z92jC7CwfBGz8Dk66E9sXEIYZ6TG",center:e.center,zoom:e.zoom,"scroll-wheel-zoom":!0,"map-click":!1},on:{ready:e.handler,click:e.mapClick}},[a("bm-local-search",{staticStyle:{display:"none"},attrs:{keyword:e.bmapform.keyword,"auto-viewport":!0,location:e.bmapform.location,zoom:"12.8"}}),a("bm-navigation",{attrs:{anchor:"BMAP_ANCHOR_TOP_RIGHT"}}),a("bm-geolocation",{attrs:{"show-address-bar":!0,"auto-location":!0,anchor:"BMAP_ANCHOR_BOTTOM_RIGHT"}}),a("bm-city-list",{attrs:{anchor:"BMAP_ANCHOR_TOP_LEFT"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.addressSure}},[e._v(" "+e._s(e.$translateTitle("product.preservation"))+" ")]),a("el-button",{on:{click:function(t){e.bmapdialogVisible=!1}}},[e._v(" "+e._s(e.$translateTitle("developer.cancel"))+" ")])],1)])],1)])},i=[],o=a("15fd"),s=a("1da1"),l=a("5530"),c=(a("96cf"),a("159b"),a("4de4"),a("b0c0"),a("99af"),a("a9e3"),a("d81d"),a("ac1f"),a("841c"),a("b680"),a("5319"),a("b64b"),a("caad"),a("2532"),a("5880")),d=a("0941"),u=(a("a8be"),a("dcc6")),m=a("4be7"),p=a("7212"),f=a("a060"),b=a("c4e6"),h=a("2db0"),g=a("cb88"),v=a("926a"),y=a("1285"),w=a("bc35"),_=["createdAt"],x=["updatedAt"],k={components:{BmScale:g["BmScale"],BmMapType:g["BmMapType"],BmOverviewMap:g["BmOverviewMap"],BmPanorama:g["BmPanorama"],BmControl:g["BmControl"],BmLabel:g["BmLabel"],BaiduMap:g["BaiduMap"],BmLocalSearch:g["BmLocalSearch"],BmNavigation:g["BmNavigation"],BmGeolocation:g["BmGeolocation"],BmCityList:g["BmCityList"],BmMarker:g["BmMarker"],info:b["default"],deviceState:h["default"]},data:function(){this.chartSettings={radius:[5,40],offsetY:70},this.chartExtend={yAxisType:["percent"],tooltip:{trigger:"item"},legend:{orient:"vertical",left:"left"}};var e=function(e,t,a){var r=/[0-9A-Za-z]$/;""==t?a(new Error("设备地址不能为空")):r.test(t)?a():a(new Error("设备地址必须为大小写字母数字"))};return{formData:{},topicData:[],InfoDialog:!1,devicedetail:{},stateDialog:!1,stateDetail:{},chartOnlone:{columns:["状态","数量"],rows:[{"状态":"在线","数量":0},{"状态":"离线","数量":0}]},chartwaring:{},parseTbas:[],activeparseTbas:"",chartProduct:{},queryForm:{account:"",searchDate:"",pageNo:1,pageSize:20,workGroupName:"",workGroupTreeShow:!1,access_token:""},treeDataValue:"",isALL:!0,sizeZoom:10,activeName:"first",mapDialog:!1,dialogtempconfig:[],arrlist:[],deviceId:"",deciceCompany:"",gutter:24,leftRow:3,rightRow:21,popoverVisible:!1,vabicon:"ancient-gate-fill",Company:sessionStorage.getItem("title")||"",curDepartmentId:"",deptTreeData:[],roleProps:{children:"children",label:"name"},listLoading:!1,productimg:"",bmapdialogVisible:!1,onlineall:0,activeall:0,userId:"",batchid:"",pcdialogVisible:!0,devicedialogVisible:!1,equvalue:"0",cities:[],selectdevice:"",onlinedevices:"",deviceinput:"",devicenumber:"",multipleTable:[],selectRow:[],devicelength:10,devicestart:0,devicetotal:0,visible2:!1,deviceform:{videoSrc:"",name:"",devaddr:"",batchId:"",desc:"",nodeType:0,devType:"",netType:"",assetNum:"",devModel:"",address:"",productName:"",status:"",isEnable:"",brand:""},rules:{name:[{required:!0,message:"请输入设备名称",trigger:"blur"}],devaddr:[{required:!0,message:"请输入设备编号",trigger:"blur"},{validator:e}],batchId:[{required:!0,message:"请输入设备批次",trigger:"blur"}],nodeType:[{required:!0,message:"请输入设备类型",trigger:"blur"}],netType:[{required:!0,message:"请选择网络格式",trigger:"change"}],devType:[{required:!0,message:"请选择设备类型",trigger:"change"}],productName:[{required:!0,message:"请选择产品名称",trigger:"change"}]},pcformrule:{pcname:[{required:!0,message:"请输入批次名称",trigger:"blur"}],createdtime:[{type:"date",required:!0,message:"请选择创建时间",trigger:"change"}]},pcformInline:{pcnumber:"",pcname:"",createdtime:""},pctableData:[],equipmentEditor:"添加",tableData:[],options:[],proTableData:[],proTableData1:[],activelength:[],onlinelength:[],center:{lng:0,lat:0},zoom:13,bmapform:{keyword:"",location:"",address:""},deviceid:"",map:null,addresspointer:"",productenable:!0,changeproduct:!0,tagsid:"",productroleslist:[]}},computed:Object(l["a"])({},Object(c["mapGetters"])({_tableDict:"global/_tableDict",token:"user/token",roleTree:"user/roleTree",language:"settings/language"})),watch:{multipleTable:function(e){var t=this;this.selectRow=[],e.length>0&&e.forEach((function(e,a){t.selectRow.push(t.tableData.indexOf(e))}))}},mounted:function(){this.onlinedevices="dev_online"==this.$route.query.deciceType?"在线":"dev_unline"==this.$route.query.deciceType?"离线":"",this.getMenu(),this.selectdevice="zh"==this.language?"设备名称":"devicename",this.queryProduct(),this.queryTableDict()},methods:Object(l["a"])(Object(l["a"])({},Object(c["mapMutations"])({set_tableDict:"global/set_tableDict",set_tableParser:"global/set_tableParser"})),{},{ParserSave:function(e){},queryTableDict:function(){return Object(s["a"])(regeneratorRuntime.mark((function e(){var t,a,r,n,i,o,s,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={Parser:{},Dict:{}},e.prev=1,e.next=4,Object(f["tableDict"])("sinmahe_PeriodicInformation");case 4:a=e.sent,r=a.results,n=r[0].config,i=n.parser,o=void 0===i?{}:i,s=n.basedate,l=void 0===s?{}:s,t={Parser:o,Dict:l.params},e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](1),t={Parser:{},Dict:{}};case 13:return e.abrupt("return",t);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})))()},queryProduct:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.proTableData=[],e.proTableData1=[],a={count:"objectId",order:"-updatedAt",keys:"name",where:{category:"IotHub"}},t.next=5,e.$query_object("Product",a);case 5:r=t.sent,n=r.results,e.proTableData=n,e.proTableData.unshift({name:"zh"==e.language?"全部产品":"All Products",objectId:"0"}),e.$route.query.product&&e.proTableData.forEach((function(t,a){t.objectId==e.$route.query.product&&(e.equvalue=e.proTableData[a].objectId,e.productenable=!0,e.access_token=e.token,e.$nextTick((function(){e.selectProdChange(e.$route.query.product)})))})),e.proTableData1=n.filter((function(e){return"0"!=e.objectId})),e.$route.query.productid&&(e.equvalue=e.$route.query.productid,e.productenable=!1);case 12:case"end":return t.stop()}}),t)})))()},change:function(e){e&&$(".el-tree").css({height:"100px",display:"block"})},selectProdChange:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var r,n,i,o,s,l;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.listLoading=!0,"0"!=e){a.next=5;break}t.isALL=!0,a.next=26;break;case 5:return a.next=7,Object(p["getProduct"])(e).then((function(e){t.listLoading=!1;var a=e.config,r=void 0===a?{basedate:{}}:a,n=r.basedate,i=void 0===n?{params:[]}:n;t.dialogtempconfig=[],"undefined"!=i.params&&(t.dialogtempconfig=i.params)}));case 7:return t.isALL=!1,t.tableData=[],r={limit:t.devicelength,skip:t.devicestart,order:"-createdAt",count:"objectId",include:"product",where:{}},""!=t.deviceinput&&("设备名称"==t.selectdevice?r.where.name=t.deviceinput:r.where.devaddr=t.deviceinput),""!=t.onlinedevices&&("在线"==t.onlinedevices?r.where.status="ONLINE":r.where.status="OFFLINE"),""!=t.devicenumber&&(r.where.devaddr=t.devicenumber),r.where.product=e,t.devicestart=0,a.next=17,Object(y["querycompanyDevice"])(r,t.access_token);case 17:n=a.sent,i=n.results,o=void 0===i?[]:i,s=n.count,l=void 0===s?0:s,o.forEach((function(e){if(e.ACL)for(var t in e.ACL)e.Company=t.substr(5);else e.Company="";if(e.basedata)for(var t in e.basedata)e[t]=e.basedata[t]})),t.tableData=o,t.devicetotal=l,t.chartOnlone.rows[1]["数量"]=t.devicetotal;case 26:t.listLoading=!1;case 27:case"end":return a.stop()}}),a)})))()},showTree:function(e,t){this.deviceId=e,this.deciceCompany=t,this.popoverVisible=!this.popoverVisible},showState:function(e,t){var a=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r,n,i,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=a.$baseColorfullLoading(3),t.next=3,a.queryTableDict();case 3:n=t.sent,i=n.Dict,o=n.Parser,a.set_tableDict(i),a.set_tableParser(o),a.stateDetail=e,setTimeout((function(){r.close(),a.stateDialog=!0}),1e3);case 10:case"end":return t.stop()}}),t)})))()},CloseState:function(){this.stateDialog=!1},showInfo:function(e){var t=this;this.devicedetail={};var a=e.product.objectId||"undefined";a&&Object(p["getProduct"])(a).then((function(e){var a=e.config;a.parser&&(t.parseTbas=e.config.parser,t.activeparseTbas=t.parseTbas[0].name)})).catch((function(e){}));var r=e.devaddr||"undefined",n=[{topic:"thing/".concat(a,"/").concat(r,"/post"),type:"pub",desc:"设备上报",isdef:!0},{topic:"thing/".concat(a,"/").concat(r),type:"sub",desc:"消息下发",isdef:!0}];e.product.topics?e.topicData=e.product.topics.concat(n):e.topicData=n,this.InfoDialog=!0,this.devicedetail=e},showMap:function(e,t){this.deviceId=t;var a=e.latitude,r=void 0===a?0:a,n=e.longitude,i=void 0===n?0:n;Number(r)&&Number(i)?(this.mapDialog=!0,this.center.lng=i,this.center.lat=r):this.$message.error("位置信息获取失败")},transferAcl:function(e){var t=this,a="role:"+e.name,r={};r[a]={read:!0,write:!0};var n={ACL:r,detail:{factory:e.depname}};this.$confirm(this.$translateTitle("确定要将设备迁移到"+e.name+"吗"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(y["putDevice"])(t.deviceId,n).then((function(e){e.updatedAt?(t.popoverVisible=!1,t.getMenu(),t.$message({type:"success",message:t.$translateTitle("迁移成功")})):t.$message({type:"error",message:t.$translateTitle("迁移失败")})}));case 2:case"end":return e.stop()}}),e)})))).catch((function(e){}))},getMenu:function(){this.deptTreeData=this.roleTree,this.handleNodeClick(this.deptTreeData[0],0)},handleNodeClick:function(e,t){var a=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var n,i,o,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if($(".el-tree").css({height:"0px",display:"none","overflow-x":"auto"}),$(".el-select-dropdown").css({display:"none"}),a.queryForm.workGroupName=e.label,1==t.level){r.next=12;break}return r.next=6,Object(w["getToken"])(e.name);case 6:n=r.sent,i=n.access_token,o=void 0===i?"":i,a.access_token=o,r.next=13;break;case 12:a.access_token=a.token;case 13:e.name,s=e.objectId,a.curDepartmentId=s,a.getDevices(0);case 16:case"end":return r.stop()}}),r)})))()},rolesSelect:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.productroleslist=[],a.next=3,t.$get_object("Product",e);case 3:r=a.sent,r.results;case 5:case"end":return a.stop()}}),a)})))()},goEdit:function(e){var t=window.location.origin+"/spa",a="production";t="development"==a?this.$globalConfig.localTopoUrl:window.location.origin+"/spa";var r="".concat(t,"/#?devaddr=").concat(e.devaddr,"&proudctid=").concat(e.productid);window.open(r,"__blank"),localStorage.setItem("topoData",JSON.stringify(e.config))},addressSure:function(){var e=new BMap.LocalSearch(this.map);e.enableAutoViewport();""==this.bmapform.address&&(this.deviceform.address=this.bmapform.keyword),e.search(this.bmapform.keyword),this.bmapdialogVisible=!1},handler:function(e){e.BMap;var t=e.map;this.center.lng=120.2,this.center.lat=30.26667,this.zoom=this.zoom,this.map=t},mapClick:function(e){var t=this;this.center.lng=e.point.lng,this.center.lat=e.point.lat,this.addresspointer=e.point.lng.toFixed(6)+","+e.point.lat.toFixed(6);var a=new BMap.Geocoder;a.getLocation(e.point,(function(e){t.bmapform.address=e.address,t.deviceform.address=e.address}))},updateLocation:function(){this.bmapdialogVisible=!0},handleClosebmap:function(){this.bmapdialogVisible=!1},getOnlineDevices:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.chartOnlone={columns:["状态","数量"],rows:[{"状态":"在线","数量":0},{"状态":"离线","数量":0}]},a={limit:1,count:"objectId",where:{status:"ONLINE"}},""!=e.deviceinput&&("设备名称"==e.selectdevice?a.where.name={$regex:e.deviceinput}:a.where.devaddr={$regex:e.deviceinput}),""!=e.devicenumber&&(a.where.devaddr=e.devicenumber),0!=e.equvalue&&e.selectProdChange(e.equvalue),t.next=7,Object(y["querycompanyDevice"])(a,e.access_token);case 7:r=t.sent,e.chartOnlone.rows[1]["数量"]=e.devicetotal-r.count,e.chartOnlone.rows[0]["数量"]=r.count;case 10:case"end":return t.stop()}}),t)})))()},getDevices:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var r,n,i,o,s,l;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.listLoading=!0,t.tableData=[],r={limit:t.devicelength,skip:t.devicestart,order:"-createdAt",count:"objectId",include:"product",where:{}},""!=t.deviceinput&&("设备名称"==t.selectdevice?r.where.name={$regex:t.deviceinput}:r.where.devaddr={$regex:t.deviceinput}),""!=t.onlinedevices&&("在线"==t.onlinedevices?r.where.status="ONLINE":r.where.status="OFFLINE"),""!=t.devicenumber&&(r.where.devaddr={$regex:t.deviceinput}),0!=t.equvalue&&t.selectProdChange(t.equvalue),0==e&&(t.devicestart=0),a.next=10,Object(y["querycompanyDevice"])(r,t.access_token);case 10:n=a.sent,i=n.results,o=void 0===i?[]:i,s=n.count,l=void 0===s?0:s,o.forEach((function(e){if(e.ACL)for(var t in e.ACL)e.Company=t.substr(5);else e.Company=""})),t.listLoading=!1,o.forEach((function(e){e.location||(e.location={longitude:0,latitude:0})})),t.tableData=o,t.devicetotal=l,t.getOnlineDevices();case 21:case"end":return a.stop()}}),a)})))()},handelUpdate:function(e,t,a){var r=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(i in n={},r,t)n[i]=t[i];n.isEnable=1!=n.isEnable,r.tableData[a]=n,r.$confirm("是否修改此设备状态?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(s["a"])(regeneratorRuntime.mark((function e(){var a,n,i,s,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(d["get_object"])("Device",t.objectId);case 2:return a=e.sent,n=a.isEnable,n=void 0!=n&&!n,a.isEnable=n,a.createdAt,i=Object(o["a"])(a,_),i.updatedAt,s=Object(o["a"])(i,x),e.next=10,r.$update_object("Device",t.objectId,s);case 10:l=e.sent,void 0!=l?(r.$message({type:"success",message:"状态修改成功"}),r.getDevices()):Object(v["returnLogin"])(error);case 12:case"end":return e.stop()}}),e)})))).catch(Object(s["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r.$message({type:"info",message:"已取消修改"}),n=t,n.isEnable=1!=n.isEnable,r.tableData[a]=n;case 4:case"end":return e.stop()}}),e)}))));case 6:case"end":return e.stop()}}),e)})))()},timestampToTime:function(e){var t=new Date(1e3*e),a=t.getFullYear()+"-",r=(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-",n=(t.getDate()+1<=10?"0"+t.getDate():t.getDate())+" ",i=(t.getHours()+1<=10?"0"+t.getHours():t.getHours())+":",o=(t.getMinutes()+1<=10?"0"+t.getMinutes():t.getMinutes())+":",s=t.getSeconds()+1<=10?"0"+t.getSeconds():t.getSeconds();return a+r+n+i+o+s},utc2beijing:function(e){var t=new Date(+new Date(e)+288e5).toISOString().replace(/T/g," ").replace(/\.[\d]{3}Z/,"");return t},filterTag:function(e,t){return t.tag===e},handleSelectionChange:function(e){this.multipleTable=e},deleteDevcie:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.multipleTable.map(function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$del_object("Device",a.objectId);case 2:e.sent;case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.$message({message:"删除成功",type:"success"}),t.getDevices();case 3:case"end":return e.stop()}}),e)})))()},editDevice:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$update_object("Device",item.objectId,params);case 2:a=t.sent,a.updatedAt?e.initQuery("设备修改成功","success"):e.$message({type:"error",message:a.error});case 4:case"end":return t.stop()}}),t)})))()},unactiveDevice:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var r,n,i,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=[],n=[],t.multipleTable.map((function(e){r.push(e.objectId)})),i={isEnable:e},a.next=6,Object(u["Batchdelete"])("PUT","Device",r,i);case 6:o=a.sent,o&&(o.forEach((function(e,t){e.objectId=r[t],e.sortIndex=t+1,"success"==Object.keys(o[t])[0]?(e.msg="edit success",e.dangerouslyUseHTMLString=!1):(e.msg="<ol>\n            edit error <br>\n            message: ".concat(e.error.error," <br>\n            code: ").concat(e.error.code," <ol>"),e.dangerouslyUseHTMLString=!0),n.push({type:Object.keys(o[t])[0],message:e.msg,dangerouslyUseHTMLString:e.dangerouslyUseHTMLString})})),n.forEach((function(e,a){t.$baseNotify(e.message,"".concat(r[a]),e.type,"top-right",5e3*e.sortIndex,e.dangerouslyUseHTMLString)})),t.getDevices());case 8:case"end":return a.stop()}}),a)})))()},rowClass:function(e){e.row;var t=e.rowIndex;if(this.selectRow.includes(t))return{"background-color":"rgba(185, 221, 249, 0.3)"}},deviceSizeChange:function(e){this.devicelength=e,this.getDevices()},deviceCurrentChange:function(e){this.devicestart=(e-1)*this.devicelength,this.getDevices()},handleClose:function(){this.deviceid="",this.deviceform={name:"",devaddr:"",batchId:"",desc:"",nodeType:0,devType:"",netType:"",assetNum:"",devModel:"",address:"",videoSrc:"",productName:"",status:"",isEnable:"",brand:"",auth:"",yysId:""},this.$refs["deviceform"].resetFields(),this.devicedialogVisible=!1,this.equipmentEditor="添加"},addDeviceForm:function(){this.devicedialogVisible=!0,this.arrlist=[],this.equipmentEditor="添加",this.$route.query.productid?this.deviceform.productName=this.$route.query.productid:0!=this.equvalue?(this.changeproduct=!1,this.deviceform.productName=this.equvalue,this.selectChange(this.equvalue,"add")):this.deviceform.productName=""},handleClose1:function(){this.pcdialogVisible=!1,this.batchid="",this.pcformInline={pcname:"",createdtime:""}},makeSure:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$del_object("Device",e.row.objectId);case 2:r=a.sent,r.error?t.$message({type:"error",message:"删除失败"}):(t.$message({type:"success",message:"删除成功"}),t.getDevices()),e._self.$refs["popover-".concat(e.$index)].doClose();case 5:case"end":return a.stop()}}),a)})))()},editorDevice:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:for(r in t.selectChange(e.product.objectId,"edit"),t.deviceform={},t.deviceid=e.objectId,t.devicedialogVisible=!0,t.deviceform={devaddr:e.devaddr,name:e.name,assetNum:e.detail.assetNum,devModel:e.detail.devModel,desc:e.detail.desc,productid:e.product.objectId,brand:e.detail.brand,productName:e.product.objectId,status:e.status,isEnable:e.isEnable,videoSrc:e.detail.videoSrc,address:e.detail.address},e.basedata)t.$set(t.deviceform,r,e.basedata[r]);t.bmapform={address:e.detail.address},t.center={lat:location.latitude,lng:location.longitude},t.addresspointer=void 0==e.detail||void 0==location||location.latitude+e.detail==void 0?"":location.longitude,t.equipmentEditor="编辑";case 10:case"end":return a.stop()}}),a)})))()},getBatch:function(){return new m["Promise"]((function(e,t){r.length>0?e(r):t(!1)}))},initQuery:function(e,t){this.$message({type:t||"info",message:e}),this.dialogFormVisible=!1,this.getDevices()},updateDevice:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$update_object("Device",t.deviceid,e);case 2:r=a.sent,r.updatedAt||r.devaddr?t.initQuery("设备更新成功","success"):t.$message({type:"error",message:r.error});case 4:case"end":return a.stop()}}),a)})))()},createDevice:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$create_object("Device",e);case 2:r=a.sent,r.objectId?t.initQuery("设备创建成功","success"):t.$message({type:"error",message:r.error});case 4:case"end":return a.stop()}}),a)})))()},selectChange:function(e,t){var a=this;this.arrlist=[],Object(p["getProduct"])(e).then((function(e){var r=e.config,n=void 0===r?{basedate:{}}:r;n.basedate.params.length>0&&(a.arrlist=n.basedate.params,"add"==t&&a.arrlist.map((function(e){"bool"==e.type?a.$set(a.deviceform,e.identifier,e.default):"enum"==e.type?a.$set(a.deviceform,e.identifier,e.specs[0].attribute):e.default?a.$set(a.deviceform,e.identifier,e.default):a.$set(a.deviceform,e.identifier,""),e.required&&("bool"==e.type?a.rules[e.identifier]=[{required:!0,message:"请选择"+e.name,trigger:"change"}]:a.rules[e.identifier]=[{required:!0,message:"请输入"+e.name,trigger:"blur"}])})))}))},submitForm:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.$refs[e].validate(function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(a){var r,n,i,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!a){e.next=23;break}for(o in r={__type:"GeoPoint",latitude:t.center.lat?t.center.lat:0,longitude:t.center.lng?t.center.lng:0},n={assetNum:t.deviceform.assetNum,devModel:t.deviceform.devModel,brand:t.deviceform.brand,address:t.bmapform.address,desc:t.deviceform.desc,videoSrc:t.deviceform.videoSrc},i={},t.deviceform)i[o]=t.deviceform[o];t.$delete(i,"address"),t.$delete(i,"assetNum"),t.$delete(i,"batchId"),t.$delete(i,"brand"),t.$delete(i,"desc"),t.$delete(i,"devModel"),t.$delete(i,"devType"),t.$delete(i,"devaddr"),t.$delete(i,"isEnable"),t.$delete(i,"name"),t.$delete(i,"netType"),t.$delete(i,"nodeType"),t.$delete(i,"productName"),t.$delete(i,"status"),t.$delete(i,"productid"),Object(p["getProduct"])(t.deviceform.productName).then((function(e){if(e)if(""!=t.deviceid){var a={name:t.deviceform.name,devaddr:t.deviceform.devaddr,product:{__type:"Pointer",className:"Product",objectId:e.objectId},detail:n,location:r,basedata:i};t.updateDevice(a),t.handleClose(),t.getDevices()}else{var o={count:"objectId",where:{name:{$in:[t.deviceform.name]},devaddr:{$in:[t.deviceform.devaddr]}}};t.$query_object("Device",o).then((function(a){if(a.count>0)t.$message("此设备已被创建");else{var o={product:{__type:"Pointer",className:"Product",objectId:t.deviceform.productName},status:"OFFLINE",isEnable:!1,ACL:e.ACL,name:t.deviceform.name,devaddr:t.deviceform.devaddr,objectId:t.deviceform.devaddr,lastOnlineTime:0,detail:n,location:r,basedata:i};t.createDevice(o),t.deviceform={},t.handleClose(),t.getDevices()}}))}})),e.next=25;break;case 23:return t.$message({type:"error",message:"请按照要求填写参数"}),e.abrupt("return",!1);case 25:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return a.stop()}}),a)})))()},deviceToDetail:function(e){this.$router.push({path:"/roles/editdevices",query:{deviceid:e.objectId,nodeType:e.nodeType,productid:e.product.objectId,ischildren:"false"}})},konvaDevice:function(e){this.$router.push({path:"/Topo/VueKonva",query:{productid:e.product.objectId,devaddr:e.devaddr,deviceid:e.objectId,type:"device"}})}})},C=k,S=(a("02fa"),a("2877")),T=Object(S["a"])(C,n,i,!1,null,"407abf16",null);t["default"]=T.exports},"02fa":function(e,t,a){"use strict";a("79eb")},"13a2":function(e,t,a){},1747:function(e,t,a){"use strict";a("e636")},"1d8d":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"standard"},[a("div",{staticClass:"devicesright",staticStyle:{padding:"20px"}},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline,size:"small"}},[a("el-form-item",{attrs:{label:"标准类型"}},[a("el-select",{attrs:{placeholder:"选择标准类型"},model:{value:e.formInline.model,callback:function(t){e.$set(e.formInline,"model",t)},expression:"formInline.model"}},[a("el-option",{attrs:{label:"性能检测",value:"性能检测"}})],1)],1),a("el-form-item",{attrs:{label:"标准类别"}},[a("el-select",{attrs:{placeholder:"选择标准类别"},model:{value:e.formInline.standard,callback:function(t){e.$set(e.formInline,"standard",t)},expression:"formInline.standard"}},e._l(e.standard,(function(e,t){return a("el-option",{key:t,attrs:{value:e.value,label:e.label}})})),1)],1),a("el-form-item",{attrs:{label:"检测名称"}},[a("el-input",{attrs:{placeholder:"请输入检测名称"},model:{value:e.formInline.name,callback:function(t){e.$set(e.formInline,"name",t)},expression:"formInline.name"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.getStandardFromDict(0)}}},[e._v(" 查询 ")]),a("el-button",{attrs:{type:"primary"},on:{click:e.reset}},[e._v("重置")])],1)],1),a("div",{staticClass:"adddevices"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.addStandard}},[e._v(" 新增检测标准 ")])],1),a("div",{staticClass:"tableblock"},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.standardList,"tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),a("el-table-column",{attrs:{label:"检测标准名称",prop:"data.name",width:"200"}}),a("el-table-column",{attrs:{label:"标准类型",prop:"data.model"}}),a("el-table-column",{attrs:{label:"适用产品",prop:"data.product",width:"200"}}),a("el-table-column",{attrs:{label:"标准类别",prop:"data.standard",width:"200"}}),a("el-table-column",{attrs:{label:"标准发行单位",prop:"data.client",width:"250"}}),a("el-table-column",{attrs:{label:"标准发行时间",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.$timestampToTime(t.row.data.start_time)))])]}}])}),a("el-table-column",{attrs:{label:"备注",width:"220",prop:"data.desc"}}),a("el-table-column",{attrs:{label:"创建时间",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.$timestampToTime(t.row.createdAt)))])]}}])}),a("el-table-column",{attrs:{label:"检测标准管理",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-dropdown",{attrs:{"split-button":"",type:"primary"},on:{click:function(a){return e.editorReport(t.row)}}},[e._v(" 编辑 "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{nativeOn:{click:function(a){return e.addChildReport(t.row)}}},[e._v(" 子项新增 ")]),a("el-dropdown-item",[a("router-link",{attrs:{target:"_blank",to:"/pdf/download"}},[e._v(" 下载 ")])],1),a("el-dropdown-item",{nativeOn:{click:function(a){return e.childManage(t.row)}}},[e._v(" 子项管理 ")]),a("el-dropdown-item",{nativeOn:{click:function(a){return e.deleteReport(t.row.objectId)}}},[e._v(" 删除 ")])],1)],1)]}}])})],1)],1),a("div",{staticClass:"pageblock"},[a("el-pagination",{attrs:{"page-sizes":[10,20,30,50],"page-size":e.pagesize,total:e.standardList.length,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),a("el-dialog",{attrs:{"append-to-body":!0,title:e.actionTypeTxt+"检验标准",visible:e.dialogVisible,width:"60%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",{staticClass:"addContent"},[a("el-form",{ref:"standardFormRef",attrs:{model:e.standardFormModel,rules:e.formrule}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{"label-width":e.formLabelWidth,label:"检验标准名称",prop:"name"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"检验标准名称"},model:{value:e.standardFormModel.name,callback:function(t){e.$set(e.standardFormModel,"name",t)},expression:"standardFormModel.name"}})],1),a("el-form-item",{attrs:{"label-width":e.formLabelWidth,label:"适用产品",prop:"product"}},[a("el-select",{attrs:{placeholder:"选择适用产品"},model:{value:e.standardFormModel.product,callback:function(t){e.$set(e.standardFormModel,"product",t)},expression:"standardFormModel.product"}},e._l(e.pumpmodel,(function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})})),1)],1),a("el-form-item",{attrs:{"label-width":e.formLabelWidth,label:"标准类型",prop:"model"}},[a("el-select",{attrs:{placeholder:"选择标准类型"},model:{value:e.standardFormModel.model,callback:function(t){e.$set(e.standardFormModel,"model",t)},expression:"standardFormModel.model"}},[a("el-option",{attrs:{label:"性能检测",value:"性能检测"}})],1)],1),a("el-form-item",{attrs:{"label-width":e.formLabelWidth,label:"备注信息"}},[a("el-input",{attrs:{rows:4,type:"textarea",placeholder:"请输入标准备注信息"},model:{value:e.standardFormModel.desc,callback:function(t){e.$set(e.standardFormModel,"desc",t)},expression:"standardFormModel.desc"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{"label-width":e.formLabelWidth,label:"检测标准文号",prop:"inspection_number"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"请输入检测标准文号"},model:{value:e.standardFormModel.inspection_number,callback:function(t){e.$set(e.standardFormModel,"inspection_number",t)},expression:"standardFormModel.inspection_number"}})],1),a("el-form-item",{attrs:{"label-width":e.formLabelWidth,label:"标准类别",prop:"standard"}},[a("el-select",{attrs:{placeholder:"选择标准类别"},model:{value:e.standardFormModel.standard,callback:function(t){e.$set(e.standardFormModel,"standard",t)},expression:"standardFormModel.standard"}},e._l(e.standard,(function(e,t){return a("el-option",{key:t,attrs:{value:e.value,label:e.label}})})),1)],1),a("el-form-item",{attrs:{"label-width":e.formLabelWidth,label:"标准发行单位",prop:"client"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"请输入标准发行单位"},model:{value:e.standardFormModel.client,callback:function(t){e.$set(e.standardFormModel,"client",t)},expression:"standardFormModel.client"}})],1),a("el-form-item",{attrs:{"label-width":e.formLabelWidth,label:"标准发行时间"}},[a("el-date-picker",{attrs:{type:"date","value-format":"timestamp",placeholder:"选择日期"},model:{value:e.standardFormModel.start_time,callback:function(t){e.$set(e.standardFormModel,"start_time",t)},expression:"standardFormModel.start_time"}})],1),a("el-form-item",{attrs:{"label-width":e.formLabelWidth,label:"标准源文件",required:""}},[a("el-input",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{placeholder:"请输入内容"},model:{value:e.standardFormModel.filesrc,callback:function(t){e.$set(e.standardFormModel,"filesrc",t)},expression:"standardFormModel.filesrc"}},[a("template",{slot:"append"},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),a("form",{ref:"uploadform",staticStyle:{position:"absolute"},attrs:{method:"POST",enctype:"multipart/form-data"}},[a("input",{staticStyle:{position:"relative",top:"-30px","z-index":"5",width:"100px",height:"40px",cursor:"pointer",opacity:"0"},attrs:{type:"file"},on:{change:function(t){return e.upload(t)}}})])],1)],2)],1)],1)],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.postStandardToDict("standardFormRef")}}},[e._v(" 确 定 ")])],1)]),a("el-dialog",{attrs:{"append-to-body":!0,visible:e.dialogReport,title:"标准子项新增",width:"50%"},on:{"update:visible":function(t){e.dialogReport=t}}},[a("el-form",{ref:"dynamicValidateForm",staticClass:"demo-dynamic",attrs:{model:e.dynamicValidateForm,"label-width":"100px",size:"small"}},[e._l(e.dynamicValidateForm.domains,(function(t,r){return a("el-row",{key:t.key},[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"子项名称"+(r+1),prop:"domains."+r+".name",rules:{required:!0,message:"子项目名称"+(r+1)+"不能为空",trigger:"blur"}}},[a("el-input",{model:{value:t.name,callback:function(a){e.$set(t,"name",a)},expression:"domain.name"}})],1)],1),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"保证值"+(r+1),prop:"domains."+r+".title",rules:{required:!0,message:"保证值"+(r+1)+"不能为空",trigger:"blur"}}},[a("el-input",{model:{value:t.title,callback:function(a){e.$set(t,"title",a)},expression:"domain.title"}})],1)],1),a("el-col",{staticStyle:{float:"right"},attrs:{span:4}},[a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{size:"small",type:"danger"},on:{click:function(a){return a.preventDefault(),e.removeDomain(t)}}},[e._v(" 删除 ")])],1)],1)})),a("el-form-item",[a("el-button",{on:{click:e.addDomain}},[e._v("新增子项")])],1)],2),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogReport=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.reportChildren("dynamicValidateForm")}}},[e._v(" 确 定 ")])],1)],1),a("el-dialog",{attrs:{"append-to-body":!0,visible:e.dialogTableVisible,title:"标准子项管理",width:"50%"},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[a("el-table",{staticStyle:{width:"100%","text-align":"center"},attrs:{data:e.childrenData.slice((e.currentPage-1)*e.pageSize,e.currentPage*e.pageSize)}},[a("el-table-column",{attrs:{index:function(t){return t+1+(e.currentPage-1)*e.pageSize},label:"序号",type:"index",align:"center",width:"50"}}),a("el-table-column",{attrs:{prop:"name",label:"名称",align:"center"}}),a("el-table-column",{attrs:{prop:"title",label:"保证值",align:"center"}}),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){return e.deleteChildren(t.$index)}}},[e._v(" 删除 ")])]}}])})],1),a("div",{staticClass:"block",staticStyle:{"margin-top":"15px"}},[a("el-pagination",{attrs:{"page-sizes":[1,5,10,20],"page-size":e.pageSize,total:e.childrenData.length,align:"center",layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleChildSizeChange,"current-change":e.handleChildCurrentChange}})],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogTableVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.ReportChildrenDelete}},[e._v(" 确 定 ")])],1)],1)],1)},n=[],i=a("1da1"),o=(a("96cf"),a("b0c0"),a("d81d"),a("ac1f"),a("1276"),a("c19f"),a("d3b7"),a("5cc6"),a("9a8c"),a("a975"),a("735e"),a("c1ac"),a("d139"),a("3a7b"),a("d5d6"),a("82f8"),a("e91f"),a("60bd"),a("5f96"),a("3280"),a("3fcc"),a("ca91"),a("25a1"),a("cd26"),a("3c5d"),a("2954"),a("649e"),a("219c"),a("170b"),a("b39a"),a("72f7"),a("a434"),a("99af"),a("926a"),a("e0e9")),s={},l={data:function(){return{loading:!1,dialogTableVisible:!1,dialogReport:!1,pumpmodel:["离心泵","潜水泵","混流泵","螺杆泵","轴流泵","旋涡泵","电动泵","蒸汽泵","齿轮泵","罗茨泵","滑片泵","喷射泵","升液泵","电磁泵"],standard:[{label:"国际标准",value:"ITBZ"},{label:"国家标准",value:"GJBZ"},{label:"行业标准",value:"HYBZ"},{label:"企业标准",value:"QYBZ"},{label:"地方标准",value:"DFBZ"},{label:"其他标准",value:"OTHER"}],formLabelWidth:"120px",dialogVisible:!1,departmentid:"",formInline:{name:"",standard:"",model:""},standardList:[],multipleSelection:[],pagesize:10,start:0,total:0,actionTypeTxt:"新增",standardFormModel:{name:"",product:"",inspection_number:"",standard:"",start_time:"",model:"",filesrc:"",desc:"",client:"",reportchildren:[]},formrule:{name:[{required:!0,message:"请输入检测标准名称",trigger:"blur"}],product:[{required:!0,message:"请选择标准适用产品",trigger:"change"}],inspection_number:[{required:!0,message:"请输入检测标准文号",trigger:"blur"}],standard:[{required:!0,message:"请选择标准类别",trigger:"change"}],client:[{required:!0,message:"请输入检测标准发行单位",trigger:"blur"}],model:[{required:!0,message:"请选择标准类型",trigger:"change"}]},departmentlaboratory:[],testbedlist:[],productlist:[],dynamicValidateForm:{domains:[{title:"",key:Date.now(),value:"",name:"",evidenceway:"",assess:""}]},childrenData:[],currentPage:1,pageSize:10}},watch:{dialogVisible:{deep:!0,handler:function(e){e||(this.$refs.standardFormRef.resetFields(),this.standardFormModel.desc="",this.standardFormModel.start_time="",this.standardFormModel.filesrc="",this.standardFormModel.name="",this.standardFormModel.product="",this.standardFormModel.inspection_number="",this.standardFormModel.standard="",this.standardFormModel.model="",this.standardFormModel.client="",this.standardFormModel.reportchildren=[])}}},mounted:function(){this.getStandardFromDict()},methods:{handleChildSizeChange:function(e){this.currentPage=1,this.pageSize=e},handleChildCurrentChange:function(e){this.currentPage=e},returnStandard:function(e){var t="";return this.standard.map((function(a){a.value==e&&(t=a.label)})),t},reset:function(){this.formInline.model="",this.formInline.standard="",this.formInline.name="",this.getStandardFromDict()},getStandardFromDict:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var r,n,i,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return 0==e&&(t.start=0),r=t.$loading({text:"加载中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),n={where:{type:"inspectionStandard"},order:"-updatedAt"},a.next=5,Object(o["queryDict"])(n);case 5:i=a.sent,s=i.results,r.close(),t.standardList=s;case 9:case"end":return a.stop()}}),a)})))()},handleSelectionChange:function(e){this.multipleSelection=e},handleSizeChange:function(e){this.pagesize=e},handleCurrentChange:function(e){this.start=(e-1)*this.pagesize},addStandard:function(e){this.reportid="",this.dialogVisible=!0},upload:function(e){if(e){var t=e.target.files[0],a=t.name,r=e.target.files[0].type,n=(t.type.split("/")[0],"application/pdf"===r);if(!n)return this.$message({message:"只能上传PDF格式文件",type:"error"}),!1;this.loading=!0;var i=new FileReader;i.readAsDataURL(t);var o=this;i.onloadend=function(){var e=i.result,t=o.dataURItoBlob(e);o.uploadFile(t,a)}}},dataURItoBlob:function(e){for(var t=atob(e.split(",")[1]),a=e.split(",")[0].split(":")[1].split(";")[0],r=new ArrayBuffer(t.length),n=new Uint8Array(r),i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return new Blob([r],{type:a})},uploadFile:function(e,t){var a=this,r=new FormData;r.append("file",e,t),r.append("output","json"),r.append("path",Cookies.get("appids")),r.append("scene",Cookies.get("appids")),r.append("auth_token",Cookies.get("access_token_pump"));this.$http.post(Cookies.get("fileserver"),r).then((function(e){e&&(a.loading=!1,a.standardFormModel.filesrc=e.body.url)})).catch((function(e){a.loading=!1,a.$message.error(e)}))},postStandardToDict:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return t.$message.error("有必填项未填写"),!1;if(""!=t.standardFormModel.filesrc){var a=t.$store.state.user.roles[0]["name"];if(a){var r="role:"+a,n={};n[r]={read:!0,write:!0},t.$axiosWen.post("classes/Dict",{ACL:n,type:"inspectionStandard",data:t.standardFormModel,key:""}).then((function(e){e&&(t.$message({type:"success",message:"".concat(t.actionTypeTxt,"成功")}),t.dialogVisible=!1,t.getStandardFromDict(),t.$refs.standardFormRef.resetFields(),t.reportid="")})).catch((function(e){t.$message({message:"添加失败"})}))}else t.$message({message:"未获取到角色名"})}else t.$message.error("请上传检验标准PDF文件")}))},editorReport:function(e){this.dialogVisible=!0,this.reportid=e.objectId,this.standardFormModel.name=e.data.name,this.standardFormModel.product=e.data.product,this.standardFormModel.inspection_number=e.data.inspection_number,this.standardFormModel.standard=e.data.standard,this.standardFormModel.start_time=e.data.start_time,this.standardFormModel.model=e.data.model,this.standardFormModel.filesrc=e.data.filesrc,this.standardFormModel.desc=e.data.desc,this.standardFormModel.client=e.data.client,this.standardFormModel.reportchildren=e.data.reportchildren},deleteReport:function(e){var t=this;this.$confirm("此操作将永久此检测标准, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then((function(){t.$axiosWen.delete("classes/Dict/"+e).then((function(e){e&&(t.$message({type:"success",message:"删除成功!"}),t.getStandardFromDict())}))}))},addDomain:function(){this.dynamicValidateForm.domains.push({title:"",key:Date.now(),value:"",name:"",evidenceway:"",assess:""})},removeDomain:function(e){var t=this.dynamicValidateForm.domains.indexOf(e);-1!==t&&this.dynamicValidateForm.domains.splice(t,1)},addChildReport:function(e){this.dialogReport=!0,this.reportid=e.id,this.standardFormModel.name=e.data.name,this.standardFormModel.product=e.data.product,this.standardFormModel.inspection_number=e.data.inspection_number,this.standardFormModel.standard=e.data.standard,this.standardFormModel.start_time=e.data.start_time,this.standardFormModel.model=e.data.model,this.standardFormModel.filesrc=e.data.filesrc,this.standardFormModel.desc=e.data.desc,this.standardFormModel.client=e.data.client,this.standardFormModel.reportchildren=e.data.reportchildren},reportChildren:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return t.$message.error("请填写完整"),!1;var a=Parse.Object.extend("InspectionStandard"),r=new a;r.id=t.reportid,t.form.reportchildren=t.form.reportchildren.concat(t.dynamicValidateForm.domains),r.set("data",t.form),r.save().then((function(e){t.$message.success("新增成功"),t.dialogReport=!1,t.dynamicValidateForm.domains=[{title:"",key:Date.now(),value:"",name:"",evidenceway:"",assess:""}]}))}))},childManage:function(e){this.childrenData=e.data.reportchildren.concat([]),this.dialogTableVisible=!0,this.reportid=e.id},deleteChildren:function(e){this.childrenData.splice(e+(this.currentPage-1)*this.pageSize,1)},ReportChildrenDelete:function(){var e=this;this.$confirm("是否删除标准子项, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var t=Parse.Object.extend("InspectionStandard"),a=new t;a.id=e.reportid,s.reportchildren=e.childrenData,a.set("data",s),a.save().then((function(t){t&&(e.$message({type:"success",message:"删除成功!"}),e.dialogTableVisible=!1,e.getStandardFromDict(),e.required="")}))}))}}},c=l,d=(a("c825"),a("2877")),u=Object(d["a"])(c,r,n,!1,null,"239994b5",null);t["default"]=u.exports},2351:function(e,t,a){},"23e2":function(e,t,a){},2752:function(e,t,a){},2843:function(e,t,a){"use strict";a("2752")},"28c0":function(e,t,a){"use strict";a("395e")},"2aa6":function(e,t,a){},"2edc":function(e,t,a){"use strict";a("3cb2")},3006:function(e,t,a){"use strict";a("2aa6")},3690:function(e,t,a){e.exports={"menu-color":"rgba(255,255,255,.95)","menu-color-active":"rgba(255,255,255,.95)","menu-background":"#282c34","column-second-menu-background":"#fff"}},"395e":function(e,t,a){},"3cb2":function(e,t,a){},"499a":function(e,t,a){"use strict";a("13a2")},"4b21":function(e,t,a){"use strict";a("3690")},"4d4c8":function(e,t,a){"use strict";a("8805")},"4fe6":function(e,t,a){"use strict";a("2351")},"52b3":function(e,t,a){e.exports={"menu-color":"rgba(255,255,255,.95)","menu-color-active":"rgba(255,255,255,.95)","menu-background":"#282c34","column-second-menu-background":"#fff"}},5854:function(e,t,a){},6200:function(e,t,a){},"66a7":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"personpump"},[a("h3",[e._v("个人资质审核")]),a("div",{staticClass:"empower_top"},[a("div",{staticClass:"block_table"},[a("el-table",{staticStyle:{width:"100%","text-align":"center"},attrs:{data:e.tableData,"cell-style":e.rowClass,"header-cell-style":e.headClass,size:"mini",stripe:"",border:""}},[a("el-table-column",{attrs:{label:"序号",width:"50",type:"index"}}),a("el-table-column",{attrs:{label:"企业名称",prop:"data.name"}}),a("el-table-column",{attrs:{label:"姓名",prop:"data.name"}}),a("el-table-column",{attrs:{label:"企业职务",prop:"data.job"}}),a("el-table-column",{attrs:{label:"出生日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(" "+e._s(e.$timestampToTime(t.row.data.birthday).substring(0,11))+" ")])]}}])}),a("el-table-column",{attrs:{label:"最高学历"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.data.education))])]}}])}),a("el-table-column",{attrs:{label:"主修专业"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.data.professional))])]}}])}),a("el-table-column",{attrs:{label:"个人职称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.data.positional_titles))])]}}])}),a("el-table-column",{attrs:{label:"联系方式"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.data.userphone))])]}}])}),a("el-table-column",{attrs:{label:"从业时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(" "+e._s(e.$timestampToTime(t.row.data.start_time).substring(0,11))+" ")])]}}])}),a("el-table-column",{attrs:{label:"申请时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(" "+e._s(e.$utc2beijing(t.row.createdAt).substring(0,13))+" ")])]}}])}),a("el-table-column",{attrs:{label:"审核状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.data.verifyStatus?a("el-tag",{attrs:{type:"info"}},[e._v(" 待审核 ")]):1==t.row.data.verifyStatus?a("el-tag",{attrs:{type:"success"}},[e._v(" 审核通过 ")]):2==t.row.data.verifyStatus?a("el-tag",{attrs:{type:"danger"}},[e._v(" 审核未通过 ")]):e._e()]}}])}),a("el-table-column",{attrs:{label:"审核日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.$timestampToTime(t.row.data.auditDate)))])]}}])}),a("el-table-column",{attrs:{label:"审核意见"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.data.suggestion?a("span",[e._v(" "+e._s(t.row.data.suggestion)+" ")]):a("span")]}}])}),a("el-table-column",{attrs:{label:"审核管理",width:"180px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return e.lookUp(t.row)}}},[e._v(" 查看 ")]),a("el-button",{attrs:{type:"success",size:"small"},on:{click:function(a){return e.examine(t.row)}}},[e._v(" 审核 ")])]}}])})],1)],1),a("div",{staticClass:"block_page"},[a("el-pagination",{attrs:{"page-sizes":[10,20,30,50],"page-size":e.pagesize,total:e.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)]),a("el-dialog",{attrs:{"append-to-body":!0,visible:e.dialogFormVisible,title:"个人资质审核",width:"80%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{attrs:{"label-width":"120px",size:"mini"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"姓名"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.name)}})],1),a("el-form-item",{attrs:{label:"出生日期"}},[e._v(" "+e._s(e.$timestampToTime(e.currentRow.data.birthday).substring(0,11))+" ")]),a("el-form-item",{attrs:{label:"毕业院校"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.graduate_institutions)}})],1),a("el-form-item",{attrs:{label:"身份证编号\n"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.identity)}})],1),a("el-form-item",{attrs:{label:"身份证正反面"}},[a("img",{staticClass:"avatar",attrs:{src:e.fileDomain+e.currentRow.data.frontimageUrl}})]),a("el-form-item",{attrs:{label:"家庭地址"}},[a("el-cascader",{staticStyle:{width:"200px"},attrs:{options:e.regionData},model:{value:e.currentRow.data.addr,callback:function(t){e.$set(e.currentRow.data,"addr",t)},expression:"currentRow.data.addr"}})],1),a("el-form-item",{attrs:{label:"相关工作年限"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.working_seniority+"年")}})],1),a("el-form-item",{attrs:{label:"培训经历"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.training_experience)}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"企业职务"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.job)}})],1),a("el-form-item",{attrs:{label:"最高学历"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.education)}})],1),a("el-form-item",{attrs:{label:"主修专业"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.professional)}})],1),a("el-form-item",{attrs:{label:"个人职称"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.positional_titles)}})],1),a("el-form-item",{attrs:{label:"职业资质"}},[a("img",{staticClass:"avatar",attrs:{src:e.fileDomain+e.currentRow.data.joblicenseUrl}})]),a("el-form-item",{attrs:{label:"开始时间"}},[e._v(" "+e._s(e.$timestampToTime(e.currentRow.data.start_time).substring(0,11))+" ")]),a("el-form-item",{attrs:{label:"联系方式"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.userphone)}})],1),a("el-form-item",{attrs:{label:"相关从业经历"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.practitioners_experience)}})],1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogFormVisible=!1}}},[e._v(" 确 定 ")])],1)],1),a("el-dialog",{attrs:{"append-to-body":!0,visible:e.dialogVisible,title:"认证审核",width:"40%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",[a("el-form",{ref:"verifyFormRef",attrs:{model:e.verifyForm,rules:e.verifyFormRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"审核状态",prop:"status"}},[a("el-radio-group",{model:{value:e.verifyForm.status,callback:function(t){e.$set(e.verifyForm,"status",t)},expression:"verifyForm.status"}},[a("el-radio",{attrs:{label:0}},[e._v("审核中")]),a("el-radio",{attrs:{label:2}},[e._v("审核未通过")]),a("el-radio",{attrs:{label:1}},[e._v("审核通过")])],1)],1),a("el-form-item",{attrs:{label:"审核意见",prop:"suggestion"}},[a("el-input",{attrs:{rows:4,type:"textarea"},model:{value:e.verifyForm.suggestion,callback:function(t){e.$set(e.verifyForm,"suggestion",t)},expression:"verifyForm.suggestion"}})],1),a("h3",{staticStyle:{height:"40px","padding-left":"20px","line-height":"40px",border:"1px solid #cccccc"}},[e._v(" U盾认证信息 ")]),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"U盾序列号",prop:"unumber"}},[a("el-input",{attrs:{placeholder:"请输入U盾序列号"},model:{value:e.verifyForm.unumber,callback:function(t){e.$set(e.verifyForm,"unumber",t)},expression:"verifyForm.unumber"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"U盾KEY值",prop:"ukey"}},[a("el-input",{attrs:{placeholder:"请输入U盾KEY值"},model:{value:e.verifyForm.ukey,callback:function(t){e.$set(e.verifyForm,"ukey",t)},expression:"verifyForm.ukey"}})],1)],1)],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("verifyFormRef")}}},[e._v(" 提 交 ")])],1)])],1)},n=[],i=a("23a5"),o=(a("926a"),{data:function(){return{dialogVisible:!1,formInline:{name:"",status:"all",starttime:"",endtime:""},tableData:[],pagesize:10,start:0,total:0,regionData:i["regionData"],verifyForm:{status:1,unumber:"",ukey:"",suggestion:""},verifyFormRules:{status:[{required:!0,message:"请选择审核状态",trigger:"change"}],suggestion:[{required:!0,message:"请填写认证审核意见",trigger:"blur"}],unumber:[{required:!0,message:"请填写U盾序列号",trigger:"blur"}],ukey:[{required:!0,message:"请填写U盾KEY",trigger:"blur"}]},currentRow:{data:{}},dialogFormVisible:!1}},computed:{fileDomain:function(){return this.$getUrlPrefix(this.$Cookies.get("fileserver"))}},mounted:function(){this.personEmpower()},methods:{headClass:function(){return"text-align:center"},rowClass:function(){return"text-align:center"},personEmpower:function(e){var t=this,a=this.$loading({background:"rgba(0, 0, 0, 0.5)"});this.$axiosWen.get("/classes/Dict",{params:{where:{type:"PersonAuthtication"},order:"-updatedAt"}}).then((function(e){if(a.close(),e&&e.results){var r=e.results;t.tableData=r}else t.tableData=r})).catch((function(e){a.close()}))},handleSizeChange:function(e){this.pagesize=e,this.personEmpower()},handleCurrentChange:function(e){this.start=(e-1)*this.pagesize,this.personEmpower()},lookUp:function(e){this.dialogFormVisible=!0,this.currentRow=e},examine:function(e){this.currentRow=e,this.dialogVisible=!0},submitForm:function(e){var t=this;this.$refs[e].validate((function(a){if(!a)return!1;var r=(new Date).getTime();t.currentRow.data.verifyStatus=t.verifyForm.status,t.currentRow.data.unumber=t.verifyForm.unumber,t.currentRow.data.ukey=t.verifyForm.ukey,t.currentRow.data.suggestion=t.verifyForm.suggestion,t.currentRow.data.auditDate=r,t.$axiosWen.put("classes/Dict/"+t.currentRow.objectId,{data:t.currentRow.data}).then((function(a){a&&(t.$message({type:"success",message:"审核成功"}),t.$refs[e].resetFields(),t.dialogVisible=!1,t.personEmpower())})).catch((function(e){t.$message({message:"审核失败"})}))}))}}}),s=o,l=(a("902a"),a("a57f"),a("2877")),c=Object(l["a"])(s,r,n,!1,null,"24346624",null);t["default"]=c.exports},6739:function(e,t,a){},"6b84":function(e,t,a){},"753f":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"u_shield"},[a("div",{staticStyle:{width:"360px",height:"100vh"}}),a("div",{staticClass:"u_shieldright",staticStyle:{width:"calc(100% - 360px)",padding:"20px"}},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline,size:"small"}},[a("el-form-item",{attrs:{label:"U盾状态分类"}},[a("el-select",{attrs:{placeholder:"U盾状态分类"},model:{value:e.formInline.status,callback:function(t){e.$set(e.formInline,"status",t)},expression:"formInline.status"}},[a("el-option",{attrs:{label:"全部",value:"all"}})],1)],1),a("el-form-item",{attrs:{label:"应用实验室"}},[a("el-select",{attrs:{placeholder:"应用实验室"},model:{value:e.formInline.laboratory,callback:function(t){e.$set(e.formInline,"laboratory",t)},expression:"formInline.laboratory"}},[a("el-option",{attrs:{label:"全部",value:"all"}})],1)],1),a("el-form-item",{attrs:{label:"U盾编号"}},[a("el-input",{attrs:{placeholder:"U盾编号"},model:{value:e.formInline.unumber,callback:function(t){e.$set(e.formInline,"unumber",t)},expression:"formInline.unumber"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("查询")]),a("el-button",{attrs:{type:"primary"},on:{click:e.reseting}},[e._v("查询")])],1)],1),a("div",[a("el-button",{attrs:{type:"success",size:"small"},on:{click:e.uShield}},[e._v(" U盾扫描 ")])],1),a("div",{staticClass:"blocktable"},[a("el-table",{staticStyle:{width:"100%","text-align":"center"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),a("el-table-column",{attrs:{label:"U盾序列号",align:"center",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.attributes.basedata.SerialNumber))])]}}])}),a("el-table-column",{attrs:{align:"center",width:"300",label:"证书拥有者"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.attributes.basedata.Subject))])]}}])}),a("el-table-column",{attrs:{align:"center",width:"300",label:"颁发机构"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.attributes.basedata.Issuer))])]}}])}),a("el-table-column",{attrs:{align:"center",width:"300",label:"数据签名","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.attributes.basedata.bstrCertB64))])]}}])}),a("el-table-column",{attrs:{align:"center",width:"150",label:"发证时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.attributes.basedata.beforeDate))])]}}])}),a("el-table-column",{attrs:{align:"center",width:"150",label:"到期时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.attributes.basedata.afterDate))])]}}])}),a("el-table-column",{attrs:{align:"center",width:"100",label:"分配状态"}}),a("el-table-column",{attrs:{align:"center",width:"200",label:"授权单位"}}),a("el-table-column",{attrs:{align:"center",width:"200",label:"授权个人"}}),a("el-table-column",{attrs:{align:"center",width:"200",label:"U盾管理"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"small"},on:{click:function(a){return e.editorUdun(t.row)}}}),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"small"}})]}}])})],1)],1),a("div",{staticClass:"blocktable"},[a("el-pagination",{attrs:{"page-sizes":[10,20,30,50],"page-size":e.pagesize,total:e.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),a("el-dialog",{attrs:{"append-to-body":!0,visible:e.dialogFormVisible,title:"U盾设备赋权"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"ushieldform",attrs:{model:e.ushieldform,rules:e.ushieldrule,size:"small"}},[a("p",{staticStyle:{height:"40px","margin-top":"0","font-size":"14px",color:"#409eff","border-bottom":"1px solid #cccccc"}},[e._v(" U盾详情信息 ")]),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{"label-width":e.formLabelWidth,label:"U盾序列号",prop:"unumber"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"U盾序列号，插入U盾自动填充",readonly:""},model:{value:e.ushieldform.unumber,callback:function(t){e.$set(e.ushieldform,"unumber",t)},expression:"ushieldform.unumber"}})],1),a("el-form-item",{attrs:{"label-width":e.formLabelWidth,label:"证书拥有者",prop:"name"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"U盾申办人姓名，U盾扫描后自动录入",readonly:""},model:{value:e.ushieldform.name,callback:function(t){e.$set(e.ushieldform,"name",t)},expression:"ushieldform.name"}})],1),a("el-form-item",{attrs:{"label-width":e.formLabelWidth,label:"发证日期",prop:"startdate"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"U盾正式适用日期，U盾扫描后自动录入",readonly:""},model:{value:e.ushieldform.startdate,callback:function(t){e.$set(e.ushieldform,"startdate",t)},expression:"ushieldform.startdate"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{"label-width":e.formLabelWidth,label:"颁发机构",prop:"bidunit"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"取证设备颁发机构",readonly:""},model:{value:e.ushieldform.bidunit,callback:function(t){e.$set(e.ushieldform,"bidunit",t)},expression:"ushieldform.bidunit"}})],1),a("el-form-item",{attrs:{"label-width":e.formLabelWidth,label:"到期日期"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"U盾有效期到期日期，U盾扫描后自动录入",readonly:""},model:{value:e.ushieldform.enddate,callback:function(t){e.$set(e.ushieldform,"enddate",t)},expression:"ushieldform.enddate"}})],1),a("el-form-item",{attrs:{"label-width":e.formLabelWidth,label:"Ukey证书"}},[a("el-input",{attrs:{rows:4,autocomplete:"off",type:"textarea",placeholder:"请输入Ukey证书信息",readonly:""},model:{value:e.ushieldform.ukey,callback:function(t){e.$set(e.ushieldform,"ukey",t)},expression:"ushieldform.ukey"}})],1)],1)],1),a("p",{directives:[{name:"show",rawName:"v-show",value:""!=e.ushieldid,expression:"ushieldid != ''"}],staticStyle:{height:"40px","font-size":"14px",color:"#409eff","border-bottom":"1px solid #cccccc"}},[e._v(" U盾认证信息 ")]),a("el-row",{directives:[{name:"show",rawName:"v-show",value:""!=e.ushieldid,expression:"ushieldid != ''"}]},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{"label-width":e.formLabelWidth,label:"授权单位"}},[a("el-select",{attrs:{placeholder:"请选择通过资质认证的企业"},model:{value:e.ushieldform.company,callback:function(t){e.$set(e.ushieldform,"company",t)},expression:"ushieldform.company"}},e._l(e.companylist,(function(e){return a("el-option",{key:e.id,attrs:{label:e.attributes.empower.abbrname,value:e.id}})})),1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{"label-width":e.formLabelWidth,label:"授权个人"}},[a("el-select",{attrs:{autocomplete:"off",placeholder:"请选择通过资质认证的个人"},model:{value:e.ushieldform.username,callback:function(t){e.$set(e.ushieldform,"username",t)},expression:"ushieldform.username"}},e._l(e.personlist,(function(e){return a("el-option",{key:e.id,attrs:{label:e.attributes.name,value:e.id}})})),1)],1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.addUshield}},[e._v("确 定")])],1)],1)],1)},n=[],i=(a("7db0"),a("b0c0"),a("926a")),o=a("1cd8"),s=(a("61f7"),{components:{},data:function(){return{formInline:{unumber:"",status:"all",laboratory:""},tableData:[],dialogFormVisible:!1,formLabelWidth:"120px",ushieldform:{name:"",unumber:"",bidunit:"",issueunit:"",phone:"",ukey:"",startdate:"",enddate:"",address:"",company:"",username:""},ushieldrule:{name:[{required:!0,message:"申办人姓名不能为空",trigger:"blur"}],unumber:[{required:!0,message:"U盾序列号不能为空",trigger:"blur"}],bidunit:[{required:!0,message:"申办单位名称不能为空",trigger:"blur"}],startdate:[{required:!0,message:"发证日期不能为空",trigger:"blur"}],address:[{required:!0,message:"申办单位地址不能为空",trigger:"blur"}]},companylist:[],personlist:[],pagesize:10,start:0,total:0,ushieldid:""}},mounted:function(){this.getUshield()},methods:{getUshield:function(e){var t=this;0==e&&(this.start=0);var a=Parse.Object.extend("Devices"),r=new Parse.Query(a);r.skip(this.start),r.limit(this.pagesize),r.equalTo("basedata.type","ukey"),r.count().then((function(e){t.total=e,r.find().then((function(e){t.tableData=e}))}),(function(e){Object(i["returnLogin"])(e)}))},editorUdun:function(e){var t=this;this.ushieldid=e.id,this.dialogFormVisible=!0;var a=Parse.Object.extend("Devices"),r=new Parse.Query(a);r.get(this.ushieldid).then((function(e){t.ushieldform.unumber=e.attributes.basedata.SerialNumber,t.ushieldform.name=e.attributes.basedata.Subject,t.ushieldform.startdate=e.attributes.basedata.beforeDate,t.ushieldform.enddate=e.attributes.basedata.afterDate,t.ushieldform.bidunit=e.attributes.basedata.Issuer,t.ushieldform.ukey=e.attributes.basedata.bstrCertB64}),(function(e){Object(i["returnLogin"])(e)}))},uShield:function(){var e=this;this.dialogFormVisible=!0,this.ushieldid="",Object(o["getCert"])().then((function(t){t&&(e.ushieldform.unumber=t.SerialNumber,e.ushieldform.name=t.Subject,e.ushieldform.startdate=t.beforeDate,e.ushieldform.enddate=t.afterDate,e.ushieldform.bidunit=t.Issuer,e.ushieldform.ukey=t.bstrCertB64)})).catch((function(t){e.$message.error(t.error)}))},getCompany:function(){var e=this,t=Parse.Object.extend("Authentication"),a=new Parse.Query(t);a.equalTo("status","Pass"),a.find().then((function(t){e.companylist=t}),(function(e){Object(i["returnLogin"])(e)}))},getPerson:function(){var e=this,t=Parse.Object.extend("PersonAuthtication"),a=new Parse.Query(t);a.equalTo("status","Pass"),a.find().then((function(t){e.personlist=t}),(function(e){Object(i["returnLogin"])(e)}))},addUshield:function(){var e=this,t=Parse.Object.extend("Product"),a=new Parse.Query(t);a.equalTo("devType","ukey"),a.find().then((function(a){var r=Parse.Object.extend("Devices"),n=new r,o=new Parse.Query(r);o.equalTo("basedata.SerialNumber",e.ushieldform.unumber),o.find().then((function(r){if(0==r.length){""!=e.ushieldid&&(n.id=e.ushieldid);Parse.Object.extend("Product");var o=new t;o.id=a[0].id,n.set("product",o),n.set("basedata",{SerialNumber:e.ushieldform.unumber,Subject:e.ushieldform.name,beforeDate:e.ushieldform.startdate,afterDate:e.ushieldform.enddate,Issuer:e.ushieldform.bidunit,bstrCertB64:e.ushieldform.ukey,type:"ukey"}),n.save().then((function(t){t&&(e.$message.success("U盾创建成功"),e.ushieldid="",e.dialogFormVisible=!1)}),(function(e){Object(i["returnLogin"])(e)}))}else e.$message.error("此U盾已存在")}),(function(e){Object(i["returnLogin"])(e)}))}),(function(e){Object(i["returnLogin"])(e)}))}}}),l=s,c=(a("2edc"),a("2877")),d=Object(c["a"])(l,r,n,!1,null,"7bc7ec9c",null);t["default"]=d.exports},"79eb":function(e,t,a){},8488:function(e,t,a){"use strict";a("9aa0")},8805:function(e,t,a){},"8c3f":function(e,t,a){},"902a":function(e,t,a){"use strict";a("6b84")},"930e":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"testbedpump"},[a("Pumpdepartment",{staticStyle:{"flex-shrink":"0",width:"360px",height:"100vh",padding:"10px",overflow:"scroll"},on:{pumpDetail:e.getPumpNode}}),a("div",{staticStyle:{width:"calc(100% - 360px)",padding:"20px"}},[a("div",{staticClass:"bedtop"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline,size:"small"}},[a("el-form-item",{attrs:{label:"检测台状态"}},[a("el-select",{attrs:{placeholder:"检测台状态"},model:{value:e.formInline.state,callback:function(t){e.$set(e.formInline,"state",t)},expression:"formInline.state"}},[a("el-option",{attrs:{label:"健康",value:"healthy"}}),a("el-option",{attrs:{label:"良好",value:"fine"}}),a("el-option",{attrs:{label:"一般",value:"commonly"}})],1)],1),a("el-form-item",{attrs:{label:"检测台"}},[a("el-input",{attrs:{placeholder:"检测台"},model:{value:e.formInline.name,callback:function(t){e.$set(e.formInline,"name",t)},expression:"formInline.name"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.getBedtable(e.departmentid)}}},[e._v(" 查询 ")])],1)],1)],1),a("div",{staticClass:"bedtable"},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%","text-align":"center"},attrs:{data:e.bedData,border:""},on:{"selection-change":e.handleSelectionBed}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{type:"index",prop:"index",label:"序号",width:"50",align:"center"}}),a("el-table-column",{attrs:{label:"检测台名称",prop:"basedata.name",align:"center",width:"200"}}),a("el-table-column",{attrs:{label:"所属实验室",prop:"basedata.laboratory",align:"center",width:"150"}}),a("el-table-column",{attrs:{label:"检测台编号",prop:"basedata.number",align:"center",width:"150"}}),a("el-table-column",{attrs:{label:"检测台型号",prop:"basedata.model",align:"center",width:"150"}}),a("el-table-column",{attrs:{label:"生产厂家",prop:"basedata.factory",align:"center",width:"200"}}),a("el-table-column",{attrs:{label:"健康状况",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.basedata?a("p",["healthy"==t.row.basedata.state?a("span",[e._v("健康")]):"fine"==t.row.basedata.state?a("span",[e._v("良好")]):"commonly"==t.row.basedata.state?a("span",[e._v(" 一般 ")]):e._e()]):e._e()]}}])}),a("el-table-column",{attrs:{label:"状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return["init"==t.row.status?a("span",{staticStyle:{color:"green"}},[e._v(" 运行中 ")]):e._e(),"ONLINE"==t.row.status?a("span",{staticStyle:{color:"green"}},[e._v(" 在线 ")]):e._e()]}}])}),a("el-table-column",{attrs:{label:"编辑",align:"center",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.showUpdateDeviceForm(t.$index)}}},[e._v(" 编辑 ")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.row.id)}}},[e._v(" 删除 ")]),a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){return e.devicesDetail(t.row)}}},[e._v(" 查看设备 ")])]}}])})],1)],1),a("div",{staticClass:"block",staticStyle:{"margin-top":"20px"}},[a("el-pagination",{attrs:{"page-sizes":[1,5,10],"page-size":e.pagesize,total:e.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),a("div",{staticClass:"addbeddialog"},[a("el-dialog",{attrs:{"append-to-body":!0,title:"测试台体"+e.actionTypeMap[e.actionType],visible:e.beddialog},on:{"update:visible":function(t){e.beddialog=t}}},[a("div",{staticStyle:{"margin-bottom":"20px"}},[a("label",{attrs:{for:""}},[e._v("测试台名称:")]),a("el-input",{staticStyle:{width:"200px"},model:{value:e.testbedname,callback:function(t){e.testbedname=t},expression:"testbedname"}})],1),a("div",{staticClass:"devicecompany"},[a("el-form",{attrs:{model:e.devicelist,inline:!0}},[a("el-form-item",{attrs:{label:"检测单位:"}},[a("el-select",{on:{change:e.selectCompany},model:{value:e.devicelist.departmentid,callback:function(t){e.$set(e.devicelist,"departmentid",t)},expression:"devicelist.departmentid"}},e._l(e.departmentlist,(function(e,t){return a("el-option",{key:t,attrs:{label:e.attributes.name,value:e.id}})})),1)],1),a("el-form-item",{attrs:{label:"检测单位:"}},[a("el-select",{model:{value:e.devicelist.testbedid,callback:function(t){e.$set(e.devicelist,"testbedid",t)},expression:"devicelist.testbedid"}},e._l(e.testbedlist,(function(e,t){return a("el-option",{key:t,attrs:{label:e.attributes.name,value:e.id}})})),1)],1)],1)],1),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%","text-align":"center"},attrs:{data:e.devicesData,border:""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",align:"center",width:"100"}}),a("el-table-column",{attrs:{label:"设备类别",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return["DTU"==t.row.attributes.basedata.type?a("span",[e._v(" 控制器 ")]):"PC"==t.row.attributes.basedata.type?a("span",[e._v(" 控制台 ")]):a("span",[e._v("摄像头")])]}}])}),a("el-table-column",{attrs:{label:"设备编号",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.attributes.devaddr))])]}}])}),a("el-table-column",{attrs:{label:"当前状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return["offline"==t.row.attributes.basedata.status?a("span",{staticStyle:{color:"red"}},[e._v(" 离线 ")]):e._e(),"ready"==t.row.attributes.basedata.status?a("span",{staticStyle:{color:"green"}},[e._v(" 在线 ")]):e._e()]}}])})],1),a("div",{staticClass:"block",staticStyle:{"margin-top":"20px"}},[a("el-pagination",{attrs:{"page-sizes":[10,20,50],"page-size":e.devicepagesize,total:e.devicetotal,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleDeviceSizeChange,"current-change":e.handleDeviceCurrentChange}})],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.beddialog=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addtestbed(e.testbedid)}}},[e._v(" 确 定 ")])],1)],1)],1)]),a("el-dialog",{attrs:{"append-to-body":!0,title:e.testbedname+"的设备",visible:e.bedDevicedialog,width:"80%"},on:{"update:visible":function(t){e.bedDevicedialog=t}}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"deviceheader"},[a("div",{staticClass:"headerone"},[e._v("网关设备")]),a("div",{staticClass:"headertwo"},[e._v("网络层级:2")]),a("div",{staticClass:"headerthree"},[e._v("网关编号:11223334455")]),a("div",{staticClass:"headerfourth"},[e._v(" 网关状态: "),a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#cccccc"},model:{value:e.gatewaystatus,callback:function(t){e.gatewaystatus=t},expression:"gatewaystatus"}})],1)]),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%","margin-top":"20px","text-align":"center"},attrs:{data:e.bedDevicesData,border:""}},[a("el-table-column",{attrs:{label:"设备类别",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.attributes.name))])]}}])}),a("el-table-column",{attrs:{label:"网络设备编号",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.attributes.devaddr))])]}}])}),a("el-table-column",{attrs:{label:"设备厂商",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.attributes.basedata.factory))])]}}])}),a("el-table-column",{attrs:{label:"通信协议",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.attributes.basedata.agreement))])]}}])}),a("el-table-column",{attrs:{label:"网络层级",align:"center"}}),a("el-table-column",{attrs:{label:"设备状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return["offline"==t.row.attributes.basedata.status?a("span",{staticStyle:{color:"red"}},[e._v(" 离线 ")]):e._e(),"ready"==t.row.attributes.basedata.status?a("span",{staticStyle:{color:"green"}},[e._v(" 在线 ")]):e._e()]}}])}),a("el-table-column",{attrs:{label:"投运时间",align:"center"}}),a("el-table-column",{attrs:{label:"操作",align:"center"}})],1)],1),a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"devicetwo"},[a("div",{staticClass:"devicetwoone"},[e._v("传感器")]),a("div",{staticClass:"devicetwotwo"},[e._v("传感器数量:6")]),a("div",{staticClass:"devicetwothree"},[e._v("在线设备:10")]),a("div",{staticClass:"devicetwofourth"},[e._v("故障设备:2")])]),a("el-table",{ref:"multipleTable1",staticStyle:{width:"100%","margin-top":"20px","text-align":"center"},attrs:{data:e.bedDevicesData},on:{"selection-change":e.deviceSelect}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{label:"传感器名称",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.attributes.name))])]}}])}),a("el-table-column",{attrs:{label:"传感器编码",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.attributes.devaddr))])]}}])}),a("el-table-column",{attrs:{label:"设备厂家",align:"center"}}),a("el-table-column",{attrs:{label:"设备型号",align:"center"}}),a("el-table-column",{attrs:{label:"设备协议",align:"center"}}),a("el-table-column",{attrs:{label:"网络层级",align:"center"}}),a("el-table-column",{attrs:{label:"内网编号",align:"center"}}),a("el-table-column",{attrs:{label:"最新采集时间",align:"center"}}),a("el-table-column",{attrs:{label:"当前状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return["offline"==t.row.attributes.basedata.status?a("span",{staticStyle:{color:"red"}},[e._v(" 离线 ")]):e._e(),"ready"==t.row.attributes.basedata.status?a("span",{staticStyle:{color:"green"}},[e._v(" 在线 ")]):e._e()]}}])})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.bedDevicedialog=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.bedDevicedialog=!1}}},[e._v(" 确 定 ")])],1)],1),a("el-dialog",{attrs:{"append-to-body":!0,title:"检测台"+e.actionTypeMap[e.actionType],visible:e.addbeddialogNew,width:"50%"},on:{"update:visible":function(t){e.addbeddialogNew=t},open:e.diologOpen}},[a("div",[a("el-form",{ref:"addbedFormRef",staticClass:"demo-ruleForm",attrs:{model:e.addbedForm,rules:e.addbedFormrule,"label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-form-item",{attrs:{label:"检测台名称",prop:"name"}},[a("el-input",{model:{value:e.addbedForm.name,callback:function(t){e.$set(e.addbedForm,"name",t)},expression:"addbedForm.name"}})],1),a("el-form-item",{attrs:{label:"检测台编号"}},[a("el-input",{model:{value:e.addbedForm.number,callback:function(t){e.$set(e.addbedForm,"number",t)},expression:"addbedForm.number"}})],1),a("el-form-item",{attrs:{label:"生产厂家"}},[a("el-input",{model:{value:e.addbedForm.factory,callback:function(t){e.$set(e.addbedForm,"factory",t)},expression:"addbedForm.factory"}})],1),a("el-form-item",{attrs:{label:"控制台信息"}},[e.addbedForm.imgsrc?a("img",{staticClass:"avatar",attrs:{src:e.addbedForm.imgsrc}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),a("form",{ref:"uploadform",staticStyle:{position:"absolute"},attrs:{method:"POST",enctype:"multipart/form-data"}},[a("input",{staticStyle:{position:"relative",top:"-200px","z-index":"5",width:"200px",height:"200px",cursor:"pointer",opacity:"0"},attrs:{type:"file"},on:{change:function(t){return e.upload(t)}}})])])],1)]),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("el-form-item",{attrs:{label:"网关选择",prop:"product"}},[a("el-select",{attrs:{disabled:"",placeholder:"请选择台体所属网关"},model:{value:e.addbedForm.product,callback:function(t){e.$set(e.addbedForm,"product",t)},expression:"addbedForm.product"}},e._l(e.productlist,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.objectId}})})),1)],1),a("el-form-item",{attrs:{label:"所属实验室",prop:"laboratory"}},[a("el-select",{attrs:{placeholder:"请选择所属实验室"},model:{value:e.addbedForm.laboratory,callback:function(t){e.$set(e.addbedForm,"laboratory",t)},expression:"addbedForm.laboratory"}},[a("el-option",{key:"99",attrs:{value:99,label:"实验室1"}}),e._l(e.departmentList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.attributes.name,value:e.id}})}))],2)],1),a("el-form-item",{attrs:{label:"测试台型号"}},[a("el-input",{model:{value:e.addbedForm.model,callback:function(t){e.$set(e.addbedForm,"model",t)},expression:"addbedForm.model"}})],1),a("el-form-item",{attrs:{label:"测试台状况",prop:"state"}},[a("el-select",{attrs:{placeholder:"请选择测试台状况"},model:{value:e.addbedForm.state,callback:function(t){e.$set(e.addbedForm,"state",t)},expression:"addbedForm.state"}},[a("el-option",{attrs:{label:"健康",value:"healthy"}}),a("el-option",{attrs:{label:"良好",value:"fine"}}),a("el-option",{attrs:{label:"一般",value:"commonly"}})],1)],1),a("el-form-item",{attrs:{label:"备注信息"}},[a("el-input",{attrs:{rows:4,type:"textarea"},model:{value:e.addbedForm.desc,callback:function(t){e.$set(e.addbedForm,"desc",t)},expression:"addbedForm.desc"}})],1)],1)])],1),a("el-divider",{attrs:{"content-position":"left"}},[e._v("计算机配置")]),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"计算机名称"}},[a("el-select",{attrs:{placeholder:"请选择计算机名称"},model:{value:e.addbedForm.computername,callback:function(t){e.$set(e.addbedForm,"computername",t)},expression:"addbedForm.computername"}},[a("el-option",{attrs:{label:"区域一",value:"shanghai"}}),a("el-option",{attrs:{label:"区域二",value:"beijing"}})],1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"计算机key"}},[a("el-select",{attrs:{placeholder:"请选择计算机key"},model:{value:e.addbedForm.computerkey,callback:function(t){e.$set(e.addbedForm,"computerkey",t)},expression:"addbedForm.computerkey"}},[a("el-option",{attrs:{label:"区域一",value:"shanghai"}}),a("el-option",{attrs:{label:"区域二",value:"beijing"}})],1)],1)],1)],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addbeddialogNew=!1}}},[e._v("取 消")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:"update"==e.actionType,expression:"actionType == 'update'"}],attrs:{type:"primary"},on:{click:e.doUpdateDevice}},[e._v(" 确 定 ")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:"add"==e.actionType,expression:"actionType == 'add'"}],attrs:{type:"primary"},on:{click:function(t){return e.Determine("addbedForm")}}},[e._v(" 确 定 ")])],1)]),a("el-dialog",{attrs:{"append-to-body":!0,visible:e.disposeVisible,title:"提示",width:"50%"},on:{"update:visible":function(t){e.disposeVisible=t}}},[a("div",[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.bedForm,size:"small"}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"请输入测试台名称搜索"},model:{value:e.bedForm.name,callback:function(t){e.$set(e.bedForm,"name",t)},expression:"bedForm.name"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.getAllBed}},[e._v("搜 索")])],1)],1)],1),a("div",{staticClass:"dispose",staticStyle:{display:"flex"}},[a("el-card",{staticClass:"box-card",staticStyle:{width:"45%",height:"300px","overflow-y":"scroll"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("测试台体")]),a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:e.clearUBed}},[e._v(" 清空 ")])],1),e._l(e.alltestbed,(function(t,r){return a("div",{key:r,staticClass:"text item"},[a("el-radio",{attrs:{label:t.id},model:{value:e.updatedId,callback:function(t){e.updatedId=t},expression:"updatedId"}},[e._v(" "+e._s(t.attributes.name)+" ")])],1)}))],2),a("div",{staticStyle:{margin:"0 20px","text-align":"center"}},[a("span",{staticClass:"svg-container",staticStyle:{"line-height":"300px"}},[a("svg-icon",{staticStyle:{width:"3rem",height:"3rem"},attrs:{"icon-class":"relation"}})],1)]),a("el-card",{staticClass:"box-card",staticStyle:{width:"45%",height:"300px","overflow-y":"scroll"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("实验仪器")]),a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:e.handleCheckAllChange}},[e._v(" 全选 ")]),a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:e.clearUpDevice}},[e._v(" 清空 ")])],1),a("el-checkbox-group",{on:{change:e.handleCheckedCitiesChange},model:{value:e.checkdevice,callback:function(t){e.checkdevice=t},expression:"checkdevice"}},e._l(e.allpumpdevice,(function(t,r){return a("el-checkbox",{key:r,staticStyle:{display:"block"},attrs:{label:t.id}},[e._v(" "+e._s(t.attributes.devaddr)+" ")])})),1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.disposeVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.addTestRelation}},[e._v("确 定")])],1)])],1)},n=[],i=(a("4de4"),a("b0c0"),a("7db0"),a("d81d"),a("ac1f"),a("1276"),a("c19f"),a("d3b7"),a("5cc6"),a("9a8c"),a("a975"),a("735e"),a("c1ac"),a("d139"),a("3a7b"),a("d5d6"),a("82f8"),a("e91f"),a("60bd"),a("5f96"),a("3280"),a("3fcc"),a("ca91"),a("25a1"),a("cd26"),a("3c5d"),a("2954"),a("649e"),a("219c"),a("170b"),a("b39a"),a("72f7"),a("3ca3"),a("ddb0"),a("caad"),a("2532"),a("a9e3"),a("5d752")),o=a("926a"),s={components:{Pumpdepartment:i["default"]},data:function(){return{testbedSelection:[],disposeVisible:!1,addbedForm:{name:"",state:"",laboratory:"",factory:"",number:"",imgsrc:"",desc:"",product:"",computername:"",computerkey:"",model:""},addbedFormrule:{name:[{required:!0,message:"请输入测试台名称",trigger:"blur"}],laboratory:[{required:!0,message:"请选择所属实验室",trigger:"change"}],state:[{required:!0,message:"请选择测试台状况",trigger:"change"}],product:[{required:!0,message:"请选择测试台网关",trigger:"change"}]},addbeddialogNew:!1,formInline:{laboratory:"",name:"",state:""},gatewaystatus:!1,bedData:[],devicesData:[],beddialog:!1,multipleSelection:[],testbedname:"",testbedid:"",testbeddevices:[],origindevices:[],pagesize:10,total:0,start:0,devicelist:{departmentid:"",testbedid:""},departmentid:"",devicesstart:0,bedDevicedialog:!1,devicepagesize:10,devicestart:0,devicetotal:0,bedDevicesData:[],multipleTable1:[],testbedlist:[],departmentList:[],departmentlist:[],alltestbed:[],allpumpdevice:[],updatedId:"",checkdevice:[],bedForm:{name:""},productlist:[],actionTypeMap:{add:"新增",update:"更新"},actionType:"",curDeviceId:""}},mounted:function(){this.getDepartmentList(),this.getDevices()},methods:{getDevices:function(){var e=this;this.$axiosWen.get("iotapi/classes/Device",{params:{include:"product",order:"-createdAt",where:{}}}).then((function(t){t&&t.results?e.bedData=t.results.filter((function(e){return"shuwa_iot_hub"==e.product.devType})):e.bedData=[]})).catch((function(e){})),this.$axiosWen.get("iotapi/classes/Product").then((function(t){t&&t.results&&(e.productlist=t.results)}))},getAllBed:function(){var e=this,t=Parse.Object.extend("Testbed"),a=new Parse.Query(t);a.ascending(["-createdAt","name"]),a.limit(1e3),""!=this.bedForm.name&&a.matches("name",this.bedForm.name,"i"),a.find().then((function(t){e.alltestbed=t}),(function(e){Object(o["returnLogin"])(e)}))},getAllPumpDevice:function(){var e=this,t=Parse.Object.extend("PumpDevice"),a=new Parse.Query(t);a.equalTo("basedata.type","PUMP_DTU"),a.ascending("createdAt"),a.limit(1e3),a.find().then((function(t){e.allpumpdevice=t}),(function(e){Object(o["returnLogin"])(e)}))},handleCheckedCitiesChange:function(e){},clearUBed:function(){this.updatedId=""},handleCheckAllChange:function(e){var t=this;this.allpumpdevice.map((function(e){t.checkdevice.push(e.id)}))},testBedAdd:function(){this.actionType="add",this.addbedForm={},this.addbeddialogNew=!0},diologOpen:function(){var e=this;setTimeout((function(){e.$refs["addbedFormRef"].resetFields()}),100)},clearUpDevice:function(){this.checkdevice=[]},addTestRelation:function(){var e=this,t=Parse.Object.extend("Testbed"),a=new t,r=Parse.Object.extend("PumpDevice"),n=new r;if(""!=this.updatedId){a.id=this.updatedId;var i=a.relation("devices");this.checkdevice.map((function(e){n.set("objectId",e),i.add(n)})),a.save().then((function(t){t&&(e.$message.success("设备关联成功"),e.disposeVisible=!1,e.checkdevice=[],e.updatedId="",e.getBedtable(e.departmentid))}),(function(e){Object(o["returnLogin"])(e)}))}},getDepartmentList:function(){var e=this,t=Parse.Object.extend("PumpDepartment"),a=new Parse.Query(t);a.equalTo("org_type","实验室"),a.find().then((function(t){e.departmentList=t}),(function(e){Object(o["returnLogin"])(e)}))},Determine:function(e){var t=this;this.$refs[e].validate((function(a){if(!a)return t.$message.error("有必填项未填写"),!1;if(""!=t.addbedForm.imgsrc){var r=Parse.Object.extend("Testbed"),n=new r,i=Parse.Object.extend("PumpDepartment"),s=new i;s.id=t.addbedForm.laboratory,n.set("department",s),n.set("status","init"),n.set("name",t.addbedForm.name),n.set("model",t.addbedForm.model),n.set("number",t.addbedForm.number),n.set("factory",t.addbedForm.factory),n.set("state",t.addbedForm.state),n.set("imgsrc",t.addbedForm.imgsrc),n.set("deviceaddr",t.addbedForm.product),n.save().then((function(a){a&&(t.$message.success("测试台体新增成功"),t.$refs[e].resetFields(),t.addbeddialogNew=!1,t.getBedtable(t.departmentid))}),(function(e){Object(o["returnLogin"])(e)}))}else t.$message.error("请上传测试台信息")}))},showUpdateDeviceForm:function(e){this.actionType="update";var t=this.bedData[e],a=t["basedata"];a||(a={}),t["objectId"]?this.curDeviceId=t["objectId"]:this.curDeviceId="",this.addbedForm={name:a.name,state:a.state,laboratory:a.laboratory,factory:a.factory,number:a.number,imgsrc:a.imgsrc,desc:a.desc,computername:a.computername,computerkey:a.computerkey,model:a.model},this.addbedForm.product=t.product.objectId,this.addbeddialogNew=!0},doUpdateDevice:function(){var e=this;this.curDeviceId?this.$refs["addbedFormRef"].validate((function(t){if(!t)return e.$message.error("有必填项未填写"),!1;""!=e.addbedForm.imgsrc?e.$axiosWen.put("classes/Device/"+e.curDeviceId,{basedata:e.addbedForm}).then((function(t){e.addbeddialogNew=!1,e.$message({type:"success",message:"更新成功!"}),e.getDevices()})).catch((function(e){})):e.$message.error("请上传测试台信息")})):this.$message.error("curDeviceId null")},upload:function(e){if(e){var t=e.target.files[0],a=t.name,r=e.target.files[0].type,n=(t.type.split("/")[0],"image/jpeg"===r||"image/JPEG"===r||"image/png"===r||"image/PNG"===r||"image/bpm"===r||"image/BPM"===r);if(!n)return this.$message({message:"只能上传图片文件",type:"error"}),!1;var i=new FileReader;i.readAsDataURL(t);var o=this;i.onloadend=function(){var e=i.result,t=o.dataURItoBlob(e);o.uploadFile(t,a)}}},dataURItoBlob:function(e){for(var t=atob(e.split(",")[1]),a=e.split(",")[0].split(":")[1].split(";")[0],r=new ArrayBuffer(t.length),n=new Uint8Array(r),i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return new Blob([r],{type:a})},uploadFile:function(e,t){var a=this,r=new FormData;r.append("file",e,t),r.append("output","json"),r.append("path",this.$Cookies.get("appids")),r.append("scene",this.$Cookies.get("appids")),r.append("auth_token",this.$Cookies.get("access_token_pump"));this.$http.post(this.$Cookies.get("fileserver"),r).then((function(e){e&&(a.addbedForm.imgsrc=e.body.url)})).catch((function(e){a.$message.error(e)}))},getPumpNode:function(e){this.departmentid=e.objectId,this.getBedtable(this.departmentid)},devicesDetail:function(e){var t=e["devaddr"];this.$router.push({path:"/devicemanage/evidence_devices",query:{devaddr:t}})},disposeTestbed:function(){this.disposeVisible=!0},handleEdit:function(e){var t=this;this.testbedid=e,this.disposeVisible=!0;var a=Parse.Object.extend("Testbed"),r=new Parse.Query(a),n=Parse.Object.extend("PumpDevice"),i=new Parse.Query(n);this.updatedId=e,r.get(e).then((function(e){var a=e.relation("devices"),r=a.query();i.equalTo("basedata.type","PUMP_DTU"),i.ascending("createdAt"),t.devicesData=i,r.find().then((function(e){e.map((function(e){t.checkdevice.push(e.id)}))}))}))},selectCompany:function(e){var t=this;this.devicelist.testbedid="";var a=Parse.Object.extend("PumpDepartment"),r=new Parse.Query(a);r.equalTo("ParentId",e),r.find().then((function(e){t.testbedlist=e}))},deviceSelect:function(e){this.multipleTable1=e},handleDeviceSizeChange:function(e){this.devicepagesize=e,""!=this.testbedid?this.handleEdit(this.testbedid):this.addTest()},handleDeviceCurrentChange:function(e){this.devicestart=(e-1)*this.devicepagesize,""!=this.testbedid?this.handleEdit(this.testbedid):this.addTest()},handleDelete:function(e){var t=this;this.$confirm("此操作将永久删除当前测试台体, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var a=Parse.Object.extend("Testbed"),r=new Parse.Query(a);r.get(e).then((function(e){e.destroy().then((function(e){t.$message({type:"success",message:"删除成功!"}),t.getBedtable(t.departmentid)}))}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},getBedtable:function(e){var t=this,a=Parse.Object.extend("Testbed"),r=new Parse.Query(a);r.limit(this.pagesize),r.skip(this.start),r.ascending(["-createdAt","name"]),e&&r.equalTo("department",e),""!=this.formInline.state&&r.equalTo("state",this.formInline.state),""!=this.formInline.name&&r.equalTo("name",this.formInline.name),this.formInline.laboratory&&r.equalTo("department",this.formInline.laboratory),r.count().then((function(e){t.total=e,r.find().then((function(e){t.bedData=e}))}))},addTest:function(){var e=this;this.testbedid="",this.beddialog=!0;var t=Parse.Object.extend("PumpDevice"),a=new Parse.Query(t);a.equalTo("basedat.type","PUMP_DTU"),a.skip(this.devicestart),a.limit(this.devicepagesize),a.count().then((function(t){e.devicetotal=t,a.find().then((function(t){e.devicesData=t}),(function(e){}))}));var r=Parse.Object.extend("PumpDepartment"),n=new Parse.Query(r);n.equalTo("org_type","泵单位"),n.find().then((function(t){e.departmentlist=t}))},handleSelectionBed:function(e){this.testbedSelection=e},deleteTestBed:function(){var e=this,t=[];0!=this.testbedSelection.length?this.$confirm("此操作将永久删除选中检测台体, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.testbedSelection.map((function(a){t.push(new Promise((function(e,t){var r=Parse.Object.extend("Testbed"),n=new r;return n.id=a.id,n.destroy().then((function(t){e(t)}),(function(e){t(e.message)}))}))),Promise.all(t).then((function(t){e.$message({message:"删除成功",type:"success"}),t.length==e.testbedSelection.length&&e.getBedtable(e.departmentid)})).catch((function(t){e.$message({message:t,type:"error"})}))}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})})):this.$message.warning("请勾选要删除的检测台体")},handleSelectionChange:function(e){var t=this;this.multipleSelection=[],e.map((function(e){t.multipleSelection.push(e.id)}))},addtestbed:function(e){var t=this;if(""==e){var a=Parse.Object.extend("Testbed"),r=new a;r.set("name",this.testbedname),r.set("status","init");var n=r.relation("devices"),i=Parse.Object.extend("PumpDevice"),o=new i,s=Parse.Object.extend("PumpDepartment"),l=new s;l.id=this.devicelist.testbedid,r.set("department",l),this.multipleSelection.map((function(e){o.set("objectId",e),n.add(o)})),r.save().then((function(e){t.$message({message:"添加成功",type:"success"}),t.beddialog=!1,t.getBedtable(t.departmentid),t.testbedname=""}))}else{a=Parse.Object.extend("Testbed"),r=new Parse.Query(a);r.get(e).then((function(e){e.set("name",t.testbedname);var a=e.relation("devices"),n=Parse.Object.extend("PumpDevice"),i=new n,o=Parse.Object.extend("PumpDepartment"),s=new o;s.id=t.devicelist.testbedid,r.set("department",s),t.multipleSelection.map((function(e){t.testbeddevices.includes(e)||(i.set("objectId",e),a.add(i)),t.testbeddevices.map((function(e){t.multipleSelection.includes(e)||(i.set("objectId",e),a.remove(i))}))})),e.save().then((function(e){t.$message({message:"修改成功",type:"success"}),t.beddialog=!1,t.getBedtable(t.departmentid)}))}))}},handleSizeChange:function(e){this.pagesize=e,this.getBedtable(this.departmentid)},handleCurrentChange:function(e){this.start=Number(e-1)*Number(this.pagesize),this.getBedtable(this.departmentid)}}},l=s,c=(a("f03f"),a("da40"),a("2877")),d=Object(c["a"])(l,r,n,!1,null,"3db22ea4",null);t["default"]=d.exports},"9aa0":function(e,t,a){},"9d89":function(e,t,a){},a57f:function(e,t,a){"use strict";a("8c3f")},a759:function(e,t,a){"use strict";a("6739")},a939:function(e,t,a){"use strict";a("6200")},b244:function(e,t,a){"use strict";a("23e2")},b3e2:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"index"},[e._v(e._s(e.pageTitle))])},n=[],i={name:"Index",components:{},data:function(){return{pageTitle:"index"}},computed:{},mounted:function(){},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){},methods:{}},o=i,s=(a("0076"),a("2877")),l=Object(s["a"])(o,r,n,!1,null,"7b74c44e",null);t["default"]=l.exports},b91d:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"reportmodule"},[a("div",{staticClass:"add"},[a("el-button",{attrs:{type:"primary"},on:{click:e.addmodule}},[e._v("新 增")])],1),a("div",{staticClass:"reportlist"},[a("el-table",{staticStyle:{width:"100%","text-align":"center"},attrs:{data:e.tableData,stripe:""}},[a("el-table-column",{attrs:{label:"ID",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.objectId))])]}}])}),a("el-table-column",{attrs:{label:"产品名称",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.data.sample))])]}}])}),a("el-table-column",{attrs:{label:"检验类别",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.data.category))])]}}])}),a("el-table-column",{attrs:{label:"检验标准",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.data.inspection_standard))])]}}])}),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.row.objectId)}}},[e._v(" 详 情 ")]),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.editorDetail(t.row.objectId)}}},[e._v(" 编 辑 ")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.row.objectId)}}},[e._v(" 删 除 ")])]}}])})],1),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"page-sizes":[5,10,20],"page-size":e.length,total:e.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),a("el-dialog",{staticStyle:{"box-sizing":"border-box",padding:"20px"},attrs:{"append-to-body":!0,visible:e.dialogTableVisible,title:"模板详情",width:"50%"},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[a("el-table",{staticStyle:{width:"100%","text-align":"center"},attrs:{data:e.gridData,border:""}},[a("el-table-column",{attrs:{label:"id",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{size:"medium"}},[e._v(e._s(t.row.id))])]}}])}),a("el-table-column",{attrs:{label:"检验项目",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.inspecting))]}}])}),a("el-table-column",{attrs:{property:"title",label:"保证值",align:"center"}}),a("el-table-column",{attrs:{property:"value",label:"测试值",align:"center"}}),a("el-table-column",{attrs:{property:"",label:"评定",align:"center"}})],1)],1)],1)},n=[],i=(a("a9e3"),a("0a78")),o=a("973c"),s={data:function(){return{tableData:[],total:0,start:0,length:10,dialogTableVisible:!1,gridData:[]}},mounted:function(){this.reportList()},methods:{addmodule:function(){this.$router.push({path:"/reportmodule/module"})},handleEdit:function(e){var t=this;this.dialogTableVisible=!0,Object(o["getReportdetail"])(e).then((function(e){t.gridData=e.data.inspecting})).catch((function(e){}))},handleDelete:function(e){var t=this;this.$confirm("此操作将永久删除此检验标准, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var a=Parse.Object.extend("Datas"),r=new Parse.Query(a);r.get(e).then((function(e){e.destroy().then((function(e){t.$message({type:"success",message:"删除成功!"}),t.reportList()}),(function(e){}))}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},reportList:function(){var e=this;Object(o["getReport"])(this.start,this.length).then((function(t){e.tableData=t.data,e.total=t.data.length}))},handleSizeChange:function(e){this.pagesize=e,this.reportList(this.start,this.pagesize)},handleCurrentChange:function(e){this.start=Number(e-1)*Number(this.pagesize),this.reportList(this.start,this.pagesize)},editorDetail:function(e){this.$router.push({path:"/reportmodule/module",query:{id:e}}),Object(i["setToken"])("reportId",e,"sessionStorage")}}},l=s,c=(a("4fe6"),a("28c0"),a("2877")),d=Object(c["a"])(l,r,n,!1,null,"51c9e336",null);t["default"]=d.exports},bbd4:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"login-container"},[a("div",{staticClass:"loginbanner"},[a("el-form",{ref:"ruleForm2",staticClass:"login-form",attrs:{model:e.ruleForm2,rules:e.rules2,"status-icon":"","label-width":"100px"}},[a("div",{staticClass:"logo"},[a("img",{staticStyle:{width:"80px",height:"80px"},attrs:{src:e.logosrc,alt:"logo"}}),a("p",[e._v(e._s(e.title))])]),a("el-form-item",{staticStyle:{"border-radius":"0"},attrs:{prop:"phone"}},[a("span",{staticClass:"svg-container"},[a("el-select",{staticStyle:{border:"0"},attrs:{placeholder:"请选择手机区域"},model:{value:e.ruleForm2.value,callback:function(t){e.$set(e.ruleForm2,"value",t)},expression:"ruleForm2.value"}},e._l(e.ruleForm2.diqu,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-input",{ref:"phonerole",staticStyle:{width:"250px"},attrs:{maxlength:11,name:"phone",type:"text","auto-complete":"on",placeholder:"请输入手机号"},model:{value:e.ruleForm2.phone,callback:function(t){e.$set(e.ruleForm2,"phone",t)},expression:"ruleForm2.phone"}})],1),a("div",{staticClass:"yzm",staticStyle:{height:"50px","margin-bottom":"20px","margin-left":"20px"}},[a("span",{staticClass:"svg-container",staticStyle:{float:"left",width:"25%"}},[a("el-input",{staticStyle:{width:"100%",border:"1px solid #cccccc","border-right":"0px","border-radius":"0"},attrs:{type:"text",disabled:""},model:{value:e.phonesms,callback:function(t){e.phonesms=t},expression:"phonesms"}})],1),a("el-input",{staticClass:"yzm",staticStyle:{float:"left",width:"50%",border:"1px solid #cccccc","border-radius":"0"},attrs:{type:"text",placeholder:"请输入验证码"},model:{value:e.code,callback:function(t){e.code=e._n(t)},expression:"code"}}),a("el-button",{staticStyle:{float:"right",width:"25%",height:"47px",padding:"12px 15px 12px 15px","border-radius":"0"},attrs:{disabled:e.sendMsgDisabled,type:"primary"},on:{click:e.send}},[e.sendMsgDisabled?a("span",[e._v(e._s(e.time+"秒后获取"))]):e._e(),e.sendMsgDisabled?e._e():a("span",[e._v("发送验证码")])])],1),a("el-form-item",{staticStyle:{"margin-top":"50px"}},[a("el-button",{staticStyle:{width:"100%","letter-spacing":"10px"},attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm2")}}},[e._v(" 确 定 ")])],1),a("div",{staticClass:"hasuser"},[a("span",{staticStyle:{"font-size":"14px",color:"#409eff",cursor:"pointer"},on:{click:e.login}},[e._v(" 账号密码登陆 ")]),a("span",{staticStyle:{float:"right","font-size":"14px",color:"#777777",cursor:"pointer"},on:{click:e.skip}},[e._v(" 进入 ")])])],1)],1)])},n=[],i=(a("d81d"),a("d3b7"),a("25f0"),a("8665")),o=a("be65"),s=a.n(o),l=a("f43e").Base64,c={data:function(){var e=this,t=function(e,t,a){""===t?a(new Error("请输入密码")):(/^\w{6,10}$/.test(t)||a(new Error("密码格式不正确")),a())},a=function(t,a,r){""===a?r(new Error("请再次输入密码")):a!==e.ruleForm2.password?r(new Error("两次输入密码不一致!")):r()};return{phonesms:"手机验证码",time:60,sendMsgDisabled:!1,code:"",actions:"",routes:[],logosrc:"",title:"",ruleForm2:{account:"",phone:"",username:"",password:"",email:"",checkPass:"",diqu:[],value:"+86/中国",time:0},origin:["+86/中国","+886/中国台湾","+852/中国香港","+91/India","+244/Angola","+54/Argentina","+1/American Samoa","+880/Bangladesh","+56/Chile","+855/Cambodia","+20/Egypt","+33/France","+49/Germany","+62/Indonesia","+353/Ireland","+972/Israel","+39/Italy","+81/Japan","+60/Malaysia","+63/Philippines","+92/Pakistan","+82/South Korea","+46/Sweden","+65/Singapore","+27/South Africa","+66/Thailand","+971/United Arab Emirates","+44/United Kingdom","+1/United States","+84/Vietnam","+967/Yemen","+260/Zambia"],rules2:{account:[{required:!0,message:"请输入账号",trigger:"blur"},{min:1,max:10,message:"长度在 1到 10 个字符",trigger:"blur"}],phone:[{required:!0,message:"请输入手机号",trigger:"blur"},{validator:function(e,t,a){var r=/^1[34578]\d{9}$/;r.test(t)?a():a(new Error("手机号码格式不正确！"))},trigger:"blur"}],password:[{validator:t,trigger:"blur",required:!0}],checkPass:[{validator:a,trigger:"blur",required:!0}],username:[{required:!0,message:"请输入姓名",trigger:"blur"},{min:2,max:5,message:"姓名格式不正确",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:["blur","change"]}]},phonetoken:""}},mounted:function(){var e=this,t=/^1[34578]\d{9}$/;this.$route.query.phone&&t.test(l.decode(this.$route.query.phone))&&(this.ruleForm2.phone=l.decode(this.$route.query.phone),this.$refs["phonerole"].$refs.input.disabled=!0),this.ruleForm2.diqu=[],this.actions=this.$route.query.action,this.origin.map((function(t){e.ruleForm2.diqu.push({label:t,value:t.toString()})})),this.title=sessionStorage.getItem("product_title"),this.logosrc=sessionStorage.getItem("imgsrc"),this.phonetoken=s.a.get("sessionToken")},methods:{showPwd:function(){"password"===this.pwdType?this.pwdType="":this.pwdType="password"},login:function(){this.$router.push({path:"/login"})},submitForm:function(e){var t=/^1[34578]\d{9}$/,a=this;a.$refs[e].validate((function(e){if(!e||!t.test(a.ruleForm2.phone))return a.$message({message:"信息错误",type:"error"}),!1;Object(i["Verify"])(a.actions,a.ruleForm2.phone,a.code).then((function(e){})).catch((function(e){a.$message(e)}))}))},send:function(){var e=this,t=/^1[34578]\d{9}$/,a=this;if(t.test(a.ruleForm2.phone)){a.sendMsgDisabled=!0,Object(i["Phonelogin"])(a.ruleForm2.phone,encodeURIComponent(a.ruleForm2.value)).then((function(t){e.$message({message:"发送成功",type:"success"}),e.time=t.expire})).catch((function(t){e.$message(t)}));var r=window.setInterval((function(){a.time--<=0&&(a.time=60*this.time,a.sendMsgDisabled=!1,window.clearInterval(r))}),1e3)}else this.$message({message:"请输入正确的手机号",type:"warning"})}}},d=c,u=(a("4b21"),a("a759"),a("2843"),a("2877")),m=Object(u["a"])(d,r,n,!1,null,"0285f121",null);t["default"]=m.exports},c2a7:function(e,t,a){"use strict";a("52b3")},c69d:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"CompanyAuthentication"},[a("h3",[e._v("企业资质审核")]),a("div",{staticClass:"CompanyAuthentication_top"},[a("div",{staticClass:"pump_table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,"cell-style":e.rowClass,"header-cell-style":e.headClass,border:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),a("el-table-column",{attrs:{label:"企业名称",prop:"data.CompanyAuthentication.abbrname"}}),a("el-table-column",{attrs:{label:"统一社会信用代码",prop:"data.CompanyAuthentication.creditcode"}}),a("el-table-column",{attrs:{label:"法定代表人姓名",width:"150",prop:"data.CompanyAuthentication.businessname"}}),a("el-table-column",{attrs:{label:"法定代表人身份证号码",prop:"data.CompanyAuthentication.identity"}}),a("el-table-column",{attrs:{label:"注册地址",prop:"data.CompanyAuthentication.addr"}}),a("el-table-column",{attrs:{label:"申请时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.$utc2beijing(t.row.createdAt)))])]}}])}),a("el-table-column",{attrs:{prop:"data.Laboratory.laboratoryInfo.name",label:"实验室名称"}}),a("el-table-column",{attrs:{label:"审核日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.data.auditDate))])]}}])}),a("el-table-column",{attrs:{label:"审核状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.data.verifyStatus?a("el-tag",{attrs:{type:"info"}},[e._v(" 待审核 ")]):1==t.row.data.verifyStatus?a("el-tag",{attrs:{type:"success"}},[e._v(" 审核通过 ")]):2==t.row.data.verifyStatus?a("el-tag",{attrs:{type:"danger"}},[e._v(" 审核未通过 ")]):e._e()]}}])}),a("el-table-column",{attrs:{label:"审核意见",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.data.suggestion))])]}}])}),a("el-table-column",{attrs:{width:"150",label:"审核管理"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return e.lookUp(t.row)}}},[e._v(" 查看 ")]),a("el-button",{attrs:{type:"success",size:"small"},on:{click:function(a){return e.examine(t.row)}}},[e._v(" 审核 ")])]}}])})],1)],1),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"page-sizes":[10,200,30,50],"page-size":e.pagesize,total:e.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)]),a("el-dialog",{attrs:{"append-to-body":!0,visible:e.dialogVisible,title:"认证审核",width:"40%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",[a("el-form",{ref:"verifyFormRef",attrs:{model:e.verifyForm,rules:e.verifyFormRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"审核状态",prop:"status"}},[a("el-radio-group",{model:{value:e.verifyForm.status,callback:function(t){e.$set(e.verifyForm,"status",t)},expression:"verifyForm.status"}},[a("el-radio",{attrs:{label:0}},[e._v("待审核")]),a("el-radio",{attrs:{label:2}},[e._v("审核未通过")]),a("el-radio",{attrs:{label:1}},[e._v("审核通过")])],1)],1),a("el-form-item",{attrs:{label:"审核意见",prop:"suggestion"}},[a("el-input",{attrs:{rows:4,type:"textarea"},model:{value:e.verifyForm.suggestion,callback:function(t){e.$set(e.verifyForm,"suggestion",t)},expression:"verifyForm.suggestion"}})],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("verifyFormRef")}}},[e._v(" 提 交 ")])],1)]),e.dialogFormVisible?a("el-dialog",{attrs:{"append-to-body":!0,visible:e.dialogFormVisible,title:"企业资质审核",width:"80%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"认证信息",name:"first"}},[a("el-form",{attrs:{"label-width":"160px",size:"mini"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"企业名称"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.CompanyAuthentication.abbrname)}})],1),a("el-form-item",{attrs:{label:"企业简称"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.CompanyAuthentication.businessname)}})],1),a("el-form-item",{attrs:{label:"法人代表名称"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.CompanyAuthentication.corporname)}})],1),a("el-form-item",{attrs:{label:"法人代表身份证"}},[a("img",{staticClass:"avatar",attrs:{src:e.fileDomain+e.currentRow.data.CompanyAuthentication.contraryimageUrl}})]),a("el-form-item",{attrs:{label:"注册地址"}},[a("el-cascader",{staticStyle:{width:"200px"},attrs:{options:e.regionData},model:{value:e.currentRow.data.CompanyAuthentication.addr,callback:function(t){e.$set(e.currentRow.data.CompanyAuthentication,"addr",t)},expression:"currentRow.data.CompanyAuthentication.addr"}})],1),a("el-form-item",{attrs:{label:"营业年限"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.CompanyAuthentication.businessduration+"年")}})],1),a("el-form-item",{attrs:{label:"注册资金"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.CompanyAuthentication.registeredcapital)}})],1),a("el-form-item",{attrs:{label:"企业描述"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.CompanyAuthentication.businessdesc)}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"企业英文名称"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.CompanyAuthentication.englishname)}})],1),a("el-form-item",{attrs:{label:"统一社会信用代码"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.CompanyAuthentication.creditcode)}})],1),a("el-form-item",{attrs:{label:"法人代表身份证号"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.CompanyAuthentication.identity)}})],1),a("el-form-item",{attrs:{label:"企业营业执照"}},[a("img",{staticClass:"avatar",attrs:{src:e.fileDomain+e.currentRow.data.CompanyAuthentication.businesslicense}})]),a("el-form-item",{attrs:{label:"街道地址"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.CompanyAuthentication.roadress)}})],1),a("el-form-item",{attrs:{label:"企业规模"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.CompanyAuthentication.region)}})],1),a("el-form-item",{attrs:{label:"经营范围"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.CompanyAuthentication.businessscope)}})],1)],1)],1)],1)],1),a("el-tab-pane",{attrs:{label:"实验室信息",name:"third"}},[a("el-form",{attrs:{"label-width":"120px",size:"mini"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"实验室名称"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.Laboratory.laboratoryInfo.name)}})],1),a("el-form-item",{attrs:{label:"实验室级别"}},[a("el-select",{staticStyle:{width:"100px"},attrs:{disabled:""},model:{value:e.currentRow.data.Laboratory.laboratoryInfo.level,callback:function(t){e.$set(e.currentRow.data.Laboratory.laboratoryInfo,"level",t)},expression:"currentRow.data.Laboratory.laboratoryInfo.level"}},[a("el-option",{attrs:{label:"国家级",value:"1"}}),a("el-option",{attrs:{label:"省级",value:"2"}}),a("el-option",{attrs:{label:"地市级",value:"3"}}),a("el-option",{attrs:{label:"县(区)级",value:"4"}}),a("el-option",{attrs:{label:"其他",value:"5"}})],1)],1),a("el-form-item",{attrs:{label:"实验室地址"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.Laboratory.laboratoryInfo.addr)}})],1),a("el-form-item",{attrs:{label:"建设起止日期"}},[e._v(" "+e._s(e.$timestampToTime(e.currentRow.data.Laboratory.laboratoryInfo.buildstarttime).substring(0,11))+" ")]),a("el-form-item",{attrs:{label:"实验室负责人"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.Laboratory.laboratoryInfo.leadingname)}})],1),a("el-form-item",{attrs:{label:"实验室联系人"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.Laboratory.laboratoryInfo.linkname)}})],1),a("el-form-item",{attrs:{label:"实验室照片"}},[a("img",{staticClass:"avatar",attrs:{src:e.fileDomain+e.currentRow.data.Laboratory.laboratoryInfo.imgsrc}})]),a("el-form-item",{attrs:{label:"主管单位"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.Laboratory.laboratoryInfo.unit)}})],1),a("el-form-item",{attrs:{label:"实验室类别"}},[a("el-select",{staticStyle:{width:"100px"},attrs:{disabled:"",placeholder:"请选择实验室类别"},model:{value:e.currentRow.data.Laboratory.laboratoryInfo.category,callback:function(t){e.$set(e.currentRow.data.Laboratory.laboratoryInfo,"category",t)},expression:"currentRow.data.Laboratory.laboratoryInfo.category"}},[a("el-option",{attrs:{label:"主实验室",value:"1"}}),a("el-option",{attrs:{label:"辅助实验室",value:"2"}}),a("el-option",{attrs:{label:"其他",value:"3"}})],1)],1),a("el-form-item",{attrs:{label:"实验室面积"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.Laboratory.laboratoryInfo.area+"平方")}})],1),a("el-form-item",{attrs:{label:"最新投运时间"}},[e._v(" "+e._s(e.$timestampToTime(e.currentRow.data.Laboratory.laboratoryInfo.operationtime).substring(0,11))+" ")]),a("el-form-item",{attrs:{label:"负责人电话"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.Laboratory.laboratoryInfo.leadingphone)}})],1),a("el-form-item",{attrs:{label:"联系人电话"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.Laboratory.laboratoryInfo.linkphone)}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"实验室认证类型"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.Laboratory.laboratoryInfo.region)}})],1),a("el-form-item",{attrs:{label:"发证机关"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.Laboratory.laboratoryInfo.licencsIssuing)}})],1),a("el-form-item",{attrs:{label:"初次认可"}},[e._v(" "+e._s(e.$timestampToTime(e.currentRow.data.Laboratory.laboratoryInfo.initialRecognition).substring(0,11))+" ")]),a("el-form-item",{attrs:{label:"资质内容"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.Laboratory.laboratoryInfo.desc)}})],1),a("el-form-item",{attrs:{label:"证书编号"}},[a("el-input",{domProps:{textContent:e._s(e.currentRow.data.Laboratory.laboratoryInfo.credentialsname)}})],1),a("el-form-item",{attrs:{label:"签发日期"}},[e._v(" "+e._s(e.$timestampToTime(e.currentRow.data.Laboratory.laboratoryInfo.dateOfIssue).substring(0,11))+" ")]),a("el-form-item",{attrs:{label:"有效期至"}},[e._v(" "+e._s(e.$timestampToTime(e.currentRow.data.Laboratory.laboratoryInfo.termOfValidity).substring(0,11))+" ")]),a("el-form-item",{attrs:{label:"更新时间"}},[e._v(" "+e._s(e.$timestampToTime(e.currentRow.data.Laboratory.laboratoryInfo.updatedDate).substring(0,11))+" ")]),a("el-form-item",{attrs:{label:"证书电子文件"}},[a("img",{staticClass:"avatar",attrs:{src:e.fileDomain+e.currentRow.data.Laboratory.laboratoryInfo.imgsrc1}})])],1)],1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogFormVisible=!1}}},[e._v(" 确 定 ")])],1)],1):e._e()],1)},n=[],i=(a("b0c0"),a("a15b"),a("23a5")),o=(a("926a"),{name:"",data:function(){return{dialogVisible:!1,formInline:{user:"",region:"all"},tableData:[],start:0,pagesize:10,total:0,authenticationid:"",verifyForm:{status:1,suggestion:""},verifyFormRules:{status:[{required:!0,message:"请选择审核状态",trigger:"change"}],suggestion:[{required:!0,message:"请填写认证审核意见",trigger:"blur"}]},dialogFormVisible:!1,form1:{name:"",region:"",desc:"",identity:"",frontimageUrl:"",contraryimageUrl:"",businesslicense:"",businessname:"",abbrname:"",corporname:"",englishname:"",creditcode:"",addr:[],roadress:"",businessduration:"",businessdesc:"",businessscope:"",registeredcapital:""},regionData:i["regionData"],verifyForm1:{cnasname:"",dateOfIssue:"",updatedDate:"",initialRecognition:"",termOfValidity:"",licencsIssuing:"",cnasimgsrc:"",cnasdesc:""},verifyForm2:{cmaname:"",cmadateOfIssue:"",cmalicencsIssuing:"",cmatermOfValidity:"",cmaimgsrc:"",cmadesc:""},previewother:{otherform:[]},currentRow:{data:{}},activeName:"first"}},computed:{fileDomain:function(){return this.$getUrlPrefix(this.$Cookies.get("fileserver"))}},mounted:function(){this.getEmpower()},methods:{headClass:function(){return"text-align:center"},rowClass:function(){return"text-align:center"},getAddr:function(e){e.length;for(var t="",a=0;a<e.length;a++)t+=i["CodeToText"][e[a]]+"/";return t},Others:function(e){for(var t=[],a=0;a<e.length;a++)t.push(e[a].name);return t.join(",")},getEmpower:function(){var e=this,t=this.$loading({background:"rgba(0, 0, 0, 0.5)"});this.$axiosWen.get("iotapi/classes/Dict",{params:{where:{type:"CompanyAuthentication"},order:"-updatedAt"}}).then((function(a){t.close(),a&&a.results?e.tableData=a.results:e.tableData=[]})).catch((function(a){e.tableData=[],t.close()}))},lookUp:function(e){this.dialogFormVisible=!0,this.currentRow=e,this.currentRow.data=e.data},examine:function(e){this.currentRow=e,this.dialogVisible=!0},handleSizeChange:function(e){},handleCurrentChange:function(e){},submitForm:function(e){var t=this;this.$refs[e].validate((function(a){if(!a)return!1;var r=(new Date).getTime();t.currentRow.data.verifyStatus=t.verifyForm.status,t.currentRow.data.suggestion=t.verifyForm.suggestion,t.currentRow.data.auditDate=r,t.$axiosWen.put("classes/Dict/"+t.currentRow.objectId,{data:t.currentRow.data}).then((function(a){a&&(t.$message({type:"success",message:"审核成功"}),t.$refs[e].resetFields(),t.dialogVisible=!1,t.getEmpower())})).catch((function(e){t.$message({message:"审核失败"})}))}))}}}),s=o,l=(a("4d4c8"),a("b244"),a("2877")),c=Object(l["a"])(s,r,n,!1,null,"421d9e51",null);t["default"]=c.exports},c825:function(e,t,a){"use strict";a("d713")},cc5a:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"license"},[a("div",{staticClass:"licenseleft"},[a("el-row",[a("el-col",{attrs:{span:12}},[0==e.isend?a("img",{attrs:{src:e.originimgsrc,alt:"",srcset:""}}):e._e(),1==e.isend?a("img",{attrs:{src:e.originimgsrc,alt:"",srcset:""}}):e._e()]),a("el-col",{attrs:{span:12}},[0==e.isend?a("div",{staticClass:"originupdate"},[a("p",[e._v("部署配置")]),a("span",[e._v("请完成配置后进行部署")])]):e._e()])],1),a("el-row",{staticStyle:{"margin-top":"50px"}},[a("el-col",{staticClass:"originupdate",attrs:{span:12}},[a("p",[e._v("当前时间:")]),a("span",[e._v(e._s(e.updatetime))])]),a("el-col",{staticClass:"originupdate",attrs:{span:12}},[a("p",[e._v("服务器状态")]),0==e.isarrange?a("span",[e._v("未部署")]):a("span",[e._v("部署完成")])])],1)],1),a("div",{staticClass:"licenseright"},[a("div",{staticClass:"righttop"},[a("p",{staticStyle:{"font-size":"20px"}},[e._v("部署进度")]),a("el-steps",{attrs:{active:e.active,"finish-status":"success"}},[a("el-step",{attrs:{title:"基础服务部署"}}),a("el-step",{attrs:{title:"数据库部署"}}),a("el-step",{attrs:{title:"完成"}})],1)],1),a("div",{staticClass:"rightcenter"},[a("p",{staticStyle:{"font-size":"20px",color:"#67c23a"}},[e._v("机器信息")]),a("el-form",{ref:"form",attrs:{model:e.configdata,"label-width":"140px"}},[a("el-form-item",{attrs:{label:"用户名:"}},[a("span",[e._v(e._s(e.configdata.hostName))])]),a("el-form-item",{attrs:{label:"计算机信息:"}},[a("span",[e._v(e._s(e.configdata.computerConfig))])]),a("el-form-item",{attrs:{label:"IP地址(公):"}},[a("span",[e._v(e._s(e.configdata.wlanIp))])]),a("el-form-item",{attrs:{label:"IP地址(私):"}},[a("span",[e._v(e._s(e.configdata.natIP))])]),a("el-form-item",{attrs:{label:"授权状态:"}},[a("span",[e._v(e._s(e.configdata.computerAuth))])]),a("el-form-item",{attrs:{label:"服务器连接状态:"}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.value2,callback:function(t){e.value2=t},expression:"value2"}})],1),a("el-form-item",{attrs:{label:"数据库是否部署:"}},[1==e.configdata.dbInstalled?a("span",[e._v("是")]):a("span",[e._v("否")])]),a("el-form-item",{attrs:{label:"机器码:"}},[a("span",[e._v(e._s(e.configdata.computerKey))])]),a("el-form-item",{attrs:{label:"数据中心地址:"}},[a("el-input",{attrs:{placeholder:"请输入数据中心地址"},model:{value:e.configdata.infomation,callback:function(t){e.$set(e.configdata,"infomation",t)},expression:"configdata.infomation"}})],1),a("el-form-item",{attrs:{label:"授权码:"}},[a("el-input",{attrs:{placeholder:"请输入授权码"},model:{value:e.configdata.authorizenumber,callback:function(t){e.$set(e.configdata,"authorizenumber",t)},expression:"configdata.authorizenumber"}})],1),a("el-form-item",{attrs:{label:"服务版本:"}},[a("el-select",{attrs:{placeholder:"请输入服务版本"},model:{value:e.configdata.standard,callback:function(t){e.$set(e.configdata,"standard",t)},expression:"configdata.standard"}},[a("el-option",{attrs:{label:"标准版",value:"standard"}}),a("el-option",{attrs:{label:"企业版",value:"enterprise"}}),a("el-option",{attrs:{label:"旗舰版",value:"ultimate"}})],1)],1),a("el-form-item",[e.dbinstall?a("el-button",{staticStyle:{"margin-right":"100px"},attrs:{type:"success"},on:{click:e.uploadHub}},[e._v(" 部 署 ")]):a("el-button",{staticStyle:{"margin-right":"100px"},attrs:{type:"success"},on:{click:e.uploadDb}},[e._v(" 数据库部署 ")]),a("el-button",{attrs:{type:"primary"},on:{click:e.update}},[e._v("刷新")])],1)],1)],1)])])},n=[],i=a("1c4e"),o=a("be65"),s=a.n(o),l={data:function(){return{value2:!1,isarrange:!1,isend:!1,timer:null,updatetime:"",active:1,authorizenumber:"",dbinstall:!0,configdata:{computerAuth:"",natIP:"",wlanIp:"",computerKey:"",computerConfig:"",hostName:"",infomation:"localhost",standard:"standard",authorizenumber:"",dbInstalled:""},standard:"standard"}},mounted:function(){window.clearInterval(this.timer),this.timeUpdate(),this.getHardInfo(),s.a.get("authorizenumber")?this.configdata.authorizenumber=s.a.get("authorizenumber"):this.configdata.authorizenumber=""},beforeDestroy:function(){window.clearInterval(this.timer),this.timer=null},methods:{nowtime:function(){var e=Date.parse(new Date),t=new Date(e),a=t.getFullYear()+"-",r=(t.getMonth()+1<=10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-",n=(t.getDate()+1<=10?"0"+t.getDate():t.getDate())+" ",i=(t.getHours()+1<=10?"0"+t.getHours():t.getHours())+":",o=(t.getMinutes()+1<=10?"0"+t.getMinutes():t.getMinutes())+":",s=t.getSeconds()+1<=10?"0"+t.getSeconds():t.getSeconds();this.updatetime=a+r+n+i+o+s},timeUpdate:function(){var e=this;e.timer=window.setInterval((function(){e.nowtime()}),1e3)},getHardInfo:function(){var e=this;Object(i["hardInfo"])().then((function(t){e.configdata.computerAuth=t.computerAuth,e.configdata.natIP=t.natIP,e.configdata.wlanIp=t.wlanIp,e.configdata.computerKey=t.computerKey,e.configdata.hostName=t.hostName,e.configdata.computerConfig=t.computerConfig,e.configdata.dbInstalled=t.dbInstalled,e.value2=t.serverHealth}))},uploadHub:function(){var e=this;""!=this.configdata.infomation?""!=this.configdata.authorizenumber?Object(i["iotHub"])(this.configdata.standard,this.configdata.authorizenumber,this.configdata.infomation).then((function(t){if(1==t.result)e.active=3,e.$router.push("/login");else{if("license_failed"==t.status)return void e.$message("授权码错误，请重新填写");if("server_disconnected"==t.status)return void e.$message("服务器未连接");"database_uninstalled"==t.status&&(e.active=2,e.$message("服务器部署完成，请完成下一步数据库部署"),e.dbinstall=!1,s.a.set("authorizenumber",e.configdata.authorizenumber))}})):this.$message("请填写授权码"):this.$message("请填写数据中心地址")},uploadDb:function(){}}},c=l,d=(a("499a"),a("2877")),u=Object(d["a"])(c,r,n,!1,null,"37659a8c",null);t["default"]=u.exports},cd2d:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"login-container"},[a("div",{staticClass:"loginbanner"},[a("el-form",{ref:"ruleForm2",staticClass:"login-form",attrs:{model:e.ruleForm2,rules:e.rules2,"status-icon":"","label-width":"100px"}},[a("div",{staticClass:"logo"},[a("img",{staticStyle:{width:"80px",height:"80px"},attrs:{src:e.logosrc,alt:"logo"}}),a("p",[e._v("重置密码")])]),a("el-form-item",{staticStyle:{"border-radius":"0"},attrs:{prop:"phone"}},[a("span",{staticClass:"svg-container",staticStyle:{display:"inline-block",width:"150px",padding:"0",color:"black","vertical-align":"middle"}},[a("el-select",{staticStyle:{border:"0"},attrs:{placeholder:"请选择手机区域"},model:{value:e.ruleForm2.value,callback:function(t){e.$set(e.ruleForm2,"value",t)},expression:"ruleForm2.value"}},e._l(e.ruleForm2.diqu,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-input",{ref:"phonerole",staticStyle:{width:"250px"},attrs:{maxlength:11,name:"phone",type:"text","auto-complete":"on",placeholder:"请输入手机号"},model:{value:e.ruleForm2.phone,callback:function(t){e.$set(e.ruleForm2,"phone",t)},expression:"ruleForm2.phone"}})],1),a("div",{staticClass:"yzm",staticStyle:{height:"50px","margin-bottom":"20px","margin-left":"20px"}},[a("el-input",{staticClass:"yzm",staticStyle:{float:"left",width:"75%",border:"1px solid #cccccc","border-radius":"0"},attrs:{type:"text",placeholder:"请输入验证码","auto-complete":"off"},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}}),a("el-button",{staticStyle:{float:"right",width:"25%",height:"47px",padding:"12px 15px 12px 15px","border-radius":"0"},attrs:{disabled:e.sendMsgDisabled,type:"primary"},on:{click:e.send}},[e.sendMsgDisabled?a("span",[e._v(e._s(e.time+"秒后获取"))]):e._e(),e.sendMsgDisabled?e._e():a("span",[e._v("发送验证码")])])],1),a("el-form-item",{attrs:{prop:"password",required:""}},[a("span",{staticClass:"svg-container"},[a("vab-icon",{attrs:{icon:"password"}})],1),a("el-input",{attrs:{type:e.pwdType,maxlength:10,name:"password","auto-complete":"new-password",placeholder:"请输入6-10位数字字母组合"},model:{value:e.ruleForm2.password,callback:function(t){e.$set(e.ruleForm2,"password",t)},expression:"ruleForm2.password"}}),a("span",{staticClass:"show-pwd",on:{click:e.showPwd}},[a("vab-icon",{attrs:{icon:"eye"}})],1)],1),a("el-form-item",{attrs:{prop:"checkPass",required:""}},[a("span",{staticClass:"svg-container"},[a("vab-icon",{attrs:{icon:"password"}})],1),a("el-input",{attrs:{type:e.pwdType,maxlength:10,"auto-complete":"new-password",placeholder:"请再次输入密码"},model:{value:e.ruleForm2.checkPass,callback:function(t){e.$set(e.ruleForm2,"checkPass",t)},expression:"ruleForm2.checkPass"}}),a("span",{staticClass:"show-pwd",on:{click:e.showPwd}},[a("vab-icon",{attrs:{icon:"eye"}})],1)],1),a("div",{staticClass:"hasuser",staticStyle:{"box-sizing":"border-box","padding-left":"22px"}},[a("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary"},on:{click:function(t){return e.resetPassword("ruleForm2")}}},[e._v(" 确 定 ")])],1)],1)],1)])},n=[],i=(a("d81d"),a("d3b7"),a("25f0"),a("8665")),o=(a("f43e").Base64,{data:function(){var e=this,t=function(e,t,a){""===t?a(new Error("请输入密码")):(/^\w{6,10}$/.test(t)||a(new Error("密码格式不正确")),a())},a=function(t,a,r){""===a?r(new Error("请再次输入密码")):a!==e.ruleForm2.password?r(new Error("两次输入密码不一致!")):r()};return{password:"",time:60,sendMsgDisabled:!1,logosrc:"",title:"",phonesms:"",code:"",ruleForm2:{account:"",phone:"",password:"",checkPass:"",roles:"",diqu:[],value:"+86/中国"},protype:"",rules2:{account:[{required:!0,message:"请输入账号",trigger:"blur"},{min:1,max:10,message:"长度在 1到 10 个字符",trigger:"blur"}],phone:[{required:!0,message:"请输入手机号",trigger:"blur"},{validator:function(e,t,a){var r=/^1[3-9]\d{9}$/;r.test(t)?a():a(new Error("手机号码格式不正确！"))},trigger:"blur"}],password:[{validator:t,trigger:"blur",required:!0}],checkPass:[{validator:a,trigger:"blur",required:!0}],username:[{required:!0,message:"请输入姓名",trigger:"blur"},{min:2,max:5,message:"姓名格式不正确",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:["blur","change"]}],roles:[{required:!0,message:"请选择平台",trigger:"change"}]},pwdType:"password",origin:["+86/中国","+886/中国台湾","+852/中国香港","+91/India","+244/Angola","+54/Argentina","+1/American Samoa","+880/Bangladesh","+56/Chile","+855/Cambodia","+20/Egypt","+33/France","+49/Germany","+62/Indonesia","+353/Ireland","+972/Israel","+39/Italy","+81/Japan","+60/Malaysia","+63/Philippines","+92/Pakistan","+82/South Korea","+46/Sweden","+65/Singapore","+27/South Africa","+66/Thailand","+971/United Arab Emirates","+44/United Kingdom","+1/United States","+84/Vietnam","+967/Yemen","+260/Zambia"]}},mounted:function(){var e=this;this.protype=sessionStorage.getItem("roletype"),this.title=sessionStorage.getItem("product_title"),this.logosrc=sessionStorage.getItem("imgsrc"),this.ruleForm2.diqu=[],this.origin.map((function(t){e.ruleForm2.diqu.push({label:t,value:t.toString()})}))},methods:{showPwd:function(){"password"===this.pwdType?this.pwdType="":this.pwdType="password"},login:function(){this.$router.push({path:"/login"})},send:function(){var e=this;this.$refs.ruleForm2.validateField("phone",(function(t){t?e.$message("请输入手机号"):e.findUserAndSendCode()}))},findUserAndSendCode:function(){var e=this,t=this;Object(i["Phonelogin"])(t.ruleForm2.phone,encodeURIComponent(t.ruleForm2.value)).then((function(a){if(a){e.$message({message:"发送成功",type:"success"}),t.sendMsgDisabled=!0,e.time=a.expire;var r=window.setInterval((function(){t.time--<=0&&(t.time=60*this.time,t.sendMsgDisabled=!1,window.clearInterval(r))}),1e3)}})).catch((function(t){e.$message(t.error)}))},resetPassword:function(e){var t=this;this.$refs[e].validate((function(e){e&&(""==t.code?t.$message("请输入手机验证码"):Object(i["passwordreset"])(t.ruleForm2.phone,t.code,t.ruleForm2.password).then((function(e){e&&t.$router.push({path:"/login"})})).catch((function(e){t.$message(e.error)})))}))}}}),s=o,l=(a("c2a7"),a("8488"),a("3006"),a("2877")),c=Object(l["a"])(s,r,n,!1,null,"7b060cae",null);t["default"]=c.exports},d713:function(e,t,a){},da40:function(e,t,a){"use strict";a("5854")},e636:function(e,t,a){},f03f:function(e,t,a){"use strict";a("01dd")},fcac:function(e,t,a){"use strict";a.r(t);var r,n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"module"},[a("div",{attrs:{id:"editor_holder"}}),a("el-button",{staticStyle:{"margin-top":"20px"},attrs:{type:"primary"},on:{click:e.addmodule}},[e._v(" 保 存 ")])],1)},i=[],o=(a("d81d"),a("973c")),s=(a("8bbf"),{type:"object",title:"水泵检测模板配置",properties:{sample:{type:"string",description:"产品名称",minLength:10},category:{type:"string",description:"检验类别"},inspection_standard:{type:"string",description:"检验标准"},inspecting:{type:"array",title:"检测名称",items:{type:"object",properties:{inspecting_item:{type:"string",description:"检验项目"},guarantee_value:{type:"array",title:"保证值",format:"table",uniqueItems:!0,items:{type:"object",title:"保证值",properties:{title:{type:"string",description:"保证值"},value:{type:"string",description:"测试值"},assess:{type:"string",description:"评定"},evidenceway:{type:"string",description:"取证方式"},evidence:{type:"string",description:"证据链"}}}}}}}},default:{}});JSONEditor.defaults.options.theme="foundation4";var l={data:function(){return{default:"",reportId:"",editor:""}},mounted:function(){this.getSchema()},methods:{getSchema:function(){if(this.reportId=this.$route.query.id,JSONEditor.defaults.options.show_errors="change",this.reportId){var e=Parse.Object.extend("Datas"),t=new Parse.Query(e);t.get(this.reportId).then((function(e){s.default=e.attributes.data,s.default.inspecting.map((function(e){e.guarantee_value.map((function(e){delete e.id}))})),r=new JSONEditor(document.getElementById("editor_holder"),{schema:s,theme:"foundation4"})}))}else s.default={},r=new JSONEditor(document.getElementById("editor_holder"),{schema:s})},addmodule:function(){var e=this,t=r.validate({});t.length||Object(o["addReport"])(r.getValue(),this.reportId).then((function(t){t&&(e.$message({type:"success",message:"添加成功!"}),e.$router.push({path:"/reportmodule/index"}))})).catch((function(t){e.$message({type:"error",message:t.error})}))}}},c=l,d=(a("1747"),a("a939"),a("2877")),u=Object(d["a"])(c,n,i,!1,null,"1f6c7692",null);t["default"]=u.exports}}]);