/*!
 *  build: 杭州数蛙科技有限公司 
 *  copyright: dgiot_dashboard 
 *  time: Thu Apr 01 2021 07:25:47 GMT+0000 (Coordinated Universal Time)
 */
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-18e7885f"],{"0122":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-col",{attrs:{span:24}},[a("el-card",{staticClass:"page-header",attrs:{shadow:"never"}},[a("el-avatar",{staticClass:"page-header-avatar",attrs:{src:e.avatar}}),a("div",{staticClass:"page-header-tip"},[a("p",{staticClass:"page-header-tip-title"},[e._v(" "+e._s(e.handleTips())+" ")]),a("p",{staticClass:"page-header-tip-description"},[e._v(e._s(e.description))])]),a("div",{staticClass:"page-header-avatar-list"},[a("vab-avatar-list",{attrs:{"avatar-list":e.avatatList}}),a("p",[e._v("participants")])],1)],1)],1)},n=[],i=a("1da1"),s=a("5530"),o=(a("96cf"),a("a4d3"),a("e01a"),a("5880")),l=a("49bc"),c=a("cbec"),u={components:{VabAvatarList:c["default"]},data:function(){return{description:"",avatatList:[{avatar:"https://i.gtimg.cn/club/item/face/img/2/15922_100.gif",username:"good luck"},{avatar:"https://gitee.com/chu1204505056/image/raw/master/user/fwfmiao.gif",username:"fwfmiao"},{avatar:"https://i.gtimg.cn/club/item/face/img/3/15643_100.gif",username:"嘻嘻"}]}},computed:Object(s["a"])({},Object(o["mapGetters"])({avatar:"user/avatar",username:"user/username"})),created:function(){this.fetchData()},methods:{handleTips:function(){var e=(new Date).getHours();return e<8?"早上好 ".concat(this.username,"，又是元气满满的一天。"):e<=11?"上午好 ".concat(this.username,"，看到你我好开心。"):e<=13?"中午好 ".concat(this.username,"，忙碌了一上午，记得吃午饭哦。"):e<18?"下午好 ".concat(this.username,"，你一定有些累了，喝杯咖啡提提神。"):"晚上好 ".concat(this.username,"，愿你天黑有灯，下雨有伞。")},fetchData:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(l["getList"])();case 2:a=t.sent,r=a.data,e.description=r.description;case 5:case"end":return t.stop()}}),t)})))()}}},d=u,p=(a("76b7"),a("2877")),m=Object(p["a"])(d,r,n,!1,null,"a97160a4",null);t["default"]=m.exports},"09e4":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-card",{attrs:{shadow:"hover"},scopedSlots:e._u([{key:"header",fn:function(){return[a("vab-icon",{attrs:{icon:"github-line"}}),e._v(" 我的开源项目 "),a("el-tag",{staticClass:"card-header-tag"},[e._v("爱我别走")])]},proxy:!0}])},[a("el-row",{attrs:{gutter:20}},e._l(e.list,(function(t,r){return a("el-col",{key:r,attrs:{lg:12,md:12,sm:24,xl:12,xs:24}},[a("div",{staticClass:"project-card",style:"background-image:url("+t.image+")",on:{click:function(a){return e.handleOpenWindow(t.url)}}},[a("div",{staticClass:"project-card-title"},[e._v(e._s(t.title))]),a("div",{staticClass:"project-card-description"},[e._v(e._s(t.description))])])])})),1)],1)},n=[],i={data:function(){return{list:[{image:"http://dgiot-1253666439.cos.ap-shanghai-fsi.myqcloud.com/platform/assets/index_images/image.jpg",title:"vue-admin-beautiful(vue2.x)",description:"一款基于vue2.x + element-ui的绝佳的中后台前端开发管理框架",url:"https://github.com/chuzhixin/vue-admin-beautiful/tree/master"},{image:"http://dgiot-1253666439.cos.ap-shanghai-fsi.myqcloud.com/platform/assets/index_images/image.jpg",title:"vue-admin-beautiful(vue3.x)",description:"一款基于vue3.x + ant-design-vue的绝佳的中后台前端开发管理框架",url:"https://github.com/chuzhixin/vue-admin-beautiful/tree/vue3.0-antdv"}]}},methods:{handleOpenWindow:function(e){window.open(e)}}},s=i,o=(a("fdf6"),a("2877")),l=Object(o["a"])(s,r,n,!1,null,"6f148152",null);t["default"]=l.exports},"0ab2":function(e,t,a){"use strict";a("1278")},"0eea":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"target"},[a("el-card",{staticClass:"target-card1",attrs:{shadow:"hover"},scopedSlots:e._u([{key:"header",fn:function(){return[a("vab-icon",{attrs:{icon:"body-scan-line"}}),e._v(" 小目标 ")]},proxy:!0}])},[a("vab-chart",{staticClass:"target-echart1",attrs:{"init-options":e.initOptions,options:e.options,theme:"vab-echarts-theme"}})],1),a("el-card",{staticClass:"target-card2",attrs:{shadow:"hover"},scopedSlots:e._u([{key:"header",fn:function(){return[a("span",[a("vab-icon",{attrs:{icon:"money-cny-box-line"}}),e._v(" 销售额 ")],1)]},proxy:!0}])},[a("vab-chart",{staticClass:"target-echart2",attrs:{"init-options":e.initOptions,options:e.options2,theme:"vab-echarts-theme"}})],1)],1)},n=[],i=(a("d81d"),a("55fd")),s={components:{VabChart:i["default"]},data:function(){var e=["#9E87FF","#73DDFF","#fe9a8b","#F56948","#9E87FF"];return{initOptions:{renderer:"svg"},options:{tooltip:{trigger:"axis",extraCssText:"z-index:1"},grid:{top:"0%",left:"2%",right:"4%",bottom:"0%",containLabel:!0},xAxis:[{splitLine:{show:!1},type:"value",show:!1}],yAxis:[{splitLine:{show:!1},axisLine:{show:!1},type:"category",axisTick:{show:!1},data:["莱山区","高新区","芝罘区","牟平区","蓬莱区","开发区"]}],series:[{name:"目标",type:"bar",barWidth:25,label:{show:!0,position:"right",color:"#1890FF",fontSize:14,formatter:function(e){var t=e.data;return"".concat(t,"亿元")}},itemStyle:{borderRadius:[0,5,5,0],color:new i["default"].graphic.LinearGradient(0,0,1,0,["#3ED572","#399efd"].map((function(e,t){return{color:e,offset:t}})))},data:[320,302,341,374,390,650]}]},options2:{tooltip:{trigger:"axis",extraCssText:"z-index:1"},grid:{top:"4%",left:"2%",right:"2%",bottom:"0%",containLabel:!0},xAxis:[{type:"category",data:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],axisLine:{lineStyle:{color:"#DCE2E8"}},axisTick:{show:!1},axisLabel:{interval:0,color:"#556677",fontSize:12,margin:15},axisPointer:{label:{padding:[0,0,10,0],margin:15,fontSize:12,backgroundColor:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"#fff"},{offset:.86,color:"#fff"},{offset:.86,color:"#33c0cd"},{offset:1,color:"#33c0cd"}],global:!1}}},boundaryGap:!1}],yAxis:[{type:"value",axisTick:{show:!1},axisLine:{show:!0,lineStyle:{color:"#DCE2E8"}},axisLabel:{color:"#556677"},splitLine:{show:!1}}],series:[{name:"销售额",type:"line",data:[1905,1020,3330,512,4463,2214,3330,5412,1205,820,5330,1112],symbolSize:1,symbol:"circle",smooth:!0,yAxisIndex:0,showSymbol:!1,lineStyle:{width:5,color:new i["default"].graphic.LinearGradient(1,1,0,0,[{offset:0,color:"#73DD39"},{offset:1,color:"#73DDFF"}]),shadowColor:"rgba(115,221,255, 0.3)",shadowBlur:10,shadowOffsetY:20},itemStyle:{color:e[1],borderColor:e[1]}}]}}}},o=s,l=(a("8019"),a("2877")),c=Object(l["a"])(o,r,n,!1,null,"52c017ef",null);t["default"]=c.exports},1278:function(e,t,a){},"12b5":function(e,t,a){"use strict";a("1456")},1456:function(e,t,a){},"1aa4":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"log"},[a("div",{staticClass:"left"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-circle-plus-outline",size:"small"},on:{click:e.install}},[e._v(" "+e._s(e.$translateTitle("node.join"))+" ")])],1),a("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:e.tableData5.slice((e.start-1)*e.length,e.start*e.length),border:""}},[a("el-table-column",{attrs:{label:e.$translateTitle("node.nodename"),prop:"name"}}),a("el-table-column",{attrs:{label:"Erlang/"+e.$translateTitle("node.OTPversion"),prop:"otp_release"}}),a("el-table-column",{scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(" "+e._s(t.row.process_used+"/"+t.row.process_available)+" ")])]}}])},[a("template",{slot:"header"},[a("span",[e._v(" "+e._s("Erlang"+e.$translateTitle("node.process"))+" ")]),a("p",[e._v("used/avaliable")])])],2),a("el-table-column",{attrs:{label:"CPU"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(" "+e._s(t.row.load1+"/"+t.row.load5+"/"+t.row.load15)+" ")])]}}])},[a("template",{slot:"header"},[a("span",[e._v("CPU")]),a("p",[e._v("1load/5load/15load")])])],2),a("el-table-column",{attrs:{label:e.$translateTitle("node.memory")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(" "+e._s(t.row.memory_used+"/"+t.row.memory_total)+" ")])]}}])},[a("template",{slot:"header"},[a("span",[e._v(" "+e._s(e.$translateTitle("node.memory"))+" ")]),a("p",[e._v("used/total")])])],2),a("el-table-column",{attrs:{label:e.$translateTitle("node.Maximumnumberofhandles"),prop:"max_fds"}}),a("el-table-column",{attrs:{label:e.$translateTitle("node.state"),prop:"node_status"}}),a("el-table-column",{attrs:{label:e.$translateTitle("node.operation")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){return e.removeNode(t.row)}}},[e._v(" "+e._s(e.$translateTitle("node.remove"))+" ")])]}}])})],1),a("div",{staticClass:"block",staticStyle:{"margin-top":"30px"}},[a("el-pagination",{attrs:{"page-sizes":[10,25,50,100],"page-size":e.length,total:e.total,background:"",layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),a("el-dialog",{attrs:{title:e.$translateTitle("node.joincluster"),visible:e.dialogVisible,"before-close":e.handleClose,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("span",[e._v(e._s(e.$translateTitle("node.nodename")))]),a("el-input",{attrs:{type:"text"},model:{value:e.form.nodename,callback:function(t){e.$set(e.form,"nodename",t)},expression:"form.nodename"}}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v(" "+e._s(e.$translateTitle("developer.cancel"))+" ")]),a("el-button",{attrs:{type:"primary"},on:{click:e.join}},[e._v(" "+e._s(e.$translateTitle("developer.determine"))+" ")])],1)],1)],1)},n=[],i=a("bb22"),s={data:function(){return{form:{nodename:""},tableData5:[],node:null,start:1,length:10,total:0,draw:1,search:"",dialogVisible:!1,installtion:[],selsectinstall:[{value:"info",label:"info"},{value:"error",label:"error"},{value:"warning",label:"warning"},{value:"debug",label:"debug"},{value:"mqtt",label:"mqtt"},{value:"kafka",label:"kafka"},{value:"alert",label:"alert"},{value:"critical",label:"critical"},{value:"emergency",label:"emergency"},{value:"notice",label:"notice"}]}},mounted:function(){this.Getinformation()},methods:{Getinformation:function(){var e=this;Object(i["getNode"])(this.start,this.lengt).then((function(t){t&&(e.tableData5=t.nodes,e.total=t.nodes.length)}))},handleSizeChange:function(e){this.length=e,this.start=1},handleCurrentChange:function(e){this.start=e},join:function(){var e=this;Object(i["joinNode"])("join",this.form.nodename).then((function(t){t&&(e.$message({type:"success",message:"加入成功"}),e.dialogVisible=!1,e.Getinformation())})).catch((function(t){e.$message(t.error)}))},removeNode:function(e){var t=this;Object(i["joinNode"])("leave",e.node).then((function(e){e&&(t.$message({type:"success",message:"移除成功"}),t.Getinformation())})).catch((function(e){t.$message(e.error)}))},install:function(){this.dialogVisible=!0},handleClose:function(){this.dialogVisible=!1}}},o=s,l=(a("598e"),a("2877")),c=Object(l["a"])(o,r,n,!1,null,"c233c10e",null);t["default"]=c.exports},"1eba":function(e,t,a){},"32fa":function(e,t,a){"use strict";a("c2fd")},"355d":function(e,t,a){},"37f9":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"index-container"},[a("el-row",{attrs:{gutter:20}},[a("page-header"),a("el-col",{attrs:{lg:6,md:12,sm:24,xl:6,xs:24}},[a("access")],1),a("el-col",{attrs:{lg:6,md:12,sm:24,xl:6,xs:24}},[a("authorization")],1),a("el-col",{attrs:{lg:12,md:24,sm:24,xl:12,xs:24}},[a("version-information")],1),a("icon-list"),a("el-col",{attrs:{lg:12,md:12,sm:24,xl:12,xs:24}},[a("china-map"),a("my-project")],1),a("el-col",{attrs:{lg:12,md:12,sm:24,xl:12,xs:24}},[a("plan")],1)],1)],1)},n=[],i=a("0122"),s=a("837e"),o=a("725e"),l=a("52cf"),c=a("f120"),u=a("09e4"),d=a("f84e"),p=a("a0b1"),m={name:"Index",components:{PageHeader:i["default"],Access:s["default"],Authorization:o["default"],ChinaMap:l["default"],VersionInformation:p["default"],IconList:c["default"],MyProject:u["default"],Plan:d["default"]}},f=m,g=(a("69ab"),a("2877")),b=Object(g["a"])(f,r,n,!1,null,"3532d89a",null);t["default"]=b.exports},"3ab9":function(e,t,a){"use strict";a("1eba")},4316:function(e,t,a){"use strict";a("a4d4")},"527b":function(e,t,a){"use strict";a("a200")},"52cf":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-card",{attrs:{shadow:"hover"},scopedSlots:e._u([{key:"header",fn:function(){return[a("vab-icon",{attrs:{icon:"road-map-line"}}),e._v(" 中国地图 "),a("el-tag",{staticClass:"card-header-tag",attrs:{type:"warning"}},[e._v(" 我爱你中国，亲爱的母亲 ")])]},proxy:!0}])},[a("vab-chart",{staticStyle:{height:"283px"},attrs:{"init-options":e.initOptions,options:e.options,theme:"vab-echarts-theme"}})],1)},n=[],i=a("1da1"),s=(a("96cf"),a("55fd")),o={components:{VabChart:s["default"]},data:function(){return{countConfig:{startVal:0,endVal:_.random(1e3,2e4),decimals:0,prefix:"",suffix:"",separator:",",duration:8e3},initOptions:{renderer:"svg"},options:{}}},created:function(){this.getMap()},methods:{getMap:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,axios({url:"https://unpkg.com/echarts@4.9.0/map/json/china.json",method:"get"});case 2:a=t.sent,r=a.data,s["default"].registerMap("china",r),e.options={title:{text:"2099年全国GDP分布",subtext:"数据来自vue-admin-beautiful杜撰"},tooltip:{trigger:"item"},dataRange:{min:0,max:55e3,text:["高","低"],splitNumber:0},series:[{name:"2099年全国GDP分布",type:"map",roam:!1,map:"china",selectedMode:"multiple",emphasis:{label:{show:!0}},data:[{name:"西藏",value:605.83},{name:"青海",value:1670.44},{name:"宁夏",value:2102.21},{name:"海南",value:2522.66},{name:"甘肃",value:5020.37},{name:"贵州",value:5701.84},{name:"新疆",value:6610.05},{name:"云南",value:8893.12},{name:"重庆",value:10011.37},{name:"吉林",value:10568.83},{name:"山西",value:11237.55},{name:"天津",value:11307.28},{name:"江西",value:11702.82},{name:"广西",value:11720.87},{name:"陕西",value:12512.3},{name:"黑龙江",value:12582},{name:"内蒙古",value:14359.88},{name:"安徽",value:15300.65},{name:"北京",value:16251.93},{name:"福建",value:17560.18},{name:"上海",value:19195.69},{name:"湖北",value:19632.26},{name:"湖南",value:19669.56},{name:"四川",value:21026.68},{name:"辽宁",value:22226.7},{name:"河北",value:24515.76},{name:"河南",value:26931.03},{name:"浙江",value:32318.85},{name:"山东",value:45361.85,selected:!0},{name:"江苏",value:49110.27},{name:"广东",value:53210.28}]}]};case 6:case"end":return t.stop()}}),t)})))()}}},l=o,c=a("2877"),u=Object(c["a"])(l,r,n,!1,null,null,null);t["default"]=u.exports},"598e":function(e,t,a){"use strict";a("7ce9")},"5dfa":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"flat"},[a("el-button",{attrs:{type:"primary"},on:{click:e.dingyue}},[e._v("dingyue")]),a("VabMqtt")],1)},n=[],i=a("af48"),s=a("c620"),o={name:"Flat",components:{VabMqtt:i["default"]},data:function(){return{}},mounted:function(){},methods:{GetFlat:function(){s["Websocket"].cInfo.host="132.232.121.164",s["Websocket"].newClient(),s["Websocket"].connect()},Startserver:function(){window.location.href="shuwa://aidlserver/pump?id=123&rtsp=rtsp://admin:shuwa-fly-2019@192.168.2.138:554/cam/realmonitor?channel=1&subtype=0&username=test&password=test123"},Startclient:function(){window.location.href="shuwa://aidlclient/pump?id=123&mqtturl=tcp://132.232.121.164:1883&username=test&password=test123"},Startlive:function(){window.location.href="shuwa://rtspliving/pump?&rtspurl=rtsp://admin:shuwa-fly-2019@192.168.2.138:554/cam/realmonitor?channel=1&subtype=0&action=start&username=test&password=test123 "},dingyue:function(){var e={topic:"info1",qos:0},t={topic:"info2",qos:0};s["Websocket"].subscribe(e,(function(e){e.result&&s["Websocket"].subscribe(t,(function(e){}))}))}}},l=o,c=(a("32fa"),a("2877")),u=Object(c["a"])(l,r,n,!1,null,"3d629a48",null);t["default"]=u.exports},"5f34":function(e,t,a){"use strict";a("f431")},"666c":function(e,t,a){},"686d":function(e,t,a){},"69ab":function(e,t,a){"use strict";a("666c")},"725e":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-card",{staticClass:"authorization",attrs:{shadow:"hover"},scopedSlots:e._u([{key:"header",fn:function(){return[a("vab-icon",{attrs:{icon:"bar-chart-2-line"}}),e._v(" 授权数 "),a("el-tag",{staticClass:"card-header-tag",attrs:{type:"warning"}},[e._v("周")])]},proxy:!0}])},[a("vab-chart",{attrs:{"init-options":e.initOptions,options:e.options,theme:"vab-echarts-theme"}}),a("div",{staticClass:"bottom"},[a("span",[e._v(" 授权数: "),a("vab-count",{attrs:{decimals:e.countConfig.decimals,duration:e.countConfig.duration,"end-val":e.countConfig.endVal,prefix:e.countConfig.prefix,separator:e.countConfig.separator,"start-val":e.countConfig.startVal,suffix:e.countConfig.suffix}}),a("el-tag",{staticClass:"card-footer-tag",attrs:{type:"success"}},[e._v("倒计时 "+e._s(e.n)+"s")])],1)])],1)},n=[],i=(a("d81d"),a("55fd")),s=a("0dca"),o={components:{VabChart:i["default"],VabCount:s["default"]},data:function(){return{timer:null,n:5,countConfig:{startVal:0,endVal:_.random(1e3,2e4),decimals:0,prefix:"",suffix:"",separator:",",duration:8e3},initOptions:{renderer:"svg"},options:{tooltip:{trigger:"axis",extraCssText:"z-index:1"},grid:{top:"5%",left:"2%",right:"4%",bottom:"0%",containLabel:!0},xAxis:[{type:"category",data:["0时","4时","8时","12时","16时","20时","24时"],axisTick:{alignWithLabel:!0}}],yAxis:[{type:"value"}],series:[{name:"授权数",type:"bar",barWidth:"60%",data:[10,52,20,33,39,33,22],itemStyle:{borderRadius:[2,2,0,0],color:new i["default"].graphic.LinearGradient(0,0,0,1,["#88D1FF","#1890FF"].map((function(e,t){return{color:e,offset:t}})))}}]}}},beforeUnmount:function(){this.timer=null,clearInterval(this.timer)},mounted:function(){var e=this;this.timer=setInterval((function(){e.n>0?e.n--:(e.options.series[0].type=_.sample(_.pull(["line","bar","scatter"],[e.options.series[0].type])),e.n=5)}),1e3)}},l=o,c=a("2877"),u=Object(c["a"])(l,r,n,!1,null,null,null);t["default"]=u.exports},"76b7":function(e,t,a){"use strict";a("f037")},"7cc9":function(e,t,a){"use strict";a("bfef")},"7ce9":function(e,t,a){},8019:function(e,t,a){"use strict";a("ebb4")},"837e":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-card",{staticClass:"access",attrs:{shadow:"hover"},scopedSlots:e._u([{key:"header",fn:function(){return[a("vab-icon",{attrs:{icon:"line-chart-line"}}),e._v(" 访问量 "),a("el-tag",{staticClass:"card-header-tag",attrs:{type:"success"}},[e._v("日")])]},proxy:!0}])},[a("vab-chart",{attrs:{"init-options":e.initOptions,options:e.options,theme:"vab-echarts-theme"}}),a("div",{staticClass:"bottom"},[a("span",[e._v(" 日均访问量: "),a("vab-count",{attrs:{decimals:e.countConfig.decimals,duration:e.countConfig.duration,"end-val":e.countConfig.endVal,prefix:e.countConfig.prefix,separator:e.countConfig.separator,"start-val":e.countConfig.startVal,suffix:e.countConfig.suffix}})],1)])],1)},n=[],i=(a("d81d"),a("a15b"),a("55fd")),s=a("0dca"),o={components:{VabChart:i["default"],VabCount:s["default"]},data:function(){return{timer:null,countConfig:{startVal:0,endVal:_.random(2e4,6e4),decimals:0,prefix:"",suffix:"",separator:",",duration:8e3},initOptions:{renderer:"svg"},options:{tooltip:{trigger:"axis",extraCssText:"z-index:1"},grid:{top:"5%",left:"2%",right:"4%",bottom:"0%",containLabel:!0},xAxis:[{type:"category",boundaryGap:!1,data:[],axisTick:{alignWithLabel:!0}}],yAxis:[{type:"value"}],series:[{name:"访问量",type:"line",data:[],smooth:!0,areaStyle:{},itemStyle:{borderRadius:[0,5,5,0],color:new i["default"].graphic.LinearGradient(0,0,1,0,["#3ED572","#399efd"].map((function(e,t){return{color:e,offset:t}})))}}]}}},beforeUnmount:function(){this.timer=null,clearInterval(this.timer)},mounted:function(){for(var e=this,t=+new Date(2020,1,1),a=864e5,r=[],n=[1500*Math.random()],i=new Date(t),s=function(e){i=[i.getFullYear(),i.getMonth()+1,i.getDate()].join("/"),r.push(i),n.push(_.random(2e4,6e4)),e&&(r.shift(),n.shift()),i=new Date(+new Date(i)+a)},o=1;o<6;o++)s();s(!0),this.options.xAxis[0].data=r,this.options.series[0].data=n,this.timer=setInterval((function(){s(!0),e.options.xAxis[0].data=r,e.options.series[0].data=n}),6e3)}},l=o,c=a("2877"),u=Object(c["a"])(l,r,n,!1,null,null,null);t["default"]=u.exports},"891a":function(e,t,a){},"8e6e":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"serverlist"},[a("div",{staticClass:"servercontent"},[a("el-breadcrumb",{staticStyle:{"margin-bottom":"20px"},attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/roles/applicationManagement"}}},[e._v(" 返回应用管理 ")]),a("el-breadcrumb-item",[e._v("部署服务")])],1),a("h3",[e._v("服务器部署")]),a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline,size:"small"}},[a("el-form-item",{staticStyle:{float:"left"}},[a("el-button",{staticClass:"el-icon-download",attrs:{type:"success",disabled:e.appid&&0==e.appid.length},on:{click:function(t){return e.downlictool()}}},[e._v(" 下载引导脚本 ")])],1),a("el-form-item",[a("el-input",{attrs:{placeholder:"请输入用户名称"},model:{value:e.formInline.user,callback:function(t){e.$set(e.formInline,"user",t)},expression:"formInline.user"}})],1),a("el-form-item",[a("el-select",{attrs:{placeholder:"运行状态"},model:{value:e.formInline.region,callback:function(t){e.$set(e.formInline,"region",t)},expression:"formInline.region"}},[a("el-option",{attrs:{value:1,label:"全部"}}),a("el-option",{attrs:{value:!0,label:"在线"}}),a("el-option",{attrs:{value:!1,label:"离线"}})],1)],1),a("el-form-item",[a("el-select",{attrs:{placeholder:"应用商名称"},model:{value:e.formInline.app,callback:function(t){e.$set(e.formInline,"app",t)},expression:"formInline.app"}},e._l(e.applist,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),1)],1),a("el-form-item",[a("el-select",{attrs:{placeholder:"请选择应用类型"},model:{value:e.formInline.version,callback:function(t){e.$set(e.formInline,"version",t)},expression:"formInline.version"}},[a("el-option",{attrs:{label:"标准版",value:"standard"}}),a("el-option",{attrs:{label:"企业版",value:"enterprise"}}),a("el-option",{attrs:{label:"旗舰版",value:"ultimate"}})],1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.getOrigin(0)}}},[e._v("查询")]),a("el-button",{attrs:{type:"primary"},on:{click:e.addServer}},[e._v("新增")])],1)],1)],1),a("div",{staticClass:"servertable"},[a("el-table",{staticStyle:{width:"100%","text-align":"center"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{label:"编号",type:"index",width:"50",align:"center"}}),a("el-table-column",{attrs:{label:"客户名称",align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.customer_name))])]}}])}),a("el-table-column",{attrs:{label:"客户应用",align:"center",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.appname))])]}}])}),a("el-table-column",{attrs:{label:"版本",align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.product?a("span",[e._v(" "+e._s(t.row.product.shuwa_iot_software)+" ")]):e._e()]}}])}),a("el-table-column",{attrs:{label:"服务器IP",align:"center",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.private_ip?a("p",[e._v(" "+e._s(t.row.private_ip+"(私)")+" ")]):e._e(),t.row.public_ip?a("p",[e._v(e._s(t.row.public_ip+"(公)"))]):e._e()]}}])}),a("el-table-column",{attrs:{label:"服务器配置",align:"center",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return t.row.private_ip?[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",[e._v("IP地址: "+e._s(t.row.private_ip))]),a("p",[e._v("MAC地址: "+e._s(t.row.mac))]),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{effect:"dark"}},[a("span",[e._v(" "+e._s(t.row.core+"核"+t.row.memory+" "+t.row.disk+"内存")+" ")])])],1)])]:void 0}}],null,!0)}),a("el-table-column",{attrs:{label:"机器码",align:"center","show-overflow-tooltip":"",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.key))])]}}])}),a("el-table-column",{attrs:{label:"授权码",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.license))])]}}])}),a("el-table-column",{attrs:{label:"连接状态",align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.is_online?a("span",{staticStyle:{color:"green"}},[e._v(" 在线 ")]):a("span",{staticStyle:{color:"red"}},[e._v("离线")])]}}])}),a("el-table-column",{attrs:{label:"部署情况",align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return["unauthorized"==t.row.status?a("span",{staticStyle:{color:"red"}},[e._v(" 未授权 ")]):"start_install"==t.row.status?a("span",{staticStyle:{color:"green"}},[e._v(" 开始部署 ")]):"installing"==t.row.status?a("span",{staticStyle:{color:"green"}},[e._v(" 部署中 ")]):a("span",{staticStyle:{color:"green"}},[e._v("部署完成")])]}}])}),a("el-table-column",{attrs:{label:"操作",align:"center",width:"500"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleDetail(t.$index,t.row)}}},[e._v(" 详 情 ")]),a("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-s-operation"},on:{click:function(a){return e.addserver(t.row)}}},[e._v(" 在线安装 ")]),a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){return e.uploadLicense1(t.row)}}},[e._v(" 离线安装 ")]),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.onlineLictool(t.row)}}},[e._v(" 在线升级 ")]),a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){return e.offlineLictool(t.row)}}},[e._v(" 离线升级 ")])]}}])})],1)],1),a("div",{staticClass:"serverpagina"},[a("el-pagination",{attrs:{"page-sizes":[10,20,30,50],"page-size":e.pagesize,total:e.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),a("el-dialog",{attrs:{visible:e.dialogFormVisible,"close-on-click-modal":!1,title:"服务部署"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"应用类型",prop:"region"}},[a("el-select",{attrs:{placeholder:"请选择应用类型"},model:{value:e.ruleForm.region,callback:function(t){e.$set(e.ruleForm,"region",t)},expression:"ruleForm.region"}},[a("el-option",{attrs:{label:"标准版",value:"standard"}}),a("el-option",{attrs:{label:"企业版",value:"enterprise"}}),a("el-option",{attrs:{label:"旗舰版",value:"ultimate"}})],1),a("p",{staticStyle:{position:"absolute",top:"30px",margin:"0",color:"#cc6e00"}},[e._v(" 标准版本为单机版 ")])],1),a("el-form-item",{attrs:{label:"授权码",prop:"licensekey"}},[a("el-input",{attrs:{placeholder:"请输入license授权码"},model:{value:e.ruleForm.licensekey,callback:function(t){e.$set(e.ruleForm,"licensekey",t)},expression:"ruleForm.licensekey"}})],1),a("el-form-item",{attrs:{label:"客户名称",prop:"username"}},[a("el-input",{attrs:{placeholder:"请输入客户名称"},model:{value:e.ruleForm.username,callback:function(t){e.$set(e.ruleForm,"username",t)},expression:"ruleForm.username"}})],1),a("el-form-item",{attrs:{label:"软件版本",prop:"version"}},[a("el-input",{attrs:{placeholder:"请输入服务版本"},model:{value:e.ruleForm.version,callback:function(t){e.$set(e.ruleForm,"version",t)},expression:"ruleForm.version"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.updatedLicense("ruleForm")}}},[e._v(" 部 署 ")]),a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")])],1)],1),a("el-dialog",{attrs:{visible:e.dialogVisible,"close-on-click-modal":!1,title:"详情",width:"50%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",[a("el-input",{attrs:{rows:20,type:"textarea",readonly:""},model:{value:e.licensedetail,callback:function(t){e.licensedetail=t},expression:"licensedetail"}})],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"})]),a("el-dialog",{attrs:{visible:e.serverdialogVisible,"close-on-click-modal":!1,title:"服务器配置",width:"50%"},on:{"update:visible":function(t){e.serverdialogVisible=t}}},[a("el-form",{ref:"serverForm",staticClass:"demo-serverForm",attrs:{model:e.serverForm,rules:e.serverrules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"用户名称",prop:"customer_name"}},[a("el-input",{model:{value:e.serverForm.customer_name,callback:function(t){e.$set(e.serverForm,"customer_name",t)},expression:"serverForm.customer_name"}})],1),a("el-form-item",{attrs:{label:"应用名称",prop:"app"}},[a("el-select",{attrs:{placeholder:"应用商名称"},model:{value:e.serverForm.app,callback:function(t){e.$set(e.serverForm,"app",t)},expression:"serverForm.app"}},e._l(e.applist,(function(e,t){return a("el-option",{key:t,attrs:{label:e.desc,value:e.desc}})})),1)],1),a("el-form-item",{attrs:{label:"服务器IP(私)",prop:"serverip"}},[a("el-input",{model:{value:e.serverForm.serverip,callback:function(t){e.$set(e.serverForm,"serverip",t)},expression:"serverForm.serverip"}})],1),a("el-form-item",{attrs:{label:"服务器IP(公)",prop:"publicip"}},[a("el-input",{model:{value:e.serverForm.publicip,callback:function(t){e.$set(e.serverForm,"publicip",t)},expression:"serverForm.publicip"}})],1),a("el-form-item",{attrs:{label:"MAC地址",prop:"mac"}},[a("el-input",{model:{value:e.serverForm.mac,callback:function(t){e.$set(e.serverForm,"mac",t)},expression:"serverForm.mac"}})],1),a("el-form-item",{attrs:{label:"服务器配置",required:""}},[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{prop:"serverhe"}},[a("el-input",{model:{value:e.serverForm.serverhe,callback:function(t){e.$set(e.serverForm,"serverhe",t)},expression:"serverForm.serverhe"}},[a("template",{slot:"append"},[e._v("核")])],2)],1)],1),a("el-col",{staticClass:"line",attrs:{span:2}},[e._v("-")]),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{prop:"serverg"}},[a("el-input",{model:{value:e.serverForm.serverg,callback:function(t){e.$set(e.serverForm,"serverg",e._n(t))},expression:"serverForm.serverg"}},[a("template",{slot:"append"},[e._v("G")])],2)],1)],1)],1),a("el-form-item",{attrs:{label:"内存",prop:"disk"}},[a("el-input",{model:{value:e.serverForm.disk,callback:function(t){e.$set(e.serverForm,"disk",e._n(t))},expression:"serverForm.disk"}},[a("template",{slot:"append"},[e._v("G")])],2)],1),a("el-form-item",{attrs:{label:"机器码",prop:"serverkey"}},[a("el-input",{attrs:{placeholder:"请输入机器码"},model:{value:e.serverForm.serverkey,callback:function(t){e.$set(e.serverForm,"serverkey",t)},expression:"serverForm.serverkey"}})],1),a("el-form-item",{attrs:{label:"授权码"}},[a("el-input",{attrs:{placeholder:"请输入授权码(未授权可为空)"},model:{value:e.serverForm.licence,callback:function(t){e.$set(e.serverForm,"licence",t)},expression:"serverForm.licence"}})],1),a("el-form-item",{attrs:{label:"服务器状态",prop:"status"}},[a("el-select",{attrs:{placeholder:"应用商名称"},model:{value:e.serverForm.status,callback:function(t){e.$set(e.serverForm,"status",t)},expression:"serverForm.status"}},[a("el-option",{attrs:{label:"未授权",value:"unauthorized"}}),a("el-option",{attrs:{label:"开始部署",value:"start_install"}}),a("el-option",{attrs:{label:"部署中",value:"installing"}}),a("el-option",{attrs:{label:"部署完成",value:"installed"}})],1)],1),a("el-form-item",{attrs:{label:"在线状态",prop:"online"}},[e.serverForm.online?a("span",{staticStyle:{color:"#13ce66"}},[e._v("在线")]):a("span",{staticStyle:{color:"#ff4949"}},[e._v("离线")]),a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.serverForm.online,callback:function(t){e.$set(e.serverForm,"online",t)},expression:"serverForm.online"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.serverdialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.serverOption("serverForm")}}},[e._v(" 确 定 ")])],1)],1),a("el-dialog",{attrs:{visible:e.dialogOnline,title:"在线升级"},on:{"update:visible":function(t){e.dialogOnline=t}}},[a("el-form",{ref:"onlineform",attrs:{model:e.onlineform,rules:e.onlineformrule}},[a("el-form-item",{attrs:{label:"版本号","label-width":"120px",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入版本号",autocomplete:"off"},model:{value:e.onlineform.name,callback:function(t){e.$set(e.onlineform,"name",t)},expression:"onlineform.name"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogOnline=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.updateLictool("onlineform")}}},[e._v(" 确 定 ")])],1)],1)],1)},n=[],i=a("1da1"),s=(a("96cf"),a("a9e3"),a("5319"),a("ac1f"),a("b0c0"),a("1c4e")),o=a("58dd"),l={},c={data:function(){var e=this,t=function(e,t,a){var r=/^[A-Za-z0-9]+\.[A-Za-z0-9]+[\/=\?%\-&_~`@[\]\':+!]*([^<>\"\"])*$/;r.test(t)?a():a(new Error("需要输入正确的服务器IP"))},a=function(e,t,a){var r=/^[A-Za-z0-9]{32}$/;r.test(t)?a():a(new Error("需要输入正确32位机器码"))},r=function(e,t,a){var r=/^[+]?(0|([1-9]\d*))(\.\d+)?$/g;""===t?a(new Error("请输入正数")):r.test(t)?a():a(new Error("请输入数字"))};return{appid:"",appsecret:"",serverdialogVisible:!1,dialogFormVisible:!1,dialogVisible:!1,dialogOnline:!1,onlineform:{name:""},onlineformrule:{name:[{required:!0,message:"请输入要更新的版本号",trigger:"blur"}]},licensedetail:{},formInline:{user:"",region:1,app:"",version:""},tableData:[],pagesize:10,total:0,start:0,licenseid:"",ruleForm:{name:"",region:"standard",date1:"",date2:"",appname:"",licensekey:"",username:"",version:""},serverForm:{app:"",serverip:"",serverhe:"",serverg:"",serverkey:"",license:"",online:!1,customer_name:"",disk:Number("50G".replace(/G/g,"")),status:"unauthorized",publicip:"",mac:""},applist:[],rules:{name:[{required:!0,message:"请输入预计设计规模"},{type:"number",message:"预计设计规模 必须为数字值"}],region:[{required:!0,message:"请选择应用类型",trigger:"change"}],appname:[{required:!0,message:"请选择需要应用",trigger:"change"}],licensekey:[{required:!0,message:"license必填",trigger:"blur"}],username:[{required:!0,message:"客户名称必填",trigger:"blur"}],version:[{required:!0,message:"应用版本必填",trigger:"blur"}],date1:[{type:"date",required:!0,message:"请选择开始时间",trigger:"change"}],date2:[{type:"date",required:!0,message:"请选择结束时间",trigger:"change"}]},serverrules:{app:[{required:!0,message:"请选择客户名称",trigger:"change"}],serverip:[{required:!0,message:"请输入服务器私网IP",trigger:"blur"},{validator:t}],publicip:[{required:!0,message:"请输入服务器公网IP",trigger:"blur"},{validator:t}],mac:[{required:!0,message:"请输入服务器MAC地址",trigger:"blur"}],serverhe:[{required:!0,message:"请输入服务器配置"},{validator:r,type:"number",message:"服务器配置必须为数字值"}],serverg:[{required:!0,message:"请输入服务器配置"},{type:"number",message:"服务器配置必须为数字值"}],serverkey:[{required:!0,message:"请输入机器码",trigger:"blur"},{validator:a}],customer_name:[{required:!0,message:"请输入用户名称",trigger:"blur"}],disk:[{required:!0,message:"请输入服务器内存"},{type:"number",message:"服务器内存必须为数字值"}],stauts:[{required:!0,message:"请选择服务器状态",trigger:"change"}]},pickerOptionsStart:{disabledDate:function(t){var a=e.ruleForm.date2;return a&&t.getTime()>new Date(a).getTime()||t.getTime()<Date.now()-864e5}},pickerOptionsEnd:{disabledDate:function(t){var a=e.ruleForm.date1;return a?t.getTime()<new Date(a).getTime():t.getTime()<Date.now()-864e5}},isupdatedserver:"",licenseObj:{id:""}}},mounted:function(){this.getApp(),this.$route.query.appid&&(this.formInline.app=this.$route.query.appid),this.getOrigin(0)},methods:{addServer:function(){this.serverForm={app:"",serverip:"127.7.0.1",serverhe:4,serverg:8,serverkey:"EtXWoGpE74FnpANsLGDvj9uwkat8c7AU",license:"127.7.0.1",online:!1,customer_name:"addServe",disk:Number("50G".replace(/G/g,"")),status:"unauthorized",publicip:"127.7.0.1",mac:"127.7.0.1"},this.serverdialogVisible=!0},serverOption:function(e){var t=this;this.$refs[e].validate(function(){var a=Object(i["a"])(regeneratorRuntime.mark((function a(r){var n,i,o,l;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!r){a.next=23;break}return n=t.$Cookies.get("appids"),i={},i[n]={read:!0,write:!0},o={ACL:i},o.appname=t.serverForm.customer_name,o.detail={},o.product={},o.key=t.serverForm.serverkey,o.private_ip=t.serverForm.serverip,o.is_online=t.serverForm.online,o.customer_name=t.serverForm.customer_name,o.public_ip=t.serverForm.publicip,o.disk=t.serverForm.disk+"G",o.core=t.serverForm.serverhe,o.memory=t.serverForm.serverg+"G",o.mac=t.serverForm.mac,o.license=t.serverForm.license,o.app={__type:"Pointer",className:"App",objectId:t.serverForm.app},a.next=21,Object(s["postLicense"])(o);case 21:l=a.sent,l&&(t.$message("添加成功"),t.$refs[e].resetFields(),t.getOrigin(0),t.serverdialogVisible=!1);case 23:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}())},getApp:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.appid=e.$route.query.appid,e.appsecret=e.$route.query.appsecret,t.next=4,Object(o["app_count"])({});case 4:a=t.sent,r=a.results,r&&(e.applist=r);case 7:case"end":return t.stop()}}),t)})))()},getOrigin:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var r,n,i,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return 0==e&&(t.start=0),r={order:"-updatedAt",skip:t.start,limit:t.pagesize,keys:"count(*)",where:{}},1!==t.formInline.region&&(r.where.is_online=t.formInline.region),""!==t.formInline.app&&(r.where.app=t.formInline.app),""!==t.formInline.user&&(r.where.customer_name=t.formInline.user),""!==t.formInline.version&&(r.type=t.formInline.version),a.next=8,Object(s["queryLicense"])(r);case 8:n=a.sent,i=n.count,o=n.results,i&&(t.total=i),o&&(t.tableData=o);case 13:case"end":return a.stop()}}),a)})))()},handleSizeChange:function(e){this.pagesize=e,this.getOrigin(1)},handleCurrentChange:function(e){this.start=(e-1)*this.pagesize,this.getOrigin(1)},addserver:function(e){var t=this;if(this.licenseid=e.id,this.ruleForm.version=e.attributes.software,e.attributes.license?this.ruleForm.licensekey=e.attributes.license:this.ruleForm.licensekey="",this.ruleForm.username=e.attributes.customer_name,e.attributes.product)for(var a in e.attributes.product)l[a]=e.attributes.product[a];"installed"==e.attributes.status||"start_install"==e.attributes.status||"installing"==e.attributes.status?this.$confirm("".concat("installed"==e.attributes.status?"是否重新部署服务器, 是否继续?":"服务器正在部署中，是否重新部署"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.dialogFormVisible=!0})).catch((function(){t.$message({type:"info",message:"已取消重新部署"})})):this.dialogFormVisible=!0},updatedLicense:function(e){var t=this;this.$refs[e].validate((function(e){if(e){var a={type:t.ruleForm.region,license:t.ruleForm.licensekey,status:"start_install",customer_name:t.ruleForm.username,software:t.ruleForm.version};return Object(s["putLicense"])(t.licenseid,a).then((function(e){e&&(t.$message("正在部署中"),t.dialogFormVisible=!1,t.getOrigin(1))})).catch((function(e){return!1})),!0}}))},uploadLicense1:function(e){Object(s["uploadServer"])(e.attributes.license).then((function(t){window.open(window.location.origin+"/licsetup?license="+e.attributes.license,"_blank")}))},onlineLictool:function(e){for(var t in this.licenseObj.id=e.id,e.attributes.product)this.licenseObj[t]=e.attributes.product[t];this.dialogOnline=!0},updateLictool:function(e){var t=this;this.$refs[e].validate((function(e){if(e){var a={status:"start_update",software:t.onlineform.name};Object(s["putLicense"])(t.licenseid,a).then((function(e){e&&(t.dialogOnline=!1,t.$message("正在升级中"))})).catch((function(e){return!1}))}}))},offlineLictool:function(e){Object(s["offlineServer"])(e.attributes.license).then((function(t){window.open(window.location.origin+"/licsetup?license="+e.attributes.license,"_blank")}))},downlictool:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(s["uploadLicense"])(e.appid,e.appsecret);case 2:a=t.sent,a&&window.open(window.location.origin+"/lictool?appid="+e.appid+"&appsecret="+e.appsecret,"_blank");case 4:case"end":return t.stop()}}),t)})))()},handleDetail:function(e,t){this.dialogVisible=!0,this.licensedetail=JSON.stringify(t.attributes.product,null,10)},startDate:function(){this.ruleForm.date2<=this.ruleForm.date1&&""!=this.ruleForm.date2&&null!=this.ruleForm.date2&&(this.$message("采集结束时间要小于开始时间"),this.ruleForm.date1=""),this.ruleForm.date1<Date.now()-2e3&&(this.$message("采集开始时间要大于当前时间"),this.ruleForm.date1="")},endDate:function(){this.ruleForm.date2<=this.ruleForm.date1&&(this.$message("采集结束时间要小于开始时间"),this.ruleForm.date2=""),this.ruleForm.date2<Date.now()-2e3&&(this.$message("采集结束时间要大于当前时间"),this.ruleForm.date2="")}}},u=c,d=(a("4316"),a("2877")),p=Object(d["a"])(u,r,n,!1,null,"655c0d44",null);t["default"]=p.exports},a0b1:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-card",{staticClass:"version-information",attrs:{shadow:"hover"},scopedSlots:e._u([{key:"header",fn:function(){return[a("vab-icon",{attrs:{icon:"information-line"}}),e._v(" 信息 "),a("el-tag",{staticClass:"card-header-tag"},[e._v("部署时间:"+e._s(e.updateTime))])]},proxy:!0}])},[a("el-scrollbar",[a("table",{staticClass:"table"},[a("tr",[a("td",[e._v("vue")]),a("td",[e._v(e._s(e.dependencies["vue"]))]),a("td",[e._v("@vue/cli")]),a("td",[e._v(e._s(e.devDependencies["@vue/cli-service"]))])]),a("tr",[a("td",[e._v("vuex")]),a("td",[e._v(e._s(e.dependencies["vuex"]))]),a("td",[e._v("vue-router")]),a("td",[e._v(e._s(e.dependencies["vue-router"]))])]),a("tr",[a("td",[e._v("element-ui")]),a("td",[e._v(e._s(e.dependencies["element-ui"]))]),a("td",[e._v("axios")]),a("td",[e._v(e._s(e.dependencies["axios"]))])]),a("tr",[a("td",[e._v("授权渠道")]),a("td",{attrs:{colspan:"3"}},[a("el-popover",{attrs:{trigger:"hover",width:"400"},scopedSlots:e._u([{key:"reference",fn:function(){return[a("a",{attrs:{target:"_blank",href:"https://chu1204505056.gitee.io/authorization"}},[a("el-button",{attrs:{type:"primary"}},[e._v("购买源码 ￥699")])],1)]},proxy:!0}])},[a("div",{staticStyle:{"text-align":"center"}},[a("el-image",{staticStyle:{width:"200px"},attrs:{src:"http://dgiot-1253666439.cos.ap-shanghai-fsi.myqcloud.com/platform/assets/skm.jpg"}}),a("p",{staticStyle:{"font-size":"13px"}},[e._v(" 付款后加QQ 1204505056 获取下载权限，是否购买pro填是即可(赠送VIP专属问题解答群，包含PRO详细文档、PRO基础版源码、PRO标准版源码、绑定git后拥有随时克隆及更新权限，拥有完整的登录鉴权和前后端多种配置的动态路由流程，仅限自己及团队使用，源码不得二次出售转卖，恶意分享取消使用资格 ) ")])],1)]),a("el-popover",{attrs:{trigger:"hover",width:"400"},scopedSlots:e._u([{key:"reference",fn:function(){return[a("el-button",{attrs:{type:"primary"}},[e._v("开源版技术支持")])]},proxy:!0}])},[a("div",{staticStyle:{"text-align":"center"}},[a("el-image",{staticStyle:{width:"200px"},attrs:{src:"http://dgiot-1253666439.cos.ap-shanghai-fsi.myqcloud.com/platform/assets/skm3.jpg"}}),a("p",{staticStyle:{"font-size":"13px"}},[e._v(" 付款后加QQ 1204505056 获取VIP群加群资格，是否购买VIP填是即可(包含开源版及PRO版技术支持、开源版及PRO版问题解答、开源版详细文档，PRO版用户(已付699)无需购买此项!!!(此项不包含PRO版源码)) ")])],1)]),a("a",{attrs:{href:"https://github.com/chuzhixin/vue-admin-beautiful/",target:"_blank"}},[a("el-button",{attrs:{type:"warning"}},[e._v("开源免费版")])],1)],1)])])])],1)},n=[],i=a("9224"),s={data:function(){return{updateTime:"Thu Apr 01 2021 07:25:47 GMT+0000 (Coordinated Universal Time)",dependencies:i["a"],devDependencies:i["b"]}}},o=s,l=(a("5f34"),a("2877")),c=Object(l["a"])(o,r,n,!1,null,"b15b7220",null);t["default"]=c.exports},a200:function(e,t,a){},a4d4:function(e,t,a){},bfef:function(e,t,a){},c2fd:function(e,t,a){},c6c1:function(e,t,a){"use strict";a("891a")},d5b1:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"platform"},[a("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-row",[a("el-col",{staticClass:"card-panel-col",attrs:{lg:{span:"4-8"},xs:24,sm:24,md:8,xl:4}},[a("el-card",{staticClass:"box-card"},[a("el-col",{staticClass:"card-left",attrs:{span:12}},[a("vab-icon",{attrs:{icon:"projector-2-fill"}})],1),a("el-col",{staticClass:"card-right",attrs:{span:12}},[a("p",[e._v(e._s(e.$translateTitle("home.app_count")))]),a("p",[e._v(e._s(e.project_count))])])],1)],1),a("el-col",{staticClass:"card-panel-col",attrs:{lg:{span:"4-8"},xs:24,sm:24,md:8,xl:4}},[a("el-card",{staticClass:"box-card"},[a("el-col",{attrs:{span:12}},[a("vab-icon",{attrs:{icon:"projector-fill"}})],1),a("el-col",{staticClass:"card-right",attrs:{span:12}},[a("p",[e._v(e._s(e.$translateTitle("home.pro_count")))]),a("p",[e._v(e._s(e.product_count))])])],1)],1),a("el-col",{staticClass:"card-panel-col",attrs:{lg:{span:"4-8"},xs:24,sm:24,md:8,xl:4}},[a("el-card",{staticClass:"box-card"},[a("el-col",{attrs:{span:12}},[a("vab-icon",{attrs:{icon:"apps-fill"}})],1),a("el-col",{staticClass:"card-right",attrs:{span:12}},[a("p",[e._v(e._s(e.$translateTitle("home.app_count")))]),a("p",[e._v(e._s(e.app_count))])])],1)],1),a("el-col",{staticClass:"card-panel-col",attrs:{xs:24,sm:24,md:8,lg:{span:"4-8"},xl:4}},[a("el-card",{staticClass:"box-card"},[a("el-col",{attrs:{span:12}},[a("vab-icon",{attrs:{icon:"device-recover-fill"}})],1),a("el-col",{staticClass:"card-right",attrs:{span:12}},[a("p",[e._v(e._s(e.$translateTitle("home.dev_count")))]),a("p",[e._v(e._s(e.dev_count))])])],1)],1),a("el-col",{staticClass:"card-panel-col",attrs:{xs:24,sm:24,md:8,lg:{span:"4-8"},xl:4}},[a("el-card",{staticClass:"box-card"},[a("el-col",{attrs:{span:12}},[a("vab-icon",{attrs:{icon:"bar-chart-2-line"}})],1),a("el-col",{staticClass:"card-right",attrs:{span:12}},[a("p",[e._v(e._s(e.$translateTitle("home.dev_online")))]),a("p",[e._v(e._s(e.dev_online_count))])])],1)],1)],1),a("el-row",e._l(e.projectList,(function(t){return a("el-col",{key:t.id,attrs:{xs:12,sm:8,md:8,lg:6,xl:4}},[a("el-card",{staticClass:"box-card",attrs:{shadow:"always"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",{staticStyle:{"font-weight":"bolder"}},[e._v(e._s(t.title))])]),a("div",{staticClass:"text item"},[a("span",[e._v("工程单位：")]),a("span",[e._v(e._s(t.userUnit))])]),a("div",{staticClass:"text item"},[a("span",[e._v("服务规模：")]),a("span",[e._v(e._s(t.scale))])]),a("div",{staticClass:"text item"},[a("span",[e._v("所属行业：")]),a("span",[e._v(e._s(t.category))])]),a("div",{staticClass:"text item"},[a("span",[e._v("更新时间：")]),a("span",[e._v(" "+e._s(new Date(t.updatedAt).toLocaleDateString()+" "+new Date(t.updatedAt).toLocaleTimeString())+" ")])]),a("div",{staticClass:"text item",staticStyle:{float:"right"}},[a("el-button-group",[a("el-button",{staticStyle:{"margin-right":"3px"},attrs:{size:"mini",type:"success"},on:{click:function(a){return e.Gotoproduct(t)}}},[e._v(" 查看产品 ")]),a("el-button",{attrs:{size:"mini",type:"primary",target:"_blank"},on:{click:function(a){return e.handleClickVisit(t)}}},[e._v(" 进入登录 ")])],1)],1)])],1)})),1)],1)],1)},n=[],i=a("1da1"),s=(a("96cf"),a("dcc6"),a("58dd")),o={name:"Index",components:{},data:function(){return{activeName:"devchart",filterBox:"filterBox-first",project_count:"-",app_count:"-",product_count:"-",dev_count:"-",dev_active_count:"-",dev_online_count:"-",projectList:[],formInline:{starttime:"",project:""}}},mounted:function(){this.getAllAxios()},activated:function(){},methods:{getAllAxios:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,r,n,i,o,l,c,u,d,p,m,f,g,b;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$baseColorfullLoading(1,"批量请求数据中"),a={count:"objectId",limit:1,skip:0,where:{}},t.t0=e,t.next=5,Object(s["dev_count"])(a);case 5:return t.t1=t.sent,t.next=8,Object(s["app_count"])(a);case 8:return t.t2=t.sent,t.next=11,Object(s["product_count"])(a);case 11:return t.t3=t.sent,t.next=14,Object(s["Project_count"])(a);case 14:return t.t4=t.sent,t.next=17,Object(s["dev_active_count"])(Object.assign(a,{where:{status:"ACTIVE"}}));case 17:return t.t5=t.sent,t.next=20,Object(s["dev_online_count"])(Object.assign(a,{where:{status:"ONLINE"}}));case 20:return t.t6=t.sent,t.t7={dev_num:t.t1,app_num:t.t2,Product_num:t.t3,Project_num:t.t4,dev_active_num:t.t5,dev_online_num:t.t6},t.next=24,t.t0.$moreHttp.call(t.t0,t.t7);case 24:r=t.sent,n=r.dev_num,i=void 0===n?{count:0}:n,o=r.Product_num,l=void 0===o?{count:0}:o,c=r.Project_num,u=void 0===c?{count:0}:c,d=r.app_num,p=void 0===d?{count:0}:d,m=r.dev_active_num,f=void 0===m?{count:0}:m,g=r.dev_online_num,b=void 0===g?{count:0}:g,e.$baseColorfullLoading().close(),e.dev_count=i.count||0,e.product_count=l.count,e.project_count=u.count,e.app_count=p.count,e.dev_active_count=f.count,e.dev_online_count=b.count;case 33:case"end":return t.stop()}}),t)})))()},handleChange:function(){},handleClickVisit:function(e){var t=window.location.origin+"/iot/"+e.attributes.productIdentifier+"#/login";window.open(t,"__blank")},Gotoproduct:function(e){this.$router.push({path:"/product",query:{project:e.id}})}}},l=o,c=(a("c6c1"),a("2877")),u=Object(c["a"])(l,r,n,!1,null,"2791c37a",null);t["default"]=u.exports},db64:function(e,t,a){"use strict";a.r(t);var r,n,i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"things-parse"},[a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:4}},[a("el-table",{ref:"singleTable",staticStyle:{width:"100%"},attrs:{data:e.AllDict,"highlight-current-row":""},on:{"current-change":e.handleCurrentChange}},[a("el-table-column",{attrs:{prop:"objectId",label:"Id"}}),a("el-table-column",{attrs:{prop:"name",label:"产品名称"}})],1)],1),a("el-col",{attrs:{span:20}},[a("div",{staticClass:"protolheader"},[a("el-form",{ref:"thingsParseModel",attrs:{inline:!0,model:e.thingsParseModel,rules:e.thingsParseRules}},[a("el-form-item",{attrs:{label:e.$translateTitle("product.protocolname"),prop:"name"}},[a("el-input",{attrs:{placeholder:e.$translateTitle("product.protocolname")},model:{value:e.thingsParseModel.name,callback:function(t){e.$set(e.thingsParseModel,"name",t)},expression:"thingsParseModel.name"}})],1),a("el-form-item",{attrs:{label:e.$translateTitle("plugins.version")}},[a("el-input",{attrs:{placeholder:e.$translateTitle("plugins.version")},model:{value:e.thingsParseModel.version,callback:function(t){e.$set(e.thingsParseModel,"version",t)},expression:"thingsParseModel.version"}})],1),a("el-form-item",{attrs:{label:e.$translateTitle("developer.describe")}},[a("el-input",{attrs:{placeholder:e.$translateTitle("developer.describe")},model:{value:e.thingsParseModel.desc,callback:function(t){e.$set(e.thingsParseModel,"desc",t)},expression:"thingsParseModel.desc"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.subAce("thingsParseModel",!0)}}},[e._v(" "+e._s(e.$translateTitle("product.preservation"))+" ")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.subAce1("thingsParseModel")}}},[e._v(" 设为公共 ")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.chaxun}},[e._v(" "+e._s(e.$translateTitle("product.publicagreementlibrary"))+" ")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.protol}},[e._v(" "+e._s(e.$translateTitle("product.compile"))+" ")]),a("el-button",{attrs:{type:"success",size:"small"},on:{click:e.updatesubdialog}},[e._v(" 热加载 ")])],1)],1)],1),a("el-dialog",{attrs:{visible:e.protoldialog,"close-on-click-modal":!1,title:"通道热加载",width:"50%"},on:{"update:visible":function(t){e.protoldialog=t}}},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.protolchannel,"row-class-name":e.getChannelEnable},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.channelnumber")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.objectId))])]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.channelname")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.name))])]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.channeladdr")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s("channel/"+t.row.objectId))])]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.channeltype")},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.type?a("span",[e._v(" "+e._s(e.$translateTitle("developer.collectionchannel"))+" ")]):a("span",[e._v(" "+e._s(e.$translateTitle("developer.resourcechannel"))+" ")])]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.servicetype")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.cType))])]}}])})],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.updateAllChannel}},[e._v("确定")])],1)],1),a("el-dialog",{attrs:{title:e.$translateTitle("product.publicagreementlibrary"),visible:e.dialogTableVisible,"close-on-click-modal":!1,width:"50%"},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[a("el-table",{staticStyle:{width:"100%","margin-top":"20px","text-align":"center"},attrs:{data:e.gridData}},[a("el-table-column",{attrs:{label:e.$translateTitle("product.protocolname"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.data.name))])]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("plugins.version"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.data.version))])]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.describe"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.data.desc))])]}}])}),a("el-table-column",{attrs:{label:"创建时间",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.utc2beijing(t.row.createdAt)))])]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.operation"),align:"center",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.editordata(t.row)}}},[e._v(" "+e._s(e.$translateTitle("product.clone"))+" ")]),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.deletedata(t.row.ObjectId)}}},[e._v(" "+e._s(e.$translateTitle("developer.delete"))+" ")])]}}])})],1),a("div",{staticClass:"elpagination",staticStyle:{padding:"20px 0"}},[a("el-pagination",{attrs:{"page-sizes":[10,20,30,50],"page-size":e.decoderlength,total:e.decodertotal,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.decoderSizeChange,"current-change":e.devicerCurrentChange}})],1)],1),a("div",[a("div",{staticStyle:{background:"#ffffff"}},[a("label",{attrs:{id:"plug-name"}})]),a("pre",{staticClass:"ace_editor",staticStyle:{"min-height":"600px","margin-bottom":"0"},attrs:{id:"editor"}},[a("textarea",{staticClass:"ace_text-input"})]),a("div",{staticStyle:{background:"#ffffff"}},[a("label",{attrs:{id:"plug-name"}})]),a("div",{staticStyle:{padding:"5px","margin-right":"80px",color:"#c2be9e",background:"#272822","border-top":"1px solid #dddddd"}},[a("span",[e._v(e._s(e.$translateTitle("product.controloutput")))])]),a("pre",{staticClass:"ace_editor",staticStyle:{"min-height":"300px","margin-top":"0","margin-bottom":"0"},attrs:{id:"editor2"}},[a("textarea",{staticClass:"ace_text-input"})])])],1)],1)],1)},s=[],o=a("1da1"),l=(a("d81d"),a("b0c0"),a("4de4"),a("99af"),a("d3b7"),a("3ca3"),a("ddb0"),a("5319"),a("ac1f"),a("96cf"),a("1285")),c=a("89e8"),u=a("e0e9"),d=a("7212"),p=a("bb22"),m="",f="",g={name:"ThingsParse",props:{},data:function(){var e=function(e,t,a){var r=/[0-9a-zA-Z]/;r.test(t)?a():a(new Error("协议名称由数字和字母组合"))};return{currentRow:null,AllDict:[],productName:"",form:{Productname:"",ProductKey:"",ProductAll:0},decoderstart:0,decodertotal:0,decoderlength:10,protolchannel:[],productdetail:{},thingsParseModel:{name:"",version:"",desc:"",resource:!1},thingsParseRules:{name:[{required:!0,message:"请输入协议名称",trigger:"blur"},{validator:e,trigger:"blur"}]},dialogTableVisible:!1,gridData:[],protoldialog:!1}},computed:{tableFilterData:function(){return null}},mounted:function(){n=ace.edit("editor2"),n.session.setMode("ace/mode/text"),n.setTheme("ace/theme/monokai"),n.setReadOnly(!0),n.setOptions({enableBasicAutocompletion:!0,enableSnippets:!0,enableLiveAutocompletion:!0}),this.Industry(),this.getAllunit(),this.getAllDict(),this.$route.query.activeName&&(this.activeName=this.$route.query.activeName)},methods:{handleCurrentChange:function(e){this.currentRow=e,this.$refs.singleTable.setCurrentRow(e),this.getProDetail(e.objectId)},getAllDict:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={where:{category:{$nin:["Evidence"]}},order:"updatedAt"},t.next=3,Object(d["queryProduct"])(a);case 3:r=t.sent,n=r.reults,n&&(e.AllDict=results,e.handleCurrentChange(results[0]));case 6:case"end":return t.stop()}}),t)})))()},Industry:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.option=[],t.next=3,e.$getIndustry("category",100);case 3:a=t.sent,r=a.results,r.map((function(t){var a={};a.value=t.type,a.label=t.data.CategoryName,a.id=t.data.Id,a.parentid=t.data.SuperId,e.option.push(a)}));case 6:case"end":return t.stop()}}),t)})))()},getProDetail:function(e){var t=this;this.productId=e,r=ace.edit("editor"),r.session.setMode("ace/mode/erlang"),r.setTheme("ace/theme/monokai"),r.setOptions({enableBasicAutocompletion:!0,enableSnippets:!0,enableLiveAutocompletion:!0}),this.$get_object("Product",e).then((function(e){if(e){for(var a in t.productName=e.name,e)t.productdetail[a]=e[a];t.option.map((function(e){t.productdetail.category==e.value&&(t.productdetail.category=e.label)})),t.productdetail.createdAt=t.utc2beijing(e.createdAt),t.productdetail.id=e.id,t.dynamicReg=e.dynamicReg,t.productdetail.isshow=0,t.form.Productname=e.name,t.ProductSecret=e.productSecret,t.form.Productkey=t.productId,t.productimg=e.icon,e.decoder?(f=e.decoder.code,t.thingsParseModel.name=e.decoder.name,t.thingsParseModel.version=e.decoder.version,t.thingsParseModel.desc=e.decoder.desc):(t.$baseMessage("暂无decoder,将显示默认值","warning",!1),f="JSUlLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQolJSUgQGNvcHlyaWdodCAoQykgMjAxOCwgPHNodXdhPgolJSUgQGRvYwolJSUg5Y2P6K6u6Kej5p6QRGVtbwolJSUgQGVuZAolJSUgQ3JlYXRlZCA6IDA4LiDljYHkuIDmnIggMjAxOCAxNDo0OQolJSUtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCi1tb2R1bGUoc2h1d2FfZGVtb19kZWNvZGVyKS4KLWF1dGhvcigic2h1d2EiKS4KLWRlZmluZShNU0dfVFlQRSwgPDwiREVNTyI+PikuCi1wcm90b2NvbChbPDwiREVNTyI+Pl0pLgoKLWV4cG9ydChbcGFyc2VfZnJhbWUvMiwgdG9fZnJhbWUvMV0pLgoKCnBhcnNlX2ZyYW1lKEJ1ZmYsIE9wdHMpIC0+CiAgICBwYXJzZV9mcmFtZShCdWZmLCBbXSwgT3B0cykuCgoKcGFyc2VfZnJhbWUoPDw+PiwgQWNjLCBfT3B0cykgLT4KICAgIHs8PD4+LCBBY2N9OwpwYXJzZV9mcmFtZSg8PDE2IzY4LCBSZXN0L2JpbmFyeT4+ID0gQmluLCBBY2MsIF9PcHRzKSB3aGVuIGJ5dGVfc2l6ZShSZXN0KSA9PCA2IC0+CiAgICB7QmluLCBBY2N9OwpwYXJzZV9mcmFtZSg8PDE2IzY4LCBMZW46MTYvbGl0dGxlLWludGVnZXIsIExlbjoxNi9saXR0bGUtaW50ZWdlciwgMTYjNjgsIFJlc3QvYmluYXJ5Pj4gPSBCaW4sIEFjYywgT3B0cykgLT4KICAgIGNhc2UgYnl0ZV9zaXplKFJlc3QpIC0gMiA+PSBMZW4gb2YKICAgICAgICB0cnVlIC0+CiAgICAgICAgICAgIGNhc2UgUmVzdCBvZgogICAgICAgICAgICAgICAgPDxVc2VyWm9uZTpMZW4vYnl0ZXMsIENyYzo4LCAxNiMxNiwgUmVzdDEvYmluYXJ5Pj4gLT4KICAgICAgICAgICAgICAgICAgICBBY2MxID0KICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBzaHV3YV91dGlsczpnZXRfcGFyaXR5KFVzZXJab25lKSA9Oj0gQ3JjIG9mCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnVlIC0+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRnJhbWUgPSAjewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8PCJtc2d0eXBlIj4+ID0+ID9NU0dfVFlQRSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPDwiZGF0YSI+PiA9PiBVc2VyWm9uZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQWNjICsrIFtGcmFtZV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYWxzZSAtPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFjYwogICAgICAgICAgICAgICAgICAgICAgICBlbmQsCiAgICAgICAgICAgICAgICAgICAgcGFyc2VfZnJhbWUoUmVzdDEsIEFjYzEsIE9wdHMpOwogICAgICAgICAgICAgICAgXyAtPgogICAgICAgICAgICAgICAgICAgIHBhcnNlX2ZyYW1lKFJlc3QsIEFjYywgT3B0cykKICAgICAgICAgICAgZW5kOwogICAgICAgIGZhbHNlIC0+CiAgICAgICAgICAgIHtCaW4sIEFjY30KICAgIGVuZDsKcGFyc2VfZnJhbWUoPDxfOjgsIFJlc3QvYmluYXJ5Pj4sIEFjYywgT3B0cykgLT4KICAgIHBhcnNlX2ZyYW1lKFJlc3QsIEFjYywgT3B0cykuCgoKJSUg57uE6KOF5oiQ5bCB5YyFLCDlj4LmlbDkuLpNYXDlvaLlvI8KdG9fZnJhbWUoI3s8PCJtc2d0eXBlIj4+IDo9ID9NU0dfVFlQRX0gPSBGcmFtZSkgLT4KICAgIFBheWxvYWQgPSB0ZXJtX3RvX2JpbmFyeShGcmFtZSksCiAgICA8PDE2IzAzLCBQYXlsb2FkL2JpbmFyeSwgMTYjMjM+Pi4="),t.productdetail.thing||(t.productdetail.thing={properties:[]}),t.wmxData=t.productdetail.thing.properties.filter((function(e){return e.name&&e.dataType})),r.setValue(Base64.decode(f)),r.gotoLine(r.session.getLength()),t.queryDeviceCount(t.productId)}}))},queryDeviceCount:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(l["getDeviceCountByProduct"])(e);case 2:t.form.ProductAll=a.sent;case 3:case"end":return a.stop()}}),a)})))()},editordata:function(e){this.thingsParseModel.name=e.data.name,this.thingsParseModel.version=e.data.version,this.thingsParseModel.desc=e.data.desc,this.thingsParseModel.resource=e.data.enable,r.setValue(Base64.decode(e.data.code)),this.dialogTableVisible=!1},getAllunit:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.allunit=[],t.next=3,Object(u["getAllunit"])("unit",100);case 3:a=t.sent,r=a.results,e.allunit=r.concat([]),e.allunit.unshift({data:{Name:"无",Symbol:""}});case 7:case"end":return t.stop()}}),t)})))()},subAce:function(e,t){var a=this;this.$refs[e].validate((function(i){if(i){var s={name:e.name,version:e.version,code:Base64.encode(r.getValue()),desc:e.desc},o={decoder:s};a.$update_object("Product",a.productId,o).then((function(e){0==a.issub&&(a.$message({type:"success",message:"保存成功"}),1==t&&(m+="保存成功",n.setValue(m))),a.issub=!0}))}else a.$message({type:"warning",message:"输入格式有误"})}))},subAce1:function(e){var t=this;this.$refs[e].validate((function(e){if(e){var a={where:{"data.name":t.thingsParseModel.name,"data.version":t.thingsParseModel.version}};t.$query_object("Dict",a).then((function(e){e.results&&e.results.length>=1?t.$message("此协议版本已存在"):t.$get_object("Product",t.productId).then((function(e){if(e){var a={name:t.thingsParseModel.name,version:t.thingsParseModel.version,code:Base64.encode(r.getValue()),desc:t.thingsParseModel.desc},n={type:"decoder",data:a,ACL:e.ACL};t.$create_object("Dict",n).then((function(e){e.error?t.$message({type:"error",message:e.error}):t.$message({type:"success",message:"保存到公共协议库成功"})})).catch((function(e){}))}}))}))}else t.$message({type:"warning",message:"输入格式有误"})}))},decoderSizeChange:function(e){this.decoder.length=e,this.chaxun()},devicerCurrentChange:function(e){this.decoderstart=(e-1)*this.decoderlength,this.chaxun()},updateAllChannel:function(){var e=this;if(0==this.multipleSelection.length)this.protoldialog=!1;else{var t=[];this.multipleSelection.map((function(e){t.push(new Promise((function(t,a){return Object(p["subupadte"])(e.id,"update").then((function(e){e&&t(e)})).catch((function(e){a(e)}))})))})),Promise.all(t).then((function(t){e.$message({message:"热加载成功",type:"success"}),t.length==e.multipleSelection.length&&(e.protoldialog=!1)})).catch((function(t){e.$message({message:t,type:"error"})}))}},handleSelectionChange:function(e){this.multipleSelection=e},utc2beijing:function(e){var t=new Date(+new Date(e)+288e5).toISOString().replace(/T/g," ").replace(/\.[\d]{3}Z/,"");return t},getChannelEnable:function(e,t){return 1==e.isEnable?"green_active":"red_active"},deletedata:function(e){var t=this;this.$del_object("Dict",e).then((function(e){e&&(t.$message("成功删除"),t.chaxun())}))},updatesubdialog:function(){var e=this;this.protoldialog=!0;var t="1",a={__type:"Pointer",className:"Product",objectId:this.productId};Object(c["getChannelCountByProduct"])(10,0,a,t).then((function(t){t.count>0?(e.protolchannel=t.results,e.$refs.multipleTable.toggleAllSelection()):(e.protolchannel={},e.$refs.multipleTable.toggleAllSelection())})).catch((function(t){e.$baseMessage("请求出错",t.error,3e3)}))},chaxun:function(){var e=this,t={skip:this.decoderstart,limit:this.decoderlength,order:"-createdAt",where:{type:"decoder"}};this.$query_object("Dict",t).then((function(t){t&&(e.decodertotal=t.count,e.dialogTableVisible=!0,e.gridData=t.results)}))},protol:function(){var e=this,t="";Object(p["Compile"])(Base64.encode(r.getValue())).then((function(a){a&&(e.$message({type:"success",message:"编译成功"}),t="编译成功"+a.mod+"\r\n",e.warningeditror=a.warnings,e.warningeditror.map((function(e){t+=e+"\r\n"})),m+=t,n.setValue(m))})).catch((function(a){e.warningeditror=a.error,e.warningeditror.map((function(e){t+=e+"\r\n"})),m+=t,n.setValue(m)}))}}},b=g,h=(a("ef93"),a("2877")),v=Object(h["a"])(b,i,s,!1,null,null,null);t["default"]=v.exports},e116:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"mqttws"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.msg,expression:"msg"}],attrs:{id:"msg",type:"text"},domProps:{value:e.msg},on:{input:function(t){t.target.composing||(e.msg=t.target.value)}}}),a("input",{attrs:{type:"button",value:"Send"},on:{click:e.send}}),a("input",{attrs:{type:"button",value:"Start"},on:{click:e.start}}),a("input",{attrs:{type:"button",value:"Stop"},on:{click:e.stop}})])},n=[],i={name:"Mqttws",data:function(){return{host:location.hostname,port:5080,clientId:"C_"+(new Date).getTime(),userName:"test",password:"test123",keepAlive:null,cleanSession:!0,useSSL:!1,client:{},options:{},msg:"order",count:0}},created:function(){this.client=new Paho.MQTT.Client(this.host,this.port,this.clientId);var e=this.client,t=this.options={invocationContext:{host:this.host,port:this.port,path:e.path,clientId:this.clientId},timeout:5,keepAliveInterval:50,cleanSession:!1,useSSL:!1,userName:"test",password:"test123",onSuccess:function(){e.subscribe("001/in")},onFailure:function(e){}};this.client.connect(t),this.client.onConnectionLost=this.onConnectionLost,this.client.onMessageArrived=this.onMessageArrived},methods:{onConnectionLost:function(e){e.errorCode},onMessageArrived:function(e){},onConnect:function(){this.client.subscribe("001/in")},send:function(){var e=this.msg;if(e){e="{time:"+new Date+", content:"+e+", from: web console}";var t=new Paho.MQTT.Message(e);t.destinationName=this.topic,this.client.send(t),this.msg=""}},start:function(){window.tester=window.setInterval(function(){if(this.client.isConnected){var e="{time:"+new Date+", content:"+this.count+++", from: web console}",t=new Paho.MQTT.Message(e);t.destinationName=this.topic,this.client.send(t)}}.bind(this),1e3)},stop:function(){window.clearInterval(window.tester)}}},s=i,o=a("2877"),l=Object(o["a"])(s,r,n,!1,null,null,null);t["default"]=l.exports},e88d:function(e,t,a){e.exports={"menu-color":"rgba(255,255,255,.95)","menu-color-active":"rgba(255,255,255,.95)","menu-background":"#282c34","column-second-menu-background":"#fff"}},ebb4:function(e,t,a){},ef93:function(e,t,a){"use strict";a("e88d")},efe1:function(e,t,a){"use strict";a("686d")},f037:function(e,t,a){},f120:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",e._l(e.iconList,(function(t,r){return a("el-col",{key:r,attrs:{lg:3,md:3,sm:6,xl:3,xs:12}},[t.click&&"changeTheme"===t.click?a("el-card",{staticClass:"icon-panel",attrs:{shadow:"hover"},nativeOn:{click:function(t){return e.changeTheme(t)}}},[a("vab-icon",{style:{color:t.color},attrs:{icon:t.icon}}),a("p",[e._v(e._s(t.title))])],1):t.click&&"randomTheme"===t.click?a("el-card",{staticClass:"icon-panel",attrs:{shadow:"hover"},nativeOn:{click:function(t){return e.randomTheme(t)}}},[a("vab-icon",{style:{color:t.color},attrs:{icon:t.icon}}),a("p",[e._v(e._s(t.title))])],1):t.click&&"handleMore"===t.click?a("el-card",{staticClass:"icon-panel",attrs:{shadow:"hover"},nativeOn:{click:function(t){return e.handleMore(t)}}},[a("vab-icon",{style:{color:t.color},attrs:{icon:t.icon}}),a("p",[e._v(e._s(t.title))])],1):a("vab-link",{attrs:{to:t.link,target:"_blank"}},[a("el-card",{staticClass:"icon-panel",attrs:{shadow:"hover"}},[a("vab-icon",{style:{color:t.color},attrs:{icon:t.icon}}),a("p",[e._v(e._s(t.title))])],1)],1)],1)})),1)},n=[],i={data:function(){return{iconList:[{click:"randomTheme",icon:"apps-line",title:"随机换肤",link:"",color:"#95de64"},{click:"changeTheme",icon:"brush-2-line",title:"主题配置",link:"",color:"#69c0ff"},{icon:"baidu-line",title:"百度一下",link:"https://www.baidu.com/s?ie=utf-8&f=8&rsv_bp=1&tn=baidu&wd=GitHub-chuzhixin%2Fvue-admin-beautiful%3A%F0%9F%9A%80vue-admi&oq=GitHub-chuzhixin%252Fvue-admin-beautiful%253A%25F0%259F%259A%2580vue-admi...&rsv_pq=a66fa3b80007fbd4&rsv_t=e8e0KMl6if8HMAuFVY8LMAEV2XLPQ%2F%2F29GPh2qVDUL20gxXFWjHTwkD%2BNhE&rqlang=cn&rsv_enter=0&rsv_dl=tb&rsv_btype=t&inputT=1163&rsv_sug3=104&rsv_sug4=1821&bs=GitHub-chuzhixin%2Fvue-admin-beautiful%3A%F0%9F%9A%80vue-admi...",color:"#1890FF"},{icon:"video-line",title:"视频播放器",link:"/vab/player",color:"#ffc069"},{icon:"table-line",title:"表格",link:"/vab/table/comprehensiveTable",color:"#5cdbd3"},{icon:"code-box-line",title:"源码",link:"https://github.com/chuzhixin/vue-admin-beautiful",color:"#b37feb"},{click:"handleMore",icon:"notification-2-line",title:"公告",link:"",color:"#ff85c0"},{click:"handleMore",icon:"gift-line",title:"礼物",link:"",color:"#ffd666"}]}},methods:{changeTheme:function(){this.$baseEventBus.$emit("theme")},handleMore:function(){this.$baseAlert("敬请期待！")},randomTheme:function(){this.$baseEventBus.$emit("random-theme")}}},s=i,o=(a("7cc9"),a("2877")),l=Object(o["a"])(s,r,n,!1,null,"b04d695c",null);t["default"]=l.exports},f431:function(e,t,a){},f466:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"order"},[a("el-card",{staticClass:"order-card1",attrs:{shadow:"hover"},scopedSlots:e._u([{key:"header",fn:function(){return[a("vab-icon",{attrs:{icon:"shopping-bag-2-line"}}),e._v(" 商品 ")]},proxy:!0}])},[a("el-row",{staticClass:"order-card1-content"},[a("el-col",{attrs:{span:8}},[a("p",[e._v("已售数量")]),a("h1",[a("vab-count",{attrs:{decimals:e.countConfig.decimals,duration:e.countConfig.duration,"end-val":e.countConfig.endVal,prefix:e.countConfig.prefix,separator:e.countConfig.separator,"start-val":e.countConfig.startVal,suffix:e.countConfig.suffix}})],1)]),a("el-col",{attrs:{span:8}},[a("p",[e._v("待售数量")]),a("h1",[a("vab-count",{attrs:{decimals:e.countConfig.decimals,duration:e.countConfig.duration,"end-val":e.countConfig.endVal,prefix:e.countConfig.prefix,separator:e.countConfig.separator,"start-val":e.countConfig.startVal,suffix:e.countConfig.suffix}})],1)]),a("el-col",{attrs:{span:8}},[a("p",[e._v("好评度")]),a("h1",[e._v("99%")])])],1)],1),a("el-card",{staticClass:"order-card2",attrs:{shadow:"hover"},scopedSlots:e._u([{key:"header",fn:function(){return[a("span",[a("vab-icon",{attrs:{icon:"list-unordered"}}),e._v(" 订单 ")],1)]},proxy:!0}])},[a("el-row",{staticClass:"order-card2-content"},[a("el-col",{attrs:{span:12}},[a("p",[e._v("已完成订单")]),a("h1",[a("vab-count",{attrs:{decimals:e.countConfig.decimals,duration:e.countConfig.duration,"end-val":1.5*e.countConfig.endVal,prefix:e.countConfig.prefix,separator:e.countConfig.separator,"start-val":e.countConfig.startVal,suffix:e.countConfig.suffix}})],1)]),a("el-col",{attrs:{span:12}},[a("p",[e._v("计划完成订单")]),a("h1",[a("vab-count",{attrs:{decimals:e.countConfig.decimals,duration:e.countConfig.duration,"end-val":2.5*e.countConfig.endVal,prefix:e.countConfig.prefix,separator:e.countConfig.separator,"start-val":e.countConfig.startVal,suffix:e.countConfig.suffix}})],1)]),a("el-col",{attrs:{span:24}},[a("vab-chart",{staticClass:"order-chart",attrs:{"init-options":e.initOptions,options:e.options,theme:"vab-echarts-theme"}})],1)],1)],1)],1)},n=[],i=a("55fd"),s=a("0dca"),o={components:{VabCount:s["default"],VabChart:i["default"]},data:function(){var e=["#9E87FF","#73DDFF","#fe9a8b","#F56948","#9E87FF"];return{countConfig:{startVal:0,endVal:_.random(1e3,6e3),decimals:0,prefix:"",suffix:"",separator:",",duration:5e3},initOptions:{renderer:"svg"},options:{tooltip:{trigger:"axis",extraCssText:"z-index:1"},grid:{left:"3%",containLabel:!0},xAxis:[{type:"category",data:["1季度","2季度","3季度","4季度"],axisLine:{lineStyle:{color:"#DCE2E8"}},axisTick:{show:!1},axisLabel:{interval:0,color:"#556677",fontSize:12,margin:15},axisPointer:{label:{padding:[0,0,10,0],margin:15,fontSize:12,backgroundColor:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"#fff"},{offset:.86,color:"#fff"},{offset:.86,color:"#33c0cd"},{offset:1,color:"#33c0cd"}],global:!1}}},boundaryGap:!1}],yAxis:[{type:"value",axisTick:{show:!1},axisLine:{show:!0,lineStyle:{color:"#DCE2E8"}},axisLabel:{color:"#556677"},splitLine:{show:!1}}],series:[{name:"已完成订单",type:"line",data:[1345,2100,1330,2901],symbolSize:1,symbol:"circle",smooth:!0,yAxisIndex:0,showSymbol:!1,lineStyle:{width:5,color:new i["default"].graphic.LinearGradient(0,1,0,0,[{offset:0,color:"#9effff"},{offset:1,color:"#9E87FF"}]),shadowColor:"rgba(158,135,255, 0.3)",shadowBlur:10,shadowOffsetY:20},itemStyle:{color:e[0],borderColor:e[0]}},{name:"未完成订单",type:"line",data:[1905,1020,3330,512],symbolSize:1,symbol:"circle",smooth:!0,yAxisIndex:0,showSymbol:!1,lineStyle:{width:5,color:new i["default"].graphic.LinearGradient(1,1,0,0,[{offset:0,color:"#73DD39"},{offset:1,color:"#73DDFF"}]),shadowColor:"rgba(115,221,255, 0.3)",shadowBlur:10,shadowOffsetY:20},itemStyle:{color:e[1],borderColor:e[1]}}]}}}},l=o,c=(a("3ab9"),a("2877")),u=Object(c["a"])(l,r,n,!1,null,"61f29aaf",null);t["default"]=u.exports},f84e:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-card",{attrs:{shadow:"hover"},scopedSlots:e._u([{key:"header",fn:function(){return[a("vab-icon",{attrs:{icon:"send-plane-2-line"}}),e._v(" 计划 "),a("el-tag",{staticClass:"card-header-tag",attrs:{type:"success"}},[e._v(" 祝用框架的小伙伴都能住上别墅，开上保时捷 ")])]},proxy:!0}])},[a("el-table",{attrs:{data:e.tableData,"row-key":"title",height:"283px"}},[a("el-table-column",{attrs:{align:"center",label:"拖拽",width:"50px"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("vab-icon",{staticStyle:{cursor:"pointer"},attrs:{icon:"drag-move-line"}})]}}])}),a("el-table-column",{attrs:{width:"20px"}}),a("el-table-column",{attrs:{prop:"title",label:"目标",width:"230px"}}),a("el-table-column",{attrs:{label:"进度",width:"220px"},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.row;return[a("el-progress",{attrs:{percentage:t.percentage,color:t.color}})]}}])}),a("el-table-column",{attrs:{width:"50px"}}),a("el-table-column",{attrs:{prop:"endTIme",label:"完成时间"}})],1)],1)},n=[],i=(a("a434"),{data:function(){return{tableData:[{title:"帮助中小企业盈利1个亿",endTIme:"2099-12-31",percentage:50,color:"#95de64"},{title:"帮助10万个人",endTIme:"2029-12-31",percentage:8,color:"#69c0ff"},{title:"交个帅气的男朋友",endTIme:"2021-12-31",percentage:76,color:"#1890FF"},{title:"vue-admin-beautiful标星过1K",endTIme:"2020-03-31",percentage:100,color:"#ffc069"},{title:"活到老，学到老",endTIme:"2094-12-16",percentage:25,color:"#5cdbd3"},{title:"变成像尤雨溪一样优秀的人",endTIme:"此生无望",percentage:1,color:"#b37feb"}]}},mounted:function(){var e=document.querySelector(".el-table__body-wrapper tbody"),t=this;Sortable.create(e,{onEnd:function(e){var a=e.newIndex,r=e.oldIndex,n=t.tableData.splice(r,1)[0];t.tableData.splice(a,0,n)}})}}),s=i,o=a("2877"),l=Object(o["a"])(s,r,n,!1,null,null,null);t["default"]=l.exports},f8ec:function(e,t,a){"use strict";a.r(t);var r,n,i,s,o,l,c,u=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"editproduct"},[a("div",{staticClass:"editheader"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/roles/product"}}},[e._v(" "+e._s(e.$translateTitle("route.产品管理"))+" ")]),a("el-breadcrumb-item",[e._v(" "+e._s(e.$translateTitle("route.产品详情"))+" ")])],1),a("div",{staticClass:"product"},[a("ul",[a("li",[a("span",[e._v("产品名称:")]),a("span",[e._v(e._s(e.productName))])]),a("li",[a("span",[e._v("ProductSecret:")]),0==e.isshow?a("span",[e._v(" ******************** "),a("el-link",{staticStyle:{"margin-left":"5px",cursor:"pointer"},attrs:{underline:!1,type:"primary"},on:{click:function(t){e.isshow=!0}}},[e._v(" "+e._s(e.$translateTitle("product.display"))+" ")])],1):a("span",[e._v(" "+e._s(e.ProductSecret)+" "),a("el-link",{staticStyle:{"margin-left":"5px",cursor:"pointer"},attrs:{underline:!1,type:"primary"},on:{click:function(t){e.isshow=!1}}},[e._v(" "+e._s(e.$translateTitle("product.hidden"))+" ")])],1)]),a("li",[a("span",[e._v(e._s(e.$translateTitle("product.numberofequipment"))+":")]),a("span",[e._v(" "+e._s(e.form.ProductAll)+" "),a("el-link",{staticStyle:{"margin-left":"10px","font-size":"16px"},attrs:{underline:!1,type:"primary"},on:{click:e.goToDevices}},[e._v(" "+e._s(e.$translateTitle("product.gotoequipment"))+" ")])],1)]),a("li",[a("div",{staticClass:"block"},[e.productimg?a("el-image",{staticStyle:{position:"relative",top:"-40px","max-width":"200px",height:"auto"},attrs:{src:e.productimg}},[a("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[a("i",{staticClass:"el-icon-picture-outline"})])]):e._e()],1)])])])],1),a("div",[a("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:e.$translateTitle("product.productinformation"),name:"first"}},[a("div",{staticStyle:{"box-sizing":"border-box",padding:"10px",background:"#ffffff"}},[a("div",{staticClass:"addtopic",staticStyle:{"margin-bottom":"10px","text-align":"right"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.exportProduct}},[e._v(" "+e._s(e.$translateTitle("product.exportpro"))+" ")])],1),a("div",[a("table",{staticClass:"mailtable",staticStyle:{width:"100%"},attrs:{border:"0",cellspacing:"0",cellpadding:"0"}},[a("tr",[a("td",{staticClass:"cloumn notbottom"},[e._v(" "+e._s(e.$translateTitle("product.productname"))+" ")]),a("td",{staticClass:"notbottom"},[e._v(e._s(e.productdetail.name))]),a("td",{staticClass:"cloumn notbottom"},[e._v(" "+e._s(e.$translateTitle("product.nodetype"))+" ")]),1==e.productdetail.nodeType?a("td",{staticClass:"notbottom"},[e._v(" "+e._s(e.$translateTitle("product.gateway"))+" ")]):a("td",{staticClass:"notbottom"},[e._v(" "+e._s(e.$translateTitle("product.equipment"))+" ")]),a("td",{staticClass:"cloumn notbottom"},[e._v(" "+e._s(e.$translateTitle("product.addingtime"))+" ")]),a("td",[e._v(e._s(e.productdetail.createdAt))])]),a("tr",[a("td",{staticClass:"cloumn notbottom"},[e._v(" "+e._s(e.$translateTitle("product.classification"))+" ")]),a("td",{staticClass:"notbottom"},[e._v(e._s(e.productdetail.category))]),a("td",{staticClass:"cloumn notbottom"},[e._v(" "+e._s(e.$translateTitle("product.dynamicregistration"))+" "),a("el-tooltip",{staticStyle:{"margin-left":"5px",color:"#cccccc"},attrs:{content:e.$translateTitle("product.text1"),placement:"top",effect:"light"}},[a("i",{staticClass:"el-icon-question"})])],1),a("td",{staticClass:"notbottom"},[0==e.dynamicReg?a("span",{staticStyle:{color:"#cccccc"}},[e._v(" "+e._s(e.$translateTitle("product.close"))+" ")]):a("span",[e._v(e._s(e.$translateTitle("product.open")))]),a("el-switch",{attrs:{"active-value":!0,"inactive-value":!1,"active-color":"#5eb058","inactive-color":"#cccccc"},on:{change:function(t){return e.handelUpdate(t,e.dynamicReg)}},model:{value:e.dynamicReg,callback:function(t){e.dynamicReg=t},expression:"dynamicReg"}})],1),a("td",{staticClass:"cloumn notbottom"},[e._v(" "+e._s(e.$translateTitle("product.networking"))+" ")]),"CELLULAR"==e.productdetail.netType?a("td",{staticClass:"notbottom"},[e._v(" 蜂窝(2G/3G/4G) ")]):"WIFI"==e.productdetail.netType?a("td",{staticClass:"notbottom"},[e._v(" WiFi ")]):"ETHERNET"==e.productdetail.netType?a("td",{staticClass:"notbottom"},[e._v(" 以太网 ")]):"LORA"==e.productdetail.netType?a("td",{staticClass:"notbottom"},[e._v(" LoRaWAN ")]):a("td",{staticClass:"notbottom"},[e._v(e._s(e.productdetail.netType))])]),a("tr",[a("td",{staticClass:"cloumn"},[e._v(" "+e._s(e.$translateTitle("developer.describe"))+" ")]),a("td",{attrs:{colspan:"6"}},[e._v(e._s(e.productdetail.desc))])])])])])]),a("el-tab-pane",{attrs:{label:"Topic"+e.$translateTitle("product.list"),name:"second"}},[a("div",{staticStyle:{"box-sizing":"border-box",padding:"10px",background:"#ffffff"}},[a("div",{staticClass:"addtopic",staticStyle:{"margin-bottom":"10px","text-align":"right"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.topicdialogVisible=!0}}},[e._v(" "+e._s(e.$translateTitle("product.customtopicclass"))+" ")])],1),a("el-table",{staticStyle:{width:"100%","text-align":"center"},attrs:{data:e.topicData.slice((e.topicstart-1)*e.topiclength,e.topicstart*e.topiclength)}},[a("el-table-column",{attrs:{label:"Topic",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(" "+e._s(t.row.topic.replace("${ProductId}",e.productId))+" ")])]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("product.operationauthority"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return["pub"==t.row.type?a("span",[e._v(" "+e._s(e.$translateTitle("product.pub"))+" ")]):e._e(),"sub"==t.row.type?a("span",[e._v(" "+e._s(e.$translateTitle("product.sub"))+" ")]):e._e()]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.describe"),prop:"desc",align:"center"}}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.operation"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isdef?e._e():a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.updatetopic(t.row,t.$index)}}},[e._v(" "+e._s(e.$translateTitle("developer.edit"))+" ")]),t.row.isdef?e._e():a("el-button",{attrs:{slot:"reference",type:"danger",size:"mini"},on:{click:function(a){return e.deletetopic(t,t.$index)}},slot:"reference"},[e._v(" "+e._s(e.$translateTitle("developer.delete"))+" ")])]}}])})],1),a("div",{staticClass:"elpagination",staticStyle:{"margin-top":"20px"}},[a("el-pagination",{attrs:{"page-sizes":[10,20,30,50],"page-size":e.topiclength,total:e.topicData.length,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.topicSizeChange,"current-change":e.topicCurrentChange}})],1)],1),a("el-dialog",{attrs:{title:e.$translateTitle("product.definetopicclass"),visible:e.topicdialogVisible,"close-on-click-modal":!1,width:"40%"},on:{"update:visible":function(t){e.topicdialogVisible=t}}},[a("div",{staticClass:"topiccontent"},[a("div",{staticStyle:{"box-sizing":"border-box",padding:"10px","font-size":"16px",background:"#e6f9fc"}},[a("i",{staticClass:"el-icon-warning"}),e._v(" "+e._s(e.$translateTitle("product.text2"))+" ")]),a("div",{staticClass:"topicform"},[a("el-form",{ref:"topicform",attrs:{model:e.topicform,rules:e.topicrule}},[a("el-form-item",{attrs:{label:"Topic类：",prop:"topic"}},[a("el-input",{model:{value:e.topicform.topic,callback:function(t){e.$set(e.topicform,"topic",t)},expression:"topicform.topic"}},[a("template",{slot:"prepend"},[e._v(" "+e._s("thing/"+e.productId+"/${DevAddr}/")+" ")])],2)],1),a("el-form-item",{attrs:{label:e.$translateTitle("product.operationauthority"),prop:"type"}},[a("el-select",{attrs:{placeholder:e.$translateTitle("product.selectdeviceoperationpermission")},model:{value:e.topicform.type,callback:function(t){e.$set(e.topicform,"type",t)},expression:"topicform.type"}},[a("el-option",{attrs:{label:e.$translateTitle("product.sub"),value:"sub"}}),a("el-option",{attrs:{label:e.$translateTitle("product.pub"),value:"pub"}})],1)],1),a("el-form-item",{attrs:{label:e.$translateTitle("developer.describe")}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.topicform.desc,callback:function(t){e.$set(e.topicform,"desc",t)},expression:"topicform.desc"}})],1)],1)],1)]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.topicdialogVisible=!1}}},[e._v(" "+e._s(e.$translateTitle("developer.cancel"))+" ")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.subTopic("topicform",e.topicform.isupdated)}}},[e._v(" "+e._s(e.$translateTitle("developer.determine"))+" ")])],1)])],1),a("el-tab-pane",{attrs:{label:e.$translateTitle("product.physicalmodel"),name:"third"}},[a("div",{staticStyle:{"text-align":"right"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.checkAddTest}},[e._v(" 物模型采集公式 ")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.checkschema}},[e._v(" "+e._s(e.$translateTitle("product.viewobjectmodel"))+" ")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.createProperty}},[e._v(" "+e._s(e.$translateTitle("product.newcustomattribute"))+" ")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.addcategory}},[e._v(" "+e._s(e.$translateTitle("product.newstandardattribute"))+" ")])],1),a("div",[a("el-table",{staticStyle:{width:"100%","margin-top":"10px"},attrs:{data:e.wmxData.slice((e.wmxstart-1)*e.wmxPageSize,e.wmxstart*e.wmxPageSize),"default-expand-all":!1,"row-class-name":e.getRowClass,border:"","row-key":"identifier"}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return"struct"==t.row.dataType.type?[a("el-table",{staticStyle:{"box-sizing":"border-box",width:"60%","text-align":"center"},attrs:{data:t.row.dataType.specs}},[a("el-table-column",{attrs:{label:e.$translateTitle("product.identifier"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.identifier))])]}}],null,!0)}),a("el-table-column",{attrs:{label:e.$translateTitle("product.functionaltypes"),align:"center"}},[a("span",[e._v(e._s(e.$translateTitle("product.attribute")))])]),a("el-table-column",{attrs:{label:e.$translateTitle("product.functionname"),prop:"name",align:"center"}}),a("el-table-column",{attrs:{label:e.$translateTitle("product.datadefinition"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.dataType.type))])]}}],null,!0)})],1)]:void 0}}],null,!0)}),a("el-table-column",{attrs:{label:e.$translateTitle("product.identifier"),prop:"identifier"}}),a("el-table-column",{attrs:{label:e.$translateTitle("product.functionaltypes")}},[a("span",[e._v(e._s(e.$translateTitle("product.attribute")))])]),a("el-table-column",{attrs:{label:e.$translateTitle("product.functionname"),prop:"name"}}),a("el-table-column",{attrs:{label:e.$translateTitle("product.datatype")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.dataType.type))])]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("product.datadefinition")},scopedSlots:e._u([{key:"default",fn:function(t){return[!t.row.dataType.specs||"double"!=t.row.dataType.type&&"float"!=t.row.dataType.type&&"int"!=t.row.dataType.type?"string"==t.row.dataType.type?a("span",[e._v(" "+e._s(e.$translateTitle("product.datalength")+":"+t.row.dataType.size+e.$translateTitle("product.byte"))+" ")]):"date"==t.row.dataType.type?a("span"):"struct"!=t.row.dataType.type?a("span",[e._v(" "+e._s(t.row.dataType.specs)+" ")]):a("span"):a("span",[e._v(" "+e._s(e.$translateTitle("product.rangeofvalues")+t.row.dataType.specs.min+"~"+t.row.dataType.specs.max)+" ")])]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.operation")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.deletewmx(t.$index)}}},[e._v(" "+e._s(e.$translateTitle("developer.delete"))+" ")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.wmxDataFill(t.row,t.$index)}}},[e._v(" 编辑 ")])]}}])})],1),a("el-pagination",{staticStyle:{"margin-top":"10px"},attrs:{"page-sizes":[10,20,30,50],"page-size":e.wmxPageSize,total:e.wmxData.length,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.wmxSizeChange,"current-change":e.wmxCurrentChange}})],1),a("el-dialog",{attrs:{title:e.$translateTitle("product.addfunction"),visible:e.originwmx,"close-on-click-modal":!1,width:"50%"},on:{"update:visible":function(t){e.originwmx=t}}},[a("div",[a("div",{staticStyle:{margin:"20px 0"}},[a("label",{attrs:{for:""}},[e._v(" "+e._s(e.$translateTitle("product.classification"))+" ")]),a("el-cascader",{attrs:{options:e.treeData},on:{change:e.handleChange},model:{value:e.category,callback:function(t){e.category=t},expression:"category"}}),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.getPropData(0)}}},[e._v(" "+e._s(e.$translateTitle("developer.search"))+" ")])],1),a("div",{staticStyle:{"margin-top":"10px","text-align":"center"}},[a("el-table",{staticStyle:{width:"100%","text-align":"center"},attrs:{data:e.PropData}},[a("el-table-column",{attrs:{label:"ID",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.data.SuperId))])]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("product.identifier"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.type))])]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("product.applicabletype"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.data.CategoryName))])]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.operation"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.addProCategory(t.row)}}},[e._v(" "+e._s(e.$translateTitle("product.add"))+" ")])]}}])})],1)],1),a("div",[a("el-pagination",{staticStyle:{"margin-top":"10px"},attrs:{"page-sizes":[10,20,30,50],"page-size":e.productlength,total:e.producttotal,layout:"total, sizes, prev, pager, next, jumper",small:""},on:{"size-change":e.productSizeChange,"current-change":e.productCurrentChange}})],1)]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.originwmx=!1}}},[e._v(" "+e._s(e.$translateTitle("developer.cancel"))+" ")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.originwmx=!1}}},[e._v(" "+e._s(e.$translateTitle("developer.determine"))+" ")])],1)]),a("el-dialog",{attrs:{title:e.wmxSituation+"自定义属性",visible:e.wmxdialogVisible,"before-close":e.wmxhandleClose,"close-on-click-modal":!1,width:"40%",top:"5vh"},on:{"update:visible":function(t){e.wmxdialogVisible=t}}},[a("div",{staticClass:"wmxheader"},[a("el-form",{ref:"sizeForm",attrs:{model:e.sizeForm,rules:e.sizerule,size:"small"}},["int"==e.sizeForm.type||"float"==e.sizeForm.type||"double"==e.sizeForm.type?a("div",[a("el-collapse",{model:{value:e.collapseName,callback:function(t){e.collapseName=t},expression:"collapseName"}},[a("el-collapse-item",{attrs:{name:"1"}},[a("template",{slot:"title"},[a("h3",{staticStyle:{"font-size":"normal"}},[e._v("数据存储")])]),a("el-row",{attrs:{gutter:30}},[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:e.$translateTitle("product.functionname"),prop:"name"}},[a("el-input",{model:{value:e.sizeForm.name,callback:function(t){e.$set(e.sizeForm,"name",t)},expression:"sizeForm.name"}})],1)],1),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:e.$translateTitle("product.identifier"),prop:"identifier"}},[a("el-input",{model:{value:e.sizeForm.identifier,callback:function(t){e.$set(e.sizeForm,"identifier",t)},expression:"sizeForm.identifier"}})],1)],1)],1),a("el-form-item",{attrs:{required:"",label:"取值范围(数值)"}},[a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{prop:"startnumber"}},[a("el-input",{attrs:{placeholder:e.$translateTitle("product.minimumvalue"),type:"number"},model:{value:e.sizeForm.startnumber,callback:function(t){e.$set(e.sizeForm,"startnumber",e._n(t))},expression:"sizeForm.startnumber"}})],1)],1),a("el-col",{attrs:{span:2}},[e._v("-")]),a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{prop:"endnumber"}},[a("el-input",{attrs:{placeholder:e.$translateTitle("product.maximumvalue"),type:"number"},on:{input:function(t){return e.changeValue("sizeForm")}},model:{value:e.sizeForm.endnumber,callback:function(t){e.$set(e.sizeForm,"endnumber",e._n(t))},expression:"sizeForm.endnumber"}})],1)],1)],1),a("el-row",{attrs:{gutter:30}},[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"步长",prop:"step"}},[a("el-input-number",{attrs:{precision:2,min:0,step:.01,"controls-position":"right"},model:{value:e.sizeForm.step,callback:function(t){e.$set(e.sizeForm,"step",t)},expression:"sizeForm.step"}})],1)],1),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:e.$translateTitle("product.readandwritetype"),prop:"isread"}},[a("el-radio-group",{attrs:{size:"medium"},model:{value:e.sizeForm.isread,callback:function(t){e.$set(e.sizeForm,"isread",t)},expression:"sizeForm.isread"}},[a("el-radio",{attrs:{label:"rw"}},[e._v(" "+e._s(e.$translateTitle("product.readandwrite"))+" ")]),a("el-radio",{attrs:{label:"r"}},[e._v(" "+e._s(e.$translateTitle("product.onlyread"))+" ")])],1)],1)],1)],1),a("el-row",{attrs:{gutter:30}},[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:e.$translateTitle("product.datatype"),prop:"type"}},[a("el-select",{on:{change:e.selectStruct},model:{value:e.sizeForm.type,callback:function(t){e.$set(e.sizeForm,"type",t)},expression:"sizeForm.type"}},[a("el-option",{attrs:{label:e.$translateTitle("product.struct"),value:"struct"}}),a("el-option",{attrs:{label:e.$translateTitle("product.init"),value:"int"}}),a("el-option",{attrs:{label:e.$translateTitle("product.float"),value:"float"}}),a("el-option",{attrs:{label:e.$translateTitle("product.double"),value:"double"}}),a("el-option",{attrs:{label:e.$translateTitle("product.bool"),value:"bool"}}),a("el-option",{attrs:{label:e.$translateTitle("product.enum"),value:"enum"}}),a("el-option",{attrs:{label:e.$translateTitle("product.string"),value:"string"}}),a("el-option",{attrs:{label:e.$translateTitle("product.date"),value:"date"}})],1)],1)],1),a("el-col",{attrs:{span:2}}),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:e.$translateTitle("product.unit")}},[a("el-select",{attrs:{placeholder:e.$translateTitle("product.unit"),filterable:""},model:{value:e.sizeForm.unit,callback:function(t){e.$set(e.sizeForm,"unit",t)},expression:"sizeForm.unit"}},e._l(e.allunit,(function(e,t){return a("el-option",{key:t,attrs:{label:e.data.Name+"/"+e.data.Symbol,value:e.data.Symbol}})})),1)],1)],1)],1)],2),a("el-collapse-item",{attrs:{name:"2"}},[a("template",{slot:"title"},[a("h3",{staticStyle:{"font-size":"normal"}},[e._v("数据采集")])]),a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:24}},[a("el-tooltip",{staticStyle:{float:"left"},attrs:{effect:"dark",placement:"right-start"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v(" 采集策略表达式 。 "),a("br"),e._v(" 如： "),a("br"),e._v(" 5分钟 = 5 * 60 "),a("br"),e._v(" 1小时 = 60 * 60 "),a("br"),e._v(" 5小时 = 5 * 60 * 60 "),a("br"),e._v(" 1天 = 24 * 60 * 60 "),a("br")]),a("i",{staticClass:"el-icon-question"})]),a("el-form-item",{attrs:{label:"采集策略"}},[a("el-select",{staticStyle:{width:"85%"},attrs:{size:"mini",filterable:"","allow-create":"","default-first-option":"",placeholder:"请选择"},model:{value:e.sizeForm.strategy,callback:function(t){e.$set(e.sizeForm,"strategy",t)},expression:"sizeForm.strategy"}},e._l(e.sizeOption,(function(e){return a("el-option",{key:e.val,attrs:{label:e.label,value:e.val,size:"mini"}})})),1),a("el-button",{attrs:{size:"mini"}},[e._v("秒")])],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:2}},[a("el-popover",{attrs:{placement:"right",width:"400",trigger:"click"}},[a("el-table",{attrs:{data:e.wmxData.slice((e.wmxstart-1)*e.wmxPageSize,e.wmxstart*e.wmxPageSize)}},[a("el-table-column",{attrs:{label:"标识符"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{"margin-left":"10px"}},[e._v(" "+e._s(t.row.identifier)+" ")])]}}],null,!1,1752528423)}),a("el-table-column",{attrs:{label:"功能名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{"margin-left":"10px"}},[e._v(" "+e._s(t.row.name)+" ")])]}}],null,!1,1928100195)}),a("el-table-column",{attrs:{label:"数据类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{"margin-left":"10px"}},[e._v(" "+e._s(t.row.dataType.type)+" ")])]}}],null,!1,718548826)})],1),a("el-pagination",{staticStyle:{"margin-top":"10px"},attrs:{"page-sizes":[10,20,30,50],"page-size":e.wmxPageSize,total:e.wmxData.length,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.wmxSizeChange,"current-change":e.wmxCurrentChange}}),a("el-button",{attrs:{slot:"reference",size:"mini"},slot:"reference"},[e._v(" 添加变量 ")])],1)],1)],1),a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:22}},[a("el-tooltip",{staticStyle:{float:"left"},attrs:{effect:"dark",placement:"right-start"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v(" 1. 采集值 设备上行数据经采集公式计算后显示 。 "),a("br"),e._v(" 公式中的%s为占位符，是固定字段。 "),a("br"),e._v(" 如： "),a("br"),e._v(" 加：%s+10 "),a("br"),e._v(" 减：%s-10 "),a("br"),e._v(" 乘：%s*10 "),a("br"),e._v(" 除：%s/10 "),a("br"),e._v(" 余数：%s%10 "),a("br"),e._v(" 2. 计算值 添加变量按钮, "),a("br"),e._v(" 复制对应的标识符 "),a("br"),e._v(" 例：pressure_out "),a("br"),e._v(" 加：pressure_out+10 "),a("br"),e._v(" 减：pressure_out-10 "),a("br"),e._v(" 乘：pressure_out*10 "),a("br"),e._v(" 除：pressure_out/10 "),a("br"),e._v(" 余数：pressure_out%10 "),a("br"),e._v(" 3. 复杂值 ：关闭本弹窗后使用物解析处理 "),a("br")]),a("i",{staticClass:"el-icon-question"})]),a("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"采集公式"}},[a("el-input",{attrs:{rows:5,type:"textarea",placeholder:"%s"},model:{value:e.sizeForm.collection,callback:function(t){e.$set(e.sizeForm,"collection",t)},expression:"sizeForm.collection"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:22}},[a("el-tooltip",{attrs:{effect:"dark",placement:"right-start"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v(" 1. 采集值: 主动向设备写数据经控制公式计算后下发 。 "),a("br"),e._v(" 公式中的%s为占位符，是固定字段。 "),a("br"),e._v(" 如： "),a("br"),e._v(" 加：%s+10 "),a("br"),e._v(" 减：%s-10 "),a("br"),e._v(" 乘：%s*10 "),a("br"),e._v(" 除：%s/10 "),a("br"),e._v(" 余数：%s%10 "),a("br"),e._v(" 2. 计算值: 点击添加变量按钮, "),a("br"),e._v(" 复制对应的标识符 "),a("br"),e._v(" 例：pressure_out "),a("br"),e._v(" 加：pressure_out+10 "),a("br"),e._v(" 减：pressure_out-10 "),a("br"),e._v(" 乘：pressure_out*10 "),a("br"),e._v(" 除：pressure_out/10 "),a("br"),e._v(" 余数：pressure_out%10 "),a("br"),e._v(" 3. 复杂值 ：关闭本弹窗后使用物解析处理 "),a("br")]),a("i",{staticClass:"el-icon-question",staticStyle:{float:"left"}})]),a("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"控制公式"}},[a("el-input",{attrs:{rows:5,type:"textarea",placeholder:"%s"},model:{value:e.sizeForm.control,callback:function(t){e.$set(e.sizeForm,"control",t)},expression:"sizeForm.control"}})],1)],1)],1)],2),a("el-collapse-item",{attrs:{name:"3"}},[a("template",{slot:"title"},[a("h3",{staticStyle:{"font-size":"normal"}},[e._v("数据来源")])]),a("el-divider"),a("div",{attrs:{name:"dataIdentification"}},[a("el-form-item",{attrs:{label:"数据标识",required:""}},[a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{prop:"dis"}},[a("el-input",{attrs:{placeholder:"数据标识"},model:{value:e.sizeForm.dis,callback:function(t){e.$set(e.sizeForm,"dis",t)},expression:"sizeForm.dis"}})],1)],1),a("el-col",{attrs:{span:2}},[e._v("-")]),a("el-col",{attrs:{span:9}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"数据个数"},model:{value:e.sizeForm.dinumber,callback:function(t){e.$set(e.sizeForm,"dinumber",e._n(t))},expression:"sizeForm.dinumber"}})],1)],1)],1)],1),a("el-row",{attrs:{gutter:30}},[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"协议类型"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.sizeForm.protocol,callback:function(t){e.$set(e.sizeForm,"protocol",t)},expression:"sizeForm.protocol"}},e._l(["normal","modbus"],(function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})})),1)],1)],1),a("el-col",{directives:[{name:"show",rawName:"v-show",value:"modbus"==e.sizeForm.protocol,expression:"sizeForm.protocol == 'modbus'"}],attrs:{span:10}},[a("el-form-item",{attrs:{label:"字节序",prop:"byteorder"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.sizeForm.byteorder,callback:function(t){e.$set(e.sizeForm,"byteorder",t)},expression:"sizeForm.byteorder"}},e._l([{value:"big",label:"大端"},{value:"little",label:"小端"}],(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1)],1),a("el-row",{directives:[{name:"show",rawName:"v-show",value:e.showNewItem,expression:"showNewItem"}],attrs:{gutter:30}},[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"寄存器状态",prop:"byteorder"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.sizeForm.operatetype,callback:function(t){e.$set(e.sizeForm,"operatetype",t)},expression:"sizeForm.operatetype"}},e._l([{value:"coilStatus",label:"线圈状态"},{value:"输入状态",label:"输入状态"},{value:"holdingRegister",label:"保持寄存器"},{value:"inputRegister",label:"输入寄存器"}],(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"数据类型"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.sizeForm.originaltype,callback:function(t){e.$set(e.sizeForm,"originaltype",t)},expression:"sizeForm.originaltype"}},e._l(["int16","uint16","int32","uint32","int64","uint64","float","double","string","customizedData"],(function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})})),1)],1)],1),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"从机地址"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.sizeForm.slaveid,callback:function(t){e.$set(e.sizeForm,"slaveid",t)},expression:"sizeForm.slaveid"}})],1)],1)],1)],2)],1)],1):e._e(),"bool"==e.sizeForm.type?a("div",[a("el-form-item",{attrs:{label:e.$translateTitle("product.attribute"),required:""}},[a("div",{staticStyle:{height:"40px"}},[a("el-col",{attrs:{span:11}},[a("el-form-item",[a("el-input",{staticClass:"inputnumber",attrs:{placeholder:e.$translateTitle("product.attribute"),type:"number",readonly:""},model:{value:e.sizeForm.truevalue,callback:function(t){e.$set(e.sizeForm,"truevalue",t)},expression:"sizeForm.truevalue"}})],1)],1),a("el-col",{attrs:{span:2}},[e._v("-")]),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{prop:"true"}},[a("el-input",{staticClass:"inputnumber",attrs:{placeholder:e.$translateTitle("product.egopen")},model:{value:e.sizeForm.true,callback:function(t){e.$set(e.sizeForm,"true",t)},expression:"sizeForm.true"}})],1)],1)],1),a("div",{staticStyle:{"margin-top":"20px"}},[a("el-col",{attrs:{span:11}},[a("el-form-item",[a("el-input",{staticClass:"inputnumber",attrs:{placeholder:e.$translateTitle("product.attribute"),type:"number",readonly:""},model:{value:e.sizeForm.falsevalue,callback:function(t){e.$set(e.sizeForm,"falsevalue",t)},expression:"sizeForm.falsevalue"}})],1)],1),a("el-col",{attrs:{span:2}},[e._v("-")]),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{prop:"true"}},[a("el-input",{staticClass:"inputnumber",attrs:{placeholder:e.$translateTitle("product.egclose")},model:{value:e.sizeForm.false,callback:function(t){e.$set(e.sizeForm,"false",t)},expression:"sizeForm.false"}})],1)],1)],1)])],1):e._e(),"enum"==e.sizeForm.type?a("div",[e._l(e.sizeForm.specs,(function(t,r){return a("el-form-item",{key:r,attrs:{required:""}},[a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{label:e.$translateTitle("product.attribute")+r,prop:"specs."+r+".attribute",rules:[{required:!0,message:"输入属性"}]}},[a("el-input",{attrs:{placeholder:e.$translateTitle("product.egnumber0")},model:{value:t.attribute,callback:function(a){e.$set(t,"attribute",a)},expression:"item.attribute"}})],1)],1),a("el-col",{staticClass:"line",attrs:{span:2}},[e._v("-")]),a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{label:e.$translateTitle("product.attributevalue")+r,prop:"specs."+r+".attributevalue",rules:[{required:!0,message:"输入属性值"}]}},[a("el-input",{attrs:{placeholder:e.$translateTitle("developer.describe")},model:{value:t.attributevalue,callback:function(a){e.$set(t,"attributevalue",a)},expression:"item.attributevalue"}})],1)],1),a("el-col",{staticClass:"line",attrs:{span:2}}),a("el-col",{staticClass:"line",attrs:{span:4}},[a("el-link",{staticStyle:{"margin-top":"30px","margin-left":"5px"},attrs:{underline:!1,type:"primary",icon:"el-icon-minus"},on:{click:function(a){return a.preventDefault(),e.removeDomain(t)}}},[e._v(" "+e._s(e.$translateTitle("developer.delete"))+" ")])],1)],1)})),a("el-link",{attrs:{underline:!1,icon:"el-icon-plus",type:"primary"},on:{click:e.addDomain}},[e._v(" "+e._s(e.$translateTitle("product.add"))+" ")])],2):e._e(),"struct"==e.sizeForm.type?a("div",[a("el-form-item",{attrs:{label:"JSON对象",required:""}},[a("ul",{staticStyle:{"padding-left":"20px",margin:"0"}},e._l(e.sizeForm.struct,(function(t,r){return a("li",{key:r,staticStyle:{display:"flex","list-style":"none"},attrs:{value:"item"}},[a("div",[a("span",[e._v(" "+e._s(e.$translateTitle("product.parametername")+":")+"} ")]),a("span",[e._v(e._s(t.name))])]),a("div",[a("el-link",{staticStyle:{"margin-left":"20px"},attrs:{underline:!1,type:"primary"},on:{click:function(a){return e.editStruct(t,r)}}},[e._v(" "+e._s(e.$translateTitle("developer.edit"))+" ")]),a("el-link",{attrs:{underline:!1,type:"primary"},on:{click:function(t){return e.deleteStruct(r)}}},[e._v(" "+e._s(e.$translateTitle("developer.delete"))+" ")])],1)])})),0),a("el-link",{attrs:{underline:!1,icon:"el-icon-plus",type:"primary"},on:{click:function(t){return e.addStruct("structform")}}},[e._v(" "+e._s(e.$translateTitle("product.addparameter"))+" ")])],1)],1):e._e(),"string"==e.sizeForm.type?a("div",[a("el-form-item",{attrs:{label:e.$translateTitle("product.datalength"),prop:"string"}},[a("el-input",{attrs:{type:"number"},model:{value:e.sizeForm.string,callback:function(t){e.$set(e.sizeForm,"string",e._n(t))},expression:"sizeForm.string"}},[a("template",{slot:"append"},[e._v(" "+e._s(e.$translateTitle("product.byte"))+" ")])],2)],1)],1):e._e(),"date"==e.sizeForm.type?a("div",[a("el-form-item",{attrs:{label:e.$translateTitle("product.timeformat")}},[a("el-input",{attrs:{readonly:""},model:{value:e.sizeForm.date,callback:function(t){e.$set(e.sizeForm,"date",t)},expression:"sizeForm.date"}})],1)],1):e._e()])],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.wmxhandleClose}},[e._v(" "+e._s(e.$translateTitle("developer.cancel"))+" ")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("sizeForm")}}},[e._v(" "+e._s(e.$translateTitle("developer.determine"))+" ")])],1)]),a("el-dialog",{attrs:{title:e.$translateTitle("product.addparameter"),visible:e.structdialog,"close-on-click-modal":!1,width:"40%",top:"15vh"},on:{"update:visible":function(t){e.structdialog=t}}},[a("div",{staticClass:"structheader"},[a("el-form",{ref:"structform",attrs:{model:e.structform,rules:e.structrule,size:"small"}},[a("el-row",{attrs:{gutter:30}},[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:e.$translateTitle("product.functionname"),prop:"name"}},[a("el-input",{model:{value:e.structform.name,callback:function(t){e.$set(e.structform,"name",t)},expression:"structform.name"}})],1),a("el-form-item",{attrs:{label:e.$translateTitle("product.identifier"),prop:"identifier"}},[a("el-input",{model:{value:e.structform.identifier,callback:function(t){e.$set(e.structform,"identifier",t)},expression:"structform.identifier"}})],1)],1),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:e.$translateTitle("product.datatype"),prop:"type"}},[a("el-select",{model:{value:e.structform.type,callback:function(t){e.$set(e.structform,"type",t)},expression:"structform.type"}},[a("el-option",{attrs:{label:e.$translateTitle("product.init"),value:"int"}}),a("el-option",{attrs:{label:e.$translateTitle("product.float"),value:"float"}}),a("el-option",{attrs:{label:e.$translateTitle("product.double"),value:"double"}}),a("el-option",{attrs:{label:e.$translateTitle("product.bool"),value:"bool"}}),a("el-option",{attrs:{label:e.$translateTitle("product.enum"),value:"enum"}}),a("el-option",{attrs:{label:e.$translateTitle("product.string"),value:"string"}}),a("el-option",{attrs:{label:e.$translateTitle("product.date"),value:"date"}})],1)],1)],1)],1),a("div",[a("el-form-item",{attrs:{label:"数据标识",required:""}},[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{prop:"dis"}},[a("el-input",{attrs:{placeholder:"数据标识"},model:{value:e.structform.dis,callback:function(t){e.$set(e.structform,"dis",t)},expression:"structform.dis"}})],1)],1),a("el-col",{attrs:{span:2}},[e._v("-")]),a("el-col",{attrs:{span:11}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"数据长度(字节)"},model:{value:e.structform.dinumber,callback:function(t){e.$set(e.structform,"dinumber",e._n(t))},expression:"structform.dinumber"}})],1)],1)],1)],1),"int"==e.structform.type||"float"==e.structform.type||"double"==e.structform.type?a("div",[a("el-form-item",{attrs:{required:"",label:"取值范围(数值)"}},[a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{prop:"startnumber"}},[a("el-input",{attrs:{placeholder:e.$translateTitle("product.minimumvalue"),type:"number"},on:{input:function(t){return e.changeStructValue("structform")}},model:{value:e.structform.startnumber,callback:function(t){e.$set(e.structform,"startnumber",e._n(t))},expression:"structform.startnumber"}})],1)],1),a("el-col",{attrs:{span:2}},[e._v("-")]),a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{prop:"endnumber"}},[a("el-input",{attrs:{placeholder:e.$translateTitle("product.maximumvalue"),type:"number"},model:{value:e.structform.endnumber,callback:function(t){e.$set(e.structform,"endnumber",e._n(t))},expression:"structform.endnumber"}})],1)],1)],1),a("el-form-item",{attrs:{label:"步长",prop:"step"}},[a("el-input",{attrs:{precision:2,step:.01,min:0,"controls-position":"right"},model:{value:e.structform.step,callback:function(t){e.$set(e.structform,"step",t)},expression:"structform.step"}})],1),a("el-form-item",{attrs:{label:e.$translateTitle("product.unit")}},[a("el-select",{attrs:{placeholder:e.$translateTitle("product.unit"),filterable:""},model:{value:e.structform.unit,callback:function(t){e.$set(e.structform,"unit",t)},expression:"structform.unit"}},e._l(e.allunit,(function(e,t){return a("el-option",{key:t,attrs:{label:e.data.Name+"/"+e.data.Symbol,value:e.data.Symbol}})})),1)],1)],1):e._e(),"bool"==e.structform.type?a("div",[a("el-form-item",{attrs:{label:e.$translateTitle("product.attribute"),required:""}},[a("div",{staticStyle:{height:"40px"}},[a("el-col",{attrs:{span:11}},[a("el-form-item",[a("el-input",{staticClass:"inputnumber",attrs:{placeholder:e.$translateTitle("product.attributevalue"),type:"number",readonly:""},model:{value:e.structform.truevalue,callback:function(t){e.$set(e.structform,"truevalue",t)},expression:"structform.truevalue"}})],1)],1),a("el-col",{attrs:{span:2}},[e._v("-")]),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{prop:"true"}},[a("el-input",{staticClass:"inputnumber",attrs:{placeholder:e.$translateTitle("product.egopen")},model:{value:e.structform.true,callback:function(t){e.$set(e.structform,"true",t)},expression:"structform.true"}})],1)],1)],1),a("div",{staticStyle:{"margin-top":"20px"}},[a("el-col",{attrs:{span:11}},[a("el-form-item",[a("el-input",{staticClass:"inputnumber",attrs:{placeholder:e.$translateTitle("product.attributevalue"),type:"number",readonly:""},model:{value:e.structform.falsevalue,callback:function(t){e.$set(e.structform,"falsevalue",t)},expression:"structform.falsevalue"}})],1)],1),a("el-col",{attrs:{span:2}},[e._v("-")]),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{prop:"true"}},[a("el-input",{staticClass:"inputnumber",attrs:{placeholder:e.$translateTitle("product.egclost")},model:{value:e.structform.false,callback:function(t){e.$set(e.structform,"false",t)},expression:"structform.false"}})],1)],1)],1)])],1):e._e(),"enum"==e.structform.type?a("div",[e._l(e.structform.specs,(function(t,r){return a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.structform.specs.length,expression:"structform.specs.length"}],key:r,attrs:{required:""}},[a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{label:e.$translateTitle("product.attribute")+r,prop:"specs."+r+".attribute",rules:[{required:!0,message:"输入属性"}]}},[a("el-input",{attrs:{placeholder:e.$translateTitle("product.egnumber0")},model:{value:t.attribute,callback:function(a){e.$set(t,"attribute",a)},expression:"item.attribute"}})],1)],1),a("el-col",{staticClass:"line",attrs:{span:2}},[e._v("-")]),a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{label:e.$translateTitle("product.attribute")+r,prop:"specs."+r+".attributevalue",rules:[{required:!0,message:"输入属性值"}]}},[a("el-input",{attrs:{placeholder:e.$translateTitle("developer.describe")},model:{value:t.attributevalue,callback:function(a){e.$set(t,"attributevalue",a)},expression:"item.attributevalue"}})],1)],1),a("el-col",{staticClass:"line",attrs:{span:2}}),a("el-col",{staticClass:"line",attrs:{span:4}},[a("el-link",{staticStyle:{"margin-top":"30px","margin-left":"5px"},attrs:{underline:!1,type:"primary",icon:"el-icon-minus"},on:{click:function(a){return a.preventDefault(),e.removeDomain1(t)}}},[e._v(" "+e._s(e.$translateTitle("developer.delete"))+" ")])],1)],1)})),a("el-link",{attrs:{underline:!1,icon:"el-icon-plus",type:"primary"},on:{click:e.addDomain1}},[e._v(" "+e._s(e.$translateTitle("product.add"))+" ")])],2):e._e(),"string"==e.structform.type?a("div",[a("el-form-item",{attrs:{label:e.$translateTitle("product.datalength"),prop:"string"}},[a("el-input",{attrs:{type:"number"},model:{value:e.structform.string,callback:function(t){e.$set(e.structform,"string",e._n(t))},expression:"structform.string"}},[a("template",{slot:"append"},[e._v(" "+e._s(e.$translateTitle("product.byte"))+" ")])],2)],1)],1):e._e(),"date"==e.structform.type?a("div",[a("el-form-item",{attrs:{label:e.$translateTitle("product.timeformat")}},[a("el-input",{attrs:{readonly:""},model:{value:e.structform.date,callback:function(t){e.$set(e.structform,"date",t)},expression:"structform.date"}})],1)],1):e._e(),a("el-form-item",{attrs:{label:e.$translateTitle("product.readandwritetype"),prop:"isread"}},[a("el-radio-group",{attrs:{size:"medium"},model:{value:e.structform.isread,callback:function(t){e.$set(e.structform,"isread",t)},expression:"structform.isread"}},[a("el-radio",{attrs:{label:"rw"}},[e._v(" "+e._s(e.$translateTitle("product.readandwrite"))+" ")]),a("el-radio",{attrs:{label:"r"}},[e._v(" "+e._s(e.$translateTitle("product.onlyread"))+" ")])],1)],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.structdialog=!1}}},[e._v(" "+e._s(e.$translateTitle("developer.cancel"))+" ")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitStruct("structform")}}},[e._v(" "+e._s(e.$translateTitle("developer.determine"))+" ")])],1)])],1),a("el-tab-pane",{attrs:{label:"物解析",name:"fourth"}},[a("div",{staticClass:"protolheader"},[a("el-form",{ref:"formInline",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline,rules:e.addRules}},[a("el-form-item",{attrs:{label:e.$translateTitle("product.protocolname"),prop:"name"}},[a("el-input",{attrs:{placeholder:e.$translateTitle("product.protocolname")},model:{value:e.formInline.name,callback:function(t){e.$set(e.formInline,"name",t)},expression:"formInline.name"}})],1),a("el-form-item",{attrs:{label:e.$translateTitle("plugins.version")}},[a("el-input",{attrs:{placeholder:e.$translateTitle("plugins.version")},model:{value:e.formInline.version,callback:function(t){e.$set(e.formInline,"version",t)},expression:"formInline.version"}})],1),a("el-form-item",{attrs:{label:e.$translateTitle("developer.describe")}},[a("el-input",{attrs:{placeholder:e.$translateTitle("developer.describe")},model:{value:e.formInline.desc,callback:function(t){e.$set(e.formInline,"desc",t)},expression:"formInline.desc"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.subAce("formInline",!0)}}},[e._v(" "+e._s(e.$translateTitle("product.preservation"))+" ")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.subAce1("formInline")}}},[e._v(" 设为公共 ")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.chaxun}},[e._v(" "+e._s(e.$translateTitle("product.publicagreementlibrary"))+" ")])],1),a("el-form-item",{staticStyle:{display:"block"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.protol}},[e._v(" "+e._s(e.$translateTitle("product.compile"))+" ")]),a("el-button",{attrs:{type:"success",size:"small"},on:{click:e.updatesubdialog}},[e._v(" 热加载 ")])],1)],1)],1),a("el-dialog",{attrs:{visible:e.protoldialog,"close-on-click-modal":!1,title:"通道热加载",width:"50%"},on:{"update:visible":function(t){e.protoldialog=t}}},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.protolchannel,"row-class-name":e.getChannelEnable},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.channelnumber")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.objectId))])]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.channelname")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.name))])]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.channeladdr")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s("channel/"+t.row.objectId))])]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.channeltype")},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.type?a("span",[e._v(" "+e._s(e.$translateTitle("developer.collectionchannel"))+" ")]):a("span",[e._v(" "+e._s(e.$translateTitle("developer.resourcechannel"))+" ")])]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.servicetype")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.cType))])]}}])})],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.updateAllChannel}},[e._v(" 确定 ")])],1)],1),a("el-dialog",{attrs:{title:e.$translateTitle("product.publicagreementlibrary"),visible:e.dialogTableVisible,"close-on-click-modal":!1,width:"50%"},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[a("el-table",{staticStyle:{width:"100%","margin-top":"20px","text-align":"center"},attrs:{data:e.gridData}},[a("el-table-column",{attrs:{label:e.$translateTitle("product.protocolname"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.data.name))])]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("plugins.version"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.data.version))])]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.describe"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.data.desc))])]}}])}),a("el-table-column",{attrs:{label:"创建时间",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.utc2beijing(t.row.createdAt)))])]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.operation"),align:"center",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.editordata(t.row)}}},[e._v(" "+e._s(e.$translateTitle("product.clone"))+" ")]),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.deletedata(t.row.objectId)}}},[e._v(" "+e._s(e.$translateTitle("developer.delete"))+" ")])]}}])})],1),a("div",{staticClass:"elpagination",staticStyle:{padding:"20px 0"}},[a("el-pagination",{attrs:{"page-sizes":[10,20,30,50],"page-size":e.decoderlength,total:e.decodertotal,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.decoderSizeChange,"current-change":e.devicerCurrentChange}})],1)],1),a("div",[a("div",{staticStyle:{background:"#ffffff"}},[a("label",{attrs:{id:"plug-name"}})]),a("pre",{staticClass:"ace_editor ace-monokai ace_dark",staticStyle:{"min-height":"600px","margin-bottom":"0"},attrs:{id:"editor"}},[a("textarea",{staticClass:"ace_text-input"})]),a("div",{staticStyle:{background:"#ffffff"}},[a("label",{attrs:{id:"plug-name"}})]),a("div",{staticStyle:{padding:"5px",color:"#c2be9e",background:"#272822","border-top":"1px solid #dddddd"}},[a("span",[e._v(e._s(e.$translateTitle("product.controloutput")))])]),a("pre",{staticClass:"ace_editor",staticStyle:{"min-height":"300px","margin-top":"0","margin-bottom":"0"},attrs:{id:"editor2"}},[a("textarea",{staticClass:"ace_text-input"})])])],1),a("el-tab-pane",{attrs:{label:e.$translateTitle("product.physicalaccess"),name:"fiveth"}},[a("div",{staticClass:"productchannel",staticStyle:{padding:"10px","text-align":"right"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.showAllChannel}},[e._v(" "+e._s(e.$translateTitle("developer.createchannel"))+" ")])],1),a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.channelData,"row-class-name":e.getChannelEnable}},[a("el-table-column",{attrs:{label:e.$translateTitle("developer.channelnumber")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.objectId))])]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.channelname")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.name))])]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.channeladdr")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s("channel/"+t.row.objectId))])]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.channeltype")},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.type?a("span",[e._v(" "+e._s(e.$translateTitle("developer.collectionchannel"))+" ")]):3==t.row.type?a("span",[e._v("任务通道")]):e._e()]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.servicetype")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.cType))])]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.operation"),width:"350"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.deleteRelation(t.row)}}},[e._v(" "+e._s(e.$translateTitle("developer.remove"))+" ")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.subProTopic(t.row)}}},[e._v(" 订阅日志 ")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.updatesub(t.row)}}},[e._v(" 重载配置 ")])]}}])})],1),a("div",{staticClass:"elpagination",staticStyle:{"margin-top":"20px"}},[a("el-pagination",{attrs:{"page-sizes":[10,20,30,50],"page-size":e.channellength,total:e.channeltotal,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.channelSizeChange,"current-change":e.channelCurrentChange}})],1)],1)]),a("el-tab-pane",{attrs:{label:"物存储",name:"seven"}},[a("div",{staticClass:"productchannel",staticStyle:{padding:"10px","text-align":"right"}},[a("el-popover",{attrs:{title:"自定义数据模型提示",placement:"right",width:"600",trigger:"hover"},on:{show:e.questionModel}},[a("pre",{staticClass:"ace_editor",staticStyle:{"min-height":"400px"},attrs:{id:"editorinsert"}},[a("el-input",{staticClass:"ace_text-input",attrs:{type:"textarea"}})],1),a("el-button",{attrs:{slot:"reference",type:"primary",size:"mini",icon:"el-icon-question"},slot:"reference"},[e._v(" 自定义数据模型帮助 ")])],1),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.resourceShowAllChannel}},[e._v(" "+e._s(e.$translateTitle("developer.createchannel"))+" ")])],1),a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.resourcechannelData,"row-class-name":e.getChannelEnable}},[a("el-table-column",{attrs:{label:e.$translateTitle("developer.channelnumber")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.objectId))])]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.channelname")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.name))])]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.channeladdr")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s("channel/"+t.row.objectId))])]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.channeltype")},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.type?a("span",[e._v(" "+e._s(e.$translateTitle("developer.collectionchannel"))+" ")]):a("span",[e._v(" "+e._s(e.$translateTitle("developer.resourcechannel"))+" ")])]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.servicetype")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.cType))])]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.operation"),width:"350"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.deleteRelation(t.row)}}},[e._v(" "+e._s(e.$translateTitle("developer.remove"))+" ")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.subProTopic(t.row)}}},[e._v(" 订阅日志 ")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.customize(t.row)}}},[e._v(" 自定义模型 ")])]}}])})],1),a("div",{staticClass:"elpagination",staticStyle:{"margin-top":"20px"}},[a("el-pagination",{attrs:{"page-sizes":[10,20,30,50],"page-size":e.resourcelength,total:e.resourcetotal,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.resourcechannelSizeChange,"current-change":e.resourcechannelCurrentChange}})],1)],1)])],1)],1),a("el-dialog",{attrs:{title:e.$translateTitle("product.viewobjectmodel"),visible:e.schemadialogVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.schemadialogVisible=t}}},[a("div",[a("div",{staticStyle:{background:"#ffffff"}},[a("label",{attrs:{id:"plug-name"}})]),a("pre",{staticClass:"ace_editor",staticStyle:{"min-height":"400px"},attrs:{id:"editor1"}},[a("textarea",{staticClass:"ace_text-input",staticStyle:{overflow:"scroll"}})])]),a("span",{staticClass:"dialog-footer",staticStyle:{height:"30px"},attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.preserve}},[e._v("更新")])],1)]),a("el-dialog",{attrs:{visible:e.innerVisible,"close-on-click-modal":!1,title:"添加通道","append-to-body":""},on:{"update:visible":function(t){e.innerVisible=t}}},[a("div",{staticClass:"addchannel"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.allchannelData,height:"400"}},[a("el-table-column",{attrs:{label:e.$translateTitle("developer.channelnumber")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.objectId))])]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.channelname")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.name))])]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.channeladdr")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s("channel/"+t.row.objectId))])]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.channeltype")},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.type?a("span",[e._v(" "+e._s(e.$translateTitle("developer.collectionchannel"))+" ")]):2==t.row.type?a("span",[e._v(" "+e._s(e.$translateTitle("developer.resourcechannel"))+" ")]):a("span",[e._v("任务通道")])]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.servicetype")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.cType))])]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.operation")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.addProductChannel(t.row.objectId)}}},[e._v(" "+e._s(e.$translateTitle("developer.add"))+" ")])]}}])})],1),a("div",{staticClass:"elpagination",staticStyle:{"margin-top":"20px"}},[a("el-pagination",{attrs:{"page-sizes":[10,20,30,50],"page-size":e.allChannellength,total:e.allChanneltotal,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.allChannelSizeChange,"current-change":e.allChannelCurrentChange}})],1)],1)]),a("el-dialog",{attrs:{title:e.channelname+"日志",visible:e.subdialog,"before-close":e.handleCloseSubdialog,"close-on-click-modal":!1,width:"85%"},on:{"update:visible":function(t){e.subdialog=t}}},[a("div",{staticStyle:{"margin-top":"20px"}},[a("pre",{staticClass:"ace_editor",staticStyle:{width:"100%","min-height":"300px"},attrs:{id:"subdialog"}},[e._v("                    "),a("textarea",{staticClass:"ace_text-input",staticStyle:{overflow:"scroll"}}),e._v("      ")])]),a("span",{staticClass:"dialog-footer",staticStyle:{height:"30px"},attrs:{slot:"footer"},slot:"footer"},[a("el-switch",{staticStyle:{display:"inline-block","margin-right":"10px"},attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","inactive-text":"自动刷新"},on:{change:e.stopsub},model:{value:e.value4,callback:function(t){e.value4=t},expression:"value4"}})],1)]),a("el-dialog",{attrs:{visible:e.resourcedialogFormVisible,"close-on-click-modal":!1,"show-close":!1,"before-close":e.closeWuDialog,width:"90%",top:"1vh"},on:{"update:visible":function(t){e.resourcedialogFormVisible=t}}},[a("el-form",{ref:"resourceform",attrs:{model:e.resourceform}},[a("div",{staticClass:"wumoxing"},[a("el-row",[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-form-item",{attrs:{label:"物模型"}},[a("pre",{staticClass:"ace_editor",staticStyle:{"min-height":"600px"},attrs:{id:"editormodel"}},[a("el-input",{staticClass:"ace_text-input",attrs:{type:"textarea"}})],1)])],1)]),a("el-col",{attrs:{span:16}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("el-form-item",{attrs:{label:"自定义数据模型"}},[a("pre",{staticClass:"ace_editor",staticStyle:{"min-height":"600px"},attrs:{id:"editorcreate"}},[a("el-input",{staticClass:"ace_text-input",attrs:{type:"textarea"}})],1)])],1)])],1)],1)]),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.closeWuDialog}},[e._v("退 出")]),a("el-button",{attrs:{type:"primary"},on:{click:e.addData}},[e._v("保 存")])],1)],1),a("el-dialog",{attrs:{visible:e.exportDialogShow,title:"导出",width:"25%"},on:{"update:visible":function(t){e.exportDialogShow=t}}},[a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"btn-right",attrs:{size:"small"},on:{click:function(t){e.exportDialogShow=!1}}},[e._v(" 关闭 ")])],1)]),a("el-dialog",{attrs:{fullscreen:!0,"before-close":e.handleCloseCollecttion,visible:e.collectionDialogVisible,"close-on-click-modal":!1,title:"查看采集公式",width:"100%"},on:{"update:visible":function(t){e.collectionDialogVisible=t}}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"diaCollLeftCls"},[a("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":e.activeIndex}},[e._l(e.wmxData,(function(t,r){return[a("el-menu-item",{key:r+"",attrs:{index:t.identifier},on:{click:function(a){return e.menuTabClick(t,r)}}},[t.dataType.specs?a("ol",[e._v(" "+e._s(t.identifier+" "+t.name+" 取值范围"+t.dataType.specs.min+"~"+t.dataType.specs.max)+" ")]):a("ol",[e._v(" "+e._s(t.identifier+" "+t.name)+" ")])])]}))],2)],1)]),a("el-col",{attrs:{span:18}},[a("el-tabs",{attrs:{type:"card",closable:""},on:{"tab-click":e.handleRightTopTabClick,"tab-remove":e.removeTab},model:{value:e.editableTabsValue,callback:function(t){e.editableTabsValue=t},expression:"editableTabsValue"}},e._l(e.editableTabs,(function(t,r){return a("el-tab-pane",{key:t.name,attrs:{label:t.title,name:t.name}},[a("div",{staticClass:"diaCollRightCls"},[a("el-row",{staticStyle:{margin:"10px"}},[a("el-button",{attrs:{type:"success"}},[e._v("测试")]),a("el-button",{attrs:{type:"info"},on:{click:function(t){return e.onReductionTap(r)}}},[e._v(" 还原 ")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onSaveTap(r)}}},[e._v(" 保存 ")])],1),a("pre",{staticClass:"ace_editor3",staticStyle:{"min-height":"300px","margin-top":"0","margin-bottom":"0"},attrs:{id:t.name}},[a("textarea",{staticClass:"ace_text-input"})])],1)])})),1)],1)],1)],1)],1)},d=[],p=a("1da1"),m=(a("96cf"),a("4de4"),a("b0c0"),a("99af"),a("d81d"),a("d3b7"),a("3ca3"),a("ddb0"),a("a434"),a("159b"),a("b64b"),a("5319"),a("ac1f"),a("13d5"),a("4d63"),a("25f0"),a("a15b"),a("1285")),f=a("7212"),g=a("e0e9"),b=a("89e8"),h=a("1b07"),v=(a("be65"),a("bb22")),y=a("5118"),_=a("c620"),C=a("30f8"),w=(a("3022"),{}),I=a("f43e").Base64,x="",T="",S={data:function(){var e=this,t=function(e,t,a){var r=/[0-9a-zA-Z]/;r.test(t)?a():a(new Error("协议名称由数字和字母组合"))},a=function(t,a,r){""===a?r(new Error("最小值不能为空")):""!==e.sizeForm.endnumber&&(a>=e.sizeForm.endnumber?r(new Error("最小值小于最大值")):r())},r=function(t,a,r){""===a?r(new Error("最大值不能为空")):""!==e.sizeForm.startnumber&&(a<=e.sizeForm.startnumber?r(new Error("最大值必须大于最小值")):r())},n=function(t,a,r){a<0?r(new Error("步长大于0")):a>=e.sizeForm.endnumber-e.sizeForm.startnumber?r(new Error("步长必须小于最大值和最小值的差值")):r()},i=function(t,a,r){""===a?r(new Error("最小值不能为空")):""!==e.structform.endnumber&&(a>=e.structform.endnumber?r(new Error("最小值小于最大值")):r())},s=function(t,a,r){""===a?r(new Error("最大值不能为空")):""!==e.structform.startnumber&&(a<=e.structform.startnumber?r(new Error("最大值必须大于最小值")):r())},o=function(t,a,r){a<0?r(new Error("步长大于0")):a>=e.structform.endnumber-e.structform.startnumber?r(new Error("步长必须小于最大值和最小值的差值")):r()};return{activeIndex:"",editableTabsValue:"1",editableTabs:[],tabIndex:1,sizeOption:[{label:"20",val:"20"},{label:"不采集(计算值)",val:"计算值"},{label:"不采集(主动上报)",val:"主动上报"}],showList:!1,collapseName:["1","2","3","4"],multipleSelection:[],protolchannel:[],protoldialog:!1,productimg:"",topicdialogVisible:!1,topicform:{topic:"",type:"",desc:"",isupdated:-1},exportDialogShow:!1,exportUrl:"",exportName:"",decodertotal:0,decoderstart:0,leftItemPos:0,ed3isShow:!1,rightCollection:"",decoderlength:10,topicrule:{topic:[{required:!0,message:"请输入Topic类",trigger:"blur"}],type:[{required:!0,message:"请选择Topic权限",trigger:"change"}]},topicstart:1,topiclength:10,topictotal:0,channelData:[],allchannelData:[],innerVisible:!1,allChannelstart:0,allChannellength:10,allChanneltotal:0,category:[],current:0,schemadialogVisible:!1,collectionDialogVisible:!1,PropData:[],originwmx:!1,wmxdialogVisible:!1,wmxSituation:"新增",allunit:[],sizeForm:this.getFormOrginalData(),sizerule:{step:[{required:!0,trigger:"blur",validator:n}],string:[{required:!0,trigger:"blur",message:"请输入数据长度"},{type:"number",message:"数据长度必须为数字"}],startnumber:[{validator:a,required:!0,trigger:"blur"}],endnumber:[{validator:r,required:!0,trigger:"blur"}],resource:[{required:!0,message:"请选择功能类型",trigger:"change"}],true:[{required:!0,message:"请输入属性值",trigger:"blur"}],false:[{required:!0,message:"请输入属性值",trigger:"blur"}],name:[{required:!0,message:"请输入属性名称",trigger:"blur"}],identifier:[{required:!0,message:"请输入标识符",trigger:"blur"}],dis:[{required:!0,message:"请输入数据标识",trigger:"blur"}],type:[{required:!0,message:"请选择数据类型",trigger:"change"}],attribute:[{required:!0,message:"请输入属性",trigger:"blur"}],attributevalue:[{required:!0,message:"请输入属性值",trigger:"blur"}],isread:[{required:!0,message:"请选择读写类型",trigger:"change"}]},structrule:{string:[{required:!0,trigger:"blur",message:"请输入数据长度"},{type:"number",message:"数据长度必须为数字"}],step:[{required:!0,trigger:"blur",validator:o}],startnumber:[{validator:i,required:!0,trigger:"blur"}],endnumber:[{validator:s,required:!0,trigger:"blur"}],resource:[{required:!0,message:"请选择功能类型",trigger:"change"}],true:[{required:!0,message:"请输入属性值",trigger:"blur"}],false:[{required:!0,message:"请输入属性值",trigger:"blur"}],name:[{required:!0,message:"请输入属性名称",trigger:"blur"}],identifier:[{required:!0,message:"请输入标识符",trigger:"blur"}],dis:[{required:!0,message:"请输入数据标识",trigger:"blur"}],type:[{required:!0,message:"请选择数据类型",trigger:"change"}],attribute:[{required:!0,message:"请输入属性",trigger:"blur"}],attributevalue:[{required:!0,message:"请输入属性值",trigger:"blur"}],isread:[{required:!0,message:"请选择读写类型",trigger:"change"}]},structdialog:!1,structform:{resource:1,identifier:"",type:"INT",startnumber:"",endnumber:"",step:"",true:"",truevalue:1,false:"",falsevalue:0,isread:"r",unit:"",date:"String类型的UTC时间戳 (毫秒)",string:"",specs:[],dis:"Edit-24",dinumber:"528590"},tableData:[],activeName:"first",form:{Productname:"",ProductKey:"",ProductAll:0},ProductSecret:"",dynamicReg:!1,productId:"",productName:"",productdetail:{},topicData:[],topic:[{topic:"thing/${ProductId}/${DevAddr}/post",type:"pub",desc:"设备上报",isdef:!0},{topic:"thing/${ProductId}/${DevAddr}",type:"sub",desc:"消息下发",isdef:!0}],isshow:!1,addRules:{name:[{required:!0,message:"请输入协议名称",trigger:"blur"},{validator:t,trigger:"blur"}]},dialogTableVisible:!1,gridData:[],formInline:{name:"",version:"",desc:"",resource:!1},objectId:"",option:[],CategoryKey:"",productstart:0,productlength:10,producttotal:0,wmxstart:1,wmxPageSize:10,wmxtotal:20,wmxData:[],editorList:[],warningeditror:[],channellength:10,channelstart:0,channeltotal:0,isupdatedstruct:-1,issub:!1,subtimer:null,subdialog:!1,textarea:"",subdialogtimer:null,subdialogid:"",subaction:"stop",channelname:"",value4:!0,rulepagesize:10,rulestart:0,ruletotal:0,engineData:[],channeltype:0,resourcechannelData:[],resourcestart:0,resourcelength:10,resourcetotal:0,resourcedialogFormVisible:!1,resourceform:{},resourcechannelid:"",isreload:1,modifyIndex:-1}},computed:{treeData:function(){var e=JSON.parse(JSON.stringify(this.option));return e.filter((function(t){var a=e.filter((function(e){return t.id==e.parentid}));return a.length>0&&(t.children=a),0==t.parentid}))},showNewItem:function(){return!(!this.sizeForm||"modbus"!=this.sizeForm.protocol)}},watch:{issub:{deep:!0,handler:function(e){var t=this;this.subtimer=window.setInterval((function(){t.subAce("formInline",!1)}),5e3)}}},mounted:function(){i=ace.edit("editor2"),i.session.setMode("ace/mode/text"),i.setTheme("ace/theme/monokai"),i.setReadOnly(!0),i.setOptions({enableBasicAutocompletion:!0,enableSnippets:!0,enableLiveAutocompletion:!0}),this.Industry(),this.getAllunit(),this.$route.query.activeName&&(this.activeName=this.$route.query.activeName)},beforeDestroy:function(){window.clearInterval(this.subtimer),this.subtimer=null,window.clearInterval(this.subdialogtimer),this.subdialogtimer=null},methods:{selectStruct:function(e){},toggleList:function(){this.showList=!this.showList},getFormOrginalData:function(){return{strategy:"20",resource:1,identifier:"",dis:"Edit-24",dinumber:"528590",type:"int",startnumber:"",endnumber:"",step:"",true:"",truevalue:1,false:"",falsevalue:0,isread:"r",unit:"",string:"",date:"String类型的UTC时间戳 (毫秒)",specs:[{attribute:"",attributevalue:""}],struct:[],rate:1,offset:0,byteorder:"big",protocol:"normal",operatetype:"holdingRegister",originaltype:"int16",slaveid:256,collection:"%s",control:"%s"}},changeValue:function(e){this.$refs[e].validateField("startnumber",(function(e){if(e)return!1}))},changeStructValue:function(e){this.$refs[e].validateField("startnumber",(function(e){if(e)return!1}))},getRowClass:function(e,t){if("struct"!=e.row.dataType.type)return"row-expand-cover"},getChannelEnable:function(e,t){return 1==e.row.isEnable?"green_active":"red_active"},handleClick:function(e){"fourth"==e.name||("fiveth"==e.name?this.getProductChannel():"second"==e.name?this.getTopic():"seven"==e.name?this.getResourceChannel():"sixeth"==e.name?this.orginRule():"eighth"==e.name?this.isreload++:"fourth"!=e.name&&(window.clearInterval(this.subtimer),this.subtimer=null))},getAllunit:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.allunit=[],t.next=3,Object(g["getAllunit"])("unit",100);case 3:a=t.sent,r=a.results,e.allunit=r.concat([]),e.allunit.unshift({data:{Name:"无",Symbol:""}});case 7:case"end":return t.stop()}}),t)})))()},getTopic:function(){var e=this;this.$get_object("Product",this.productId).then((function(t){t&&(e.topicData=t.topics.concat(e.topic))})).catch((function(t){e.$baseMessage("请求出错",t.error,3e3)}))},exportProduct:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={name:e.productName},t.next=3,Object(f["queryProduct"])(a);case 3:r=t.sent,r&&window.open(window.location.origin+"/product?name="+e.productName,"_blank");case 5:case"end":return t.stop()}}),t)})))()},updatesubdialog:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.protoldialog=!0,a="1",r={__type:"Pointer",className:"Product",objectId:e.productId},Object(b["getChannelCountByProduct"])(e.channellength,e.channelstart,r,a).then((function(t){e.protolchannel=t.results,e.$refs.multipleTable.toggleAllSelection()})).catch((function(t){e.$baseMessage("请求出错",t.error,3e3)}));case 4:case"end":return t.stop()}}),t)})))()},handleSelectionChange:function(e){this.multipleSelection=e},updateAllChannel:function(){var e=this;if(0==this.multipleSelection.length)this.protoldialog=!1;else{var t=[];this.multipleSelection.map((function(e){t.push(new Promise((function(t,a){return Object(v["subupadte"])(e.id,"update").then((function(e){e&&t(e)})).catch((function(e){a(e)}))})))})),Promise.all(t).then((function(t){e.$message({message:"热加载成功",type:"success"}),t.length==e.multipleSelection.length&&(e.protoldialog=!1)})).catch((function(t){e.$message({message:t,type:"error"})}))}},showAllChannel:function(){var e=this;this.allChanneltotal=0,this.allchannelData=[],this.channeltype=1,this.innerVisible=!0;var t={$in:["1","3"]},a={$ne:{__type:"Pointer",className:"Product",objectId:this.productId}};Object(b["getChannelCountByProduct"])(this.channellength,this.channelstart,a,t).then((function(t){e.allChanneltotal=t.count,e.allchannelData=t.results})).catch((function(e){}))},getProductChannel:function(){var e=this,t={$in:["1","3"]},a={__type:"Pointer",className:"Product",objectId:this.productId};Object(b["getChannelCountByProduct"])(this.channellength,this.channelstart,a,t).then((function(t){e.channeltotal=t.count,e.channelData=t.results,0==t.results.length})).catch((function(e){}))},resourceShowAllChannel:function(){var e=this;this.allChanneltotal=0,this.allchannelData=[],this.channeltype=0,this.innerVisible=!0;var t={$in:["2"]},a={$ne:{__type:"Pointer",className:"Product",objectId:this.productId}};Object(b["getChannelCountByProduct"])(this.channellength,this.channelstart,a,t).then((function(t){e.allChanneltotal=t.count,e.allchannelData=t.results})).catch((function(e){}))},getResourceChannel:function(){var e=this,t={$in:["2"]},a={__type:"Pointer",className:"Product",objectId:this.productId};Object(b["getChannelCountByProduct"])(this.channellength,this.channelstart,a,t).then((function(t){e.resourcetotal=t.count,e.resourcechannelData=t.results})).catch((function(e){}))},addProductChannel:function(e){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function a(){var r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r={product:{__op:"AddRelation",objects:[{__type:"Pointer",className:"Product",objectId:t.productId}]}},a.next=3,Object(b["saveChanne"])(e,r);case 3:n=a.sent,n&&(t.$message({type:"success",message:"添加成功"}),1==t.channeltype?(t.showAllChannel(),t.getProductChannel()):(t.resourceShowAllChannel(),t.getResourceChannel()));case 5:case"end":return a.stop()}}),a)})))()},deleteRelation:function(e){var t=this,a={product:{__op:"RemoveRelation",objects:[{__type:"Pointer",className:"Product",objectId:this.productId}]}};Object(b["saveChanne"])(e.objectId,a).then((function(e){e&&t.$message({type:"success",message:"移除成功"}),t.getProductChannel(),t.getResourceChannel()}))},channelSizeChange:function(e){this.channellength=e,this.getProductChannel()},channelCurrentChange:function(e){this.channelstart=(e-1)*this.channellength,this.getProductChannel()},resourcechannelSizeChange:function(e){this.resourcelength=e,this.getResourceChannel()},resourcechannelCurrentChange:function(e){this.resourcestart=(e-1)*this.resourcelength,this.getResourceChannel()},allChannelSizeChange:function(e){this.allChannellength=e,this.showAllChannel()},allChannelCurrentChange:function(e){this.allChannelstart=(e-1)*this.allChannellength,this.showAllChannel()},customize:function(e){var t=this;this.resourcedialogFormVisible=!0,this.resourcechannelid=e.id,w=JSON.parse(JSON.stringify(e.config)),Object(y["setTimeout"])((function(){o=ace.edit("editormodel"),o.session.setMode("ace/mode/json"),o.setTheme("ace/theme/twilight"),o.setOptions({enableBasicAutocompletion:!0,enableSnippets:!0,enableLiveAutocompletion:!0}),o.setReadOnly(!0),o.setValue(JSON.stringify(t.productdetail.thing,null,4)),l=ace.edit("editorcreate"),l.session.setMode("ace/mode/mysql"),l.setTheme("ace/theme/twilight"),l.setOptions({enableBasicAutocompletion:!0,enableSnippets:!0,enableLiveAutocompletion:!0}),e.config.datamodel&&""!=e.config.datamodel?l.setValue(e.config.datamodel):l.setValue('{\n          "vars":{\n            "database":"aosong",\n            "stable":"meter",\n            "value":[\n              {\n                "timestamp":"TIMESTAMP",\n                "bytes":8\n              },\n              {\n                "temperature":"FLOAT",\n                "bytes":4\n              },\n              {\n                "humidity":"FLOAT",\n                "bytes":4\n              }\n            ],\n            "tags":[\n              {\n                "devaddr":"BINARY",\n                "bytes":12\n              }\n            ],\n            "table":"devaddr",\n            "keep":3650\n          },\n          "sql":{\n            "create_database":"CREATE DATABASE IF NOT EXISTS ${database} KEEP ${keep}",\n            "drop_database":"DROP DATABASE IF EXISTS ${database}",\n            "creat_stable":"CREATE TABLE IF NOT EXISTS ${database}.${stable} (${timestamp} TIMESTAMP, temperature FLOAT, humidity FLOAT) TAGS(devaddr BINARY[12]);",\n            "drop_stable":"DROP TABLE ${database}.${stable}",\n            "insert_stable":"INSERT INTO ${database}.${table} USING ${database}.${stable} TAGS (${devaddr}) VALUES (${temperature}, ${humidity})",\n            "insert_table":"INSERT INTO ${database}.${table} VALUES (${temperature}, ${humidity})",\n            "create_table":"CREATE TABLE ${databas}.${table} USING ${database}.${stable} TAGS (${devaddr});"\n          }\n        }')}))},questionModel:function(){Object(y["setTimeout"])((function(){c=ace.edit("editorinsert"),c.session.setMode("ace/mode/mysql"),c.setTheme("ace/theme/gob"),c.setOptions({enableBasicAutocompletion:!0,enableSnippets:!0,enableLiveAutocompletion:!0}),c.setValue('{\n        "vars":{\n          "database":"database",\n          "table":"stable",\n          "value":[\n            {\n              "timestamp":"TIMESTAMP",\n              "bytes":8\n            },\n            {\n              "int":"INT",\n              "bytes":4\n            },\n            {\n              "bigint":"BIGINT",\n              "bytes":8\n            },\n            {\n              "float":"FLOAT",\n              "bytes":4\n            },\n            {\n              "double":"DOUBLE",\n              "bytes":8\n            },\n            {\n              "binary":"BINARY",\n              "bytes":"自定义"\n            },\n            {\n              "smallint":"SMALLINT",\n              "bytes":2\n            },\n            {\n              "tinyint":"TINYINT",\n              "bytes":1\n            },\n            {\n              "bool":"BOOL",\n              "bytes":1\n            },\n            {\n              "nchar":"NCHAR",\n              "bytes":"自定义"\n            }\n          ],\n          "tags":[\n            {\n              "int":"INT",\n              "bytes":4\n            },\n            {\n              "bigint":"BIGINT",\n              "bytes":8\n            },\n            {\n              "float":"FLOAT",\n              "bytes":4\n            },\n            {\n              "double":"DOUBLE",\n              "bytes":8\n            },\n            {\n              "binary":"BINARY",\n              "bytes":"自定义"\n            },\n            {\n              "smallint":"SMALLINT",\n              "bytes":2\n            },\n            {\n              "tinyint":"TINYINT",\n              "bytes":1\n            },\n            {\n              "bool":"BOOL",\n              "bytes":1\n            },\n            {\n              "nchar":"NCHAR",\n              "bytes":"自定义"\n            }\n          ]\n        },\n        "sql":{\n          "create_database":"CREATE DATABASE IF NOT EXISTS {{database}} KEEP {{keep}}",\n          "drop_database":"DROP DATABASE IF EXISTS {{database}}",\n          "creat_stable":"CREATE TABLE IF NOT EXISTS {{database}}.{{stable}} ({{timestamp}} TIMESTAMP, temperature FLOAT, humidity FLOAT) TAGS(devaddr BINARY[12]);",\n          "drop_stable":"DROP TABLE {{database}}.{{stable}}",\n          "insert_stable":"INSERT INTO {{database}}.{{table}} USING {{database}}.{{stable}} TAGS ({{devaddr}}) VALUES ({{temperature}}, {{humidity}})",\n          "insert_table":"INSERT INTO {{database}}.{{table}} VALUES ({{temperature}}, {{humidity}})",\n          "create_table":"CREATE TABLE {{database}}.{{table}} USING {{database}}.{{stable}} TAGS ({{devaddr}});"\n        }\n      }')}))},addData:function(){var e=this;w.datamodel=l.getValue();var t={config:w};this.$update_object("Channel",this.rproductdetailesourcechannelid,t).then((function(t){t&&e.$message("添加成功")}),(function(e){Object(C["returnLogin"])(e)}))},closeWuDialog:function(){this.resourcedialogFormVisible=!1,this.resourcechannelid=""},removeDomain:function(e){var t=this.sizeForm.specs.indexOf(e);-1!==t&&this.sizeForm.specs.splice(t,1)},addDomain:function(){this.sizeForm.specs.push({value:"",name:""})},removeDomain1:function(e){var t=this.structform.specs.indexOf(e);-1!==t&&this.structform.specs.splice(t,1)},addDomain1:function(){this.structform.specs.push({value:"",name:""})},submitForm:function(e){var t=this;this.$refs[e].validate((function(a){if(!a)return!1;var r={};if("float"==t.sizeForm.type||"double"==t.sizeForm.type||"int"==t.sizeForm.type)r={name:t.sizeForm.name,dataType:{type:t.sizeForm.type.toLowerCase(),specs:{max:t.sizeForm.endnumber,min:t.sizeForm.startnumber,step:t.sizeForm.step,unit:""==t.sizeForm.unit?"":t.sizeForm.unit}},dataForm:{address:t.sizeForm.dis,quantity:t.sizeForm.dinumber,rate:t.sizeForm.rate,offset:t.sizeForm.offset,byteorder:t.sizeForm.byteorder,protocol:t.sizeForm.protocol,operatetype:t.sizeForm.operatetype,originaltype:t.sizeForm.originaltype,slaveid:t.sizeForm.slaveid,collection:t.sizeForm.collection,control:t.sizeForm.control,strategy:t.sizeForm.strategy},required:!0,accessMode:t.sizeForm.isread,identifier:t.sizeForm.identifier},t.showNewItem||(delete r.dataForm.operatetype,delete r.dataForm.originaltype,delete r.dataForm.slaveid);else if("bool"==t.sizeForm.type)r={name:t.sizeForm.name,dataType:{type:t.sizeForm.type.toLowerCase(),specs:{0:t.sizeForm.false,1:t.sizeForm.true}},dataForm:{address:t.sizeForm.dis,quantity:t.sizeForm.dinumber},required:!1,accessMode:t.sizeForm.isread,identifier:t.sizeForm.identifier};else if("enum"==t.sizeForm.type){var n={};t.sizeForm.specs.map((function(e){var t=e["attribute"];n[t]=e["attributevalue"]})),r={name:t.sizeForm.name,dataType:{type:t.sizeForm.type.toLowerCase(),specs:n},dataForm:{address:t.sizeForm.dis,quantity:t.sizeForm.dinumber},required:!0,accessMode:t.sizeForm.isread,identifier:t.sizeForm.identifier}}else"struct"==t.sizeForm.type?r={name:t.sizeForm.name,dataType:{type:t.sizeForm.type.toLowerCase(),specs:t.sizeForm.struct},dataForm:{address:t.sizeForm.dis,quantity:t.sizeForm.dinumber},required:!0,accessMode:t.sizeForm.isread,identifier:t.sizeForm.identifier}:"string"==t.sizeForm.type?r={name:t.sizeForm.name,dataType:{type:t.sizeForm.type.toLowerCase(),size:t.sizeForm.string},dataForm:{address:t.sizeForm.dis,quantity:t.sizeForm.dinumber},required:!0,accessMode:t.sizeForm.isread,identifier:t.sizeForm.identifier}:"date"==t.sizeForm.type&&(r={name:t.sizeForm.name,dataType:{type:t.sizeForm.type.toLowerCase()},dataForm:{address:t.sizeForm.dis,quantity:t.sizeForm.dinumber},required:!0,accessMode:t.sizeForm.isread,identifier:t.sizeForm.identifier});"新增"==t.wmxSituation?t.productdetail.thing.properties.unshift(r):"编辑"==t.wmxSituation&&(t.productdetail.thing.properties[t.modifyIndex]=r);var i={thing:t.productdetail.thing};t.$update_object("Product",t.productId,i).then((function(a){a&&(t.$message({type:"success",message:"添加成功"}),t.getProDetail(),t.$refs[e].resetFields(),t.wmxdialogVisible=!1)})).catch((function(e){}))}))},createProperty:function(){this.sizeForm=this.getFormOrginalData(),this.wmxdialogVisible=!0,this.wmxSituation="新增"},wmxDataFill:function(e,t){this.modifyIndex=(this.wmxstart-1)*this.wmxPageSize+t,this.wmxdialogVisible=!0,this.wmxSituation="编辑";var a={};if(-1!=["float","double","int"].indexOf(e.dataType.type))a={name:e.name,type:e.dataType.type,endnumber:this.$objGet(e,"dataType.specs.max"),startnumber:this.$objGet(e,"dataType.specs.min"),step:this.$objGet(e,"dataType.specs.step"),unit:this.$objGet(e,"dataType.specs.unit"),dis:this.$objGet(e,"dataForm.address"),dinumber:this.$objGet(e,"dataForm.quantity"),rate:this.$objGet(e,"dataForm.rate"),offset:this.$objGet(e,"dataForm.offset"),byteorder:this.$objGet(e,"dataForm.byteorder"),protocol:this.$objGet(e,"dataForm.protocol"),operatetype:this.$objGet(e,"dataForm.operatetype"),originaltype:this.$objGet(e,"dataForm.originaltype"),slaveid:this.$objGet(e,"dataForm.slaveid"),collection:"",control:"",strategy:"",required:!0,isread:e.accessMode,identifier:e.identifier},e.dataForm&&(a.collection=e.dataForm.collection,a.control=e.dataForm.control,a.strategy=e.dataForm.strategy);else if("bool"==e.dataType.type)a={name:e.name,type:e.dataType.type,true:e.dataType.specs[1],false:e.dataType.specs[0],dis:this.$objGet(e,"dataForm.address"),dinumber:this.$objGet(e,"dataForm.quantity"),required:!1,isread:e.accessMode,identifier:e.identifier,collection:void 0==e.dataForm?"":e.dataForm.collection,control:void 0==e.dataForm?"":e.dataForm.control,strategy:void 0==e.dataForm?"":e.dataForm.strategy};else if("enum"==e.dataType.type){var r=[];for(var n in e.dataType.specs)r.push({attribute:n,attributevalue:e.dataType.specs[n]});a={name:e.name,type:e.dataType.type,specs:r,dis:this.$objGet(e,"dataForm.address"),dinumber:this.$objGet(e,"dataForm.quantity"),required:!0,isread:e.accessMode,identifier:e.identifier,collection:void 0==e.dataForm?"":e.dataForm.collection,control:void 0==e.dataForm?"":e.dataForm.control,strategy:void 0==e.dataForm?"":e.dataForm.strategy}}else"struct"==e.dataType.type?a={name:e.name,type:e.dataType.type,struct:e.dataType.specs,dis:this.$objGet(e,"dataForm.address"),dinumber:this.$objGet(e,"dataForm.quantity"),required:!0,isread:e.accessMode,collection:void 0==e.dataForm?"":e.dataForm.collection,control:void 0==e.dataForm?"":e.dataForm.control,identifier:void 0==e.dataForm?"":e.identifier,strategy:void 0==e.dataForm?"":e.dataForm.strategy}:"string"==e.dataType.type?a={name:e.name,type:e.dataType.type,collection:void 0==e.dataForm?"":e.dataForm.collection,control:void 0==e.dataForm?"":e.dataForm.control,string:e.dataType.size,dis:this.$objGet(e,"dataForm.address"),dinumber:this.$objGet(e,"dataForm.quantity"),required:!0,isread:e.accessMode,identifier:e.identifier,strategy:void 0==e.dataForm?"":e.dataForm.strategy}:"date"==e.dataType.type&&(a={name:e.name,type:e.dataType.type,collection:void 0==e.dataForm?"":e.dataForm.collection,control:void 0==e.dataForm?"":e.dataForm.control,strategy:void 0==e.dataForm?"":e.dataForm.strategy,dis:this.$objGet(e,"dataForm.address"),dinumber:this.$objGet(e,"dataForm.quantity"),required:!0,isread:e.accessMode,identifier:e.identifier});this.sizeForm=a},submitStruct:function(e){var t=this;this.$refs[e].validate((function(a){if(a){var r={};if("float"==t.structform.type||"double"==t.structform.type||"int"==t.structform.type)r={name:t.structform.name,dataType:{type:t.structform.type.toLowerCase(),specs:{max:t.structform.endnumber,min:t.structform.startnumber,step:t.structform.step,unit:""==t.structform.unit?"":t.structform.unit}},dataForm:{address:t.structform.dis,quantity:t.structform.dinumber},required:!0,accessMode:t.structform.isread,identifier:t.structform.identifier};else if("bool"==t.structform.type)r={name:t.structform.name,dataType:{type:t.structform.type.toLowerCase(),specs:{0:t.structform.false,1:t.structform.true}},dataForm:{address:t.structform.dis,quantity:t.structform.dinumber},required:!1,accessMode:t.structform.isread,identifier:t.structform.identifier};else if("enum"==t.structform.type){var n={};t.structform.specs.map((function(e){var t=e["attribute"];n[t]=e["attributevalue"]})),r={name:t.structform.name,dataType:{type:t.structform.type.toLowerCase(),specs:n},dataForm:{address:t.structform.dis,quantity:t.structform.dinumber},required:!0,accessMode:t.structform.isread,identifier:t.structform.identifier}}else"string"==t.structform.type?r={name:t.structform.name,dataType:{type:t.structform.type.toLowerCase(),size:t.structform.string},dataForm:{address:t.structform.dis,quantity:t.structform.dinumber},required:!0,accessMode:t.structform.isread,identifier:t.structform.identifier}:"date"==t.structform.type&&(r={name:t.structform.name,dataType:{type:t.structform.type.toLowerCase()},dataForm:{address:t.structform.dis,quantity:t.structform.dinumber},required:!0,accessMode:t.structform.isread,identifier:t.structform.identifier});-1==t.isupdatedstruct?t.sizeForm.struct.push(r):(t.sizeForm.struct.splice(t.isupdatedstruct,1,r),t.isupdatedstruct=-1),t.$refs[e].resetFields(),t.structdialog=!1}}))},addStruct:function(e){this.structdialog=!0,this.structform={resource:1,identifier:"",type:"int",startnumber:"",endnumber:"",step:"",true:"",truevalue:1,false:"",falsevalue:0,isread:"r",unit:"",specs:[],date:"String类型的UTC时间戳 (毫秒)",string:""}},editStruct:function(e,t){var a=this;if(this.isupdatedstruct=t,this.structdialog=!0,this.structform.type=e.dataType.type.toUpperCase(),this.structform.name=e.name,this.structform.identifier=e.identifier,this.structform.isread=e.accessMode,"float"==e.dataType.type||"double"==e.dataType.type||"int"==e.dataType.type)this.structform.startnumber=e.dataType.specs.min,this.structform.endnumber=e.dataType.specs.max,this.structform.step=e.dataType.specs.step,this.structform.unit=e.dataType.specs.unit;else if("bool"==e.dataType.type)this.structform.true=e.dataType.specs["1"],this.structform.false=e.dataType.specs["0"];else if("enum"==e.dataType.type){this.structform.specs=[];var r={};Object.keys(e.dataType.specs).forEach((function(t,n){r.attribute=t,r.attributevalue=e.dataType.specs[t],a.structform.specs.push(r)}))}else"string"==e.dataType.type&&(this.structform.string=e.dataType.size)},deleteStruct:function(e){this.sizeForm.struct.splice(e,1)},preserve:function(){var e=this,t={thing:JSON.parse(n.getValue())};this.$update_object("Product",this.productId,t).then((function(t){t&&(e.$message({type:"success",message:"添加成功"}),e.schemadialogVisible=!1)})).catch((function(e){}))},Industry:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.option=[],t.next=3,e.$getIndustry("category",100);case 3:a=t.sent,r=a.results,r.map((function(t){var a={};a.value=t.type,a.label=t.data.CategoryName,a.id=t.data.Id,a.parentid=t.data.SuperId,e.option.push(a)})),e.getProDetail();case 7:case"end":return t.stop()}}),t)})))()},utc2beijing:function(e){var t=new Date(+new Date(e)+288e5).toISOString().replace(/T/g," ").replace(/\.[\d]{3}Z/,"");return t},getPropData:function(e){var t=this;0==e&&(this.productstart=0),this.CategoryKey=this.$route.query.CategoryKey;var a={keys:"count(*)",limit:this.productlength,skip:this.productstart,where:{"data.key":"category"}};0!=this.category.length&&(a.where.type=this.category[this.category.length-1]),Object(g["getDictCount"])(a).then((function(e){t.producttotal=e.count,t.PropData=e.results})).catch((function(e){}))},productSizeChange:function(e){this.productlength=e,this.getPropData()},productCurrentChange:function(e){this.productstart=(e-1)*this.productlength,this.getPropData()},checkAddTest:function(){var e=this;this.collectionDialogVisible=!0,this.editableTabsValue=this.wmxData[0].identifier,this.activeIndex=this.wmxData[0].identifier,this.editableTabs=[],this.editorList=[],this.tabIndex=1,this.ed3isShow=!1,this.editableTabs.push({title:this.wmxData[0].identifier,name:this.wmxData[0].identifier,leftItemPos:0,content:void 0==this.wmxData[0].dataForm?"":this.wmxData[0].dataForm.collection}),0==this.ed3isShow&&Object(y["setTimeout"])((function(){e.editorList.push(ace.edit(e.wmxData[0].identifier)),e.editorList[0].session.setMode("ace/mode/erlang"),e.editorList[0].setTheme("ace/theme/monokai"),e.editorList[0].setHighlightActiveLine(!0),e.editorList[0].setFontSize(20),e.editorList[0].setOptions({enableBasicAutocompletion:!0,enableSnippets:!0,enableLiveAutocompletion:!0}),e.ed3isShow=!0,e.editorList[0].setValue(void 0==e.wmxData[0].dataForm?"":e.wmxData[0].dataForm.collection)}),1)},handleRightTopTabClick:function(e,t){this.activeIndex=e.label},menuTabClick:function(e,t){var a=this;this.activeIndex=e.identifier;var r=this.editableTabs,n=!1,i=0;r.forEach((function(t,a){t.name===e.identifier&&(n=!0,i=a)})),0==n?(this.editableTabs.push({title:e.identifier,name:e.identifier,leftItemPos:t,content:void 0==e.dataForm?"":e.dataForm.collection}),Object(y["setTimeout"])((function(){a.editorList.push(ace.edit(e.identifier)),a.editorList[a.editorList.length-1].session.setMode("ace/mode/erlang"),a.editorList[a.editorList.length-1].setTheme("ace/theme/monokai"),a.editorList[a.editorList.length-1].setHighlightActiveLine(!0),a.editorList[a.editorList.length-1].setFontSize(20),a.editorList[a.editorList.length-1].setOptions({enableBasicAutocompletion:!0,enableSnippets:!0,enableLiveAutocompletion:!0}),a.editorList[a.editorList.length-1].setValue(void 0==e.dataForm?"":e.dataForm.collection)}),1),this.editableTabsValue=e.identifier,this.rightCollection=void 0==e.dataForm?"":e.dataForm.collection):(this.editableTabsValue=e.identifier,this.editorList[i].setValue(void 0==e.dataForm?"":e.dataForm.collection))},removeTab:function(e){var t=this.editableTabs,a=this.editableTabsValue;a===e&&t.forEach((function(r,n){if(r.name===e){var i=t[n+1]||t[n-1];i&&(a=i.name)}})),this.editableTabsValue=a,this.activeIndex=a,this.editableTabs=t.filter((function(t){return t.name!==e}))},onSaveTap:function(e){var t=this,a=this.editableTabs[e].leftItemPos;this.productdetail.thing.properties[a].dataForm.collection=this.editorList[e].getValue();var r={thing:this.productdetail.thing};this.$update_object("Product",this.productId,r).then((function(e){e&&(t.$message({type:"success",message:"添加成功"}),t.getProDetail())})).catch((function(e){}))},handleCloseCollecttion:function(e){this.$confirm("确认关闭？").then((function(t){e()})).catch((function(e){}))},onReductionTap:function(e){var t=this.editableTabs[e].leftItemPos;this.editorList[e].setValue(this.wmxData[t].dataForm.collection)},checkschema:function(){var e=this;this.schemadialogVisible=!0,Object(y["setTimeout"])((function(){n=ace.edit("editor1"),n.session.setMode("ace/mode/json"),n.setTheme("ace/theme/eclipse"),n.setOptions({enableBasicAutocompletion:!0,enableSnippets:!0,enableLiveAutocompletion:!0}),n.setValue(JSON.stringify(e.productdetail.thing,null,4))}),1)},getProDetail:function(){var e=this;r=ace.edit("editor"),r.session.setMode("ace/mode/erlang"),r.setTheme("ace/theme/monokai"),r.setOptions({enableBasicAutocompletion:!0,enableSnippets:!0,enableLiveAutocompletion:!0}),this.productId=this.$route.query.id,this.queryDeviceCount(this.productId),this.$get_object("Product",this.productId).then((function(t){if(t){for(var a in e.productName=t.name,t)e.productdetail[a]=t[a];e.option.map((function(t){e.productdetail.category==t.value&&(e.productdetail.category=t.label)})),e.productdetail.createdAt=e.utc2beijing(t.createdAt),e.productdetail.id=t.id,e.dynamicReg=t.dynamicReg,e.productdetail.isshow=0,e.form.Productname=t.name,e.ProductSecret=t.productSecret,e.form.Productkey=e.productId,e.productimg=t.icon,t.decoder?(x=t.decoder.code,e.formInline.name=t.decoder.name,e.formInline.version=t.decoder.version,e.formInline.desc=t.decoder.desc):x="JSUlLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQolJSUgQGNvcHlyaWdodCAoQykgMjAxOCwgPHNodXdhPgolJSUgQGRvYwolJSUg5Y2P6K6u6Kej5p6QRGVtbwolJSUgQGVuZAolJSUgQ3JlYXRlZCA6IDA4LiDljYHkuIDmnIggMjAxOCAxNDo0OQolJSUtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCi1tb2R1bGUoc2h1d2FfZGVtb19kZWNvZGVyKS4KLWF1dGhvcigic2h1d2EiKS4KLWRlZmluZShNU0dfVFlQRSwgPDwiREVNTyI+PikuCi1wcm90b2NvbChbPDwiREVNTyI+Pl0pLgoKLWV4cG9ydChbcGFyc2VfZnJhbWUvMiwgdG9fZnJhbWUvMV0pLgoKCnBhcnNlX2ZyYW1lKEJ1ZmYsIE9wdHMpIC0+CiAgICBwYXJzZV9mcmFtZShCdWZmLCBbXSwgT3B0cykuCgoKcGFyc2VfZnJhbWUoPDw+PiwgQWNjLCBfT3B0cykgLT4KICAgIHs8PD4+LCBBY2N9OwpwYXJzZV9mcmFtZSg8PDE2IzY4LCBSZXN0L2JpbmFyeT4+ID0gQmluLCBBY2MsIF9PcHRzKSB3aGVuIGJ5dGVfc2l6ZShSZXN0KSA9PCA2IC0+CiAgICB7QmluLCBBY2N9OwpwYXJzZV9mcmFtZSg8PDE2IzY4LCBMZW46MTYvbGl0dGxlLWludGVnZXIsIExlbjoxNi9saXR0bGUtaW50ZWdlciwgMTYjNjgsIFJlc3QvYmluYXJ5Pj4gPSBCaW4sIEFjYywgT3B0cykgLT4KICAgIGNhc2UgYnl0ZV9zaXplKFJlc3QpIC0gMiA+PSBMZW4gb2YKICAgICAgICB0cnVlIC0+CiAgICAgICAgICAgIGNhc2UgUmVzdCBvZgogICAgICAgICAgICAgICAgPDxVc2VyWm9uZTpMZW4vYnl0ZXMsIENyYzo4LCAxNiMxNiwgUmVzdDEvYmluYXJ5Pj4gLT4KICAgICAgICAgICAgICAgICAgICBBY2MxID0KICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBzaHV3YV91dGlsczpnZXRfcGFyaXR5KFVzZXJab25lKSA9Oj0gQ3JjIG9mCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnVlIC0+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRnJhbWUgPSAjewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8PCJtc2d0eXBlIj4+ID0+ID9NU0dfVFlQRSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPDwiZGF0YSI+PiA9PiBVc2VyWm9uZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQWNjICsrIFtGcmFtZV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYWxzZSAtPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFjYwogICAgICAgICAgICAgICAgICAgICAgICBlbmQsCiAgICAgICAgICAgICAgICAgICAgcGFyc2VfZnJhbWUoUmVzdDEsIEFjYzEsIE9wdHMpOwogICAgICAgICAgICAgICAgXyAtPgogICAgICAgICAgICAgICAgICAgIHBhcnNlX2ZyYW1lKFJlc3QsIEFjYywgT3B0cykKICAgICAgICAgICAgZW5kOwogICAgICAgIGZhbHNlIC0+CiAgICAgICAgICAgIHtCaW4sIEFjY30KICAgIGVuZDsKcGFyc2VfZnJhbWUoPDxfOjgsIFJlc3QvYmluYXJ5Pj4sIEFjYywgT3B0cykgLT4KICAgIHBhcnNlX2ZyYW1lKFJlc3QsIEFjYywgT3B0cykuCgoKJSUg57uE6KOF5oiQ5bCB5YyFLCDlj4LmlbDkuLpNYXDlvaLlvI8KdG9fZnJhbWUoI3s8PCJtc2d0eXBlIj4+IDo9ID9NU0dfVFlQRX0gPSBGcmFtZSkgLT4KICAgIFBheWxvYWQgPSB0ZXJtX3RvX2JpbmFyeShGcmFtZSksCiAgICA8PDE2IzAzLCBQYXlsb2FkL2JpbmFyeSwgMTYjMjM+Pi4=",void 0!=e.productdetail.thing&&"{}"!=JSON.stringify(e.productdetail.thing)||(e.productdetail.thing={properties:[]}),e.wmxData=[],e.wmxData=e.productdetail.thing.properties.filter((function(e){return e.name&&e.dataType})),r.setValue(I.decode(x)),r.gotoLine(r.session.getLength())}})).catch((function(t){e.$baseMessage("请求出错",t.error,3e3)}))},queryDeviceCount:function(e){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(m["getDeviceCountByProduct"])(e);case 2:t.form.ProductAll=a.sent;case 3:case"end":return a.stop()}}),a)})))()},handelUpdate:function(e,t){var a,r=this;a=1!=e,this.dynamicReg=a;var n={dynamicReg:!a};this.$update_object("Product",this.productId,n).then((function(e){e&&(r.$message({type:"success",message:"修改成功"}),r.dynamicReg=!a)})).catch((function(e){}))},wmxhandleClose:function(){this.wmxdialogVisible=!1,this.sizeForm=this.getFormOrginalData()},protol:function(){var e=this,t="";Object(v["Compile"])(I.encode(r.getValue())).then((function(a){a&&(e.$message({type:"success",message:"编译成功"}),t="编译成功"+a.mod+"\r\n",e.warningeditror=a.warnings,e.warningeditror.map((function(e){t+=e+"\r\n"})),T+=t,i.setValue(T))})).catch((function(a){e.warningeditror=a.error,e.warningeditror.map((function(e){t+=e+"\r\n"})),T+=t,i.setValue(T)}))},decoderSizeChange:function(e){this.decoder.length=e,this.chaxun()},devicerCurrentChange:function(e){this.decoderstart=(e-1)*this.decoderlength,this.chaxun()},deletedata:function(e){var t=this;this.$del_object("Dict",e).then((function(e){e&&(t.$message("成功删除"),t.chaxun())})).catch((function(e){}))},subAce:function(e,t){var a=this;this.$refs[e].validate((function(e){if(e){var n={name:a.formInline.name,version:a.formInline.version,code:I.encode(r.getValue()),desc:a.formInline.desc},s={decoder:n};a.$update_object("Product",a.productId,s).then((function(e){0==a.issub&&(a.$message({type:"success",message:"保存成功"}),1==t&&(T+="保存成功",i.setValue(T))),a.issub=!0})).catch((function(e){}))}else a.$message({type:"warning",message:"输入格式有误"})}))},subAce1:function(e){var t=this;this.$refs[e].validate((function(e){if(e){var a={where:{"data.name":t.formInline.name,"data.version":t.formInline.version}};t.$query_object("Dict",a).then((function(e){e.results&&e.results.length>=1?t.$message("此协议版本已存在"):t.$get_object("Product",t.productId).then((function(e){if(e){var a={name:t.formInline.name,version:t.formInline.version,code:I.encode(r.getValue()),desc:t.formInline.desc},n={key:t.formInline.name+":"+t.formInline.version,type:"decoder",data:a,ACL:e.ACL};t.$create_object("Dict",n).then((function(e){e.error?t.$message({type:"error",message:e.error}):t.$message({type:"success",message:"保存到公共协议库成功"})})).catch((function(e){}))}}))})).catch((function(e){}))}else t.$message({type:"warning",message:"输入格式有误"})}))},updatesub:function(e){var t=this;Object(v["subupadte"])(e.id,"update").then((function(e){e&&t.$message("重载成功")})).catch((function(e){t.$message(e.error)}))},chaxun:function(){var e=this,t={keys:"count(*)",skip:this.decoderstart,limit:this.decoderlength,where:{type:"decoder"}};this.dialogTableVisible=!0,this.$query_object("Dict",t).then((function(t){t&&(e.decodertotal=t.count,e.gridData=t.results)})).catch((function(e){}))},editordata:function(e){this.formInline.name=e.data.name,this.formInline.version=e.data.version,this.formInline.desc=e.data.desc,this.formInline.resource=e.data.enable,r.setValue(I.decode(e.data.code)),this.dialogTableVisible=!1},goToDevices:function(){this.$router.push({path:"/roles/thing",query:{productid:this.productId}})},addcategory:function(){this.originwmx=!0,this.getPropData()},handleChange:function(e,t,a){},TypeInstall:function(e,t){t.map((function(t,a){if("enum"==t.DataType||"bool"==t.DataType){var r={dataType:{specs:{}}};r.name=t.Name,r.dataType.type=t.DataType,r.required=t.Required,r.identifier=t.Identifier,r.accessMode=1==t.RwFlag?"r":"rw",JSON.parse(t.DataSpecsList).map((function(e){for(var t in e){var a=e["value"],n=e["name"];r.dataType.specs[a]=n}})),e.push(r)}else if("double"==t.DataType||"int"==t.DataType||"float"==t.DataType){r={dataType:{specs:{}}};for(var n in r.name=t.Name,r.dataType.type=t.DataType,r.required=t.Required,r.identifier=t.Identifier,r.accessMode=1==t.RwFlag?"r":"rw",JSON.parse(t.DataSpecs))r.dataType.specs.min=JSON.parse(t.DataSpecs)["min"],r.dataType.specs.max=JSON.parse(t.DataSpecs)["max"],r.dataType.specs.step=JSON.parse(t.DataSpecs)["step"],r.dataType.specs.unit=JSON.parse(t.DataSpecs)["unit"];e.push(r)}else if("struct"==t.DataType){var i={dataType:{specs:[]}};i.name=t.Name,i.dataType.type=t.DataType,i.required=!t.Required,i.identifier=t.Identifier,i.accessMode=1==t.RwFlag?"r":"rw",JSON.parse(t.DataSpecsList).map((function(e){if("enum"==e.childDataType||"bool"==e.childDataType){var t={dataType:{specs:{}}};t.name=e.childName,t.dataType.type=e.childDataType.toLowerCase(),t.required=e.Required,t.identifier=e.identifier,t.accessMode=1==e.RwFlag?"r":"rw",e.childEnumSpecsDTO.map((function(e){for(var a in e){var r=e["value"],n=e["name"];t.dataType.specs[r]=n}})),i.dataType.specs.push(t)}else if("double"==e.childDataType||"int"==e.childDataType||"float"==e.childDataType){t={dataType:{specs:{}}};for(var a in t.name=e.childName,t.dataType.type=e.childDataType.toLowerCase(),t.required=e.Required,t.identifier=e.identifier,t.accessMode=1==e.RwFlag?"r":"rw",e.childSpecsDTO)t.dataType.specs.min=e.childSpecsDTO["min"],t.dataType.specs.max=e.childSpecsDTO["max"],t.dataType.specs.step=e.childSpecsDTO["precise"],t.dataType.specs.unit=e.childSpecsDTO["unit"];i.dataType.specs.push(t)}})),e.push(i)}}));var a={};e=e.reduce((function(e,t){return!a[t.identifier]&&(a[t.identifier]=e.push(t)),e}),[])},addProCategory:function(e){var t=this,a={where:{type:e.type,"data.key":"detail"}};this.$query_object("Dict",a).then((function(e){var a=e.results;if(a&&a[0].data.Ability){t.TypeInstall(t.productdetail.thing.properties,a[0].data.Ability);var r={thing:t.productdetail.thing};t.$update_object("Product",t.productId,r).then((function(e){e&&(t.$message({type:"success",message:"添加成功"}),t.getProDetail())})).catch((function(e){}))}}))},deletewmx:function(e){var t=this;this.productdetail.thing.properties.splice((this.wmxstart-1)*this.wmxPageSize+e,1);var a={thing:this.productdetail.thing};this.$update_object("Product",this.productId,a).then((function(e){e&&(t.$message({type:"success",message:"删除成功"}),t.wmxData=t.productdetail.thing.properties.concat([]))})).catch((function(e){}))},wmxSizeChange:function(e){this.wmxstart=1,this.wmxPageSize=e},wmxCurrentChange:function(e){this.wmxstart=e},nowtime:function(){var e=Date.parse(new Date),t=new Date(e),a=(t.getFullYear(),t.getMonth()+1<=10?t.getMonth():t.getMonth(),t.getDate()+1<=10?t.getDate():t.getDate(),(t.getHours()+1<=10?"0"+t.getHours():t.getHours())+":"),r=(t.getMinutes()+1<=10?"0"+t.getMinutes():t.getMinutes())+":",n=t.getSeconds()+1<=10?"0"+t.getSeconds():t.getSeconds();return a+r+n+" "},subProTopic:function(e){this.subdialog=!0,this.subdialogid=e.id,this.channelname=e.id,Object(y["setTimeout"])((function(){s=ace.edit("subdialog"),s.session.setMode("ace/mode/text"),s.setTheme("ace/theme/gob"),s.setReadOnly(!0),s.setOptions({enableBasicAutocompletion:!1,enableSnippets:!0,enableLiveAutocompletion:!0})}));var t={topic:"log/channel/"+e.id+"/"+this.productId,qos:2},a=new RegExp("log/channel/"+e.id+"/"+this.productId),r="",n=this;_["Websocket"].add_hook(a,(function(e){s.session.getLength()>=1e3?r="":r+=n.nowtime()+e+"\n",s.setValue(r),s.gotoLine(s.session.getLength())}));var i=JSON.stringify({action:"start_logger"});_["Websocket"].subscribe(t,(function(t){if(t.result){var a={topic:"channel/"+e.id+"/"+n.productId,text:i,retained:!0,qos:2};_["Websocket"].sendMessage(a),n.subdialogtimer=window.setInterval((function(){_["Websocket"].sendMessage(a)}),6e5)}}))},handleCloseSubdialog:function(){var e=JSON.stringify({action:"stop_logger"}),t={topic:"channel/"+this.subdialogid+"/"+this.productId,text:e,retained:!0,qos:2};_["Websocket"].sendMessage(t),this.subdialog=!1,window.clearInterval(this.subdialogtimer),this.subdialogtimer=null},stopsub:function(e){var t;t=0==e?JSON.stringify({action:"stop_logger"}):JSON.stringify({action:"start_logger"});var a={topic:"channel/"+this.subdialogid+"/"+this.productId,text:t,retained:!0,qos:2};_["Websocket"].sendMessage(a)},subTopic:function(e,t){var a=this;this.$refs[e].validate((function(r){if(!r)return!1;var n="thing/"+a.productId+"/${DevAddr}/"+a.topicform.topic;a.$get_object("Product",a.productId).then((function(r){var i={topic:n,type:a.topicform.type,desc:a.topicform.desc},s=[];s.push(i);var o={};if(-1==t)s=s.concat(r.topics),o.topics=s;else{var l=r.topics.concat([]);l[t]=i,o.topics=l}a.$update_object("Product",a.productId,o).then((function(t){t&&(a.$message({type:"success",message:"成功"}),a.topicdialogVisible=!1,a.$refs[e].resetFields(),a.topicform.isupdated=-1,a.topicform.topic="",a.topicform.desc="",a.handleClick({name:"second"}))})).catch((function(e){}))}))}))},topicSizeChange:function(e){this.topicstart=1,this.topiclength=e},topicCurrentChange:function(e){this.topicstart=e},updatetopic:function(e,t){this.topicform.topic=e.topic.substr(e.topic.lastIndexOf("/")+1),this.topicform.type=e.type,this.topicform.desc=e.desc,this.topicdialogVisible=!0,this.topicform.isupdated=t},deletetopic:function(e,t){var a=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){var r,n,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a.$get_object("Product",a.productId);case 2:r=e.sent,n=r.topics,n&&(i=n.concat([]),i.splice(t,1),s={topics:i},a.$update_object("Product",a.productId,s),a.$message({type:"success",message:"删除成功"})),a.getTopic();case 6:case"end":return e.stop()}}),e)})))()},orginRule:function(){var e=this;Object(h["getRule"])().then((function(t){t&&(e.engineData=t)})).catch((function(t){e.$message(t.error)}))},handleSizeChange:function(e){},handleCurrentChange:function(e){},addEngine:function(){this.$router.push({path:"/rules_engine/addengine",query:{title:"新增",productid:this.productId}})},actions:function(e){var t=[];return e.map((function(e){t.push(e.name)})),t.join(",")},getRowindex:function(e,t,a){if(0==e.columnIndex)return"firstcolumn"},detailRules:function(e){this.$router.push({path:"/rules_engine/checkengine",query:{id:e}})}}},A=S,F=(a("0ab2"),a("12b5"),a("527b"),a("2877")),$=Object(F["a"])(A,u,d,!1,null,"caf6d478",null);t["default"]=$.exports},fdf6:function(e,t,a){"use strict";a("355d")},fedc:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"workbench-container"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{lg:8,md:12,sm:24,xl:6,xs:24}},[a("order")],1),a("el-col",{attrs:{lg:16,md:12,sm:24,xl:18,xs:24}},[a("target")],1)],1)],1)},n=[],i=a("f466"),s=a("0eea"),o={name:"Workbench",components:{Order:i["default"],Target:s["default"]}},l=o,c=(a("efe1"),a("2877")),u=Object(c["a"])(l,r,n,!1,null,"73fce909",null);t["default"]=u.exports}}]);