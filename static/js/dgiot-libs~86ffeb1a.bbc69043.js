/*!
 *  build: 杭州数蛙科技有限公司 
 *  copyright: dgiot_dashboard 
 *  time: Thu Jul 29 2021 03:00:55 GMT+0000 (Coordinated Universal Time)
 */
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["dgiot-libs~86ffeb1a"],{3352:function(e,t,n){"use strict";var i,s;n.d(t,"d",(function(){return i})),n.d(t,"c",(function(){return s})),n.d(t,"e",(function(){return r})),n.d(t,"b",(function(){return o})),n.d(t,"f",(function(){return a})),n.d(t,"a",(function(){return l})),function(e){e[e["Left"]=1]="Left",e[e["Center"]=2]="Center",e[e["Right"]=4]="Right",e[e["Full"]=7]="Full"}(i||(i={})),function(e){e[e["Inline"]=1]="Inline",e[e["Gutter"]=2]="Gutter"}(s||(s={}));class r{constructor(e){this.tabSize=Math.max(1,0|e.tabSize),this.indentSize=0|e.tabSize,this.insertSpaces=Boolean(e.insertSpaces),this.defaultEOL=0|e.defaultEOL,this.trimAutoWhitespace=Boolean(e.trimAutoWhitespace)}equals(e){return this.tabSize===e.tabSize&&this.indentSize===e.indentSize&&this.insertSpaces===e.insertSpaces&&this.defaultEOL===e.defaultEOL&&this.trimAutoWhitespace===e.trimAutoWhitespace}createChangeEvent(e){return{tabSize:this.tabSize!==e.tabSize,indentSize:this.indentSize!==e.indentSize,insertSpaces:this.insertSpaces!==e.insertSpaces,trimAutoWhitespace:this.trimAutoWhitespace!==e.trimAutoWhitespace}}}class o{constructor(e,t){this.range=e,this.matches=t}}class a{constructor(e,t,n,i,s,r){this.identifier=e,this.range=t,this.text=n,this.forceMoveMarkers=i,this.isAutoWhitespaceEdit=s,this._isTracked=r}}class l{constructor(e,t,n){this.reverseEdits=e,this.changes=t,this.trimAutoWhitespaceLineNumbers=n}}},4111:function(e,t,n){"use strict";n.d(t,"f",(function(){return l})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return f})),n.d(t,"a",(function(){return g})),n.d(t,"e",(function(){return m})),n.d(t,"d",(function(){return L}));var i=n("e8e3"),s=n("e1b5"),r=n("7061"),o=n("6a89"),a=n("b707");function l(e){let t=0,n=0,i=0,s=0;for(let r=0,o=e.length;r<o;r++){const a=e.charCodeAt(r);13===a?(0===t&&(n=r),t++,r+1<o&&10===e.charCodeAt(r+1)?(s|=2,r++):s|=3,i=r+1):10===a&&(s|=1,0===t&&(n=r),t++,i=r+1)}return 0===t&&(n=e.length),[t,n,e.length-i,s]}function h(e){return(16384|e<<0|2<<23)>>>0}const u=new Uint32Array(0).buffer;class c{constructor(){this.tokens=[]}add(e,t){if(this.tokens.length>0){const n=this.tokens[this.tokens.length-1],i=n.startLineNumber+n.tokens.length-1;if(i+1===e)return void n.tokens.push(t)}this.tokens.push(new _(e,[t]))}}class f{constructor(e){this._tokens=e,this._tokenCount=e.length/4}toString(e){let t=[];for(let n=0;n<this._tokenCount;n++)t.push(`(${this._getDeltaLine(n)+e},${this._getStartCharacter(n)}-${this._getEndCharacter(n)})`);return`[${t.join(",")}]`}getMaxDeltaLine(){const e=this._getTokenCount();return 0===e?-1:this._getDeltaLine(e-1)}getRange(){const e=this._getTokenCount();if(0===e)return null;const t=this._getStartCharacter(0),n=this._getDeltaLine(e-1),i=this._getEndCharacter(e-1);return new o["a"](0,t+1,n,i+1)}_getTokenCount(){return this._tokenCount}_getDeltaLine(e){return this._tokens[4*e]}_getStartCharacter(e){return this._tokens[4*e+1]}_getEndCharacter(e){return this._tokens[4*e+2]}isEmpty(){return 0===this._getTokenCount()}getLineTokens(e){let t=0,n=this._getTokenCount()-1;while(t<n){const i=t+Math.floor((n-t)/2),s=this._getDeltaLine(i);if(s<e)t=i+1;else{if(!(s>e)){let s=i;while(s>t&&this._getDeltaLine(s-1)===e)s--;let r=i;while(r<n&&this._getDeltaLine(r+1)===e)r++;return new d(this._tokens.subarray(4*s,4*r+4))}n=i-1}}return this._getDeltaLine(t)===e?new d(this._tokens.subarray(4*t,4*t+4)):null}clear(){this._tokenCount=0}removeTokens(e,t,n,i){const s=this._tokens,r=this._tokenCount;let o=0,a=!1,l=0;for(let h=0;h<r;h++){const r=4*h,u=s[r],c=s[r+1],f=s[r+2],d=s[r+3];if((u>e||u===e&&f>=t)&&(u<n||u===n&&c<=i))a=!0;else{if(0===o&&(l=u),a){const e=4*o;s[e]=u-l,s[e+1]=c,s[e+2]=f,s[e+3]=d}o++}}return this._tokenCount=o,l}split(e,t,n,i){const s=this._tokens,r=this._tokenCount;let o=[],a=[],l=o,h=0,u=0;for(let c=0;c<r;c++){const r=4*c,o=s[r],f=s[r+1],d=s[r+2],g=s[r+3];if(o>e||o===e&&d>=t){if(o<n||o===n&&f<=i)continue;l!==a&&(l=a,h=0,u=o)}l[h++]=o-u,l[h++]=f,l[h++]=d,l[h++]=g}return[new f(new Uint32Array(o)),new f(new Uint32Array(a)),u]}acceptDeleteRange(e,t,n,i,s){const r=this._tokens,o=this._tokenCount,a=i-t;let l=0,h=!1;for(let u=0;u<o;u++){const c=4*u;let f=r[c],d=r[c+1],g=r[c+2];const _=r[c+3];if(f<t||f===t&&g<=n){l++;continue}if(f===t&&d<n)f===i&&g>s?g-=s-n:g=n;else if(f===t&&d===n){if(!(f===i&&g>s)){h=!0;continue}g-=s-n}else if(f<i||f===i&&d<s){if(!(f===i&&g>s)){h=!0;continue}f===t?(d=n,g=d+(g-s)):(d=0,g=d+(g-s))}else if(f>i){if(0===a&&!h){l=o;break}f-=a}else{if(!(f===i&&d>=s))throw new Error("Not possible!");e&&0===f&&(d+=e,g+=e),f-=a,d-=s-n,g-=s-n}const p=4*l;r[p]=f,r[p+1]=d,r[p+2]=g,r[p+3]=_,l++}this._tokenCount=l}acceptInsertText(e,t,n,i,s,r){const o=0===n&&1===i&&(r>=48&&r<=57||r>=65&&r<=90||r>=97&&r<=122),a=this._tokens,l=this._tokenCount;for(let h=0;h<l;h++){const r=4*h;let l=a[r],u=a[r+1],c=a[r+2];if(!(l<e||l===e&&c<t)){if(l===e&&c===t){if(!o)continue;c+=1}else if(l===e&&u<t&&t<c)0===n?c+=i:c=t;else{if(l===e&&u===t&&o)continue;if(l===e)if(l+=n,0===n)u+=i,c+=i;else{const e=c-u;u=s+(u-t),c=u+e}else l+=n}a[r]=l,a[r+1]=u,a[r+2]=c}}}}class d{constructor(e){this._tokens=e}getCount(){return this._tokens.length/4}getStartCharacter(e){return this._tokens[4*e+1]}getEndCharacter(e){return this._tokens[4*e+2]}getMetadata(e){return this._tokens[4*e+3]}}class g{constructor(e,t){this.startLineNumber=e,this.tokens=t,this.endLineNumber=this.startLineNumber+this.tokens.getMaxDeltaLine()}toString(){return this.tokens.toString(this.startLineNumber)}_updateEndLineNumber(){this.endLineNumber=this.startLineNumber+this.tokens.getMaxDeltaLine()}isEmpty(){return this.tokens.isEmpty()}getLineTokens(e){return this.startLineNumber<=e&&e<=this.endLineNumber?this.tokens.getLineTokens(e-this.startLineNumber):null}getRange(){const e=this.tokens.getRange();return e?new o["a"](this.startLineNumber+e.startLineNumber,e.startColumn,this.startLineNumber+e.endLineNumber,e.endColumn):e}removeTokens(e){const t=e.startLineNumber-this.startLineNumber,n=e.endLineNumber-this.startLineNumber;this.startLineNumber+=this.tokens.removeTokens(t,e.startColumn-1,n,e.endColumn-1),this._updateEndLineNumber()}split(e){const t=e.startLineNumber-this.startLineNumber,n=e.endLineNumber-this.startLineNumber,[i,s,r]=this.tokens.split(t,e.startColumn-1,n,e.endColumn-1);return[new g(this.startLineNumber,i),new g(this.startLineNumber+r,s)]}applyEdit(e,t){const[n,i,s]=l(t);this.acceptEdit(e,n,i,s,t.length>0?t.charCodeAt(0):0)}acceptEdit(e,t,n,i,s){this._acceptDeleteRange(e),this._acceptInsertText(new r["a"](e.startLineNumber,e.startColumn),t,n,i,s),this._updateEndLineNumber()}_acceptDeleteRange(e){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return;const t=e.startLineNumber-this.startLineNumber,n=e.endLineNumber-this.startLineNumber;if(n<0){const e=n-t;return void(this.startLineNumber-=e)}const i=this.tokens.getMaxDeltaLine();if(!(t>=i+1)){if(t<0&&n>=i+1)return this.startLineNumber=0,void this.tokens.clear();if(t<0){const i=-t;this.startLineNumber-=i,this.tokens.acceptDeleteRange(e.startColumn-1,0,0,n,e.endColumn-1)}else this.tokens.acceptDeleteRange(0,t,e.startColumn-1,n,e.endColumn-1)}}_acceptInsertText(e,t,n,i,s){if(0===t&&0===n)return;const r=e.lineNumber-this.startLineNumber;if(r<0)return void(this.startLineNumber+=t);const o=this.tokens.getMaxDeltaLine();r>=o+1||this.tokens.acceptInsertText(r,e.column-1,t,n,i,s)}}class _{constructor(e,t){this.startLineNumber=e,this.tokens=t}}function p(e){return e instanceof Uint32Array?e:new Uint32Array(e)}class m{constructor(){this._pieces=[],this._isComplete=!1}flush(){this._pieces=[],this._isComplete=!1}isEmpty(){return 0===this._pieces.length}set(e,t){this._pieces=e||[],this._isComplete=t}setPartial(e,t){let n=e;if(t.length>0){const i=t[0].getRange(),s=t[t.length-1].getRange();if(!i||!s)return e;n=e.plusRange(i).plusRange(s)}let s=null;for(let i=0,r=this._pieces.length;i<r;i++){const e=this._pieces[i];if(e.endLineNumber<n.startLineNumber)continue;if(e.startLineNumber>n.endLineNumber){s=s||{index:i};break}if(e.removeTokens(n),e.isEmpty()){this._pieces.splice(i,1),i--,r--;continue}if(e.endLineNumber<n.startLineNumber)continue;if(e.startLineNumber>n.endLineNumber){s=s||{index:i};continue}const[t,o]=e.split(n);t.isEmpty()?s=s||{index:i}:o.isEmpty()||(this._pieces.splice(i,1,t,o),i++,r++,s=s||{index:i})}return s=s||{index:this._pieces.length},t.length>0&&(this._pieces=i["a"](this._pieces,s.index,t)),n}isComplete(){return this._isComplete}addSemanticTokens(e,t){const n=this._pieces;if(0===n.length)return t;const i=m._findFirstPieceWithLine(n,e),r=n[i].getLineTokens(e);if(!r)return t;const o=t.getCount(),a=r.getCount();let l=0,h=[],u=0,c=0;const f=(e,t)=>{e!==c&&(c=e,h[u++]=e,h[u++]=t)};for(let s=0;s<a;s++){const e=r.getStartCharacter(s),n=r.getEndCharacter(s),i=r.getMetadata(s),a=((1&i?2048:0)|(2&i?4096:0)|(4&i?8192:0)|(8&i?8372224:0)|(16&i?4286578688:0))>>>0,h=~a>>>0;while(l<o&&t.getEndOffset(l)<=e)f(t.getEndOffset(l),t.getMetadata(l)),l++;l<o&&t.getStartOffset(l)<e&&f(e,t.getMetadata(l));while(l<o&&t.getEndOffset(l)<n)f(t.getEndOffset(l),t.getMetadata(l)&h|i&a),l++;if(l<o)f(n,t.getMetadata(l)&h|i&a),t.getEndOffset(l)===n&&l++;else{const e=Math.min(Math.max(0,l-1),o-1);f(n,t.getMetadata(e)&h|i&a)}}while(l<o)f(t.getEndOffset(l),t.getMetadata(l)),l++;return new s["a"](new Uint32Array(h),t.getLineContent())}static _findFirstPieceWithLine(e,t){let n=0,i=e.length-1;while(n<i){let s=n+Math.floor((i-n)/2);if(e[s].endLineNumber<t)n=s+1;else{if(!(e[s].startLineNumber>t)){while(s>n&&e[s-1].startLineNumber<=t&&t<=e[s-1].endLineNumber)s--;return s}i=s-1}}return n}acceptEdit(e,t,n,i,s){for(const r of this._pieces)r.acceptEdit(e,t,n,i,s)}}class L{constructor(){this._lineTokens=[],this._len=0}flush(){this._lineTokens=[],this._len=0}getTokens(e,t,n){let i=null;if(t<this._len&&(i=this._lineTokens[t]),null!==i&&i!==u)return new s["a"](p(i),n);let r=new Uint32Array(2);return r[0]=n.length,r[1]=h(e),new s["a"](r,n)}static _massageTokens(e,t,n){const i=n?p(n):null;if(0===t){let t=!1;if(i&&i.length>1&&(t=a["A"].getLanguageId(i[1])!==e),!t)return u}if(!i||0===i.length){const n=new Uint32Array(2);return n[0]=t,n[1]=h(e),n.buffer}return i[i.length-2]=t,0===i.byteOffset&&i.byteLength===i.buffer.byteLength?i.buffer:i}_ensureLine(e){while(e>=this._len)this._lineTokens[this._len]=null,this._len++}_deleteLines(e,t){0!==t&&(e+t>this._len&&(t=this._len-e),this._lineTokens.splice(e,t),this._len-=t)}_insertLines(e,t){if(0===t)return;let n=[];for(let i=0;i<t;i++)n[i]=null;this._lineTokens=i["a"](this._lineTokens,e,n),this._len+=t}setTokens(e,t,n,i,s){const r=L._massageTokens(e,n,i);this._ensureLine(t);const o=this._lineTokens[t];return this._lineTokens[t]=r,!!s&&!L._equals(o,r)}static _equals(e,t){if(!e||!t)return!e&&!t;const n=p(e),i=p(t);if(n.length!==i.length)return!1;for(let s=0,r=n.length;s<r;s++)if(n[s]!==i[s])return!1;return!0}acceptEdit(e,t,n){this._acceptDeleteRange(e),this._acceptInsertText(new r["a"](e.startLineNumber,e.startColumn),t,n)}_acceptDeleteRange(e){const t=e.startLineNumber-1;if(t>=this._len)return;if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;return void(this._lineTokens[t]=L._delete(this._lineTokens[t],e.startColumn-1,e.endColumn-1))}this._lineTokens[t]=L._deleteEnding(this._lineTokens[t],e.startColumn-1);const n=e.endLineNumber-1;let i=null;n<this._len&&(i=L._deleteBeginning(this._lineTokens[n],e.endColumn-1)),this._lineTokens[t]=L._append(this._lineTokens[t],i),this._deleteLines(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t,n){if(0===t&&0===n)return;const i=e.lineNumber-1;i>=this._len||(0!==t?(this._lineTokens[i]=L._deleteEnding(this._lineTokens[i],e.column-1),this._lineTokens[i]=L._insert(this._lineTokens[i],e.column-1,n),this._insertLines(e.lineNumber,t)):this._lineTokens[i]=L._insert(this._lineTokens[i],e.column-1,n))}static _deleteBeginning(e,t){return null===e||e===u?e:L._delete(e,0,t)}static _deleteEnding(e,t){if(null===e||e===u)return e;const n=p(e),i=n[n.length-2];return L._delete(e,t,i)}static _delete(e,t,n){if(null===e||e===u||t===n)return e;const i=p(e),r=i.length>>>1;if(0===t&&i[i.length-2]===n)return u;const o=s["a"].findIndexInTokensArray(i,t),a=o>0?i[o-1<<1]:0,l=i[o<<1];if(n<l){const s=n-t;for(let e=o;e<r;e++)i[e<<1]-=s;return e}let h,c;a!==t?(i[o<<1]=t,h=o+1<<1,c=t):(h=o<<1,c=a);const f=n-t;for(let s=o+1;s<r;s++){const e=i[s<<1]-f;e>c&&(i[h++]=e,i[h++]=i[1+(s<<1)],c=e)}if(h===i.length)return e;let d=new Uint32Array(h);return d.set(i.subarray(0,h),0),d.buffer}static _append(e,t){if(t===u)return e;if(e===u)return t;if(null===e)return e;if(null===t)return null;const n=p(e),i=p(t),s=i.length>>>1;let r=new Uint32Array(n.length+i.length);r.set(n,0);let o=n.length;const a=n[n.length-2];for(let l=0;l<s;l++)r[o++]=i[l<<1]+a,r[o++]=i[1+(l<<1)];return r.buffer}static _insert(e,t,n){if(null===e||e===u)return e;const i=p(e),r=i.length>>>1;let o=s["a"].findIndexInTokensArray(i,t);if(o>0){const e=i[o-1<<1];e===t&&o--}for(let s=o;s<r;s++)i[s<<1]+=n;return e}}},a054:function(e,t,n){"use strict";n.d(t,"b",(function(){return _})),n.d(t,"a",(function(){return p}));var i=n("dff7"),s=n("fdcc"),r=n("8025"),o=n("6d8e"),a=n("e679"),l=n("1e93"),h=n("82c9");function u(e){return e.toString()}class c{constructor(e,t,n,i,s,r,o){this.beforeVersionId=e,this.afterVersionId=t,this.beforeEOL=n,this.afterEOL=i,this.beforeCursorState=s,this.afterCursorState=r,this.changes=o}static create(e,t){const n=e.getAlternativeVersionId(),i=g(e);return new c(n,n,i,i,t,t,[])}append(e,t,n,i,s){t.length>0&&(this.changes=Object(a["b"])(this.changes,t)),this.afterEOL=n,this.afterVersionId=i,this.afterCursorState=s}static _writeSelectionsSize(e){return 4+16*(e?e.length:0)}static _writeSelections(e,t,n){if(l["f"](e,t?t.length:0,n),n+=4,t)for(const i of t)l["f"](e,i.selectionStartLineNumber,n),n+=4,l["f"](e,i.selectionStartColumn,n),n+=4,l["f"](e,i.positionLineNumber,n),n+=4,l["f"](e,i.positionColumn,n),n+=4;return n}static _readSelections(e,t,n){const i=l["c"](e,t);t+=4;for(let s=0;s<i;s++){const i=l["c"](e,t);t+=4;const s=l["c"](e,t);t+=4;const o=l["c"](e,t);t+=4;const a=l["c"](e,t);t+=4,n.push(new r["a"](i,s,o,a))}return t}serialize(){let e=10+c._writeSelectionsSize(this.beforeCursorState)+c._writeSelectionsSize(this.afterCursorState)+4;for(const i of this.changes)e+=i.writeSize();const t=new Uint8Array(e);let n=0;l["f"](t,this.beforeVersionId,n),n+=4,l["f"](t,this.afterVersionId,n),n+=4,l["g"](t,this.beforeEOL,n),n+=1,l["g"](t,this.afterEOL,n),n+=1,n=c._writeSelections(t,this.beforeCursorState,n),n=c._writeSelections(t,this.afterCursorState,n),l["f"](t,this.changes.length,n),n+=4;for(const i of this.changes)n=i.write(t,n);return t.buffer}static deserialize(e){const t=new Uint8Array(e);let n=0;const i=l["c"](t,n);n+=4;const s=l["c"](t,n);n+=4;const r=l["d"](t,n);n+=1;const o=l["d"](t,n);n+=1;const h=[];n=c._readSelections(t,n,h);const u=[];n=c._readSelections(t,n,u);const f=l["c"](t,n);n+=4;const d=[];for(let l=0;l<f;l++)n=a["a"].read(t,n,d);return new c(i,s,r,o,h,u,d)}}class f{constructor(e,t){this.model=e,this._data=c.create(e,t)}get type(){return 0}get resource(){return o["a"].isUri(this.model)?this.model:this.model.uri}get label(){return i["a"]("edit","Typing")}toString(){const e=this._data instanceof c?this._data:c.deserialize(this._data);return e.changes.map(e=>e.toString()).join(", ")}matchesResource(e){const t=o["a"].isUri(this.model)?this.model:this.model.uri;return t.toString()===e.toString()}setModel(e){this.model=e}canAppend(e){return this.model===e&&this._data instanceof c}append(e,t,n,i,s){this._data instanceof c&&this._data.append(e,t,n,i,s)}close(){this._data instanceof c&&(this._data=this._data.serialize())}open(){this._data instanceof c||(this._data=c.deserialize(this._data))}undo(){if(o["a"].isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof c&&(this._data=this._data.serialize());const e=c.deserialize(this._data);this.model._applyUndo(e.changes,e.beforeEOL,e.beforeVersionId,e.beforeCursorState)}redo(){if(o["a"].isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof c&&(this._data=this._data.serialize());const e=c.deserialize(this._data);this.model._applyRedo(e.changes,e.afterEOL,e.afterVersionId,e.afterCursorState)}heapSize(){return this._data instanceof c&&(this._data=this._data.serialize()),this._data.byteLength+168}}class d{constructor(e,t){this.type=1,this.label=e,this._isOpen=!0,this._editStackElementsArr=t.slice(0),this._editStackElementsMap=new Map;for(const n of this._editStackElementsArr){const e=u(n.resource);this._editStackElementsMap.set(e,n)}this._delegate=null}get resources(){return this._editStackElementsArr.map(e=>e.resource)}prepareUndoRedo(){if(this._delegate)return this._delegate.prepareUndoRedo(this)}matchesResource(e){const t=u(e);return this._editStackElementsMap.has(t)}setModel(e){const t=u(o["a"].isUri(e)?e:e.uri);this._editStackElementsMap.has(t)&&this._editStackElementsMap.get(t).setModel(e)}canAppend(e){if(!this._isOpen)return!1;const t=u(e.uri);if(this._editStackElementsMap.has(t)){const n=this._editStackElementsMap.get(t);return n.canAppend(e)}return!1}append(e,t,n,i,s){const r=u(e.uri),o=this._editStackElementsMap.get(r);o.append(e,t,n,i,s)}close(){this._isOpen=!1}open(){}undo(){this._isOpen=!1;for(const e of this._editStackElementsArr)e.undo()}redo(){for(const e of this._editStackElementsArr)e.redo()}heapSize(e){const t=u(e);if(this._editStackElementsMap.has(t)){const e=this._editStackElementsMap.get(t);return e.heapSize()}return 0}split(){return this._editStackElementsArr}toString(){let e=[];for(const t of this._editStackElementsArr)e.push(`${Object(h["b"])(t.resource)}: ${t}`);return`{${e.join(", ")}}`}}function g(e){const t=e.getEOL();return"\n"===t?0:1}function _(e){return!!e&&(e instanceof f||e instanceof d)}class p{constructor(e,t){this._model=e,this._undoRedoService=t}pushStackElement(){const e=this._undoRedoService.getLastElement(this._model.uri);_(e)&&e.close()}popStackElement(){const e=this._undoRedoService.getLastElement(this._model.uri);_(e)&&e.open()}clear(){this._undoRedoService.removeElements(this._model.uri)}_getOrCreateEditStackElement(e){const t=this._undoRedoService.getLastElement(this._model.uri);if(_(t)&&t.canAppend(this._model))return t;const n=new f(this._model,e);return this._undoRedoService.pushElement(n),n}pushEOL(e){const t=this._getOrCreateEditStackElement(null);this._model.setEOL(e),t.append(this._model,[],g(this._model),this._model.getAlternativeVersionId(),null)}pushEditOperation(e,t,n){const i=this._getOrCreateEditStackElement(e),s=this._model.applyEdits(t,!0),r=p._computeCursorState(n,s),o=s.map((e,t)=>({index:t,textChange:e.textChange}));return o.sort((e,t)=>e.textChange.oldPosition===t.textChange.oldPosition?e.index-t.index:e.textChange.oldPosition-t.textChange.oldPosition),i.append(this._model,o.map(e=>e.textChange),g(this._model),this._model.getAlternativeVersionId(),r),r}static _computeCursorState(e,t){try{return e?e(t):null}catch(n){return Object(s["e"])(n),null}}}},a411:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("3742"),s=n("7061"),r=n("2de5");class o{constructor(e,t,n,i){this._uri=e,this._lines=t,this._eol=n,this._versionId=i,this._lineStarts=null,this._cachedTextValue=null}dispose(){this._lines.length=0}get version(){return this._versionId}getText(){return null===this._cachedTextValue&&(this._cachedTextValue=this._lines.join(this._eol)),this._cachedTextValue}onEvents(e){e.eol&&e.eol!==this._eol&&(this._eol=e.eol,this._lineStarts=null);const t=e.changes;for(const n of t)this._acceptDeleteRange(n.range),this._acceptInsertText(new s["a"](n.range.startLineNumber,n.range.startColumn),n.text);this._versionId=e.versionId,this._cachedTextValue=null}_ensureLineStarts(){if(!this._lineStarts){const e=this._eol.length,t=this._lines.length,n=new Uint32Array(t);for(let i=0;i<t;i++)n[i]=this._lines[i].length+e;this._lineStarts=new r["a"](n)}}_setLineText(e,t){this._lines[e]=t,this._lineStarts&&this._lineStarts.changeValue(e,this._lines[e].length+this._eol.length)}_acceptDeleteRange(e){if(e.startLineNumber!==e.endLineNumber)this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.endLineNumber-1].substring(e.endColumn-1)),this._lines.splice(e.startLineNumber,e.endLineNumber-e.startLineNumber),this._lineStarts&&this._lineStarts.removeValues(e.startLineNumber,e.endLineNumber-e.startLineNumber);else{if(e.startColumn===e.endColumn)return;this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.startLineNumber-1].substring(e.endColumn-1))}}_acceptInsertText(e,t){if(0===t.length)return;let n=Object(i["Q"])(t);if(1===n.length)return void this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+n[0]+this._lines[e.lineNumber-1].substring(e.column-1));n[n.length-1]+=this._lines[e.lineNumber-1].substring(e.column-1),this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+n[0]);let s=new Uint32Array(n.length-1);for(let i=1;i<n.length;i++)this._lines.splice(e.lineNumber+i-1,0,n[i]),s[i-1]=n[i].length+this._eol.length;this._lineStarts&&this._lineStarts.insertValues(e.lineNumber,s)}}},b57f:function(e,t,n){"use strict";n.d(t,"b",(function(){return pt})),n.d(t,"a",(function(){return Nt}));var i=n("fdcc"),s=n("308f"),r=n("a666"),o=n("3742"),a=n("6d8e"),l=n("fd49"),h=n("7061"),u=n("6a89"),c=n("8025"),f=n("3352"),d=n("a054");class g{constructor(){this.spacesDiff=0,this.looksLikeAlignment=!1}}function _(e,t,n,i,s){let r;for(s.spacesDiff=0,s.looksLikeAlignment=!1,r=0;r<t&&r<i;r++){let t=e.charCodeAt(r),i=n.charCodeAt(r);if(t!==i)break}let o=0,a=0;for(let f=r;f<t;f++){let t=e.charCodeAt(f);32===t?o++:a++}let l=0,h=0;for(let f=r;f<i;f++){let e=n.charCodeAt(f);32===e?l++:h++}if(o>0&&a>0)return;if(l>0&&h>0)return;let u=Math.abs(a-h),c=Math.abs(o-l);if(0===u)return s.spacesDiff=c,void(c>0&&0<=l-1&&l-1<e.length&&l<n.length&&32!==n.charCodeAt(l)&&32===e.charCodeAt(l-1)&&44===e.charCodeAt(e.length-1)&&(s.looksLikeAlignment=!0));c%u!==0||(s.spacesDiff=c/u)}function p(e,t,n){const i=Math.min(e.getLineCount(),1e4);let s=0,r=0,o="",a=0;const l=[2,4,6,8,3,5,7],h=8;let u=[0,0,0,0,0,0,0,0,0],c=new g;for(let g=1;g<=i;g++){let i=e.getLineLength(g),l=e.getLineContent(g);const f=i<=65536;let d=!1,p=0,m=0,L=0;for(let t=0,n=i;t<n;t++){let n=f?l.charCodeAt(t):e.getLineCharCode(g,t);if(9===n)L++;else{if(32!==n){d=!0,p=t;break}m++}}if(!d)continue;if(L>0?s++:m>1&&r++,_(o,a,l,p,c),c.looksLikeAlignment&&(!n||t!==c.spacesDiff))continue;let b=c.spacesDiff;b<=h&&u[b]++,o=l,a=p}let f=n;s!==r&&(f=s<r);let d=t;if(f){let e=f?0:.1*i;l.forEach(t=>{let n=u[t];n>e&&(e=n,d=t)}),4===d&&u[4]>0&&u[2]>0&&u[2]>=u[4]/2&&(d=2)}return{insertSpaces:f,tabSize:d}}function m(e){return(1&e.metadata)>>>0}function L(e,t){e.metadata=254&e.metadata|t<<0}function b(e){return(2&e.metadata)>>>1===1}function C(e,t){e.metadata=253&e.metadata|(t?1:0)<<1}function w(e){return(4&e.metadata)>>>2===1}function I(e,t){e.metadata=251&e.metadata|(t?1:0)<<2}function N(e){return(8&e.metadata)>>>3===1}function S(e,t){e.metadata=247&e.metadata|(t?1:0)<<3}function k(e){return(48&e.metadata)>>>4}function x(e,t){e.metadata=207&e.metadata|t<<4}function v(e){return(64&e.metadata)>>>6===1}function E(e,t){e.metadata=191&e.metadata|(t?1:0)<<6}class T{constructor(e,t,n){this.metadata=0,this.parent=this,this.left=this,this.right=this,L(this,1),this.start=t,this.end=n,this.delta=0,this.maxEnd=n,this.id=e,this.ownerId=0,this.options=null,I(this,!1),x(this,1),S(this,!1),E(this,!1),this.cachedVersionId=0,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=n,this.range=null,C(this,!1)}reset(e,t,n,i){this.start=t,this.end=n,this.maxEnd=n,this.cachedVersionId=e,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=n,this.range=i}setOptions(e){this.options=e;let t=this.options.className;I(this,"squiggly-error"===t||"squiggly-warning"===t||"squiggly-info"===t),x(this,this.options.stickiness),S(this,!(!this.options.overviewRuler||!this.options.overviewRuler.color)),E(this,this.options.collapseOnReplaceEdit)}setCachedOffsets(e,t,n){this.cachedVersionId!==n&&(this.range=null),this.cachedVersionId=n,this.cachedAbsoluteStart=e,this.cachedAbsoluteEnd=t}detach(){this.parent=null,this.left=null,this.right=null}}const O=new T(null,0,0);O.parent=O,O.left=O,O.right=O,L(O,0);class A{constructor(){this.root=O,this.requestNormalizeDelta=!1}intervalSearch(e,t,n,i,s){return this.root===O?[]:V(this,e,t,n,i,s)}search(e,t,n){return this.root===O?[]:P(this,e,t,n)}collectNodesFromOwner(e){return B(this,e)}collectNodesPostOrder(){return F(this)}insert(e){W(this,e),this._normalizeDeltaIfNecessary()}delete(e){j(this,e),this._normalizeDeltaIfNecessary()}resolveNode(e,t){const n=e;let i=0;while(e!==this.root)e===e.parent.right&&(i+=e.parent.delta),e=e.parent;const s=n.start+i,r=n.end+i;n.setCachedOffsets(s,r,t)}acceptReplace(e,t,n,i){const s=z(this,e,e+t);for(let r=0,o=s.length;r<o;r++){const e=s[r];j(this,e)}this._normalizeDeltaIfNecessary(),y(this,e,e+t,n),this._normalizeDeltaIfNecessary();for(let r=0,o=s.length;r<o;r++){const o=s[r];o.start=o.cachedAbsoluteStart,o.end=o.cachedAbsoluteEnd,D(o,e,e+t,n,i),o.maxEnd=o.end,W(this,o)}this._normalizeDeltaIfNecessary()}_normalizeDeltaIfNecessary(){this.requestNormalizeDelta&&(this.requestNormalizeDelta=!1,M(this))}}function M(e){let t=e.root,n=0;while(t!==O)t.left===O||b(t.left)?t.right===O||b(t.right)?(t.start=n+t.start,t.end=n+t.end,t.delta=0,J(t),C(t,!0),C(t.left,!1),C(t.right,!1),t===t.parent.right&&(n-=t.parent.delta),t=t.parent):(n+=t.delta,t=t.right):t=t.left;C(e.root,!1)}function R(e,t,n,i){return e<n||!(e>n)&&(1!==i&&(2===i||t))}function D(e,t,n,i,s){const r=k(e),o=0===r||2===r,a=1===r||2===r,l=n-t,h=i,u=Math.min(l,h),c=e.start;let f=!1;const d=e.end;let g=!1;t<=c&&d<=n&&v(e)&&(e.start=t,f=!0,e.end=t,g=!0);{const e=s?1:l>0?2:0;!f&&R(c,o,t,e)&&(f=!0),!g&&R(d,a,t,e)&&(g=!0)}if(u>0&&!s){const e=l>h?2:0;!f&&R(c,o,t+u,e)&&(f=!0),!g&&R(d,a,t+u,e)&&(g=!0)}{const i=s?1:0;!f&&R(c,o,n,i)&&(e.start=t+h,f=!0),!g&&R(d,a,n,i)&&(e.end=t+h,g=!0)}const _=h-l;f||(e.start=Math.max(0,c+_)),g||(e.end=Math.max(0,d+_)),e.start>e.end&&(e.end=e.start)}function z(e,t,n){let i=e.root,s=0,r=0,o=0,a=0,l=[],h=0;while(i!==O)if(b(i))C(i.left,!1),C(i.right,!1),i===i.parent.right&&(s-=i.parent.delta),i=i.parent;else{if(!b(i.left)){if(r=s+i.maxEnd,r<t){C(i,!0);continue}if(i.left!==O){i=i.left;continue}}o=s+i.start,o>n?C(i,!0):(a=s+i.end,a>=t&&(i.setCachedOffsets(o,a,0),l[h++]=i),C(i,!0),i.right===O||b(i.right)||(s+=i.delta,i=i.right))}return C(e.root,!1),l}function y(e,t,n,i){let s=e.root,r=0,o=0,a=0;const l=i-(n-t);while(s!==O)if(b(s))C(s.left,!1),C(s.right,!1),s===s.parent.right&&(r-=s.parent.delta),J(s),s=s.parent;else{if(!b(s.left)){if(o=r+s.maxEnd,o<t){C(s,!0);continue}if(s.left!==O){s=s.left;continue}}a=r+s.start,a>n?(s.start+=l,s.end+=l,s.delta+=l,(s.delta<-1073741824||s.delta>1073741824)&&(e.requestNormalizeDelta=!0),C(s,!0)):(C(s,!0),s.right===O||b(s.right)||(r+=s.delta,s=s.right))}C(e.root,!1)}function B(e,t){let n=e.root,i=[],s=0;while(n!==O)b(n)?(C(n.left,!1),C(n.right,!1),n=n.parent):n.left===O||b(n.left)?(n.ownerId===t&&(i[s++]=n),C(n,!0),n.right===O||b(n.right)||(n=n.right)):n=n.left;return C(e.root,!1),i}function F(e){let t=e.root,n=[],i=0;while(t!==O)b(t)?(C(t.left,!1),C(t.right,!1),t=t.parent):t.left===O||b(t.left)?t.right===O||b(t.right)?(n[i++]=t,C(t,!0)):t=t.right:t=t.left;return C(e.root,!1),n}function P(e,t,n,i){let s=e.root,r=0,o=0,a=0,l=[],h=0;while(s!==O){if(b(s)){C(s.left,!1),C(s.right,!1),s===s.parent.right&&(r-=s.parent.delta),s=s.parent;continue}if(s.left!==O&&!b(s.left)){s=s.left;continue}o=r+s.start,a=r+s.end,s.setCachedOffsets(o,a,i);let e=!0;t&&s.ownerId&&s.ownerId!==t&&(e=!1),n&&w(s)&&(e=!1),e&&(l[h++]=s),C(s,!0),s.right===O||b(s.right)||(r+=s.delta,s=s.right)}return C(e.root,!1),l}function V(e,t,n,i,s,r){let o=e.root,a=0,l=0,h=0,u=0,c=[],f=0;while(o!==O)if(b(o))C(o.left,!1),C(o.right,!1),o===o.parent.right&&(a-=o.parent.delta),o=o.parent;else{if(!b(o.left)){if(l=a+o.maxEnd,l<t){C(o,!0);continue}if(o.left!==O){o=o.left;continue}}if(h=a+o.start,h>n)C(o,!0);else{if(u=a+o.end,u>=t){o.setCachedOffsets(h,u,r);let e=!0;i&&o.ownerId&&o.ownerId!==i&&(e=!1),s&&w(o)&&(e=!1),e&&(c[f++]=o)}C(o,!0),o.right===O||b(o.right)||(a+=o.delta,o=o.right)}}return C(e.root,!1),c}function W(e,t){if(e.root===O)return t.parent=O,t.left=O,t.right=O,L(t,0),e.root=t,e.root;U(e,t),Z(t.parent);let n=t;while(n!==e.root&&1===m(n.parent))if(n.parent===n.parent.parent.left){const t=n.parent.parent.right;1===m(t)?(L(n.parent,0),L(t,0),L(n.parent.parent,1),n=n.parent.parent):(n===n.parent.right&&(n=n.parent,H(e,n)),L(n.parent,0),L(n.parent.parent,1),G(e,n.parent.parent))}else{const t=n.parent.parent.left;1===m(t)?(L(n.parent,0),L(t,0),L(n.parent.parent,1),n=n.parent.parent):(n===n.parent.left&&(n=n.parent,G(e,n)),L(n.parent,0),L(n.parent.parent,1),H(e,n.parent.parent))}return L(e.root,0),t}function U(e,t){let n=0,i=e.root;const s=t.start,r=t.end;while(1){const e=K(s,r,i.start+n,i.end+n);if(e<0){if(i.left===O){t.start-=n,t.end-=n,t.maxEnd-=n,i.left=t;break}i=i.left}else{if(i.right===O){t.start-=n+i.delta,t.end-=n+i.delta,t.maxEnd-=n+i.delta,i.right=t;break}n+=i.delta,i=i.right}}t.parent=i,t.left=O,t.right=O,L(t,1)}function j(e,t){let n,i;if(t.left===O?(n=t.right,i=t,n.delta+=t.delta,(n.delta<-1073741824||n.delta>1073741824)&&(e.requestNormalizeDelta=!0),n.start+=t.delta,n.end+=t.delta):t.right===O?(n=t.left,i=t):(i=q(t.right),n=i.right,n.start+=i.delta,n.end+=i.delta,n.delta+=i.delta,(n.delta<-1073741824||n.delta>1073741824)&&(e.requestNormalizeDelta=!0),i.start+=t.delta,i.end+=t.delta,i.delta=t.delta,(i.delta<-1073741824||i.delta>1073741824)&&(e.requestNormalizeDelta=!0)),i===e.root)return e.root=n,L(n,0),t.detach(),$(),J(n),void(e.root.parent=O);let s,r=1===m(i);if(i===i.parent.left?i.parent.left=n:i.parent.right=n,i===t?n.parent=i.parent:(i.parent===t?n.parent=i:n.parent=i.parent,i.left=t.left,i.right=t.right,i.parent=t.parent,L(i,m(t)),t===e.root?e.root=i:t===t.parent.left?t.parent.left=i:t.parent.right=i,i.left!==O&&(i.left.parent=i),i.right!==O&&(i.right.parent=i)),t.detach(),r)return Z(n.parent),i!==t&&(Z(i),Z(i.parent)),void $();Z(n),Z(n.parent),i!==t&&(Z(i),Z(i.parent));while(n!==e.root&&0===m(n))n===n.parent.left?(s=n.parent.right,1===m(s)&&(L(s,0),L(n.parent,1),H(e,n.parent),s=n.parent.right),0===m(s.left)&&0===m(s.right)?(L(s,1),n=n.parent):(0===m(s.right)&&(L(s.left,0),L(s,1),G(e,s),s=n.parent.right),L(s,m(n.parent)),L(n.parent,0),L(s.right,0),H(e,n.parent),n=e.root)):(s=n.parent.left,1===m(s)&&(L(s,0),L(n.parent,1),G(e,n.parent),s=n.parent.left),0===m(s.left)&&0===m(s.right)?(L(s,1),n=n.parent):(0===m(s.left)&&(L(s.right,0),L(s,1),H(e,s),s=n.parent.left),L(s,m(n.parent)),L(n.parent,0),L(s.left,0),G(e,n.parent),n=e.root));L(n,0),$()}function q(e){while(e.left!==O)e=e.left;return e}function $(){O.parent=O,O.delta=0,O.start=0,O.end=0}function H(e,t){const n=t.right;n.delta+=t.delta,(n.delta<-1073741824||n.delta>1073741824)&&(e.requestNormalizeDelta=!0),n.start+=t.delta,n.end+=t.delta,t.right=n.left,n.left!==O&&(n.left.parent=t),n.parent=t.parent,t.parent===O?e.root=n:t===t.parent.left?t.parent.left=n:t.parent.right=n,n.left=t,t.parent=n,J(t),J(n)}function G(e,t){const n=t.left;t.delta-=n.delta,(t.delta<-1073741824||t.delta>1073741824)&&(e.requestNormalizeDelta=!0),t.start-=n.delta,t.end-=n.delta,t.left=n.right,n.right!==O&&(n.right.parent=t),n.parent=t.parent,t.parent===O?e.root=n:t===t.parent.right?t.parent.right=n:t.parent.left=n,n.right=t,t.parent=n,J(t),J(n)}function Y(e){let t=e.end;if(e.left!==O){const n=e.left.maxEnd;n>t&&(t=n)}if(e.right!==O){const n=e.right.maxEnd+e.delta;n>t&&(t=n)}return t}function J(e){e.maxEnd=Y(e)}function Z(e){while(e!==O){const t=Y(e);if(e.maxEnd===t)return;e.maxEnd=t,e=e.parent}}function K(e,t,n,i){return e===n?t-i:e-n}class Q{constructor(e,t){this.piece=e,this.color=t,this.size_left=0,this.lf_left=0,this.parent=this,this.left=this,this.right=this}next(){if(this.right!==X)return ee(this.right);let e=this;while(e.parent!==X){if(e.parent.left===e)break;e=e.parent}return e.parent===X?X:e.parent}prev(){if(this.left!==X)return te(this.left);let e=this;while(e.parent!==X){if(e.parent.right===e)break;e=e.parent}return e.parent===X?X:e.parent}detach(){this.parent=null,this.left=null,this.right=null}}const X=new Q(null,0);function ee(e){while(e.left!==X)e=e.left;return e}function te(e){while(e.right!==X)e=e.right;return e}function ne(e){return e===X?0:e.size_left+e.piece.length+ne(e.right)}function ie(e){return e===X?0:e.lf_left+e.piece.lineFeedCnt+ie(e.right)}function se(){X.parent=X}function re(e,t){let n=t.right;n.size_left+=t.size_left+(t.piece?t.piece.length:0),n.lf_left+=t.lf_left+(t.piece?t.piece.lineFeedCnt:0),t.right=n.left,n.left!==X&&(n.left.parent=t),n.parent=t.parent,t.parent===X?e.root=n:t.parent.left===t?t.parent.left=n:t.parent.right=n,n.left=t,t.parent=n}function oe(e,t){let n=t.left;t.left=n.right,n.right!==X&&(n.right.parent=t),n.parent=t.parent,t.size_left-=n.size_left+(n.piece?n.piece.length:0),t.lf_left-=n.lf_left+(n.piece?n.piece.lineFeedCnt:0),t.parent===X?e.root=n:t===t.parent.right?t.parent.right=n:t.parent.left=n,n.right=t,t.parent=n}function ae(e,t){let n,i;if(t.left===X?(i=t,n=i.right):t.right===X?(i=t,n=i.left):(i=ee(t.right),n=i.right),i===e.root)return e.root=n,n.color=0,t.detach(),se(),void(e.root.parent=X);let s,r=1===i.color;if(i===i.parent.left?i.parent.left=n:i.parent.right=n,i===t?(n.parent=i.parent,ue(e,n)):(i.parent===t?n.parent=i:n.parent=i.parent,ue(e,n),i.left=t.left,i.right=t.right,i.parent=t.parent,i.color=t.color,t===e.root?e.root=i:t===t.parent.left?t.parent.left=i:t.parent.right=i,i.left!==X&&(i.left.parent=i),i.right!==X&&(i.right.parent=i),i.size_left=t.size_left,i.lf_left=t.lf_left,ue(e,i)),t.detach(),n.parent.left===n){let t=ne(n),i=ie(n);if(t!==n.parent.size_left||i!==n.parent.lf_left){let s=t-n.parent.size_left,r=i-n.parent.lf_left;n.parent.size_left=t,n.parent.lf_left=i,he(e,n.parent,s,r)}}if(ue(e,n.parent),r)se();else{while(n!==e.root&&0===n.color)n===n.parent.left?(s=n.parent.right,1===s.color&&(s.color=0,n.parent.color=1,re(e,n.parent),s=n.parent.right),0===s.left.color&&0===s.right.color?(s.color=1,n=n.parent):(0===s.right.color&&(s.left.color=0,s.color=1,oe(e,s),s=n.parent.right),s.color=n.parent.color,n.parent.color=0,s.right.color=0,re(e,n.parent),n=e.root)):(s=n.parent.left,1===s.color&&(s.color=0,n.parent.color=1,oe(e,n.parent),s=n.parent.left),0===s.left.color&&0===s.right.color?(s.color=1,n=n.parent):(0===s.left.color&&(s.right.color=0,s.color=1,re(e,s),s=n.parent.left),s.color=n.parent.color,n.parent.color=0,s.left.color=0,oe(e,n.parent),n=e.root));n.color=0,se()}}function le(e,t){ue(e,t);while(t!==e.root&&1===t.parent.color)if(t.parent===t.parent.parent.left){const n=t.parent.parent.right;1===n.color?(t.parent.color=0,n.color=0,t.parent.parent.color=1,t=t.parent.parent):(t===t.parent.right&&(t=t.parent,re(e,t)),t.parent.color=0,t.parent.parent.color=1,oe(e,t.parent.parent))}else{const n=t.parent.parent.left;1===n.color?(t.parent.color=0,n.color=0,t.parent.parent.color=1,t=t.parent.parent):(t===t.parent.left&&(t=t.parent,oe(e,t)),t.parent.color=0,t.parent.parent.color=1,re(e,t.parent.parent))}e.root.color=0}function he(e,t,n,i){while(t!==e.root&&t!==X)t.parent.left===t&&(t.parent.size_left+=n,t.parent.lf_left+=i),t=t.parent}function ue(e,t){let n=0,i=0;if(t!==e.root){if(0===n){while(t!==e.root&&t===t.parent.right)t=t.parent;if(t===e.root)return;t=t.parent,n=ne(t.left)-t.size_left,i=ie(t.left)-t.lf_left,t.size_left+=n,t.lf_left+=i}while(t!==e.root&&(0!==n||0!==i))t.parent.left===t&&(t.parent.size_left+=n,t.parent.lf_left+=i),t=t.parent}}X.parent=X,X.left=X,X.right=X,X.color=0;var ce=n("e6ff");const fe=999;class de{constructor(e,t,n,i){this.searchString=e,this.isRegex=t,this.matchCase=n,this.wordSeparators=i}parseSearchRequest(){if(""===this.searchString)return null;let e;e=this.isRegex?ge(this.searchString):this.searchString.indexOf("\n")>=0;let t=null;try{t=o["p"](this.searchString,this.isRegex,{matchCase:this.matchCase,wholeWord:!1,multiline:e,global:!0,unicode:!0})}catch(i){return null}if(!t)return null;let n=!this.isRegex&&!e;return n&&this.searchString.toLowerCase()!==this.searchString.toUpperCase()&&(n=this.matchCase),new _e(t,this.wordSeparators?Object(ce["a"])(this.wordSeparators):null,n?this.searchString:null)}}function ge(e){if(!e||0===e.length)return!1;for(let t=0,n=e.length;t<n;t++){const i=e.charCodeAt(t);if(92===i){if(t++,t>=n)break;const i=e.charCodeAt(t);if(110===i||114===i||87===i||119===i)return!0}}return!1}class _e{constructor(e,t,n){this.regex=e,this.wordSeparators=t,this.simpleSearch=n}}function pe(e,t,n){if(!n)return new f["b"](e,null);let i=[];for(let s=0,r=t.length;s<r;s++)i[s]=t[s];return new f["b"](e,i)}class me{constructor(e){let t=[],n=0;for(let i=0,s=e.length;i<s;i++)10===e.charCodeAt(i)&&(t[n++]=i);this._lineFeedsOffsets=t}findLineFeedCountBeforeOffset(e){const t=this._lineFeedsOffsets;let n=0,i=t.length-1;if(-1===i)return 0;if(e<=t[0])return 0;while(n<i){const s=n+((i-n)/2>>0);t[s]>=e?i=s-1:t[s+1]>=e?(n=s,i=s):n=s+1}return n+1}}class Le{static findMatches(e,t,n,i,s){const r=t.parseSearchRequest();return r?r.regex.multiline?this._doFindMatchesMultiline(e,n,new Ie(r.wordSeparators,r.regex),i,s):this._doFindMatchesLineByLine(e,n,r,i,s):[]}static _getMultilineMatchRange(e,t,n,i,s,r){let o,a,l=0;if(i?(l=i.findLineFeedCountBeforeOffset(s),o=t+s+l):o=t+s,i){let e=i.findLineFeedCountBeforeOffset(s+r.length),t=e-l;a=o+r.length+t}else a=o+r.length;const h=e.getPositionAt(o),c=e.getPositionAt(a);return new u["a"](h.lineNumber,h.column,c.lineNumber,c.column)}static _doFindMatchesMultiline(e,t,n,i,s){const r=e.getOffsetAt(t.getStartPosition()),o=e.getValueInRange(t,1),a="\r\n"===e.getEOL()?new me(o):null,l=[];let h,u=0;n.reset(0);while(h=n.next(o))if(l[u++]=pe(this._getMultilineMatchRange(e,r,o,a,h.index,h[0]),h,i),u>=s)return l;return l}static _doFindMatchesLineByLine(e,t,n,i,s){const r=[];let o=0;if(t.startLineNumber===t.endLineNumber){const a=e.getLineContent(t.startLineNumber).substring(t.startColumn-1,t.endColumn-1);return o=this._findMatchesInLine(n,a,t.startLineNumber,t.startColumn-1,o,r,i,s),r}const a=e.getLineContent(t.startLineNumber).substring(t.startColumn-1);o=this._findMatchesInLine(n,a,t.startLineNumber,t.startColumn-1,o,r,i,s);for(let l=t.startLineNumber+1;l<t.endLineNumber&&o<s;l++)o=this._findMatchesInLine(n,e.getLineContent(l),l,0,o,r,i,s);if(o<s){const a=e.getLineContent(t.endLineNumber).substring(0,t.endColumn-1);o=this._findMatchesInLine(n,a,t.endLineNumber,0,o,r,i,s)}return r}static _findMatchesInLine(e,t,n,i,s,r,o,a){const l=e.wordSeparators;if(!o&&e.simpleSearch){const o=e.simpleSearch,h=o.length,c=t.length;let d=-h;while(-1!==(d=t.indexOf(o,d+h)))if((!l||we(l,t,c,d,h))&&(r[s++]=new f["b"](new u["a"](n,d+1+i,n,d+1+h+i),null),s>=a))return s;return s}const h=new Ie(e.wordSeparators,e.regex);let c;h.reset(0);do{if(c=h.next(t),c&&(r[s++]=pe(new u["a"](n,c.index+1+i,n,c.index+1+c[0].length+i),c,o),s>=a))return s}while(c);return s}static findNextMatch(e,t,n,i){const s=t.parseSearchRequest();if(!s)return null;const r=new Ie(s.wordSeparators,s.regex);return s.regex.multiline?this._doFindNextMatchMultiline(e,n,r,i):this._doFindNextMatchLineByLine(e,n,r,i)}static _doFindNextMatchMultiline(e,t,n,i){const s=new h["a"](t.lineNumber,1),r=e.getOffsetAt(s),o=e.getLineCount(),a=e.getValueInRange(new u["a"](s.lineNumber,s.column,o,e.getLineMaxColumn(o)),1),l="\r\n"===e.getEOL()?new me(a):null;n.reset(t.column-1);let c=n.next(a);return c?pe(this._getMultilineMatchRange(e,r,a,l,c.index,c[0]),c,i):1!==t.lineNumber||1!==t.column?this._doFindNextMatchMultiline(e,new h["a"](1,1),n,i):null}static _doFindNextMatchLineByLine(e,t,n,i){const s=e.getLineCount(),r=t.lineNumber,o=e.getLineContent(r),a=this._findFirstMatchInLine(n,o,r,t.column,i);if(a)return a;for(let l=1;l<=s;l++){const t=(r+l-1)%s,o=e.getLineContent(t+1),a=this._findFirstMatchInLine(n,o,t+1,1,i);if(a)return a}return null}static _findFirstMatchInLine(e,t,n,i,s){e.reset(i-1);const r=e.next(t);return r?pe(new u["a"](n,r.index+1,n,r.index+1+r[0].length),r,s):null}static findPreviousMatch(e,t,n,i){const s=t.parseSearchRequest();if(!s)return null;const r=new Ie(s.wordSeparators,s.regex);return s.regex.multiline?this._doFindPreviousMatchMultiline(e,n,r,i):this._doFindPreviousMatchLineByLine(e,n,r,i)}static _doFindPreviousMatchMultiline(e,t,n,i){const s=this._doFindMatchesMultiline(e,new u["a"](1,1,t.lineNumber,t.column),n,i,10*fe);if(s.length>0)return s[s.length-1];const r=e.getLineCount();return t.lineNumber!==r||t.column!==e.getLineMaxColumn(r)?this._doFindPreviousMatchMultiline(e,new h["a"](r,e.getLineMaxColumn(r)),n,i):null}static _doFindPreviousMatchLineByLine(e,t,n,i){const s=e.getLineCount(),r=t.lineNumber,o=e.getLineContent(r).substring(0,t.column-1),a=this._findLastMatchInLine(n,o,r,i);if(a)return a;for(let l=1;l<=s;l++){const t=(s+r-l-1)%s,o=e.getLineContent(t+1),a=this._findLastMatchInLine(n,o,t+1,i);if(a)return a}return null}static _findLastMatchInLine(e,t,n,i){let s,r=null;e.reset(0);while(s=e.next(t))r=pe(new u["a"](n,s.index+1,n,s.index+1+s[0].length),s,i);return r}}function be(e,t,n,i,s){if(0===i)return!0;const r=t.charCodeAt(i-1);if(0!==e.get(r))return!0;if(13===r||10===r)return!0;if(s>0){const n=t.charCodeAt(i);if(0!==e.get(n))return!0}return!1}function Ce(e,t,n,i,s){if(i+s===n)return!0;const r=t.charCodeAt(i+s);if(0!==e.get(r))return!0;if(13===r||10===r)return!0;if(s>0){const n=t.charCodeAt(i+s-1);if(0!==e.get(n))return!0}return!1}function we(e,t,n,i,s){return be(e,t,n,i,s)&&Ce(e,t,n,i,s)}class Ie{constructor(e,t){this._wordSeparators=e,this._searchRegex=t,this._prevMatchStartIndex=-1,this._prevMatchLength=0}reset(e){this._searchRegex.lastIndex=e,this._prevMatchStartIndex=-1,this._prevMatchLength=0}next(e){const t=e.length;let n;do{if(this._prevMatchStartIndex+this._prevMatchLength===t)return null;if(n=this._searchRegex.exec(e),!n)return null;const i=n.index,s=n[0].length;if(i===this._prevMatchStartIndex&&s===this._prevMatchLength){if(0===s){o["z"](e,t,this._searchRegex.lastIndex)>65535?this._searchRegex.lastIndex+=2:this._searchRegex.lastIndex+=1;continue}return null}if(this._prevMatchStartIndex=i,this._prevMatchLength=s,!this._wordSeparators||we(this._wordSeparators,e,t,i,s))return n}while(n);return null}}const Ne=65535;function Se(e){let t;return t=e[e.length-1]<65536?new Uint16Array(e.length):new Uint32Array(e.length),t.set(e,0),t}class ke{constructor(e,t,n,i,s){this.lineStarts=e,this.cr=t,this.lf=n,this.crlf=i,this.isBasicASCII=s}}function xe(e,t=!0){let n=[0],i=1;for(let s=0,r=e.length;s<r;s++){const t=e.charCodeAt(s);13===t?s+1<r&&10===e.charCodeAt(s+1)?(n[i++]=s+2,s++):n[i++]=s+1:10===t&&(n[i++]=s+1)}return t?Se(n):n}function ve(e,t){e.length=0,e[0]=0;let n=1,i=0,s=0,r=0,o=!0;for(let l=0,h=t.length;l<h;l++){const a=t.charCodeAt(l);13===a?l+1<h&&10===t.charCodeAt(l+1)?(r++,e[n++]=l+2,l++):(i++,e[n++]=l+1):10===a?(s++,e[n++]=l+1):o&&9!==a&&(a<32||a>126)&&(o=!1)}const a=new ke(Se(e),i,s,r,o);return e.length=0,a}class Ee{constructor(e,t,n,i,s){this.bufferIndex=e,this.start=t,this.end=n,this.lineFeedCnt=i,this.length=s}}class Te{constructor(e,t){this.buffer=e,this.lineStarts=t}}class Oe{constructor(e,t){this._pieces=[],this._tree=e,this._BOM=t,this._index=0,e.root!==X&&e.iterate(e.root,e=>(e!==X&&this._pieces.push(e.piece),!0))}read(){return 0===this._pieces.length?0===this._index?(this._index++,this._BOM):null:this._index>this._pieces.length-1?null:0===this._index?this._BOM+this._tree.getPieceContent(this._pieces[this._index++]):this._tree.getPieceContent(this._pieces[this._index++])}}class Ae{constructor(e){this._limit=e,this._cache=[]}get(e){for(let t=this._cache.length-1;t>=0;t--){let n=this._cache[t];if(n.nodeStartOffset<=e&&n.nodeStartOffset+n.node.piece.length>=e)return n}return null}get2(e){for(let t=this._cache.length-1;t>=0;t--){let n=this._cache[t];if(n.nodeStartLineNumber&&n.nodeStartLineNumber<e&&n.nodeStartLineNumber+n.node.piece.lineFeedCnt>=e)return n}return null}set(e){this._cache.length>=this._limit&&this._cache.shift(),this._cache.push(e)}validate(e){let t=!1,n=this._cache;for(let i=0;i<n.length;i++){let s=n[i];(null===s.node.parent||s.nodeStartOffset>=e)&&(n[i]=null,t=!0)}if(t){let e=[];for(const t of n)null!==t&&e.push(t);this._cache=e}}}class Me{constructor(e,t,n){this.create(e,t,n)}create(e,t,n){this._buffers=[new Te("",[0])],this._lastChangeBufferPos={line:0,column:0},this.root=X,this._lineCnt=1,this._length=0,this._EOL=t,this._EOLLength=t.length,this._EOLNormalized=n;let i=null;for(let s=0,r=e.length;s<r;s++)if(e[s].buffer.length>0){e[s].lineStarts||(e[s].lineStarts=xe(e[s].buffer));let t=new Ee(s+1,{line:0,column:0},{line:e[s].lineStarts.length-1,column:e[s].buffer.length-e[s].lineStarts[e[s].lineStarts.length-1]},e[s].lineStarts.length-1,e[s].buffer.length);this._buffers.push(e[s]),i=this.rbInsertRight(i,t)}this._searchCache=new Ae(1),this._lastVisitedLine={lineNumber:0,value:""},this.computeBufferMetadata()}normalizeEOL(e){let t=Ne,n=t-Math.floor(t/3),i=2*n,s="",r=0,o=[];if(this.iterate(this.root,t=>{let a=this.getNodeContent(t),l=a.length;if(r<=n||r+l<i)return s+=a,r+=l,!0;let h=s.replace(/\r\n|\r|\n/g,e);return o.push(new Te(h,xe(h))),s=a,r=l,!0}),r>0){let t=s.replace(/\r\n|\r|\n/g,e);o.push(new Te(t,xe(t)))}this.create(o,e,!0)}getEOL(){return this._EOL}setEOL(e){this._EOL=e,this._EOLLength=this._EOL.length,this.normalizeEOL(e)}createSnapshot(e){return new Oe(this,e)}getOffsetAt(e,t){let n=0,i=this.root;while(i!==X)if(i.left!==X&&i.lf_left+1>=e)i=i.left;else{if(i.lf_left+i.piece.lineFeedCnt+1>=e){n+=i.size_left;let s=this.getAccumulatedValue(i,e-i.lf_left-2);return n+(s+t-1)}e-=i.lf_left+i.piece.lineFeedCnt,n+=i.size_left+i.piece.length,i=i.right}return n}getPositionAt(e){e=Math.floor(e),e=Math.max(0,e);let t=this.root,n=0,i=e;while(t!==X)if(0!==t.size_left&&t.size_left>=e)t=t.left;else{if(t.size_left+t.piece.length>=e){let s=this.getIndexOf(t,e-t.size_left);if(n+=t.lf_left+s.index,0===s.index){let e=this.getOffsetAt(n+1,1),t=i-e;return new h["a"](n+1,t+1)}return new h["a"](n+1,s.remainder+1)}if(e-=t.size_left+t.piece.length,n+=t.lf_left+t.piece.lineFeedCnt,t.right===X){let t=this.getOffsetAt(n+1,1),s=i-e-t;return new h["a"](n+1,s+1)}t=t.right}return new h["a"](1,1)}getValueInRange(e,t){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return"";let n=this.nodeAt2(e.startLineNumber,e.startColumn),i=this.nodeAt2(e.endLineNumber,e.endColumn),s=this.getValueInRange2(n,i);return t?t===this._EOL&&this._EOLNormalized&&t===this.getEOL()&&this._EOLNormalized?s:s.replace(/\r\n|\r|\n/g,t):s}getValueInRange2(e,t){if(e.node===t.node){let n=e.node,i=this._buffers[n.piece.bufferIndex].buffer,s=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);return i.substring(s+e.remainder,s+t.remainder)}let n=e.node,i=this._buffers[n.piece.bufferIndex].buffer,s=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start),r=i.substring(s+e.remainder,s+n.piece.length);n=n.next();while(n!==X){let e=this._buffers[n.piece.bufferIndex].buffer,i=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);if(n===t.node){r+=e.substring(i,i+t.remainder);break}r+=e.substr(i,n.piece.length),n=n.next()}return r}getLinesContent(){let e=[],t=0,n="",i=!1;return this.iterate(this.root,s=>{if(s===X)return!0;const r=s.piece;let o=r.length;if(0===o)return!0;const a=this._buffers[r.bufferIndex].buffer,l=this._buffers[r.bufferIndex].lineStarts,h=r.start.line,u=r.end.line;let c=l[h]+r.start.column;if(i&&(10===a.charCodeAt(c)&&(c++,o--),e[t++]=n,n="",i=!1,0===o))return!0;if(h===u)return this._EOLNormalized||13!==a.charCodeAt(c+o-1)?n+=a.substr(c,o):(i=!0,n+=a.substr(c,o-1)),!0;n+=this._EOLNormalized?a.substring(c,Math.max(c,l[h+1]-this._EOLLength)):a.substring(c,l[h+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=n;for(let i=h+1;i<u;i++)n=this._EOLNormalized?a.substring(l[i],l[i+1]-this._EOLLength):a.substring(l[i],l[i+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=n;return this._EOLNormalized||13!==a.charCodeAt(l[u]+r.end.column-1)?n=a.substr(l[u],r.end.column):(i=!0,0===r.end.column?t--:n=a.substr(l[u],r.end.column-1)),!0}),i&&(e[t++]=n,n=""),e[t++]=n,e}getLength(){return this._length}getLineCount(){return this._lineCnt}getLineContent(e){return this._lastVisitedLine.lineNumber===e||(this._lastVisitedLine.lineNumber=e,e===this._lineCnt?this._lastVisitedLine.value=this.getLineRawContent(e):this._EOLNormalized?this._lastVisitedLine.value=this.getLineRawContent(e,this._EOLLength):this._lastVisitedLine.value=this.getLineRawContent(e).replace(/(\r\n|\r|\n)$/,"")),this._lastVisitedLine.value}_getCharCode(e){if(e.remainder===e.node.piece.length){let t=e.node.next();if(!t)return 0;let n=this._buffers[t.piece.bufferIndex],i=this.offsetInBuffer(t.piece.bufferIndex,t.piece.start);return n.buffer.charCodeAt(i)}{let t=this._buffers[e.node.piece.bufferIndex],n=this.offsetInBuffer(e.node.piece.bufferIndex,e.node.piece.start),i=n+e.remainder;return t.buffer.charCodeAt(i)}}getLineCharCode(e,t){let n=this.nodeAt2(e,t+1);return this._getCharCode(n)}getLineLength(e){if(e===this.getLineCount()){let t=this.getOffsetAt(e,1);return this.getLength()-t}return this.getOffsetAt(e+1,1)-this.getOffsetAt(e,1)-this._EOLLength}findMatchesInNode(e,t,n,i,s,r,o,a,l,h,c){let f,d,g,_=this._buffers[e.piece.bufferIndex],p=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start),m=this.offsetInBuffer(e.piece.bufferIndex,s),L=this.offsetInBuffer(e.piece.bufferIndex,r),b={line:0,column:0};t._wordSeparators?(d=_.buffer.substring(m,L),g=e=>e+m,t.reset(0)):(d=_.buffer,g=e=>e,t.reset(m));do{if(f=t.next(d),f){if(g(f.index)>=L)return h;this.positionInBuffer(e,g(f.index)-p,b);let t=this.getLineFeedCnt(e.piece.bufferIndex,s,b),r=b.line===s.line?b.column-s.column+i:b.column+1,o=r+f[0].length;if(c[h++]=pe(new u["a"](n+t,r,n+t,o),f,a),g(f.index)+f[0].length>=L)return h;if(h>=l)return h}}while(f);return h}findMatchesLineByLine(e,t,n,i){const s=[];let r=0;const o=new Ie(t.wordSeparators,t.regex);let a=this.nodeAt2(e.startLineNumber,e.startColumn);if(null===a)return[];let l=this.nodeAt2(e.endLineNumber,e.endColumn);if(null===l)return[];let h=this.positionInBuffer(a.node,a.remainder),u=this.positionInBuffer(l.node,l.remainder);if(a.node===l.node)return this.findMatchesInNode(a.node,o,e.startLineNumber,e.startColumn,h,u,t,n,i,r,s),s;let c=e.startLineNumber,f=a.node;while(f!==l.node){let l=this.getLineFeedCnt(f.piece.bufferIndex,h,f.piece.end);if(l>=1){let a=this._buffers[f.piece.bufferIndex].lineStarts,u=this.offsetInBuffer(f.piece.bufferIndex,f.piece.start),d=a[h.line+l],g=c===e.startLineNumber?e.startColumn:1;if(r=this.findMatchesInNode(f,o,c,g,h,this.positionInBuffer(f,d-u),t,n,i,r,s),r>=i)return s;c+=l}let u=c===e.startLineNumber?e.startColumn-1:0;if(c===e.endLineNumber){const a=this.getLineContent(c).substring(u,e.endColumn-1);return r=this._findMatchesInLine(t,o,a,e.endLineNumber,u,r,s,n,i),s}if(r=this._findMatchesInLine(t,o,this.getLineContent(c).substr(u),c,u,r,s,n,i),r>=i)return s;c++,a=this.nodeAt2(c,1),f=a.node,h=this.positionInBuffer(a.node,a.remainder)}if(c===e.endLineNumber){let a=c===e.startLineNumber?e.startColumn-1:0;const l=this.getLineContent(c).substring(a,e.endColumn-1);return r=this._findMatchesInLine(t,o,l,e.endLineNumber,a,r,s,n,i),s}let d=c===e.startLineNumber?e.startColumn:1;return r=this.findMatchesInNode(l.node,o,c,d,h,u,t,n,i,r,s),s}_findMatchesInLine(e,t,n,i,s,r,o,a,l){const h=e.wordSeparators;if(!a&&e.simpleSearch){const t=e.simpleSearch,a=t.length,c=n.length;let d=-a;while(-1!==(d=n.indexOf(t,d+a)))if((!h||we(h,n,c,d,a))&&(o[r++]=new f["b"](new u["a"](i,d+1+s,i,d+1+a+s),null),r>=l))return r;return r}let c;t.reset(0);do{if(c=t.next(n),c&&(o[r++]=pe(new u["a"](i,c.index+1+s,i,c.index+1+c[0].length+s),c,a),r>=l))return r}while(c);return r}insert(e,t,n=!1){if(this._EOLNormalized=this._EOLNormalized&&n,this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",this.root!==X){let{node:n,remainder:i,nodeStartOffset:s}=this.nodeAt(e),r=n.piece,o=r.bufferIndex,a=this.positionInBuffer(n,i);if(0===n.piece.bufferIndex&&r.end.line===this._lastChangeBufferPos.line&&r.end.column===this._lastChangeBufferPos.column&&s+r.length===e&&t.length<Ne)return this.appendToNode(n,t),void this.computeBufferMetadata();if(s===e)this.insertContentToNodeLeft(t,n),this._searchCache.validate(e);else if(s+n.piece.length>e){let e=[],s=new Ee(r.bufferIndex,a,r.end,this.getLineFeedCnt(r.bufferIndex,a,r.end),this.offsetInBuffer(o,r.end)-this.offsetInBuffer(o,a));if(this.shouldCheckCRLF()&&this.endWithCR(t)){let e=this.nodeCharCodeAt(n,i);if(10===e){let e={line:s.start.line+1,column:0};s=new Ee(s.bufferIndex,e,s.end,this.getLineFeedCnt(s.bufferIndex,e,s.end),s.length-1),t+="\n"}}if(this.shouldCheckCRLF()&&this.startWithLF(t)){let s=this.nodeCharCodeAt(n,i-1);if(13===s){let s=this.positionInBuffer(n,i-1);this.deleteNodeTail(n,s),t="\r"+t,0===n.piece.length&&e.push(n)}else this.deleteNodeTail(n,a)}else this.deleteNodeTail(n,a);let l=this.createNewPieces(t);s.length>0&&this.rbInsertRight(n,s);let h=n;for(let t=0;t<l.length;t++)h=this.rbInsertRight(h,l[t]);this.deleteNodes(e)}else this.insertContentToNodeRight(t,n)}else{let e=this.createNewPieces(t),n=this.rbInsertLeft(null,e[0]);for(let t=1;t<e.length;t++)n=this.rbInsertRight(n,e[t])}this.computeBufferMetadata()}delete(e,t){if(this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",t<=0||this.root===X)return;let n=this.nodeAt(e),i=this.nodeAt(e+t),s=n.node,r=i.node;if(s===r){let r=this.positionInBuffer(s,n.remainder),o=this.positionInBuffer(s,i.remainder);if(n.nodeStartOffset===e){if(t===s.piece.length){let e=s.next();return ae(this,s),this.validateCRLFWithPrevNode(e),void this.computeBufferMetadata()}return this.deleteNodeHead(s,o),this._searchCache.validate(e),this.validateCRLFWithPrevNode(s),void this.computeBufferMetadata()}return n.nodeStartOffset+s.piece.length===e+t?(this.deleteNodeTail(s,r),this.validateCRLFWithNextNode(s),void this.computeBufferMetadata()):(this.shrinkNode(s,r,o),void this.computeBufferMetadata())}let o=[],a=this.positionInBuffer(s,n.remainder);this.deleteNodeTail(s,a),this._searchCache.validate(e),0===s.piece.length&&o.push(s);let l=this.positionInBuffer(r,i.remainder);this.deleteNodeHead(r,l),0===r.piece.length&&o.push(r);let h=s.next();for(let c=h;c!==X&&c!==r;c=c.next())o.push(c);let u=0===s.piece.length?s.prev():s;this.deleteNodes(o),this.validateCRLFWithNextNode(u),this.computeBufferMetadata()}insertContentToNodeLeft(e,t){let n=[];if(this.shouldCheckCRLF()&&this.endWithCR(e)&&this.startWithLF(t)){let i=t.piece,s={line:i.start.line+1,column:0},r=new Ee(i.bufferIndex,s,i.end,this.getLineFeedCnt(i.bufferIndex,s,i.end),i.length-1);t.piece=r,e+="\n",he(this,t,-1,-1),0===t.piece.length&&n.push(t)}let i=this.createNewPieces(e),s=this.rbInsertLeft(t,i[i.length-1]);for(let r=i.length-2;r>=0;r--)s=this.rbInsertLeft(s,i[r]);this.validateCRLFWithPrevNode(s),this.deleteNodes(n)}insertContentToNodeRight(e,t){this.adjustCarriageReturnFromNext(e,t)&&(e+="\n");let n=this.createNewPieces(e),i=this.rbInsertRight(t,n[0]),s=i;for(let r=1;r<n.length;r++)s=this.rbInsertRight(s,n[r]);this.validateCRLFWithPrevNode(i)}positionInBuffer(e,t,n){let i=e.piece,s=e.piece.bufferIndex,r=this._buffers[s].lineStarts,o=r[i.start.line]+i.start.column,a=o+t,l=i.start.line,h=i.end.line,u=0,c=0,f=0;while(l<=h){if(u=l+(h-l)/2|0,f=r[u],u===h)break;if(c=r[u+1],a<f)h=u-1;else{if(!(a>=c))break;l=u+1}}return n?(n.line=u,n.column=a-f,null):{line:u,column:a-f}}getLineFeedCnt(e,t,n){if(0===n.column)return n.line-t.line;let i=this._buffers[e].lineStarts;if(n.line===i.length-1)return n.line-t.line;let s=i[n.line+1],r=i[n.line]+n.column;if(s>r+1)return n.line-t.line;let o=r-1,a=this._buffers[e].buffer;return 13===a.charCodeAt(o)?n.line-t.line+1:n.line-t.line}offsetInBuffer(e,t){let n=this._buffers[e].lineStarts;return n[t.line]+t.column}deleteNodes(e){for(let t=0;t<e.length;t++)ae(this,e[t])}createNewPieces(e){if(e.length>Ne){let t=[];while(e.length>Ne){const n=e.charCodeAt(Ne-1);let i;13===n||n>=55296&&n<=56319?(i=e.substring(0,Ne-1),e=e.substring(Ne-1)):(i=e.substring(0,Ne),e=e.substring(Ne));let s=xe(i);t.push(new Ee(this._buffers.length,{line:0,column:0},{line:s.length-1,column:i.length-s[s.length-1]},s.length-1,i.length)),this._buffers.push(new Te(i,s))}let n=xe(e);return t.push(new Ee(this._buffers.length,{line:0,column:0},{line:n.length-1,column:e.length-n[n.length-1]},n.length-1,e.length)),this._buffers.push(new Te(e,n)),t}let t=this._buffers[0].buffer.length;const n=xe(e,!1);let i=this._lastChangeBufferPos;if(this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-1]===t&&0!==t&&this.startWithLF(e)&&this.endWithCR(this._buffers[0].buffer)){this._lastChangeBufferPos={line:this._lastChangeBufferPos.line,column:this._lastChangeBufferPos.column+1},i=this._lastChangeBufferPos;for(let e=0;e<n.length;e++)n[e]+=t+1;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(n.slice(1)),this._buffers[0].buffer+="_"+e,t+=1}else{if(0!==t)for(let e=0;e<n.length;e++)n[e]+=t;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(n.slice(1)),this._buffers[0].buffer+=e}const s=this._buffers[0].buffer.length;let r=this._buffers[0].lineStarts.length-1,o=s-this._buffers[0].lineStarts[r],a={line:r,column:o},l=new Ee(0,i,a,this.getLineFeedCnt(0,i,a),s-t);return this._lastChangeBufferPos=a,[l]}getLineRawContent(e,t=0){let n=this.root,i="",s=this._searchCache.get2(e);if(s){n=s.node;let r=this.getAccumulatedValue(n,e-s.nodeStartLineNumber-1),o=this._buffers[n.piece.bufferIndex].buffer,a=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);if(s.nodeStartLineNumber+n.piece.lineFeedCnt!==e){let i=this.getAccumulatedValue(n,e-s.nodeStartLineNumber);return o.substring(a+r,a+i-t)}i=o.substring(a+r,a+n.piece.length)}else{let s=0;const r=e;while(n!==X)if(n.left!==X&&n.lf_left>=e-1)n=n.left;else{if(n.lf_left+n.piece.lineFeedCnt>e-1){let i=this.getAccumulatedValue(n,e-n.lf_left-2),o=this.getAccumulatedValue(n,e-n.lf_left-1),a=this._buffers[n.piece.bufferIndex].buffer,l=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);return s+=n.size_left,this._searchCache.set({node:n,nodeStartOffset:s,nodeStartLineNumber:r-(e-1-n.lf_left)}),a.substring(l+i,l+o-t)}if(n.lf_left+n.piece.lineFeedCnt===e-1){let t=this.getAccumulatedValue(n,e-n.lf_left-2),s=this._buffers[n.piece.bufferIndex].buffer,r=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);i=s.substring(r+t,r+n.piece.length);break}e-=n.lf_left+n.piece.lineFeedCnt,s+=n.size_left+n.piece.length,n=n.right}}n=n.next();while(n!==X){let e=this._buffers[n.piece.bufferIndex].buffer;if(n.piece.lineFeedCnt>0){let s=this.getAccumulatedValue(n,0),r=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);return i+=e.substring(r,r+s-t),i}{let t=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);i+=e.substr(t,n.piece.length)}n=n.next()}return i}computeBufferMetadata(){let e=this.root,t=1,n=0;while(e!==X)t+=e.lf_left+e.piece.lineFeedCnt,n+=e.size_left+e.piece.length,e=e.right;this._lineCnt=t,this._length=n,this._searchCache.validate(this._length)}getIndexOf(e,t){let n=e.piece,i=this.positionInBuffer(e,t),s=i.line-n.start.line;if(this.offsetInBuffer(n.bufferIndex,n.end)-this.offsetInBuffer(n.bufferIndex,n.start)===t){let t=this.getLineFeedCnt(e.piece.bufferIndex,n.start,i);if(t!==s)return{index:t,remainder:0}}return{index:s,remainder:i.column}}getAccumulatedValue(e,t){if(t<0)return 0;let n=e.piece,i=this._buffers[n.bufferIndex].lineStarts,s=n.start.line+t+1;return s>n.end.line?i[n.end.line]+n.end.column-i[n.start.line]-n.start.column:i[s]-i[n.start.line]-n.start.column}deleteNodeTail(e,t){const n=e.piece,i=n.lineFeedCnt,s=this.offsetInBuffer(n.bufferIndex,n.end),r=t,o=this.offsetInBuffer(n.bufferIndex,r),a=this.getLineFeedCnt(n.bufferIndex,n.start,r),l=a-i,h=o-s,u=n.length+h;e.piece=new Ee(n.bufferIndex,n.start,r,a,u),he(this,e,h,l)}deleteNodeHead(e,t){const n=e.piece,i=n.lineFeedCnt,s=this.offsetInBuffer(n.bufferIndex,n.start),r=t,o=this.getLineFeedCnt(n.bufferIndex,r,n.end),a=this.offsetInBuffer(n.bufferIndex,r),l=o-i,h=s-a,u=n.length+h;e.piece=new Ee(n.bufferIndex,r,n.end,o,u),he(this,e,h,l)}shrinkNode(e,t,n){const i=e.piece,s=i.start,r=i.end,o=i.length,a=i.lineFeedCnt,l=t,h=this.getLineFeedCnt(i.bufferIndex,i.start,l),u=this.offsetInBuffer(i.bufferIndex,t)-this.offsetInBuffer(i.bufferIndex,s);e.piece=new Ee(i.bufferIndex,i.start,l,h,u),he(this,e,u-o,h-a);let c=new Ee(i.bufferIndex,n,r,this.getLineFeedCnt(i.bufferIndex,n,r),this.offsetInBuffer(i.bufferIndex,r)-this.offsetInBuffer(i.bufferIndex,n)),f=this.rbInsertRight(e,c);this.validateCRLFWithPrevNode(f)}appendToNode(e,t){this.adjustCarriageReturnFromNext(t,e)&&(t+="\n");const n=this.shouldCheckCRLF()&&this.startWithLF(t)&&this.endWithCR(e),i=this._buffers[0].buffer.length;this._buffers[0].buffer+=t;const s=xe(t,!1);for(let f=0;f<s.length;f++)s[f]+=i;if(n){let e=this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-2];this._buffers[0].lineStarts.pop(),this._lastChangeBufferPos={line:this._lastChangeBufferPos.line-1,column:i-e}}this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(s.slice(1));const r=this._buffers[0].lineStarts.length-1,o=this._buffers[0].buffer.length-this._buffers[0].lineStarts[r],a={line:r,column:o},l=e.piece.length+t.length,h=e.piece.lineFeedCnt,u=this.getLineFeedCnt(0,e.piece.start,a),c=u-h;e.piece=new Ee(e.piece.bufferIndex,e.piece.start,a,u,l),this._lastChangeBufferPos=a,he(this,e,t.length,c)}nodeAt(e){let t=this.root,n=this._searchCache.get(e);if(n)return{node:n.node,nodeStartOffset:n.nodeStartOffset,remainder:e-n.nodeStartOffset};let i=0;while(t!==X)if(t.size_left>e)t=t.left;else{if(t.size_left+t.piece.length>=e){i+=t.size_left;let n={node:t,remainder:e-t.size_left,nodeStartOffset:i};return this._searchCache.set(n),n}e-=t.size_left+t.piece.length,i+=t.size_left+t.piece.length,t=t.right}return null}nodeAt2(e,t){let n=this.root,i=0;while(n!==X)if(n.left!==X&&n.lf_left>=e-1)n=n.left;else{if(n.lf_left+n.piece.lineFeedCnt>e-1){let s=this.getAccumulatedValue(n,e-n.lf_left-2),r=this.getAccumulatedValue(n,e-n.lf_left-1);return i+=n.size_left,{node:n,remainder:Math.min(s+t-1,r),nodeStartOffset:i}}if(n.lf_left+n.piece.lineFeedCnt===e-1){let s=this.getAccumulatedValue(n,e-n.lf_left-2);if(s+t-1<=n.piece.length)return{node:n,remainder:s+t-1,nodeStartOffset:i};t-=n.piece.length-s;break}e-=n.lf_left+n.piece.lineFeedCnt,i+=n.size_left+n.piece.length,n=n.right}n=n.next();while(n!==X){if(n.piece.lineFeedCnt>0){let e=this.getAccumulatedValue(n,0),i=this.offsetOfNode(n);return{node:n,remainder:Math.min(t-1,e),nodeStartOffset:i}}if(n.piece.length>=t-1){let e=this.offsetOfNode(n);return{node:n,remainder:t-1,nodeStartOffset:e}}t-=n.piece.length,n=n.next()}return null}nodeCharCodeAt(e,t){if(e.piece.lineFeedCnt<1)return-1;let n=this._buffers[e.piece.bufferIndex],i=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start)+t;return n.buffer.charCodeAt(i)}offsetOfNode(e){if(!e)return 0;let t=e.size_left;while(e!==this.root)e.parent.right===e&&(t+=e.parent.size_left+e.parent.piece.length),e=e.parent;return t}shouldCheckCRLF(){return!(this._EOLNormalized&&"\n"===this._EOL)}startWithLF(e){if("string"===typeof e)return 10===e.charCodeAt(0);if(e===X||0===e.piece.lineFeedCnt)return!1;let t=e.piece,n=this._buffers[t.bufferIndex].lineStarts,i=t.start.line,s=n[i]+t.start.column;if(i===n.length-1)return!1;let r=n[i+1];return!(r>s+1)&&10===this._buffers[t.bufferIndex].buffer.charCodeAt(s)}endWithCR(e){return"string"===typeof e?13===e.charCodeAt(e.length-1):e!==X&&0!==e.piece.lineFeedCnt&&13===this.nodeCharCodeAt(e,e.piece.length-1)}validateCRLFWithPrevNode(e){if(this.shouldCheckCRLF()&&this.startWithLF(e)){let t=e.prev();this.endWithCR(t)&&this.fixCRLF(t,e)}}validateCRLFWithNextNode(e){if(this.shouldCheckCRLF()&&this.endWithCR(e)){let t=e.next();this.startWithLF(t)&&this.fixCRLF(e,t)}}fixCRLF(e,t){let n,i=[],s=this._buffers[e.piece.bufferIndex].lineStarts;n=0===e.piece.end.column?{line:e.piece.end.line-1,column:s[e.piece.end.line]-s[e.piece.end.line-1]-1}:{line:e.piece.end.line,column:e.piece.end.column-1};const r=e.piece.length-1,o=e.piece.lineFeedCnt-1;e.piece=new Ee(e.piece.bufferIndex,e.piece.start,n,o,r),he(this,e,-1,-1),0===e.piece.length&&i.push(e);let a={line:t.piece.start.line+1,column:0};const l=t.piece.length-1,h=this.getLineFeedCnt(t.piece.bufferIndex,a,t.piece.end);t.piece=new Ee(t.piece.bufferIndex,a,t.piece.end,h,l),he(this,t,-1,-1),0===t.piece.length&&i.push(t);let u=this.createNewPieces("\r\n");this.rbInsertRight(e,u[0]);for(let c=0;c<i.length;c++)ae(this,i[c])}adjustCarriageReturnFromNext(e,t){if(this.shouldCheckCRLF()&&this.endWithCR(e)){let n=t.next();if(this.startWithLF(n)){if(e+="\n",1===n.piece.length)ae(this,n);else{const e=n.piece,t={line:e.start.line+1,column:0},i=e.length-1,s=this.getLineFeedCnt(e.bufferIndex,t,e.end);n.piece=new Ee(e.bufferIndex,t,e.end,s,i),he(this,n,-1,-1)}return!0}}return!1}iterate(e,t){if(e===X)return t(X);let n=this.iterate(e.left,t);return n?t(e)&&this.iterate(e.right,t):n}getNodeContent(e){if(e===X)return"";let t,n=this._buffers[e.piece.bufferIndex],i=e.piece,s=this.offsetInBuffer(i.bufferIndex,i.start),r=this.offsetInBuffer(i.bufferIndex,i.end);return t=n.buffer.substring(s,r),t}getPieceContent(e){let t=this._buffers[e.bufferIndex],n=this.offsetInBuffer(e.bufferIndex,e.start),i=this.offsetInBuffer(e.bufferIndex,e.end),s=t.buffer.substring(n,i);return s}rbInsertRight(e,t){let n=new Q(t,1);n.left=X,n.right=X,n.parent=X,n.size_left=0,n.lf_left=0;let i=this.root;if(i===X)this.root=n,n.color=0;else if(e.right===X)e.right=n,n.parent=e;else{let t=ee(e.right);t.left=n,n.parent=t}return le(this,n),n}rbInsertLeft(e,t){let n=new Q(t,1);if(n.left=X,n.right=X,n.parent=X,n.size_left=0,n.lf_left=0,this.root===X)this.root=n,n.color=0;else if(e.left===X)e.left=n,n.parent=e;else{let t=te(e.left);t.right=n,n.parent=t}return le(this,n),n}}var Re=n("4111"),De=n("e679");class ze extends r["a"]{constructor(e,t,n,i,r,o,a){super(),this._onDidChangeContent=this._register(new s["a"]),this._BOM=t,this._mightContainNonBasicASCII=!o,this._mightContainRTL=i,this._mightContainUnusualLineTerminators=r,this._pieceTree=new Me(e,n,a)}mightContainRTL(){return this._mightContainRTL}mightContainUnusualLineTerminators(){return this._mightContainUnusualLineTerminators}resetMightContainUnusualLineTerminators(){this._mightContainUnusualLineTerminators=!1}mightContainNonBasicASCII(){return this._mightContainNonBasicASCII}getBOM(){return this._BOM}getEOL(){return this._pieceTree.getEOL()}createSnapshot(e){return this._pieceTree.createSnapshot(e?this._BOM:"")}getOffsetAt(e,t){return this._pieceTree.getOffsetAt(e,t)}getPositionAt(e){return this._pieceTree.getPositionAt(e)}getRangeAt(e,t){let n=e+t;const i=this.getPositionAt(e),s=this.getPositionAt(n);return new u["a"](i.lineNumber,i.column,s.lineNumber,s.column)}getValueInRange(e,t=0){if(e.isEmpty())return"";const n=this._getEndOfLine(t);return this._pieceTree.getValueInRange(e,n)}getValueLengthInRange(e,t=0){if(e.isEmpty())return 0;if(e.startLineNumber===e.endLineNumber)return e.endColumn-e.startColumn;let n=this.getOffsetAt(e.startLineNumber,e.startColumn),i=this.getOffsetAt(e.endLineNumber,e.endColumn);return i-n}getCharacterCountInRange(e,t=0){if(this._mightContainNonBasicASCII){let n=0;const i=e.startLineNumber,s=e.endLineNumber;for(let t=i;t<=s;t++){const r=this.getLineContent(t),a=t===i?e.startColumn-1:0,l=t===s?e.endColumn-1:r.length;for(let e=a;e<l;e++)o["E"](r.charCodeAt(e))?(n+=1,e+=1):n+=1}return n+=this._getEndOfLine(t).length*(s-i),n}return this.getValueLengthInRange(e,t)}getLength(){return this._pieceTree.getLength()}getLineCount(){return this._pieceTree.getLineCount()}getLinesContent(){return this._pieceTree.getLinesContent()}getLineContent(e){return this._pieceTree.getLineContent(e)}getLineCharCode(e,t){return this._pieceTree.getLineCharCode(e,t)}getLineLength(e){return this._pieceTree.getLineLength(e)}getLineFirstNonWhitespaceColumn(e){const t=o["u"](this.getLineContent(e));return-1===t?0:t+1}getLineLastNonWhitespaceColumn(e){const t=o["I"](this.getLineContent(e));return-1===t?0:t+2}_getEndOfLine(e){switch(e){case 1:return"\n";case 2:return"\r\n";case 0:return this.getEOL();default:throw new Error("Unknown EOL preference")}}setEOL(e){this._pieceTree.setEOL(e)}applyEdits(e,t,n){let i=this._mightContainRTL,s=this._mightContainUnusualLineTerminators,r=this._mightContainNonBasicASCII,a=!0,l=[];for(let f=0;f<e.length;f++){let t=e[f];a&&t._isTracked&&(a=!1);let n=t.range;if(t.text){let e=!0;r||(e=!o["A"](t.text),r=e),!i&&e&&(i=o["m"](t.text)),!s&&e&&(s=o["n"](t.text))}let h="",u=0,c=0,d=0;if(t.text){let e;[u,c,d,e]=Object(Re["f"])(t.text);const n=this.getEOL(),i="\r\n"===n?2:1;h=0===e||e===i?t.text:t.text.replace(/\r\n|\r|\n/g,n)}l[f]={sortIndex:f,identifier:t.identifier||null,range:n,rangeOffset:this.getOffsetAt(n.startLineNumber,n.startColumn),rangeLength:this.getValueLengthInRange(n),text:h,eolCount:u,firstLineLength:c,lastLineLength:d,forceMoveMarkers:Boolean(t.forceMoveMarkers),isAutoWhitespaceEdit:t.isAutoWhitespaceEdit||!1}}l.sort(ze._sortOpsAscending);let h=!1;for(let o=0,f=l.length-1;o<f;o++){let e=l[o].range.getEndPosition(),t=l[o+1].range.getStartPosition();if(t.isBeforeOrEqual(e)){if(t.isBefore(e))throw new Error("Overlapping ranges are not allowed!");h=!0}}a&&(l=this._reduceOperations(l));let u=n||t?ze._getInverseEditRanges(l):[],c=[];if(t)for(let f=0;f<l.length;f++){let e=l[f],t=u[f];if(e.isAutoWhitespaceEdit&&e.range.isEmpty())for(let n=t.startLineNumber;n<=t.endLineNumber;n++){let i="";n===t.startLineNumber&&(i=this.getLineContent(e.range.startLineNumber),-1!==o["u"](i))||c.push({lineNumber:n,oldContent:i})}}let d=null;if(n){let e=0;d=[];for(let t=0;t<l.length;t++){const n=l[t],i=u[t],s=this.getValueInRange(n.range),r=n.rangeOffset+e;e+=n.text.length-s.length,d[t]={sortIndex:n.sortIndex,identifier:n.identifier,range:i,text:s,textChange:new De["a"](n.rangeOffset,s,r,n.text)}}h||d.sort((e,t)=>e.sortIndex-t.sortIndex)}this._mightContainRTL=i,this._mightContainUnusualLineTerminators=s,this._mightContainNonBasicASCII=r;const g=this._doApplyEdits(l);let _=null;if(t&&c.length>0){c.sort((e,t)=>t.lineNumber-e.lineNumber),_=[];for(let e=0,t=c.length;e<t;e++){let t=c[e].lineNumber;if(e>0&&c[e-1].lineNumber===t)continue;let n=c[e].oldContent,i=this.getLineContent(t);0!==i.length&&i!==n&&-1===o["u"](i)&&_.push(t)}}return this._onDidChangeContent.fire(),new f["a"](d,g,_)}_reduceOperations(e){return e.length<1e3?e:[this._toSingleEditOperation(e)]}_toSingleEditOperation(e){let t=!1;const n=e[0].range,i=e[e.length-1].range,s=new u["a"](n.startLineNumber,n.startColumn,i.endLineNumber,i.endColumn);let r=n.startLineNumber,o=n.startColumn;const a=[];for(let d=0,g=e.length;d<g;d++){const n=e[d],i=n.range;t=t||n.forceMoveMarkers,a.push(this.getValueInRange(new u["a"](r,o,i.startLineNumber,i.startColumn))),n.text.length>0&&a.push(n.text),r=i.endLineNumber,o=i.endColumn}const l=a.join(""),[h,c,f]=Object(Re["f"])(l);return{sortIndex:0,identifier:e[0].identifier,range:s,rangeOffset:this.getOffsetAt(s.startLineNumber,s.startColumn),rangeLength:this.getValueLengthInRange(s,0),text:l,eolCount:h,firstLineLength:c,lastLineLength:f,forceMoveMarkers:t,isAutoWhitespaceEdit:!1}}_doApplyEdits(e){e.sort(ze._sortOpsDescending);let t=[];for(let n=0;n<e.length;n++){let i=e[n];const s=i.range.startLineNumber,r=i.range.startColumn,o=i.range.endLineNumber,a=i.range.endColumn;if(s===o&&r===a&&0===i.text.length)continue;i.text?(this._pieceTree.delete(i.rangeOffset,i.rangeLength),this._pieceTree.insert(i.rangeOffset,i.text,!0)):this._pieceTree.delete(i.rangeOffset,i.rangeLength);const l=new u["a"](s,r,o,a);t.push({range:l,rangeLength:i.rangeLength,text:i.text,rangeOffset:i.rangeOffset,forceMoveMarkers:i.forceMoveMarkers})}return t}findMatchesLineByLine(e,t,n,i){return this._pieceTree.findMatchesLineByLine(e,t,n,i)}static _getInverseEditRanges(e){let t=[],n=0,i=0,s=null;for(let r=0,o=e.length;r<o;r++){let o,a,l,h=e[r];if(s?s.range.endLineNumber===h.range.startLineNumber?(o=n,a=i+(h.range.startColumn-s.range.endColumn)):(o=n+(h.range.startLineNumber-s.range.endLineNumber),a=h.range.startColumn):(o=h.range.startLineNumber,a=h.range.startColumn),h.text.length>0){const e=h.eolCount+1;l=1===e?new u["a"](o,a,o,a+h.firstLineLength):new u["a"](o,a,o+e-1,h.lastLineLength+1)}else l=new u["a"](o,a,o,a);n=l.endLineNumber,i=l.endColumn,t.push(l),s=h}return t}static _sortOpsAscending(e,t){let n=u["a"].compareRangesUsingEnds(e.range,t.range);return 0===n?e.sortIndex-t.sortIndex:n}static _sortOpsDescending(e,t){let n=u["a"].compareRangesUsingEnds(e.range,t.range);return 0===n?t.sortIndex-e.sortIndex:-n}}class ye{constructor(e,t,n,i,s,r,o,a,l){this._chunks=e,this._bom=t,this._cr=n,this._lf=i,this._crlf=s,this._containsRTL=r,this._containsUnusualLineTerminators=o,this._isBasicASCII=a,this._normalizeEOL=l}_getEOL(e){const t=this._cr+this._lf+this._crlf,n=this._cr+this._crlf;return 0===t?1===e?"\n":"\r\n":n>t/2?"\r\n":"\n"}create(e){const t=this._getEOL(e);let n=this._chunks;if(this._normalizeEOL&&("\r\n"===t&&(this._cr>0||this._lf>0)||"\n"===t&&(this._cr>0||this._crlf>0)))for(let s=0,r=n.length;s<r;s++){let e=n[s].buffer.replace(/\r\n|\r|\n/g,t),i=xe(e);n[s]=new Te(e,i)}const i=new ze(n,this._bom,t,this._containsRTL,this._containsUnusualLineTerminators,this._isBasicASCII,this._normalizeEOL);return{textBuffer:i,disposable:i}}}class Be{constructor(){this.chunks=[],this.BOM="",this._hasPreviousChar=!1,this._previousChar=0,this._tmpLineStarts=[],this.cr=0,this.lf=0,this.crlf=0,this.containsRTL=!1,this.containsUnusualLineTerminators=!1,this.isBasicASCII=!0}acceptChunk(e){if(0===e.length)return;0===this.chunks.length&&o["S"](e)&&(this.BOM=o["b"],e=e.substr(1));const t=e.charCodeAt(e.length-1);13===t||t>=55296&&t<=56319?(this._acceptChunk1(e.substr(0,e.length-1),!1),this._hasPreviousChar=!0,this._previousChar=t):(this._acceptChunk1(e,!1),this._hasPreviousChar=!1,this._previousChar=t)}_acceptChunk1(e,t){(t||0!==e.length)&&(this._hasPreviousChar?this._acceptChunk2(String.fromCharCode(this._previousChar)+e):this._acceptChunk2(e))}_acceptChunk2(e){const t=ve(this._tmpLineStarts,e);this.chunks.push(new Te(e,t.lineStarts)),this.cr+=t.cr,this.lf+=t.lf,this.crlf+=t.crlf,this.isBasicASCII&&(this.isBasicASCII=t.isBasicASCII),this.isBasicASCII||this.containsRTL||(this.containsRTL=o["m"](e)),this.isBasicASCII||this.containsUnusualLineTerminators||(this.containsUnusualLineTerminators=o["n"](e))}finish(e=!0){return this._finish(),new ye(this.chunks,this.BOM,this.cr,this.lf,this.crlf,this.containsRTL,this.containsUnusualLineTerminators,this.isBasicASCII,e)}_finish(){if(0===this.chunks.length&&this._acceptChunk1("",!0),this._hasPreviousChar){this._hasPreviousChar=!1;let e=this.chunks[this.chunks.length-1];e.buffer+=String.fromCharCode(this._previousChar);let t=xe(e.buffer);e.lineStarts=t,13===this._previousChar&&this.cr++}}}class Fe{constructor(){this.changeType=1}}class Pe{constructor(e,t){this.changeType=2,this.lineNumber=e,this.detail=t}}class Ve{constructor(e,t){this.changeType=3,this.fromLineNumber=e,this.toLineNumber=t}}class We{constructor(e,t,n){this.changeType=4,this.fromLineNumber=e,this.toLineNumber=t,this.detail=n}}class Ue{constructor(){this.changeType=5}}class je{constructor(e,t,n,i){this.changes=e,this.versionId=t,this.isUndoing=n,this.isRedoing=i,this.resultingSelection=null}containsEvent(e){for(let t=0,n=this.changes.length;t<n;t++){const n=this.changes[t];if(n.changeType===e)return!0}return!1}static merge(e,t){const n=[].concat(e.changes).concat(t.changes),i=t.versionId,s=e.isUndoing||t.isUndoing,r=e.isRedoing||t.isRedoing;return new je(n,i,s,r)}}class qe{constructor(e,t){this.rawContentChangedEvent=e,this.contentChangedEvent=t}merge(e){const t=je.merge(this.rawContentChangedEvent,e.rawContentChangedEvent),n=qe._mergeChangeEvents(this.contentChangedEvent,e.contentChangedEvent);return new qe(t,n)}static _mergeChangeEvents(e,t){const n=[].concat(e.changes).concat(t.changes),i=t.eol,s=t.versionId,r=e.isUndoing||t.isUndoing,o=e.isRedoing||t.isRedoing,a=e.isFlush||t.isFlush;return{changes:n,eol:i,versionId:s,isUndoing:r,isRedoing:o,isFlush:a}}}var $e=n("e8e3"),He=n("e1b5"),Ge=n("b707"),Ye=n("8bf1"),Je=n("e58e"),Ze=n("30db");class Ke{constructor(){this._beginState=[],this._valid=[],this._len=0,this._invalidLineStartIndex=0}_reset(e){this._beginState=[],this._valid=[],this._len=0,this._invalidLineStartIndex=0,e&&this._setBeginState(0,e)}flush(e){this._reset(e)}get invalidLineStartIndex(){return this._invalidLineStartIndex}_invalidateLine(e){e<this._len&&(this._valid[e]=!1),e<this._invalidLineStartIndex&&(this._invalidLineStartIndex=e)}_isValid(e){return e<this._len&&this._valid[e]}getBeginState(e){return e<this._len?this._beginState[e]:null}_ensureLine(e){while(e>=this._len)this._beginState[this._len]=null,this._valid[this._len]=!1,this._len++}_deleteLines(e,t){0!==t&&(e+t>this._len&&(t=this._len-e),this._beginState.splice(e,t),this._valid.splice(e,t),this._len-=t)}_insertLines(e,t){if(0===t)return;let n=[],i=[];for(let s=0;s<t;s++)n[s]=null,i[s]=!1;this._beginState=$e["a"](this._beginState,e,n),this._valid=$e["a"](this._valid,e,i),this._len+=t}_setValid(e,t){this._ensureLine(e),this._valid[e]=t}_setBeginState(e,t){this._ensureLine(e),this._beginState[e]=t}setEndState(e,t,n){if(this._setValid(t,!0),this._invalidLineStartIndex=t+1,t===e-1)return;const i=this.getBeginState(t+1);if(null===i||!n.equals(i))return this._setBeginState(t+1,n),void this._invalidateLine(t+1);let s=t+1;while(s<e){if(!this._isValid(s))break;s++}this._invalidLineStartIndex=s}setFakeTokens(e){this._setValid(e,!1)}applyEdits(e,t){const n=e.endLineNumber-e.startLineNumber,i=t,s=Math.min(n,i);for(let r=s;r>=0;r--)this._invalidateLine(e.startLineNumber+r-1);this._acceptDeleteRange(e),this._acceptInsertText(new h["a"](e.startLineNumber,e.startColumn),t)}_acceptDeleteRange(e){const t=e.startLineNumber-1;t>=this._len||this._deleteLines(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t){const n=e.lineNumber-1;n>=this._len||this._insertLines(e.lineNumber,t)}}class Qe extends r["a"]{constructor(e){super(),this._isDisposed=!1,this._textModel=e,this._tokenizationStateStore=new Ke,this._tokenizationSupport=null,this._register(Ge["B"].onDidChange(e=>{const t=this._textModel.getLanguageIdentifier();-1!==e.changedLanguages.indexOf(t.language)&&(this._resetTokenizationState(),this._textModel.clearTokens())})),this._register(this._textModel.onDidChangeRawContentFast(e=>{e.containsEvent(1)&&this._resetTokenizationState()})),this._register(this._textModel.onDidChangeContentFast(e=>{for(let t=0,n=e.changes.length;t<n;t++){const n=e.changes[t],[i]=Object(Re["f"])(n.text);this._tokenizationStateStore.applyEdits(n.range,i)}this._beginBackgroundTokenization()})),this._register(this._textModel.onDidChangeAttached(()=>{this._beginBackgroundTokenization()})),this._register(this._textModel.onDidChangeLanguage(()=>{this._resetTokenizationState(),this._textModel.clearTokens()})),this._resetTokenizationState()}dispose(){this._isDisposed=!0,super.dispose()}_resetTokenizationState(){const[e,t]=Xe(this._textModel);this._tokenizationSupport=e,this._tokenizationStateStore.flush(t),this._beginBackgroundTokenization()}_beginBackgroundTokenization(){this._textModel.isAttachedToEditor()&&this._hasLinesToTokenize()&&Ze["k"](()=>{this._isDisposed||this._revalidateTokensNow()})}_revalidateTokensNow(e=this._textModel.getLineCount()){const t=1,n=new Re["b"],i=Je["a"].create(!1);while(this._hasLinesToTokenize()){if(i.elapsed()>t)break;const s=this._tokenizeOneInvalidLine(n);if(s>=e)break}this._beginBackgroundTokenization(),this._textModel.setTokens(n.tokens)}tokenizeViewport(e,t){const n=new Re["b"];this._tokenizeViewport(n,e,t),this._textModel.setTokens(n.tokens)}reset(){this._resetTokenizationState(),this._textModel.clearTokens()}forceTokenization(e){const t=new Re["b"];this._updateTokensUntilLine(t,e),this._textModel.setTokens(t.tokens)}isCheapToTokenize(e){if(!this._tokenizationSupport)return!0;const t=this._tokenizationStateStore.invalidLineStartIndex+1;return!(e>t)&&(e<t||this._textModel.getLineLength(e)<2048)}_hasLinesToTokenize(){return!!this._tokenizationSupport&&this._tokenizationStateStore.invalidLineStartIndex<this._textModel.getLineCount()}_tokenizeOneInvalidLine(e){if(!this._hasLinesToTokenize())return this._textModel.getLineCount()+1;const t=this._tokenizationStateStore.invalidLineStartIndex+1;return this._updateTokensUntilLine(e,t),t}_updateTokensUntilLine(e,t){if(!this._tokenizationSupport)return;const n=this._textModel.getLanguageIdentifier(),i=this._textModel.getLineCount(),s=t-1;for(let r=this._tokenizationStateStore.invalidLineStartIndex;r<=s;r++){const t=this._textModel.getLineContent(r+1),s=this._tokenizationStateStore.getBeginState(r),o=et(n,this._tokenizationSupport,t,!0,s);e.add(r+1,o.tokens),this._tokenizationStateStore.setEndState(i,r,o.endState),r=this._tokenizationStateStore.invalidLineStartIndex-1}}_tokenizeViewport(e,t,n){if(!this._tokenizationSupport)return;if(n<=this._tokenizationStateStore.invalidLineStartIndex)return;if(t<=this._tokenizationStateStore.invalidLineStartIndex)return void this._updateTokensUntilLine(e,n);let i=this._textModel.getLineFirstNonWhitespaceColumn(t),s=[],r=null;for(let l=t-1;i>0&&l>=1;l--){let e=this._textModel.getLineFirstNonWhitespaceColumn(l);if(0!==e&&e<i){if(r=this._tokenizationStateStore.getBeginState(l-1),r)break;s.push(this._textModel.getLineContent(l)),i=e}}r||(r=this._tokenizationSupport.getInitialState());const o=this._textModel.getLanguageIdentifier();let a=r;for(let l=s.length-1;l>=0;l--){let e=et(o,this._tokenizationSupport,s[l],!1,a);a=e.endState}for(let l=t;l<=n;l++){let t=this._textModel.getLineContent(l),n=et(o,this._tokenizationSupport,t,!0,a);e.add(l,n.tokens),this._tokenizationStateStore.setFakeTokens(l-1),a=n.endState}}}function Xe(e){const t=e.getLanguageIdentifier();let n=e.isTooLargeForTokenization()?null:Ge["B"].get(t.language),s=null;if(n)try{s=n.getInitialState()}catch(r){Object(i["e"])(r),n=null}return[n,s]}function et(e,t,n,s,r){let o=null;if(t)try{o=t.tokenize2(n,s,r.clone(),0)}catch(a){Object(i["e"])(a)}return o||(o=Object(Ye["e"])(e.id,n,r,0)),He["a"].convertToEndOffset(o.tokens,n.length),o}var tt=n("d093"),nt=n("70cb"),it=n("045b"),st=n("1080"),rt=n("ceb8");function ot(){return new Be}function at(e){const t=ot();return t.acceptChunk(e),t.finish()}function lt(e,t){const n="string"===typeof e?at(e):e;return n.create(t)}let ht=0;const ut=999,ct=1e4;class ft{constructor(e){this._source=e,this._eos=!1}read(){if(this._eos)return null;let e=[],t=0,n=0;do{let i=this._source.read();if(null===i)return this._eos=!0,0===t?null:e.join("");if(i.length>0&&(e[t++]=i,n+=i.length),n>=65536)return e.join("")}while(1)}}const dt=()=>{throw new Error("Invalid change accessor")};class gt{constructor(){this._searchCanceledBrand=void 0}}function _t(e){return e instanceof gt?null:e}gt.INSTANCE=new gt;class pt extends r["a"]{constructor(e,t,n,i=null,r){super(),this._onWillDispose=this._register(new s["a"]),this.onWillDispose=this._onWillDispose.event,this._onDidChangeDecorations=this._register(new xt),this.onDidChangeDecorations=this._onDidChangeDecorations.event,this._onDidChangeLanguage=this._register(new s["a"]),this.onDidChangeLanguage=this._onDidChangeLanguage.event,this._onDidChangeLanguageConfiguration=this._register(new s["a"]),this.onDidChangeLanguageConfiguration=this._onDidChangeLanguageConfiguration.event,this._onDidChangeTokens=this._register(new s["a"]),this.onDidChangeTokens=this._onDidChangeTokens.event,this._onDidChangeOptions=this._register(new s["a"]),this.onDidChangeOptions=this._onDidChangeOptions.event,this._onDidChangeAttached=this._register(new s["a"]),this.onDidChangeAttached=this._onDidChangeAttached.event,this._eventEmitter=this._register(new vt),ht++,this.id="$model"+ht,this.isForSimpleWidget=t.isForSimpleWidget,this._associatedResource="undefined"===typeof i||null===i?a["a"].parse("inmemory://model/"+ht):i,this._undoRedoService=r,this._attachedEditorCount=0;const{textBuffer:l,disposable:h}=lt(e,t.defaultEOL);this._buffer=l,this._bufferDisposable=h,this._options=pt.resolveOptions(this._buffer,t);const c=this._buffer.getLineCount(),f=this._buffer.getValueLengthInRange(new u["a"](1,1,c,this._buffer.getLineLength(c)+1),0);t.largeFileOptimizations?this._isTooLargeForTokenization=f>pt.LARGE_FILE_SIZE_THRESHOLD||c>pt.LARGE_FILE_LINE_COUNT_THRESHOLD:this._isTooLargeForTokenization=!1,this._isTooLargeForSyncing=f>pt.MODEL_SYNC_LIMIT,this._versionId=1,this._alternativeVersionId=1,this._initialUndoRedoSnapshot=null,this._isDisposed=!1,this._isDisposing=!1,this._languageIdentifier=n||Ye["a"],this._languageRegistryListener=nt["a"].onDidChange(e=>{e.languageIdentifier.id===this._languageIdentifier.id&&this._onDidChangeLanguageConfiguration.fire({})}),this._instanceId=o["P"](ht),this._lastDecorationId=0,this._decorations=Object.create(null),this._decorationsTree=new Lt,this._commandManager=new d["a"](this,r),this._isUndoing=!1,this._isRedoing=!1,this._trimAutoWhitespaceLines=null,this._tokens=new Re["d"],this._tokens2=new Re["e"],this._tokenization=new Qe(this)}static resolveOptions(e,t){if(t.detectIndentation){const n=p(e,t.tabSize,t.insertSpaces);return new f["e"]({tabSize:n.tabSize,indentSize:n.tabSize,insertSpaces:n.insertSpaces,trimAutoWhitespace:t.trimAutoWhitespace,defaultEOL:t.defaultEOL})}return new f["e"]({tabSize:t.tabSize,indentSize:t.indentSize,insertSpaces:t.insertSpaces,trimAutoWhitespace:t.trimAutoWhitespace,defaultEOL:t.defaultEOL})}onDidChangeRawContentFast(e){return this._eventEmitter.fastEvent(t=>e(t.rawContentChangedEvent))}onDidChangeContentFast(e){return this._eventEmitter.fastEvent(t=>e(t.contentChangedEvent))}onDidChangeContent(e){return this._eventEmitter.slowEvent(t=>e(t.contentChangedEvent))}dispose(){this._isDisposing=!0,this._onWillDispose.fire(),this._languageRegistryListener.dispose(),this._tokenization.dispose(),this._isDisposed=!0,super.dispose(),this._bufferDisposable.dispose(),this._isDisposing=!1;const e=new ze([],"","\n",!1,!1,!0,!0);e.dispose(),this._buffer=e}_assertNotDisposed(){if(this._isDisposed)throw new Error("Model is disposed!")}_emitContentChangedEvent(e,t){this._isDisposing||this._eventEmitter.fire(new qe(e,t))}setValue(e){if(this._assertNotDisposed(),null===e)return;const{textBuffer:t,disposable:n}=lt(e,this._options.defaultEOL);this._setValueFromTextBuffer(t,n)}_createContentChanged2(e,t,n,i,s,r,o){return{changes:[{range:e,rangeOffset:t,rangeLength:n,text:i}],eol:this._buffer.getEOL(),versionId:this.getVersionId(),isUndoing:s,isRedoing:r,isFlush:o}}_setValueFromTextBuffer(e,t){this._assertNotDisposed();const n=this.getFullModelRange(),i=this.getValueLengthInRange(n),s=this.getLineCount(),r=this.getLineMaxColumn(s);this._buffer=e,this._bufferDisposable.dispose(),this._bufferDisposable=t,this._increaseVersionId(),this._tokens.flush(),this._tokens2.flush(),this._decorations=Object.create(null),this._decorationsTree=new Lt,this._commandManager.clear(),this._trimAutoWhitespaceLines=null,this._emitContentChangedEvent(new je([new Fe],this._versionId,!1,!1),this._createContentChanged2(new u["a"](1,1,s,r),0,i,this.getValue(),!1,!1,!0))}setEOL(e){this._assertNotDisposed();const t=1===e?"\r\n":"\n";if(this._buffer.getEOL()===t)return;const n=this.getFullModelRange(),i=this.getValueLengthInRange(n),s=this.getLineCount(),r=this.getLineMaxColumn(s);this._onBeforeEOLChange(),this._buffer.setEOL(t),this._increaseVersionId(),this._onAfterEOLChange(),this._emitContentChangedEvent(new je([new Ue],this._versionId,!1,!1),this._createContentChanged2(new u["a"](1,1,s,r),0,i,this.getValue(),!1,!1,!1))}_onBeforeEOLChange(){const e=this.getVersionId(),t=this._decorationsTree.search(0,!1,!1,e);this._ensureNodesHaveRanges(t)}_onAfterEOLChange(){const e=this.getVersionId(),t=this._decorationsTree.collectNodesPostOrder();for(let n=0,i=t.length;n<i;n++){const i=t[n],s=i.cachedAbsoluteStart-i.start,r=this._buffer.getOffsetAt(i.range.startLineNumber,i.range.startColumn),o=this._buffer.getOffsetAt(i.range.endLineNumber,i.range.endColumn);i.cachedAbsoluteStart=r,i.cachedAbsoluteEnd=o,i.cachedVersionId=e,i.start=r-s,i.end=o-s,J(i)}}onBeforeAttached(){this._attachedEditorCount++,1===this._attachedEditorCount&&this._onDidChangeAttached.fire(void 0)}onBeforeDetached(){this._attachedEditorCount--,0===this._attachedEditorCount&&this._onDidChangeAttached.fire(void 0)}isAttachedToEditor(){return this._attachedEditorCount>0}getAttachedEditorCount(){return this._attachedEditorCount}isTooLargeForSyncing(){return this._isTooLargeForSyncing}isTooLargeForTokenization(){return this._isTooLargeForTokenization}isDisposed(){return this._isDisposed}isDominatedByLongLines(){if(this._assertNotDisposed(),this.isTooLargeForTokenization())return!1;let e=0,t=0;const n=this._buffer.getLineCount();for(let i=1;i<=n;i++){const n=this._buffer.getLineLength(i);n>=ct?t+=n:e+=n}return t>e}get uri(){return this._associatedResource}getOptions(){return this._assertNotDisposed(),this._options}getFormattingOptions(){return{tabSize:this._options.indentSize,insertSpaces:this._options.insertSpaces}}updateOptions(e){this._assertNotDisposed();let t="undefined"!==typeof e.tabSize?e.tabSize:this._options.tabSize,n="undefined"!==typeof e.indentSize?e.indentSize:this._options.indentSize,i="undefined"!==typeof e.insertSpaces?e.insertSpaces:this._options.insertSpaces,s="undefined"!==typeof e.trimAutoWhitespace?e.trimAutoWhitespace:this._options.trimAutoWhitespace,r=new f["e"]({tabSize:t,indentSize:n,insertSpaces:i,defaultEOL:this._options.defaultEOL,trimAutoWhitespace:s});if(this._options.equals(r))return;let o=this._options.createChangeEvent(r);this._options=r,this._onDidChangeOptions.fire(o)}detectIndentation(e,t){this._assertNotDisposed();let n=p(this._buffer,t,e);this.updateOptions({insertSpaces:n.insertSpaces,tabSize:n.tabSize,indentSize:n.tabSize})}static _normalizeIndentationFromWhitespace(e,t,n){let i=0;for(let r=0;r<e.length;r++)"\t"===e.charAt(r)?i+=t:i++;let s="";if(!n){let e=Math.floor(i/t);i%=t;for(let t=0;t<e;t++)s+="\t"}for(let r=0;r<i;r++)s+=" ";return s}static normalizeIndentation(e,t,n){let i=o["u"](e);return-1===i&&(i=e.length),pt._normalizeIndentationFromWhitespace(e.substring(0,i),t,n)+e.substring(i)}normalizeIndentation(e){return this._assertNotDisposed(),pt.normalizeIndentation(e,this._options.indentSize,this._options.insertSpaces)}getVersionId(){return this._assertNotDisposed(),this._versionId}mightContainRTL(){return this._buffer.mightContainRTL()}mightContainUnusualLineTerminators(){return this._buffer.mightContainUnusualLineTerminators()}removeUnusualLineTerminators(e=null){const t=this.findMatches(o["a"].source,!1,!0,!1,null,!1,1073741824);this._buffer.resetMightContainUnusualLineTerminators(),this.pushEditOperations(e,t.map(e=>({range:e.range,text:null})),()=>null)}mightContainNonBasicASCII(){return this._buffer.mightContainNonBasicASCII()}getAlternativeVersionId(){return this._assertNotDisposed(),this._alternativeVersionId}getInitialUndoRedoSnapshot(){return this._assertNotDisposed(),this._initialUndoRedoSnapshot}getOffsetAt(e){this._assertNotDisposed();let t=this._validatePosition(e.lineNumber,e.column,0);return this._buffer.getOffsetAt(t.lineNumber,t.column)}getPositionAt(e){this._assertNotDisposed();let t=Math.min(this._buffer.getLength(),Math.max(0,e));return this._buffer.getPositionAt(t)}_increaseVersionId(){this._versionId=this._versionId+1,this._alternativeVersionId=this._versionId}_overwriteVersionId(e){this._versionId=e}_overwriteAlternativeVersionId(e){this._alternativeVersionId=e}_overwriteInitialUndoRedoSnapshot(e){this._initialUndoRedoSnapshot=e}getValue(e,t=!1){this._assertNotDisposed();const n=this.getFullModelRange(),i=this.getValueInRange(n,e);return t?this._buffer.getBOM()+i:i}createSnapshot(e=!1){return new ft(this._buffer.createSnapshot(e))}getValueLength(e,t=!1){this._assertNotDisposed();const n=this.getFullModelRange(),i=this.getValueLengthInRange(n,e);return t?this._buffer.getBOM().length+i:i}getValueInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getValueInRange(this.validateRange(e),t)}getValueLengthInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getValueLengthInRange(this.validateRange(e),t)}getCharacterCountInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getCharacterCountInRange(this.validateRange(e),t)}getLineCount(){return this._assertNotDisposed(),this._buffer.getLineCount()}getLineContent(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineContent(e)}getLineLength(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineLength(e)}getLinesContent(){return this._assertNotDisposed(),this._buffer.getLinesContent()}getEOL(){return this._assertNotDisposed(),this._buffer.getEOL()}getEndOfLineSequence(){return this._assertNotDisposed(),"\n"===this._buffer.getEOL()?0:1}getLineMinColumn(e){return this._assertNotDisposed(),1}getLineMaxColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineLength(e)+1}getLineFirstNonWhitespaceColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineFirstNonWhitespaceColumn(e)}getLineLastNonWhitespaceColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineLastNonWhitespaceColumn(e)}_validateRangeRelaxedNoAllocations(e){const t=this._buffer.getLineCount(),n=e.startLineNumber,i=e.startColumn;let s=Math.floor("number"!==typeof n||isNaN(n)?1:n),r=Math.floor("number"!==typeof i||isNaN(i)?1:i);if(s<1)s=1,r=1;else if(s>t)s=t,r=this.getLineMaxColumn(s);else if(r<=1)r=1;else{const e=this.getLineMaxColumn(s);r>=e&&(r=e)}const o=e.endLineNumber,a=e.endColumn;let l=Math.floor("number"!==typeof o||isNaN(o)?1:o),h=Math.floor("number"!==typeof a||isNaN(a)?1:a);if(l<1)l=1,h=1;else if(l>t)l=t,h=this.getLineMaxColumn(l);else if(h<=1)h=1;else{const e=this.getLineMaxColumn(l);h>=e&&(h=e)}return n===s&&i===r&&o===l&&a===h&&e instanceof u["a"]&&!(e instanceof c["a"])?e:new u["a"](s,r,l,h)}_isValidPosition(e,t,n){if("number"!==typeof e||"number"!==typeof t)return!1;if(isNaN(e)||isNaN(t))return!1;if(e<1||t<1)return!1;if((0|e)!==e||(0|t)!==t)return!1;const i=this._buffer.getLineCount();if(e>i)return!1;if(1===t)return!0;const s=this.getLineMaxColumn(e);if(t>s)return!1;if(1===n){const n=this._buffer.getLineCharCode(e,t-2);if(o["E"](n))return!1}return!0}_validatePosition(e,t,n){const i=Math.floor("number"!==typeof e||isNaN(e)?1:e),s=Math.floor("number"!==typeof t||isNaN(t)?1:t),r=this._buffer.getLineCount();if(i<1)return new h["a"](1,1);if(i>r)return new h["a"](r,this.getLineMaxColumn(r));if(s<=1)return new h["a"](i,1);const a=this.getLineMaxColumn(i);if(s>=a)return new h["a"](i,a);if(1===n){const e=this._buffer.getLineCharCode(i,s-2);if(o["E"](e))return new h["a"](i,s-1)}return new h["a"](i,s)}validatePosition(e){const t=1;return this._assertNotDisposed(),e instanceof h["a"]&&this._isValidPosition(e.lineNumber,e.column,t)?e:this._validatePosition(e.lineNumber,e.column,t)}_isValidRange(e,t){const n=e.startLineNumber,i=e.startColumn,s=e.endLineNumber,r=e.endColumn;if(!this._isValidPosition(n,i,0))return!1;if(!this._isValidPosition(s,r,0))return!1;if(1===t){const e=i>1?this._buffer.getLineCharCode(n,i-2):0,t=r>1&&r<=this._buffer.getLineLength(s)?this._buffer.getLineCharCode(s,r-2):0,a=o["E"](e),l=o["E"](t);return!a&&!l}return!0}validateRange(e){const t=1;if(this._assertNotDisposed(),e instanceof u["a"]&&!(e instanceof c["a"])&&this._isValidRange(e,t))return e;const n=this._validatePosition(e.startLineNumber,e.startColumn,0),i=this._validatePosition(e.endLineNumber,e.endColumn,0),s=n.lineNumber,r=n.column,a=i.lineNumber,l=i.column;if(1===t){const e=r>1?this._buffer.getLineCharCode(s,r-2):0,t=l>1&&l<=this._buffer.getLineLength(a)?this._buffer.getLineCharCode(a,l-2):0,n=o["E"](e),i=o["E"](t);return n||i?s===a&&r===l?new u["a"](s,r-1,a,l-1):n&&i?new u["a"](s,r-1,a,l+1):n?new u["a"](s,r-1,a,l):new u["a"](s,r,a,l+1):new u["a"](s,r,a,l)}return new u["a"](s,r,a,l)}modifyPosition(e,t){this._assertNotDisposed();let n=this.getOffsetAt(e)+t;return this.getPositionAt(Math.min(this._buffer.getLength(),Math.max(0,n)))}getFullModelRange(){this._assertNotDisposed();const e=this.getLineCount();return new u["a"](1,1,e,this.getLineMaxColumn(e))}findMatchesLineByLine(e,t,n,i){return this._buffer.findMatchesLineByLine(e,t,n,i)}findMatches(e,t,n,i,s,r,o=ut){this._assertNotDisposed();let a=null;null!==t&&(Array.isArray(t)||(t=[t]),t.every(e=>u["a"].isIRange(e))&&(a=t.map(e=>this.validateRange(e)))),null===a&&(a=[this.getFullModelRange()]),a=a.sort((e,t)=>e.startLineNumber-t.startLineNumber||e.startColumn-t.startColumn);const l=[];let h;if(l.push(a.reduce((e,t)=>u["a"].areIntersecting(e,t)?e.plusRange(t):(l.push(e),t))),!n&&e.indexOf("\n")<0){const t=new de(e,n,i,s),a=t.parseSearchRequest();if(!a)return[];h=e=>this.findMatchesLineByLine(e,a,r,o)}else h=t=>Le.findMatches(this,new de(e,n,i,s),t,r,o);return l.map(h).reduce((e,t)=>e.concat(t),[])}findNextMatch(e,t,n,i,s,r){this._assertNotDisposed();const o=this.validatePosition(t);if(!n&&e.indexOf("\n")<0){const t=new de(e,n,i,s),a=t.parseSearchRequest();if(!a)return null;const l=this.getLineCount();let h=new u["a"](o.lineNumber,o.column,l,this.getLineMaxColumn(l)),c=this.findMatchesLineByLine(h,a,r,1);return Le.findNextMatch(this,new de(e,n,i,s),o,r),c.length>0?c[0]:(h=new u["a"](1,1,o.lineNumber,this.getLineMaxColumn(o.lineNumber)),c=this.findMatchesLineByLine(h,a,r,1),c.length>0?c[0]:null)}return Le.findNextMatch(this,new de(e,n,i,s),o,r)}findPreviousMatch(e,t,n,i,s,r){this._assertNotDisposed();const o=this.validatePosition(t);return Le.findPreviousMatch(this,new de(e,n,i,s),o,r)}pushStackElement(){this._commandManager.pushStackElement()}popStackElement(){this._commandManager.popStackElement()}pushEOL(e){const t="\n"===this.getEOL()?0:1;if(t!==e)try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),null===this._initialUndoRedoSnapshot&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEOL(e)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_validateEditOperation(e){return e instanceof f["f"]?e:new f["f"](e.identifier||null,this.validateRange(e.range),e.text,e.forceMoveMarkers||!1,e.isAutoWhitespaceEdit||!1,e._isTracked||!1)}_validateEditOperations(e){const t=[];for(let n=0,i=e.length;n<i;n++)t[n]=this._validateEditOperation(e[n]);return t}pushEditOperations(e,t,n){try{return this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._pushEditOperations(e,this._validateEditOperations(t),n)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_pushEditOperations(e,t,n){if(this._options.trimAutoWhitespace&&this._trimAutoWhitespaceLines){let n=t.map(e=>({range:this.validateRange(e.range),text:e.text})),i=!0;if(e)for(let t=0,s=e.length;t<s;t++){let s=e[t],r=!1;for(let e=0,t=n.length;e<t;e++){let t=n[e].range,i=t.startLineNumber>s.endLineNumber,o=s.startLineNumber>t.endLineNumber;if(!i&&!o){r=!0;break}}if(!r){i=!1;break}}if(i)for(let e=0,s=this._trimAutoWhitespaceLines.length;e<s;e++){let i=this._trimAutoWhitespaceLines[e],s=this.getLineMaxColumn(i),r=!0;for(let e=0,t=n.length;e<t;e++){let t=n[e].range,o=n[e].text;if(!(i<t.startLineNumber||i>t.endLineNumber)&&(!(i===t.startLineNumber&&t.startColumn===s&&t.isEmpty()&&o&&o.length>0&&"\n"===o.charAt(0))&&!(i===t.startLineNumber&&1===t.startColumn&&t.isEmpty()&&o&&o.length>0&&"\n"===o.charAt(o.length-1)))){r=!1;break}}if(r){const e=new u["a"](i,1,i,s);t.push(new f["f"](null,e,null,!1,!1,!1))}}this._trimAutoWhitespaceLines=null}return null===this._initialUndoRedoSnapshot&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEditOperation(e,t,n)}_applyUndo(e,t,n,i){const s=e.map(e=>{const t=this.getPositionAt(e.newPosition),n=this.getPositionAt(e.newEnd);return{range:new u["a"](t.lineNumber,t.column,n.lineNumber,n.column),text:e.oldText}});this._applyUndoRedoEdits(s,t,!0,!1,n,i)}_applyRedo(e,t,n,i){const s=e.map(e=>{const t=this.getPositionAt(e.oldPosition),n=this.getPositionAt(e.oldEnd);return{range:new u["a"](t.lineNumber,t.column,n.lineNumber,n.column),text:e.newText}});this._applyUndoRedoEdits(s,t,!1,!0,n,i)}_applyUndoRedoEdits(e,t,n,i,s,r){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._isUndoing=n,this._isRedoing=i,this.applyEdits(e,!1),this.setEOL(t),this._overwriteAlternativeVersionId(s)}finally{this._isUndoing=!1,this._isRedoing=!1,this._eventEmitter.endDeferredEmit(r),this._onDidChangeDecorations.endDeferredEmit()}}applyEdits(e,t=!1){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit();const n=this._validateEditOperations(e);return this._doApplyEdits(n,t)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_doApplyEdits(e,t){const n=this._buffer.getLineCount(),i=this._buffer.applyEdits(e,this._options.trimAutoWhitespace,t),s=this._buffer.getLineCount(),r=i.changes;if(this._trimAutoWhitespaceLines=i.trimAutoWhitespaceLineNumbers,0!==r.length){let e=[],t=n;for(let n=0,i=r.length;n<i;n++){const i=r[n],[o,a,l]=Object(Re["f"])(i.text);this._tokens.acceptEdit(i.range,o,a),this._tokens2.acceptEdit(i.range,o,a,l,i.text.length>0?i.text.charCodeAt(0):0),this._onDidChangeDecorations.fire(),this._decorationsTree.acceptReplace(i.rangeOffset,i.rangeLength,i.text.length,i.forceMoveMarkers);const h=i.range.startLineNumber,u=i.range.endLineNumber,c=u-h,f=o,d=Math.min(c,f),g=f-c;for(let n=d;n>=0;n--){const i=h+n,r=s-t-g+i;e.push(new Pe(i,this.getLineContent(r)))}if(d<c){const t=h+d;e.push(new Ve(t+1,u))}if(d<f){const n=h+d,i=f-d,r=s-t-i+n+1;let o=[];for(let e=0;e<i;e++){let t=r+e;o[t-r]=this.getLineContent(t)}e.push(new We(n+1,h+f,o))}t+=g}this._increaseVersionId(),this._emitContentChangedEvent(new je(e,this.getVersionId(),this._isUndoing,this._isRedoing),{changes:r,eol:this._buffer.getEOL(),versionId:this.getVersionId(),isUndoing:this._isUndoing,isRedoing:this._isRedoing,isFlush:!1})}return null===i.reverseEdits?void 0:i.reverseEdits}undo(){return this._undoRedoService.undo(this.uri)}canUndo(){return this._undoRedoService.canUndo(this.uri)}redo(){return this._undoRedoService.redo(this.uri)}canRedo(){return this._undoRedoService.canRedo(this.uri)}changeDecorations(e,t=0){this._assertNotDisposed();try{return this._onDidChangeDecorations.beginDeferredEmit(),this._changeDecorations(t,e)}finally{this._onDidChangeDecorations.endDeferredEmit()}}_changeDecorations(e,t){let n={addDecoration:(t,n)=>this._deltaDecorationsImpl(e,[],[{range:t,options:n}])[0],changeDecoration:(e,t)=>{this._changeDecorationImpl(e,t)},changeDecorationOptions:(e,t)=>{this._changeDecorationOptionsImpl(e,kt(t))},removeDecoration:t=>{this._deltaDecorationsImpl(e,[t],[])},deltaDecorations:(t,n)=>0===t.length&&0===n.length?[]:this._deltaDecorationsImpl(e,t,n)},s=null;try{s=t(n)}catch(r){Object(i["e"])(r)}return n.addDecoration=dt,n.changeDecoration=dt,n.changeDecorationOptions=dt,n.removeDecoration=dt,n.deltaDecorations=dt,s}deltaDecorations(e,t,n=0){if(this._assertNotDisposed(),e||(e=[]),0===e.length&&0===t.length)return[];try{return this._onDidChangeDecorations.beginDeferredEmit(),this._deltaDecorationsImpl(n,e,t)}finally{this._onDidChangeDecorations.endDeferredEmit()}}_getTrackedRange(e){return this.getDecorationRange(e)}_setTrackedRange(e,t,n){const i=e?this._decorations[e]:null;if(!i)return t?this._deltaDecorationsImpl(0,[],[{range:t,options:St[n]}])[0]:null;if(!t)return this._decorationsTree.delete(i),delete this._decorations[i.id],null;const s=this._validateRangeRelaxedNoAllocations(t),r=this._buffer.getOffsetAt(s.startLineNumber,s.startColumn),o=this._buffer.getOffsetAt(s.endLineNumber,s.endColumn);return this._decorationsTree.delete(i),i.reset(this.getVersionId(),r,o,s),i.setOptions(St[n]),this._decorationsTree.insert(i),i.id}removeAllDecorationsWithOwnerId(e){if(this._isDisposed)return;const t=this._decorationsTree.collectNodesFromOwner(e);for(let n=0,i=t.length;n<i;n++){const e=t[n];this._decorationsTree.delete(e),delete this._decorations[e.id]}}getDecorationOptions(e){const t=this._decorations[e];return t?t.options:null}getDecorationRange(e){const t=this._decorations[e];if(!t)return null;const n=this.getVersionId();return t.cachedVersionId!==n&&this._decorationsTree.resolveNode(t,n),null===t.range&&(t.range=this._getRangeAt(t.cachedAbsoluteStart,t.cachedAbsoluteEnd)),t.range}getLineDecorations(e,t=0,n=!1){return e<1||e>this.getLineCount()?[]:this.getLinesDecorations(e,e,t,n)}getLinesDecorations(e,t,n=0,i=!1){let s=this.getLineCount(),r=Math.min(s,Math.max(1,e)),o=Math.min(s,Math.max(1,t)),a=this.getLineMaxColumn(o);return this._getDecorationsInRange(new u["a"](r,1,o,a),n,i)}getDecorationsInRange(e,t=0,n=!1){let i=this.validateRange(e);return this._getDecorationsInRange(i,t,n)}getOverviewRulerDecorations(e=0,t=!1){const n=this.getVersionId(),i=this._decorationsTree.search(e,t,!0,n);return this._ensureNodesHaveRanges(i)}getAllDecorations(e=0,t=!1){const n=this.getVersionId(),i=this._decorationsTree.search(e,t,!1,n);return this._ensureNodesHaveRanges(i)}_getDecorationsInRange(e,t,n){const i=this._buffer.getOffsetAt(e.startLineNumber,e.startColumn),s=this._buffer.getOffsetAt(e.endLineNumber,e.endColumn),r=this.getVersionId(),o=this._decorationsTree.intervalSearch(i,s,t,n,r);return this._ensureNodesHaveRanges(o)}_ensureNodesHaveRanges(e){for(let t=0,n=e.length;t<n;t++){const n=e[t];null===n.range&&(n.range=this._getRangeAt(n.cachedAbsoluteStart,n.cachedAbsoluteEnd))}return e}_getRangeAt(e,t){return this._buffer.getRangeAt(e,t-e)}_changeDecorationImpl(e,t){const n=this._decorations[e];if(!n)return;const i=this._validateRangeRelaxedNoAllocations(t),s=this._buffer.getOffsetAt(i.startLineNumber,i.startColumn),r=this._buffer.getOffsetAt(i.endLineNumber,i.endColumn);this._decorationsTree.delete(n),n.reset(this.getVersionId(),s,r,i),this._decorationsTree.insert(n),this._onDidChangeDecorations.checkAffectedAndFire(n.options)}_changeDecorationOptionsImpl(e,t){const n=this._decorations[e];if(!n)return;const i=!(!n.options.overviewRuler||!n.options.overviewRuler.color),s=!(!t.overviewRuler||!t.overviewRuler.color);this._onDidChangeDecorations.checkAffectedAndFire(n.options),this._onDidChangeDecorations.checkAffectedAndFire(t),i!==s?(this._decorationsTree.delete(n),n.setOptions(t),this._decorationsTree.insert(n)):n.setOptions(t)}_deltaDecorationsImpl(e,t,n){const i=this.getVersionId(),s=t.length;let r=0;const o=n.length;let a=0,l=new Array(o);while(r<s||a<o){let h=null;if(r<s){do{h=this._decorations[t[r++]]}while(!h&&r<s);h&&(this._decorationsTree.delete(h),this._onDidChangeDecorations.checkAffectedAndFire(h.options))}if(a<o){if(!h){const e=++this._lastDecorationId,t=`${this._instanceId};${e}`;h=new T(t,0,0),this._decorations[t]=h}const t=n[a],s=this._validateRangeRelaxedNoAllocations(t.range),r=kt(t.options),o=this._buffer.getOffsetAt(s.startLineNumber,s.startColumn),u=this._buffer.getOffsetAt(s.endLineNumber,s.endColumn);h.ownerId=e,h.reset(i,o,u,s),h.setOptions(r),this._onDidChangeDecorations.checkAffectedAndFire(r),this._decorationsTree.insert(h),l[a]=h.id,a++}else h&&delete this._decorations[h.id]}return l}setTokens(e){if(0===e.length)return;let t=[];for(let n=0,i=e.length;n<i;n++){const i=e[n];let s=0,r=0,o=!1;for(let e=0,t=i.tokens.length;e<t;e++){const t=i.startLineNumber+e;if(o)this._tokens.setTokens(this._languageIdentifier.id,t-1,this._buffer.getLineLength(t),i.tokens[e],!1),r=t;else{const n=this._tokens.setTokens(this._languageIdentifier.id,t-1,this._buffer.getLineLength(t),i.tokens[e],!0);n&&(o=!0,s=t,r=t)}}o&&t.push({fromLineNumber:s,toLineNumber:r})}t.length>0&&this._emitModelTokensChangedEvent({tokenizationSupportChanged:!1,semanticTokensApplied:!1,ranges:t})}setSemanticTokens(e,t){this._tokens2.set(e,t),this._emitModelTokensChangedEvent({tokenizationSupportChanged:!1,semanticTokensApplied:null!==e,ranges:[{fromLineNumber:1,toLineNumber:this.getLineCount()}]})}hasCompleteSemanticTokens(){return this._tokens2.isComplete()}hasSomeSemanticTokens(){return!this._tokens2.isEmpty()}setPartialSemanticTokens(e,t){if(this.hasCompleteSemanticTokens())return;const n=this._tokens2.setPartial(e,t);this._emitModelTokensChangedEvent({tokenizationSupportChanged:!1,semanticTokensApplied:!0,ranges:[{fromLineNumber:n.startLineNumber,toLineNumber:n.endLineNumber}]})}tokenizeViewport(e,t){e=Math.max(1,e),t=Math.min(this._buffer.getLineCount(),t),this._tokenization.tokenizeViewport(e,t)}clearTokens(){this._tokens.flush(),this._emitModelTokensChangedEvent({tokenizationSupportChanged:!0,semanticTokensApplied:!1,ranges:[{fromLineNumber:1,toLineNumber:this._buffer.getLineCount()}]})}_emitModelTokensChangedEvent(e){this._isDisposing||this._onDidChangeTokens.fire(e)}resetTokenization(){this._tokenization.reset()}forceTokenization(e){if(e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");this._tokenization.forceTokenization(e)}isCheapToTokenize(e){return this._tokenization.isCheapToTokenize(e)}tokenizeIfCheap(e){this.isCheapToTokenize(e)&&this.forceTokenization(e)}getLineTokens(e){if(e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._getLineTokens(e)}_getLineTokens(e){const t=this.getLineContent(e),n=this._tokens.getTokens(this._languageIdentifier.id,e-1,t);return this._tokens2.addSemanticTokens(e,n)}getLanguageIdentifier(){return this._languageIdentifier}getModeId(){return this._languageIdentifier.language}setMode(e){if(this._languageIdentifier.id===e.id)return;let t={oldLanguage:this._languageIdentifier.language,newLanguage:e.language};this._languageIdentifier=e,this._onDidChangeLanguage.fire(t),this._onDidChangeLanguageConfiguration.fire({})}getLanguageIdAtPosition(e,t){const n=this.validatePosition(new h["a"](e,t)),i=this.getLineTokens(n.lineNumber);return i.getLanguageId(i.findTokenIndexAtOffset(n.column-1))}getWordAtPosition(e){this._assertNotDisposed();const t=this.validatePosition(e),n=this.getLineContent(t.lineNumber),i=this._getLineTokens(t.lineNumber),s=i.findTokenIndexAtOffset(t.column-1),[r,o]=pt._findLanguageBoundaries(i,s),a=Object(tt["d"])(t.column,nt["a"].getWordDefinition(i.getLanguageId(s)),n.substring(r,o),r);if(a&&a.startColumn<=e.column&&e.column<=a.endColumn)return a;if(s>0&&r===t.column-1){const[r,o]=pt._findLanguageBoundaries(i,s-1),a=Object(tt["d"])(t.column,nt["a"].getWordDefinition(i.getLanguageId(s-1)),n.substring(r,o),r);if(a&&a.startColumn<=e.column&&e.column<=a.endColumn)return a}return null}static _findLanguageBoundaries(e,t){const n=e.getLanguageId(t);let i=0;for(let r=t;r>=0&&e.getLanguageId(r)===n;r--)i=e.getStartOffset(r);let s=e.getLineContent().length;for(let r=t,o=e.getCount();r<o&&e.getLanguageId(r)===n;r++)s=e.getEndOffset(r);return[i,s]}getWordUntilPosition(e){const t=this.getWordAtPosition(e);return t?{word:t.word.substr(0,e.column-t.startColumn),startColumn:t.startColumn,endColumn:e.column}:{word:"",startColumn:e.column,endColumn:e.column}}findMatchingBracketUp(e,t){let n=e.toLowerCase(),i=this.validatePosition(t),s=this._getLineTokens(i.lineNumber),r=s.getLanguageId(s.findTokenIndexAtOffset(i.column-1)),o=nt["a"].getBracketsSupport(r);if(!o)return null;let a=o.textIsBracket[n];return a?_t(this._findMatchingBracketUp(a,i,null)):null}matchBracket(e){return this._matchBracket(this.validatePosition(e))}_establishBracketSearchOffsets(e,t,n,i){const s=t.getCount(),r=t.getLanguageId(i);let o=Math.max(0,e.column-1-n.maxBracketLength);for(let l=i-1;l>=0;l--){const e=t.getEndOffset(l);if(e<=o)break;if(Object(it["b"])(t.getStandardTokenType(l))||t.getLanguageId(l)!==r){o=e;break}}let a=Math.min(t.getLineContent().length,e.column-1+n.maxBracketLength);for(let l=i+1;l<s;l++){const e=t.getStartOffset(l);if(e>=a)break;if(Object(it["b"])(t.getStandardTokenType(l))||t.getLanguageId(l)!==r){a=e;break}}return{searchStartOffset:o,searchEndOffset:a}}_matchBracket(e){const t=e.lineNumber,n=this._getLineTokens(t),i=this._buffer.getLineContent(t),s=n.findTokenIndexAtOffset(e.column-1);if(s<0)return null;const r=nt["a"].getBracketsSupport(n.getLanguageId(s));if(r&&!Object(it["b"])(n.getStandardTokenType(s))){let{searchStartOffset:o,searchEndOffset:a}=this._establishBracketSearchOffsets(e,n,r,s),l=null;while(1){const n=st["a"].findNextBracketInRange(r.forwardRegex,t,i,o,a);if(!n)break;if(n.startColumn<=e.column&&e.column<=n.endColumn){const e=i.substring(n.startColumn-1,n.endColumn-1).toLowerCase(),t=this._matchFoundBracket(n,r.textIsBracket[e],r.textIsOpenBracket[e],null);if(t){if(t instanceof gt)return null;l=t}}o=n.endColumn-1}if(l)return l}if(s>0&&n.getStartOffset(s)===e.column-1){const r=s-1,o=nt["a"].getBracketsSupport(n.getLanguageId(r));if(o&&!Object(it["b"])(n.getStandardTokenType(r))){let{searchStartOffset:s,searchEndOffset:a}=this._establishBracketSearchOffsets(e,n,o,r);const l=st["a"].findPrevBracketInRange(o.reversedRegex,t,i,s,a);if(l&&l.startColumn<=e.column&&e.column<=l.endColumn){const e=i.substring(l.startColumn-1,l.endColumn-1).toLowerCase(),t=this._matchFoundBracket(l,o.textIsBracket[e],o.textIsOpenBracket[e],null);if(t)return t instanceof gt?null:t}}}return null}_matchFoundBracket(e,t,n,i){if(!t)return null;const s=n?this._findMatchingBracketDown(t,e.getEndPosition(),i):this._findMatchingBracketUp(t,e.getStartPosition(),i);return s?s instanceof gt?s:[e,s]:null}_findMatchingBracketUp(e,t,n){const i=e.languageIdentifier.id,s=e.reversedRegex;let r=-1,o=0;const a=(t,i,a,l)=>{while(1){if(n&&++o%100===0&&!n())return gt.INSTANCE;const h=st["a"].findPrevBracketInRange(s,t,i,a,l);if(!h)break;const u=i.substring(h.startColumn-1,h.endColumn-1).toLowerCase();if(e.isOpen(u)?r++:e.isClose(u)&&r--,0===r)return h;l=h.startColumn-1}return null};for(let l=t.lineNumber;l>=1;l--){const e=this._getLineTokens(l),n=e.getCount(),s=this._buffer.getLineContent(l);let r=n-1,o=s.length,h=s.length;l===t.lineNumber&&(r=e.findTokenIndexAtOffset(t.column-1),o=t.column-1,h=t.column-1);let u=!0;for(;r>=0;r--){const t=e.getLanguageId(r)===i&&!Object(it["b"])(e.getStandardTokenType(r));if(t)u?o=e.getStartOffset(r):(o=e.getStartOffset(r),h=e.getEndOffset(r));else if(u&&o!==h){const e=a(l,s,o,h);if(e)return e}u=t}if(u&&o!==h){const e=a(l,s,o,h);if(e)return e}}return null}_findMatchingBracketDown(e,t,n){const i=e.languageIdentifier.id,s=e.forwardRegex;let r=1,o=0;const a=(t,i,a,l)=>{while(1){if(n&&++o%100===0&&!n())return gt.INSTANCE;const h=st["a"].findNextBracketInRange(s,t,i,a,l);if(!h)break;const u=i.substring(h.startColumn-1,h.endColumn-1).toLowerCase();if(e.isOpen(u)?r++:e.isClose(u)&&r--,0===r)return h;a=h.endColumn-1}return null},l=this.getLineCount();for(let h=t.lineNumber;h<=l;h++){const e=this._getLineTokens(h),n=e.getCount(),s=this._buffer.getLineContent(h);let r=0,o=0,l=0;h===t.lineNumber&&(r=e.findTokenIndexAtOffset(t.column-1),o=t.column-1,l=t.column-1);let u=!0;for(;r<n;r++){const t=e.getLanguageId(r)===i&&!Object(it["b"])(e.getStandardTokenType(r));if(t)u||(o=e.getStartOffset(r)),l=e.getEndOffset(r);else if(u&&o!==l){const e=a(h,s,o,l);if(e)return e}u=t}if(u&&o!==l){const e=a(h,s,o,l);if(e)return e}}return null}findPrevBracket(e){const t=this.validatePosition(e);let n=-1,i=null;for(let s=t.lineNumber;s>=1;s--){const e=this._getLineTokens(s),r=e.getCount(),o=this._buffer.getLineContent(s);let a=r-1,l=o.length,h=o.length;if(s===t.lineNumber){a=e.findTokenIndexAtOffset(t.column-1),l=t.column-1,h=t.column-1;const s=e.getLanguageId(a);n!==s&&(n=s,i=nt["a"].getBracketsSupport(n))}let u=!0;for(;a>=0;a--){const t=e.getLanguageId(a);if(n!==t){if(i&&u&&l!==h){const e=st["a"].findPrevBracketInRange(i.reversedRegex,s,o,l,h);if(e)return this._toFoundBracket(i,e);u=!1}n=t,i=nt["a"].getBracketsSupport(n)}const r=!!i&&!Object(it["b"])(e.getStandardTokenType(a));if(r)u?l=e.getStartOffset(a):(l=e.getStartOffset(a),h=e.getEndOffset(a));else if(i&&u&&l!==h){const e=st["a"].findPrevBracketInRange(i.reversedRegex,s,o,l,h);if(e)return this._toFoundBracket(i,e)}u=r}if(i&&u&&l!==h){const e=st["a"].findPrevBracketInRange(i.reversedRegex,s,o,l,h);if(e)return this._toFoundBracket(i,e)}}return null}findNextBracket(e){const t=this.validatePosition(e),n=this.getLineCount();let i=-1,s=null;for(let r=t.lineNumber;r<=n;r++){const e=this._getLineTokens(r),n=e.getCount(),o=this._buffer.getLineContent(r);let a=0,l=0,h=0;if(r===t.lineNumber){a=e.findTokenIndexAtOffset(t.column-1),l=t.column-1,h=t.column-1;const n=e.getLanguageId(a);i!==n&&(i=n,s=nt["a"].getBracketsSupport(i))}let u=!0;for(;a<n;a++){const t=e.getLanguageId(a);if(i!==t){if(s&&u&&l!==h){const e=st["a"].findNextBracketInRange(s.forwardRegex,r,o,l,h);if(e)return this._toFoundBracket(s,e);u=!1}i=t,s=nt["a"].getBracketsSupport(i)}const n=!!s&&!Object(it["b"])(e.getStandardTokenType(a));if(n)u||(l=e.getStartOffset(a)),h=e.getEndOffset(a);else if(s&&u&&l!==h){const e=st["a"].findNextBracketInRange(s.forwardRegex,r,o,l,h);if(e)return this._toFoundBracket(s,e)}u=n}if(s&&u&&l!==h){const e=st["a"].findNextBracketInRange(s.forwardRegex,r,o,l,h);if(e)return this._toFoundBracket(s,e)}}return null}findEnclosingBrackets(e,t){let n;if("undefined"===typeof t)n=null;else{const e=Date.now();n=()=>Date.now()-e<=t}const i=this.validatePosition(e),s=this.getLineCount(),r=new Map;let o=[];const a=(e,t)=>{if(!r.has(e)){let n=[];for(let e=0,i=t?t.brackets.length:0;e<i;e++)n[e]=0;r.set(e,n)}o=r.get(e)};let l=0;const h=(e,t,i,s,r)=>{while(1){if(n&&++l%100===0&&!n())return gt.INSTANCE;const a=st["a"].findNextBracketInRange(e.forwardRegex,t,i,s,r);if(!a)break;const h=i.substring(a.startColumn-1,a.endColumn-1).toLowerCase(),u=e.textIsBracket[h];if(u&&(u.isOpen(h)?o[u.index]++:u.isClose(h)&&o[u.index]--,-1===o[u.index]))return this._matchFoundBracket(a,u,!1,n);s=a.endColumn-1}return null};let u=-1,c=null;for(let f=i.lineNumber;f<=s;f++){const e=this._getLineTokens(f),t=e.getCount(),n=this._buffer.getLineContent(f);let s=0,r=0,o=0;if(f===i.lineNumber){s=e.findTokenIndexAtOffset(i.column-1),r=i.column-1,o=i.column-1;const t=e.getLanguageId(s);u!==t&&(u=t,c=nt["a"].getBracketsSupport(u),a(u,c))}let l=!0;for(;s<t;s++){const t=e.getLanguageId(s);if(u!==t){if(c&&l&&r!==o){const e=h(c,f,n,r,o);if(e)return _t(e);l=!1}u=t,c=nt["a"].getBracketsSupport(u),a(u,c)}const i=!!c&&!Object(it["b"])(e.getStandardTokenType(s));if(i)l||(r=e.getStartOffset(s)),o=e.getEndOffset(s);else if(c&&l&&r!==o){const e=h(c,f,n,r,o);if(e)return _t(e)}l=i}if(c&&l&&r!==o){const e=h(c,f,n,r,o);if(e)return _t(e)}}return null}_toFoundBracket(e,t){if(!t)return null;let n=this.getValueInRange(t);n=n.toLowerCase();let i=e.textIsBracket[n];return i?{range:t,open:i.open,close:i.close,isOpen:e.textIsOpenBracket[n]}:null}static computeIndentLevel(e,t){let n=0,i=0,s=e.length;while(i<s){let s=e.charCodeAt(i);if(32===s)n++;else{if(9!==s)break;n=n-n%t+t}i++}return i===s?-1:n}_computeIndentLevel(e){return pt.computeIndentLevel(this._buffer.getLineContent(e+1),this._options.tabSize)}getActiveIndentGuide(e,t,n){this._assertNotDisposed();const i=this.getLineCount();if(e<1||e>i)throw new Error("Illegal value for lineNumber");const s=nt["a"].getFoldingRules(this._languageIdentifier.id),r=Boolean(s&&s.offSide);let o=-2,a=-1,l=-2,h=-1;const u=e=>{if(-1!==o&&(-2===o||o>e-1)){o=-1,a=-1;for(let t=e-2;t>=0;t--){let e=this._computeIndentLevel(t);if(e>=0){o=t,a=e;break}}}if(-2===l){l=-1,h=-1;for(let t=e;t<i;t++){let e=this._computeIndentLevel(t);if(e>=0){l=t,h=e;break}}}};let c=-2,f=-1,d=-2,g=-1;const _=e=>{if(-2===c){c=-1,f=-1;for(let t=e-2;t>=0;t--){let e=this._computeIndentLevel(t);if(e>=0){c=t,f=e;break}}}if(-1!==d&&(-2===d||d<e-1)){d=-1,g=-1;for(let t=e;t<i;t++){let e=this._computeIndentLevel(t);if(e>=0){d=t,g=e;break}}}};let p=0,m=!0,L=0,b=!0,C=0,w=0;for(let I=0;m||b;I++){const s=e-I,o=e+I;I>1&&(s<1||s<t)&&(m=!1),I>1&&(o>i||o>n)&&(b=!1),I>5e4&&(m=!1,b=!1);let d=-1;if(m){const e=this._computeIndentLevel(s-1);e>=0?(l=s-1,h=e,d=Math.ceil(e/this._options.indentSize)):(u(s),d=this._getIndentLevelForWhitespaceLine(r,a,h))}let N=-1;if(b){const e=this._computeIndentLevel(o-1);e>=0?(c=o-1,f=e,N=Math.ceil(e/this._options.indentSize)):(_(o),N=this._getIndentLevelForWhitespaceLine(r,f,g))}if(0!==I){if(1===I){if(o<=i&&N>=0&&w+1===N){m=!1,p=o,L=o,C=N;continue}if(s>=1&&d>=0&&d-1===w){b=!1,p=s,L=s,C=d;continue}if(p=e,L=e,C=w,0===C)return{startLineNumber:p,endLineNumber:L,indent:C}}m&&(d>=C?p=s:m=!1),b&&(N>=C?L=o:b=!1)}else w=d}return{startLineNumber:p,endLineNumber:L,indent:C}}getLinesIndentGuides(e,t){this._assertNotDisposed();const n=this.getLineCount();if(e<1||e>n)throw new Error("Illegal value for startLineNumber");if(t<1||t>n)throw new Error("Illegal value for endLineNumber");const i=nt["a"].getFoldingRules(this._languageIdentifier.id),s=Boolean(i&&i.offSide);let r=new Array(t-e+1),o=-2,a=-1,l=-2,h=-1;for(let u=e;u<=t;u++){let t=u-e;const i=this._computeIndentLevel(u-1);if(i>=0)o=u-1,a=i,r[t]=Math.ceil(i/this._options.indentSize);else{if(-2===o){o=-1,a=-1;for(let e=u-2;e>=0;e--){let t=this._computeIndentLevel(e);if(t>=0){o=e,a=t;break}}}if(-1!==l&&(-2===l||l<u-1)){l=-1,h=-1;for(let e=u;e<n;e++){let t=this._computeIndentLevel(e);if(t>=0){l=e,h=t;break}}}r[t]=this._getIndentLevelForWhitespaceLine(s,a,h)}}return r}_getIndentLevelForWhitespaceLine(e,t,n){return-1===t||-1===n?0:t<n?1+Math.floor(t/this._options.indentSize):t===n||e?Math.ceil(n/this._options.indentSize):1+Math.floor(n/this._options.indentSize)}normalizePosition(e,t){return e}getLineIndentColumn(e){return mt(this.getLineContent(e))+1}}function mt(e){let t=0;for(const n of e){if(" "!==n&&"\t"!==n)break;t++}return t}pt.MODEL_SYNC_LIMIT=52428800,pt.LARGE_FILE_SIZE_THRESHOLD=20971520,pt.LARGE_FILE_LINE_COUNT_THRESHOLD=3e5,pt.DEFAULT_CREATION_OPTIONS={isForSimpleWidget:!1,tabSize:l["d"].tabSize,indentSize:l["d"].indentSize,insertSpaces:l["d"].insertSpaces,detectIndentation:!1,defaultEOL:1,trimAutoWhitespace:l["d"].trimAutoWhitespace,largeFileOptimizations:l["d"].largeFileOptimizations};class Lt{constructor(){this._decorationsTree0=new A,this._decorationsTree1=new A}intervalSearch(e,t,n,i,s){const r=this._decorationsTree0.intervalSearch(e,t,n,i,s),o=this._decorationsTree1.intervalSearch(e,t,n,i,s);return r.concat(o)}search(e,t,n,i){if(n)return this._decorationsTree1.search(e,t,i);{const n=this._decorationsTree0.search(e,t,i),s=this._decorationsTree1.search(e,t,i);return n.concat(s)}}collectNodesFromOwner(e){const t=this._decorationsTree0.collectNodesFromOwner(e),n=this._decorationsTree1.collectNodesFromOwner(e);return t.concat(n)}collectNodesPostOrder(){const e=this._decorationsTree0.collectNodesPostOrder(),t=this._decorationsTree1.collectNodesPostOrder();return e.concat(t)}insert(e){N(e)?this._decorationsTree1.insert(e):this._decorationsTree0.insert(e)}delete(e){N(e)?this._decorationsTree1.delete(e):this._decorationsTree0.delete(e)}resolveNode(e,t){N(e)?this._decorationsTree1.resolveNode(e,t):this._decorationsTree0.resolveNode(e,t)}acceptReplace(e,t,n,i){this._decorationsTree0.acceptReplace(e,t,n,i),this._decorationsTree1.acceptReplace(e,t,n,i)}}function bt(e){return e.replace(/[^a-z0-9\-_]/gi," ")}class Ct{constructor(e){this.color=e.color||"",this.darkColor=e.darkColor||""}}class wt extends Ct{constructor(e){super(e),this._resolvedColor=null,this.position="number"===typeof e.position?e.position:f["d"].Center}getColor(e){return this._resolvedColor||("light"!==e.type&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=null}_resolveColor(e,t){if("string"===typeof e)return e;let n=e?t.getColor(e.id):null;return n?n.toString():""}}class It extends Ct{constructor(e){super(e),this.position=e.position}getColor(e){return this._resolvedColor||("light"!==e.type&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=void 0}_resolveColor(e,t){return"string"===typeof e?rt["a"].fromHex(e):t.getColor(e.id)}}class Nt{constructor(e){this.description=e.description,this.stickiness=e.stickiness||0,this.zIndex=e.zIndex||0,this.className=e.className?bt(e.className):null,this.hoverMessage=e.hoverMessage||null,this.glyphMarginHoverMessage=e.glyphMarginHoverMessage||null,this.isWholeLine=e.isWholeLine||!1,this.showIfCollapsed=e.showIfCollapsed||!1,this.collapseOnReplaceEdit=e.collapseOnReplaceEdit||!1,this.overviewRuler=e.overviewRuler?new wt(e.overviewRuler):null,this.minimap=e.minimap?new It(e.minimap):null,this.glyphMarginClassName=e.glyphMarginClassName?bt(e.glyphMarginClassName):null,this.linesDecorationsClassName=e.linesDecorationsClassName?bt(e.linesDecorationsClassName):null,this.firstLineDecorationClassName=e.firstLineDecorationClassName?bt(e.firstLineDecorationClassName):null,this.marginClassName=e.marginClassName?bt(e.marginClassName):null,this.inlineClassName=e.inlineClassName?bt(e.inlineClassName):null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1,this.beforeContentClassName=e.beforeContentClassName?bt(e.beforeContentClassName):null,this.afterContentClassName=e.afterContentClassName?bt(e.afterContentClassName):null}static register(e){return new Nt(e)}static createDynamic(e){return new Nt(e)}}Nt.EMPTY=Nt.register({description:"empty"});const St=[Nt.register({description:"tracked-range-always-grows-when-typing-at-edges",stickiness:0}),Nt.register({description:"tracked-range-never-grows-when-typing-at-edges",stickiness:1}),Nt.register({description:"tracked-range-grows-only-when-typing-before",stickiness:2}),Nt.register({description:"tracked-range-grows-only-when-typing-after",stickiness:3})];function kt(e){return e instanceof Nt?e:Nt.createDynamic(e)}class xt extends r["a"]{constructor(){super(),this._actual=this._register(new s["a"]),this.event=this._actual.event,this._deferredCnt=0,this._shouldFire=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(){if(this._deferredCnt--,0===this._deferredCnt&&this._shouldFire){const e={affectsMinimap:this._affectsMinimap,affectsOverviewRuler:this._affectsOverviewRuler};this._shouldFire=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1,this._actual.fire(e)}}checkAffectedAndFire(e){this._affectsMinimap||(this._affectsMinimap=!(!e.minimap||!e.minimap.position)),this._affectsOverviewRuler||(this._affectsOverviewRuler=!(!e.overviewRuler||!e.overviewRuler.color)),this._shouldFire=!0}fire(){this._affectsMinimap=!0,this._affectsOverviewRuler=!0,this._shouldFire=!0}}class vt extends r["a"]{constructor(){super(),this._fastEmitter=this._register(new s["a"]),this.fastEvent=this._fastEmitter.event,this._slowEmitter=this._register(new s["a"]),this.slowEvent=this._slowEmitter.event,this._deferredCnt=0,this._deferredEvent=null}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(e=null){if(this._deferredCnt--,0===this._deferredCnt&&null!==this._deferredEvent){this._deferredEvent.rawContentChangedEvent.resultingSelection=e;const t=this._deferredEvent;this._deferredEvent=null,this._fastEmitter.fire(t),this._slowEmitter.fire(t)}}fire(e){this._deferredCnt>0?this._deferredEvent?this._deferredEvent=this._deferredEvent.merge(e):this._deferredEvent=e:(this._fastEmitter.fire(e),this._slowEmitter.fire(e))}}},b707:function(e,t,n){"use strict";n.d(t,"s",(function(){return o})),n.d(t,"A",(function(){return a})),n.d(t,"m",(function(){return d})),n.d(t,"w",(function(){return g})),n.d(t,"x",(function(){return _})),n.d(t,"d",(function(){return p})),n.d(t,"r",(function(){return m})),n.d(t,"z",(function(){return L})),n.d(t,"o",(function(){return b})),n.d(t,"l",(function(){return C})),n.d(t,"h",(function(){return w})),n.d(t,"u",(function(){return I})),n.d(t,"f",(function(){return N})),n.d(t,"e",(function(){return S})),n.d(t,"p",(function(){return k})),n.d(t,"C",(function(){return x})),n.d(t,"b",(function(){return v})),n.d(t,"q",(function(){return E})),n.d(t,"a",(function(){return T})),n.d(t,"g",(function(){return O})),n.d(t,"i",(function(){return A})),n.d(t,"v",(function(){return M})),n.d(t,"t",(function(){return R})),n.d(t,"c",(function(){return D})),n.d(t,"y",(function(){return z})),n.d(t,"n",(function(){return y})),n.d(t,"k",(function(){return B})),n.d(t,"j",(function(){return F})),n.d(t,"B",(function(){return P}));n("6d8e"),n("6a89");var i=n("6a5d"),s=n("72b4"),r=n("561a");class o{constructor(e,t){this.language=e,this.id=t}}class a{static getLanguageId(e){return(255&e)>>>0}static getTokenType(e){return(1792&e)>>>8}static getFontStyle(e){return(14336&e)>>>11}static getForeground(e){return(8372224&e)>>>14}static getBackground(e){return(4286578688&e)>>>23}static getClassNameFromMetadata(e){let t=this.getForeground(e),n="mtk"+t,i=this.getFontStyle(e);return 1&i&&(n+=" mtki"),2&i&&(n+=" mtkb"),4&i&&(n+=" mtku"),n}static getInlineStyleFromMetadata(e,t){const n=this.getForeground(e),i=this.getFontStyle(e);let s=`color: ${t[n]};`;return 1&i&&(s+="font-style: italic;"),2&i&&(s+="font-weight: bold;"),4&i&&(s+="text-decoration: underline;"),s}}(function(){let e=Object.create(null);e[0]="symbol-method",e[1]="symbol-function",e[2]="symbol-constructor",e[3]="symbol-field",e[4]="symbol-variable",e[5]="symbol-class",e[6]="symbol-struct",e[7]="symbol-interface",e[8]="symbol-module",e[9]="symbol-property",e[10]="symbol-event",e[11]="symbol-operator",e[12]="symbol-unit",e[13]="symbol-value",e[14]="symbol-constant",e[15]="symbol-enum",e[16]="symbol-enum-member",e[17]="symbol-keyword",e[27]="symbol-snippet",e[18]="symbol-text",e[19]="symbol-color",e[20]="symbol-file",e[21]="symbol-reference",e[22]="symbol-customcolor",e[23]="symbol-folder",e[24]="symbol-type-parameter",e[25]="account",e[26]="issues"})();(function(){let e=Object.create(null);e["method"]=0,e["function"]=1,e["constructor"]=2,e["field"]=3,e["variable"]=4,e["class"]=5,e["struct"]=6,e["interface"]=7,e["module"]=8,e["property"]=9,e["event"]=10,e["operator"]=11,e["unit"]=12,e["value"]=13,e["constant"]=14,e["enum"]=15,e["enum-member"]=16,e["enumMember"]=16,e["keyword"]=17,e["snippet"]=27,e["text"]=18,e["color"]=19,e["file"]=20,e["reference"]=21,e["customcolor"]=22,e["folder"]=23,e["type-parameter"]=24,e["typeParameter"]=24,e["account"]=25,e["issue"]=26})();var l,h,u,c,f;(function(e){e[e["Automatic"]=0]="Automatic",e[e["Explicit"]=1]="Explicit"})(l||(l={})),function(e){e[e["Invoke"]=1]="Invoke",e[e["TriggerCharacter"]=2]="TriggerCharacter",e[e["ContentChange"]=3]="ContentChange"}(h||(h={})),function(e){e[e["Text"]=0]="Text",e[e["Read"]=1]="Read",e[e["Write"]=2]="Write"}(u||(u={})),function(e){const t=new Map;t.set("file",0),t.set("module",1),t.set("namespace",2),t.set("package",3),t.set("class",4),t.set("method",5),t.set("property",6),t.set("field",7),t.set("constructor",8),t.set("enum",9),t.set("interface",10),t.set("function",11),t.set("variable",12),t.set("constant",13),t.set("string",14),t.set("number",15),t.set("boolean",16),t.set("array",17),t.set("object",18),t.set("key",19),t.set("null",20),t.set("enum-member",21),t.set("struct",22),t.set("event",23),t.set("operator",24),t.set("type-parameter",25);const n=new Map;function i(e){return t.get(e)}function s(e){return n.get(e)}function o(e,t){const i=n.get(e);let s=i&&r["d"].get("symbol-"+i);return s||(console.info("No codicon found for SymbolKind "+e),s=r["b"].symbolProperty),`${t?"inline":"block"} ${s.classNames}`}n.set(0,"file"),n.set(1,"module"),n.set(2,"namespace"),n.set(3,"package"),n.set(4,"class"),n.set(5,"method"),n.set(6,"property"),n.set(7,"field"),n.set(8,"constructor"),n.set(9,"enum"),n.set(10,"interface"),n.set(11,"function"),n.set(12,"variable"),n.set(13,"constant"),n.set(14,"string"),n.set(15,"number"),n.set(16,"boolean"),n.set(17,"array"),n.set(18,"object"),n.set(19,"key"),n.set(20,"null"),n.set(21,"enum-member"),n.set(22,"struct"),n.set(23,"event"),n.set(24,"operator"),n.set(25,"type-parameter"),e.fromString=i,e.toString=s,e.toCssClassName=o}(c||(c={}));class d{constructor(e){this.value=e}}d.Comment=new d("comment"),d.Imports=new d("imports"),d.Region=new d("region"),function(e){e[e["Other"]=0]="Other",e[e["Type"]=1]="Type",e[e["Parameter"]=2]="Parameter"}(f||(f={}));const g=new i["a"],_=new i["a"],p=new i["a"],m=new i["a"],L=new i["a"],b=new i["a"],C=new i["a"],w=new i["a"],I=new i["a"],N=new i["a"],S=new i["a"],k=new i["a"],x=new i["a"],v=new i["a"],E=new i["a"],T=new i["a"],O=new i["a"],A=new i["a"],M=new i["a"],R=new i["a"],D=new i["a"],z=new i["a"],y=new i["a"],B=new i["a"],F=new i["a"],P=new s["a"]},d093:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return l}));const i="`~!@#$%^&*()-=+[{]}\\|;:'\",.<>/?";function s(e=""){let t="(-?\\d*\\.\\d\\w*)|([^";for(const n of i)e.indexOf(n)>=0||(t+="\\"+n);return t+="\\s]+)",new RegExp(t,"g")}const r=s();function o(e){let t=r;if(e&&e instanceof RegExp)if(e.global)t=e;else{let n="g";e.ignoreCase&&(n+="i"),e.multiline&&(n+="m"),e.unicode&&(n+="u"),t=new RegExp(e.source,n)}return t.lastIndex=0,t}const a={maxLen:1e3,windowSize:15,timeBudget:150};function l(e,t,n,i,s=a){if(n.length>s.maxLen){let r=e-s.maxLen/2;return r<0?r=0:i+=r,n=n.substring(r,e+s.maxLen/2),l(e,t,n,i,s)}const r=Date.now(),o=e-1-i;let u=-1,c=null;for(let a=1;;a++){if(Date.now()-r>=s.timeBudget)break;const e=o-s.windowSize*a;t.lastIndex=Math.max(0,e);const i=h(t,n,o,u);if(!i&&c)break;if(c=i,e<=0)break;u=e}if(c){let e={word:c[0],startColumn:i+1+c.index,endColumn:i+1+c.index+c[0].length};return t.lastIndex=0,e}return null}function h(e,t,n,i){let s;while(s=e.exec(t)){const t=s.index||0;if(t<=n&&e.lastIndex>=n)return s;if(i>0&&t>i)return null}return null}},e679:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return a}));var i=n("1e93"),s=n("7ab3");function r(e){return e.replace(/\n/g,"\\n").replace(/\r/g,"\\r")}class o{constructor(e,t,n,i){this.oldPosition=e,this.oldText=t,this.newPosition=n,this.newText=i}get oldLength(){return this.oldText.length}get oldEnd(){return this.oldPosition+this.oldText.length}get newLength(){return this.newText.length}get newEnd(){return this.newPosition+this.newText.length}toString(){return 0===this.oldText.length?`(insert@${this.oldPosition} "${r(this.newText)}")`:0===this.newText.length?`(delete@${this.oldPosition} "${r(this.oldText)}")`:`(replace@${this.oldPosition} "${r(this.oldText)}" with "${r(this.newText)}")`}static _writeStringSize(e){return 4+2*e.length}static _writeString(e,t,n){const s=t.length;i["f"](e,s,n),n+=4;for(let r=0;r<s;r++)i["e"](e,t.charCodeAt(r),n),n+=2;return n}static _readString(e,t){const n=i["c"](e,t);return t+=4,Object(s["b"])(e,t,n)}writeSize(){return 8+o._writeStringSize(this.oldText)+o._writeStringSize(this.newText)}write(e,t){return i["f"](e,this.oldPosition,t),t+=4,i["f"](e,this.newPosition,t),t+=4,t=o._writeString(e,this.oldText,t),t=o._writeString(e,this.newText,t),t}static read(e,t,n){const s=i["c"](e,t);t+=4;const r=i["c"](e,t);t+=4;const a=o._readString(e,t);t+=o._writeStringSize(a);const l=o._readString(e,t);return t+=o._writeStringSize(l),n.push(new o(s,a,r,l)),t}}function a(e,t){if(null===e||0===e.length)return t;const n=new l(e,t);return n.compress()}class l{constructor(e,t){this._prevEdits=e,this._currEdits=t,this._result=[],this._resultLen=0,this._prevLen=this._prevEdits.length,this._prevDeltaOffset=0,this._currLen=this._currEdits.length,this._currDeltaOffset=0}compress(){let e=0,t=0,n=this._getPrev(e),i=this._getCurr(t);while(e<this._prevLen||t<this._currLen){if(null===n){this._acceptCurr(i),i=this._getCurr(++t);continue}if(null===i){this._acceptPrev(n),n=this._getPrev(++e);continue}if(i.oldEnd<=n.newPosition){this._acceptCurr(i),i=this._getCurr(++t);continue}if(n.newEnd<=i.oldPosition){this._acceptPrev(n),n=this._getPrev(++e);continue}if(i.oldPosition<n.newPosition){const[e,t]=l._splitCurr(i,n.newPosition-i.oldPosition);this._acceptCurr(e),i=t;continue}if(n.newPosition<i.oldPosition){const[e,t]=l._splitPrev(n,i.oldPosition-n.newPosition);this._acceptPrev(e),n=t;continue}let s,r;if(i.oldEnd===n.newEnd)s=n,r=i,n=this._getPrev(++e),i=this._getCurr(++t);else if(i.oldEnd<n.newEnd){const[e,o]=l._splitPrev(n,i.oldLength);s=e,r=i,n=o,i=this._getCurr(++t)}else{const[t,o]=l._splitCurr(i,n.newLength);s=n,r=t,n=this._getPrev(++e),i=o}this._result[this._resultLen++]=new o(s.oldPosition,s.oldText,r.newPosition,r.newText),this._prevDeltaOffset+=s.newLength-s.oldLength,this._currDeltaOffset+=r.newLength-r.oldLength}const s=l._merge(this._result),r=l._removeNoOps(s);return r}_acceptCurr(e){this._result[this._resultLen++]=l._rebaseCurr(this._prevDeltaOffset,e),this._currDeltaOffset+=e.newLength-e.oldLength}_getCurr(e){return e<this._currLen?this._currEdits[e]:null}_acceptPrev(e){this._result[this._resultLen++]=l._rebasePrev(this._currDeltaOffset,e),this._prevDeltaOffset+=e.newLength-e.oldLength}_getPrev(e){return e<this._prevLen?this._prevEdits[e]:null}static _rebaseCurr(e,t){return new o(t.oldPosition-e,t.oldText,t.newPosition,t.newText)}static _rebasePrev(e,t){return new o(t.oldPosition,t.oldText,t.newPosition+e,t.newText)}static _splitPrev(e,t){const n=e.newText.substr(0,t),i=e.newText.substr(t);return[new o(e.oldPosition,e.oldText,e.newPosition,n),new o(e.oldEnd,"",e.newPosition+t,i)]}static _splitCurr(e,t){const n=e.oldText.substr(0,t),i=e.oldText.substr(t);return[new o(e.oldPosition,n,e.newPosition,e.newText),new o(e.oldPosition+t,i,e.newEnd,"")]}static _merge(e){if(0===e.length)return e;let t=[],n=0,i=e[0];for(let s=1;s<e.length;s++){const r=e[s];i.oldEnd===r.oldPosition?i=new o(i.oldPosition,i.oldText+r.oldText,i.newPosition,i.newText+r.newText):(t[n++]=i,i=r)}return t[n++]=i,t}static _removeNoOps(e){if(0===e.length)return e;let t=[],n=0;for(let i=0;i<e.length;i++){const s=e[i];s.oldText!==s.newText&&(t[n++]=s)}return t}}}}]);